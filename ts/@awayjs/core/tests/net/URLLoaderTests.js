"use strict";
var URLLoader_1 = require("@awayjs/core/lib/net/URLLoader");
var URLLoaderDataFormat_1 = require("@awayjs/core/lib/net/URLLoaderDataFormat");
var URLRequest_1 = require("@awayjs/core/lib/net/URLRequest");
var URLRequestMethod_1 = require("@awayjs/core/lib/net/URLRequestMethod");
var URLVariables_1 = require("@awayjs/core/lib/net/URLVariables");
var URLLoaderEvent_1 = require("@awayjs/core/lib/events/URLLoaderEvent");
/**
 *
 */
var URLLoaderTests = (function () {
    function URLLoaderTests() {
        var _this = this;
        console.log('start');
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // POST URL Variables to PHP script
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        this.urlLoaderPostURLVars = new URLLoader_1.default();
        this.urlLoaderPostURLVars.dataFormat = URLLoaderDataFormat_1.default.VARIABLES;
        var urlStr = 'fname=karim&lname=' + Math.floor(Math.random() * 100);
        var urlVars = new URLVariables_1.default(urlStr);
        var req = new URLRequest_1.default('assets/saveData.php');
        req.method = URLRequestMethod_1.default.POST;
        req.data = urlVars;
        this.urlLoaderPostURLVars.addEventListener(URLLoaderEvent_1.default.LOAD_COMPLETE, function (event) { return _this.postURLTestComplete(event); });
        this.urlLoaderPostURLVars.addEventListener(URLLoaderEvent_1.default.LOAD_ERROR, function (event) { return _this.ioError(event); });
        this.urlLoaderPostURLVars.load(req);
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // GET CSV File
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        var csrReq = new URLRequest_1.default('assets/airports.csv');
        this.urlLoaderGetCSV = new URLLoader_1.default();
        this.urlLoaderGetCSV.dataFormat = URLLoaderDataFormat_1.default.TEXT;
        this.urlLoaderGetCSV.addEventListener(URLLoaderEvent_1.default.LOAD_COMPLETE, function (event) { return _this.getCsvComplete(event); });
        this.urlLoaderGetCSV.addEventListener(URLLoaderEvent_1.default.LOAD_START, function (event) { return _this.getCsvOpen(event); });
        this.urlLoaderGetCSV.addEventListener(URLLoaderEvent_1.default.LOAD_ERROR, function (event) { return _this.ioError(event); });
        this.urlLoaderGetCSV.load(csrReq);
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // ERROR test - load a non-existing object
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        var errorReq = new URLRequest_1.default('assets/generatingError');
        this.urlLoaderErrorTest = new URLLoader_1.default();
        this.urlLoaderErrorTest.dataFormat = URLLoaderDataFormat_1.default.TEXT;
        this.urlLoaderErrorTest.addEventListener(URLLoaderEvent_1.default.LOAD_COMPLETE, function (event) { return _this.errorComplete(event); });
        this.urlLoaderErrorTest.addEventListener(URLLoaderEvent_1.default.LOAD_ERROR, function (event) { return _this.ioError(event); });
        this.urlLoaderErrorTest.addEventListener(URLLoaderEvent_1.default.HTTP_STATUS, function (event) { return _this.httpStatusChange(event); });
        this.urlLoaderErrorTest.load(errorReq);
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // GET URL Vars - get URL variables
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        var csrReq = new URLRequest_1.default('assets/getUrlVars.php');
        this.urlLoaderGetURLVars = new URLLoader_1.default();
        this.urlLoaderGetURLVars.dataFormat = URLLoaderDataFormat_1.default.VARIABLES;
        this.urlLoaderGetURLVars.addEventListener(URLLoaderEvent_1.default.LOAD_ERROR, function (event) { return _this.ioError(event); });
        this.urlLoaderGetURLVars.addEventListener(URLLoaderEvent_1.default.LOAD_COMPLETE, function (event) { return _this.getURLVarsComplete(event); });
        this.urlLoaderGetURLVars.load(csrReq);
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // LOAD Binary file
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        var binReq = new URLRequest_1.default('assets/suzanne.awd');
        this.urlLoaderBinary = new URLLoader_1.default();
        this.urlLoaderBinary.dataFormat = URLLoaderDataFormat_1.default.BINARY;
        this.urlLoaderBinary.addEventListener(URLLoaderEvent_1.default.LOAD_ERROR, function (event) { return _this.ioError(event); });
        this.urlLoaderBinary.addEventListener(URLLoaderEvent_1.default.LOAD_COMPLETE, function (event) { return _this.binFileLoaded(event); });
        this.urlLoaderBinary.load(binReq);
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // LOAD Blob file
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        var blobReq = new URLRequest_1.default('assets/2.png');
        this.urlLoaderBlob = new URLLoader_1.default();
        this.urlLoaderBlob.dataFormat = URLLoaderDataFormat_1.default.BLOB;
        this.urlLoaderBlob.addEventListener(URLLoaderEvent_1.default.LOAD_COMPLETE, function (event) { return _this.blobFileLoaded(event); });
        this.urlLoaderBlob.load(blobReq);
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        // ARRAY_BUFFER Test
        //---------------------------------------------------------------------------------------------------------------------------------------------------------
        var arrBReq = new URLRequest_1.default('assets/1.jpg');
        this.urlLoaderArrb = new URLLoader_1.default();
        this.urlLoaderArrb.dataFormat = URLLoaderDataFormat_1.default.ARRAY_BUFFER;
        this.urlLoaderArrb.addEventListener(URLLoaderEvent_1.default.LOAD_COMPLETE, function (event) { return _this.arrayBufferLoaded(event); });
        this.urlLoaderArrb.load(arrBReq);
    }
    URLLoaderTests.prototype.arrayBufferLoaded = function (event) {
        var arrayBuffer = this.urlLoaderArrb.data;
        var byteArray = new Uint8Array(arrayBuffer);
        console.log('URLLoaderTests.arrayBufferLoaded', byteArray[1]);
        for (var i = 0; i < byteArray.byteLength; i++) {
        }
    };
    URLLoaderTests.prototype.blobFileLoaded = function (event) {
        var blob = new Blob([this.urlLoaderBlob.data], { type: 'image/png' });
        var img = document.createElement('img');
        img.src = this.createObjectURL(blob); //window['URL']['createObjectURL'](blob);
        img.onload = function (e) {
            window['URL']['revokeObjectURL'](img.src); // Clean up after yourself.
        };
        console.log('URLLoaderTests.blobFileLoaded', blob);
        document.body.appendChild(img);
    };
    URLLoaderTests.prototype.createObjectURL = function (fileBlob) {
        // For some reason TypeScript has "window.URL.createObjectURL" in it's dictionary -
        // but window.URL causes an error
        // cannot make my own .d.ts file either ( results in duplicate definition error )
        // This HACK gets it to work: window['URL']['createObjectURL']
        if (window['URL']) {
            if (window['URL']['createObjectURL']) {
                return window['URL']['createObjectURL'](fileBlob);
            }
        }
        else {
            if (window['webkitURL']) {
                return window['webkitURL']['createObjectURL'](fileBlob);
            }
        }
        return null;
    };
    URLLoaderTests.prototype.binFileLoaded = function (event) {
        var loader = event.target;
        console.log('URLLoaderTests.binFileLoaded', loader.data.length);
    };
    URLLoaderTests.prototype.getURLVarsComplete = function (event) {
        var loader = event.target;
        console.log('URLLoaderTests.getURLVarsComplete', loader.data);
    };
    URLLoaderTests.prototype.httpStatusChange = function (event) {
        console.log('URLLoaderTests.httpStatusChange', event.target.status);
    };
    URLLoaderTests.prototype.ioError = function (event) {
        var loader = event.target;
        console.log('URLLoaderTests.ioError', loader.url);
    };
    URLLoaderTests.prototype.errorComplete = function (event) {
        var loader = event.target;
        console.log('Loader.errorComplete'); //, loader.data );
    };
    URLLoaderTests.prototype.postURLTestComplete = function (event) {
        var loader = event.target;
        console.log('URLLoaderTests.postURLTestComplete', loader.data);
    };
    URLLoaderTests.prototype.getCsvComplete = function (event) {
        var loader = event.target;
        console.log('URLLoaderTests.getCsvComplete'); //, loader.data );
    };
    URLLoaderTests.prototype.getCsvOpen = function (event) {
        var loader = event.target;
        console.log('URLLoaderTests.getCsvStart');
    };
    return URLLoaderTests;
}());

//# sourceMappingURL=data:application/json;base64,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QUNwQyxPQUFPLENBQUMsR0FBRyxDQUFFLG9DQUFvQyxFQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUUsQ0FBQztJQUNuRSxDQUFDO0lBRU8sdUNBQWMsR0FBdEIsVUFBdUIsS0FBb0I7UUFFMUMsSUFBSSxNQUFNLEdBQWEsS0FBSyxDQUFDLE1BQU0sQ0FBQztRQUNwQyxPQUFPLENBQUMsR0FBRyxDQUFFLCtCQUErQixDQUFFLENBQUMsQ0FBQSxrQkFBa0I7SUFDbEUsQ0FBQztJQUVPLG1DQUFVLEdBQWxCLFVBQW1CLEtBQW9CO1FBRXRDLElBQUksTUFBTSxHQUFhLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFDcEMsT0FBTyxDQUFDLEdBQUcsQ0FBRSw0QkFBNEIsQ0FBRSxDQUFDO0lBQzdDLENBQUM7SUFDRixxQkFBQztBQUFELENBdE1BLEFBc01DLElBQUEiLCJmaWxlIjoibmV0L1VSTExvYWRlclRlc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVSTExvYWRlclx0XHRcdGZyb20gXCJhd2F5anMtY29yZS9saWIvbmV0L1VSTExvYWRlclwiO1xuaW1wb3J0IFVSTExvYWRlckRhdGFGb3JtYXRcdGZyb20gXCJhd2F5anMtY29yZS9saWIvbmV0L1VSTExvYWRlckRhdGFGb3JtYXRcIjtcbmltcG9ydCBVUkxSZXF1ZXN0XHRcdFx0ZnJvbSBcImF3YXlqcy1jb3JlL2xpYi9uZXQvVVJMUmVxdWVzdFwiO1xuaW1wb3J0IFVSTFJlcXVlc3RNZXRob2RcdFx0ZnJvbSBcImF3YXlqcy1jb3JlL2xpYi9uZXQvVVJMUmVxdWVzdE1ldGhvZFwiO1xuaW1wb3J0IFVSTFZhcmlhYmxlc1x0XHRcdGZyb20gXCJhd2F5anMtY29yZS9saWIvbmV0L1VSTFZhcmlhYmxlc1wiO1xuaW1wb3J0IFVSTExvYWRlckV2ZW50XHRcdGZyb20gXCJhd2F5anMtY29yZS9saWIvZXZlbnRzL1VSTExvYWRlckV2ZW50XCI7XG5cbi8qKlxuICogXG4gKi9cbmNsYXNzIFVSTExvYWRlclRlc3RzXG57XG5cblx0cHJpdmF0ZSB1cmxMb2FkZXJQb3N0VVJMVmFyczpVUkxMb2FkZXI7XG5cdHByaXZhdGUgdXJsTG9hZGVyR2V0Q1NWOlVSTExvYWRlcjtcblx0cHJpdmF0ZSB1cmxMb2FkZXJFcnJvclRlc3Q6VVJMTG9hZGVyO1xuXHRwcml2YXRlIHVybExvYWRlckdldFVSTFZhcnM6VVJMTG9hZGVyO1xuXHRwcml2YXRlIHVybExvYWRlckJpbmFyeTpVUkxMb2FkZXI7XG5cdHByaXZhdGUgdXJsTG9hZGVyQmxvYjpVUkxMb2FkZXI7XG5cdHByaXZhdGUgdXJsTG9hZGVyQXJyYjpVUkxMb2FkZXI7XG5cblx0Y29uc3RydWN0b3IoKVxuXHR7XG5cblx0XHRjb25zb2xlLmxvZyggJ3N0YXJ0Jyk7XG5cblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIFBPU1QgVVJMIFZhcmlhYmxlcyB0byBQSFAgc2NyaXB0XG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRcdHRoaXMudXJsTG9hZGVyUG9zdFVSTFZhcnMgPSBuZXcgVVJMTG9hZGVyKCk7XG5cdFx0dGhpcy51cmxMb2FkZXJQb3N0VVJMVmFycy5kYXRhRm9ybWF0ID0gVVJMTG9hZGVyRGF0YUZvcm1hdC5WQVJJQUJMRVM7XG5cblx0XHR2YXIgdXJsU3RyOnN0cmluZyA9ICdmbmFtZT1rYXJpbSZsbmFtZT0nICsgTWF0aC5mbG9vciggTWF0aC5yYW5kb20oKSAqIDEwMCApO1xuXHRcdHZhciB1cmxWYXJzID0gbmV3IFVSTFZhcmlhYmxlcyggdXJsU3RyICk7XG5cblx0XHR2YXIgcmVxID0gbmV3IFVSTFJlcXVlc3QoICdhc3NldHMvc2F2ZURhdGEucGhwJyApO1xuXHRcdFx0cmVxLm1ldGhvZCA9IFVSTFJlcXVlc3RNZXRob2QuUE9TVDtcblx0XHRcdHJlcS5kYXRhID0gdXJsVmFycztcblxuXHRcdHRoaXMudXJsTG9hZGVyUG9zdFVSTFZhcnMuYWRkRXZlbnRMaXN0ZW5lcihVUkxMb2FkZXJFdmVudC5MT0FEX0NPTVBMRVRFLCAoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpID0+IHRoaXMucG9zdFVSTFRlc3RDb21wbGV0ZShldmVudCkpO1xuXHRcdHRoaXMudXJsTG9hZGVyUG9zdFVSTFZhcnMuYWRkRXZlbnRMaXN0ZW5lcihVUkxMb2FkZXJFdmVudC5MT0FEX0VSUk9SLCAoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpID0+IHRoaXMuaW9FcnJvcihldmVudCkpO1xuXHRcdHRoaXMudXJsTG9hZGVyUG9zdFVSTFZhcnMubG9hZCggcmVxICk7XG5cblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIEdFVCBDU1YgRmlsZVxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHR2YXIgY3NyUmVxID0gbmV3IFVSTFJlcXVlc3QoICdhc3NldHMvYWlycG9ydHMuY3N2JyApO1xuXG5cdFx0dGhpcy51cmxMb2FkZXJHZXRDU1YgPSBuZXcgVVJMTG9hZGVyKCk7XG5cdFx0dGhpcy51cmxMb2FkZXJHZXRDU1YuZGF0YUZvcm1hdCA9IFVSTExvYWRlckRhdGFGb3JtYXQuVEVYVDtcblx0XHR0aGlzLnVybExvYWRlckdldENTVi5hZGRFdmVudExpc3RlbmVyKFVSTExvYWRlckV2ZW50LkxPQURfQ09NUExFVEUsIChldmVudDpVUkxMb2FkZXJFdmVudCkgPT4gdGhpcy5nZXRDc3ZDb21wbGV0ZShldmVudCkpO1xuXHRcdHRoaXMudXJsTG9hZGVyR2V0Q1NWLmFkZEV2ZW50TGlzdGVuZXIoVVJMTG9hZGVyRXZlbnQuTE9BRF9TVEFSVCwgKGV2ZW50OlVSTExvYWRlckV2ZW50KSA9PiB0aGlzLmdldENzdk9wZW4oZXZlbnQpKTtcblx0XHR0aGlzLnVybExvYWRlckdldENTVi5hZGRFdmVudExpc3RlbmVyKFVSTExvYWRlckV2ZW50LkxPQURfRVJST1IsIChldmVudDpVUkxMb2FkZXJFdmVudCkgPT4gdGhpcy5pb0Vycm9yKGV2ZW50KSk7XG5cdFx0dGhpcy51cmxMb2FkZXJHZXRDU1YubG9hZCggY3NyUmVxICk7XG5cblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIEVSUk9SIHRlc3QgLSBsb2FkIGEgbm9uLWV4aXN0aW5nIG9iamVjdFxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHR2YXIgZXJyb3JSZXEgPSBuZXcgVVJMUmVxdWVzdCggJ2Fzc2V0cy9nZW5lcmF0aW5nRXJyb3InICk7XG5cblx0XHR0aGlzLnVybExvYWRlckVycm9yVGVzdCA9IG5ldyBVUkxMb2FkZXIoKTtcblx0XHR0aGlzLnVybExvYWRlckVycm9yVGVzdC5kYXRhRm9ybWF0ID0gVVJMTG9hZGVyRGF0YUZvcm1hdC5URVhUO1xuXHRcdHRoaXMudXJsTG9hZGVyRXJyb3JUZXN0LmFkZEV2ZW50TGlzdGVuZXIoVVJMTG9hZGVyRXZlbnQuTE9BRF9DT01QTEVURSwgKGV2ZW50OlVSTExvYWRlckV2ZW50KSA9PiAgdGhpcy5lcnJvckNvbXBsZXRlKGV2ZW50KSk7XG5cdFx0dGhpcy51cmxMb2FkZXJFcnJvclRlc3QuYWRkRXZlbnRMaXN0ZW5lcihVUkxMb2FkZXJFdmVudC5MT0FEX0VSUk9SLCAoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpID0+IHRoaXMuaW9FcnJvcihldmVudCkpO1xuXHRcdHRoaXMudXJsTG9hZGVyRXJyb3JUZXN0LmFkZEV2ZW50TGlzdGVuZXIoVVJMTG9hZGVyRXZlbnQuSFRUUF9TVEFUVVMsIChldmVudDpVUkxMb2FkZXJFdmVudCkgPT4gdGhpcy5odHRwU3RhdHVzQ2hhbmdlKGV2ZW50KSk7XG5cdFx0dGhpcy51cmxMb2FkZXJFcnJvclRlc3QubG9hZCggZXJyb3JSZXEgKTtcblxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gR0VUIFVSTCBWYXJzIC0gZ2V0IFVSTCB2YXJpYWJsZXNcblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0dmFyIGNzclJlcSA9IG5ldyBVUkxSZXF1ZXN0KCAnYXNzZXRzL2dldFVybFZhcnMucGhwJyApO1xuXG5cdFx0dGhpcy51cmxMb2FkZXJHZXRVUkxWYXJzID0gbmV3IFVSTExvYWRlcigpO1xuXHRcdHRoaXMudXJsTG9hZGVyR2V0VVJMVmFycy5kYXRhRm9ybWF0ID0gVVJMTG9hZGVyRGF0YUZvcm1hdC5WQVJJQUJMRVM7XG5cdFx0dGhpcy51cmxMb2FkZXJHZXRVUkxWYXJzLmFkZEV2ZW50TGlzdGVuZXIoVVJMTG9hZGVyRXZlbnQuTE9BRF9FUlJPUiwgKGV2ZW50OlVSTExvYWRlckV2ZW50KSA9PiB0aGlzLmlvRXJyb3IoZXZlbnQpKTtcblx0XHR0aGlzLnVybExvYWRlckdldFVSTFZhcnMuYWRkRXZlbnRMaXN0ZW5lcihVUkxMb2FkZXJFdmVudC5MT0FEX0NPTVBMRVRFLCAoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpID0+IHRoaXMuZ2V0VVJMVmFyc0NvbXBsZXRlKGV2ZW50KSk7XG5cdFx0dGhpcy51cmxMb2FkZXJHZXRVUkxWYXJzLmxvYWQoIGNzclJlcSApO1xuXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBMT0FEIEJpbmFyeSBmaWxlXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRcdHZhciBiaW5SZXEgPSBuZXcgVVJMUmVxdWVzdCggJ2Fzc2V0cy9zdXphbm5lLmF3ZCcgKTtcblxuXHRcdHRoaXMudXJsTG9hZGVyQmluYXJ5ID0gbmV3IFVSTExvYWRlciggICk7XG5cdFx0dGhpcy51cmxMb2FkZXJCaW5hcnkuZGF0YUZvcm1hdCA9IFVSTExvYWRlckRhdGFGb3JtYXQuQklOQVJZO1xuXHRcdHRoaXMudXJsTG9hZGVyQmluYXJ5LmFkZEV2ZW50TGlzdGVuZXIoVVJMTG9hZGVyRXZlbnQuTE9BRF9FUlJPUiwgKGV2ZW50OlVSTExvYWRlckV2ZW50KSA9PiB0aGlzLmlvRXJyb3IoZXZlbnQpKTtcblx0XHR0aGlzLnVybExvYWRlckJpbmFyeS5hZGRFdmVudExpc3RlbmVyKFVSTExvYWRlckV2ZW50LkxPQURfQ09NUExFVEUsIChldmVudDpVUkxMb2FkZXJFdmVudCkgPT4gdGhpcy5iaW5GaWxlTG9hZGVkKGV2ZW50KSk7XG5cdFx0dGhpcy51cmxMb2FkZXJCaW5hcnkubG9hZCggYmluUmVxICk7XG5cblx0XHQvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIExPQUQgQmxvYiBmaWxlXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXHRcdHZhciBibG9iUmVxID0gbmV3IFVSTFJlcXVlc3QoICdhc3NldHMvMi5wbmcnICk7XG5cblx0XHR0aGlzLnVybExvYWRlckJsb2IgPSBuZXcgVVJMTG9hZGVyKCAgKTtcblx0XHR0aGlzLnVybExvYWRlckJsb2IuZGF0YUZvcm1hdCA9IFVSTExvYWRlckRhdGFGb3JtYXQuQkxPQjtcblx0XHR0aGlzLnVybExvYWRlckJsb2IuYWRkRXZlbnRMaXN0ZW5lcihVUkxMb2FkZXJFdmVudC5MT0FEX0NPTVBMRVRFLCAoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpID0+IHRoaXMuYmxvYkZpbGVMb2FkZWQoZXZlbnQpKTtcblx0XHR0aGlzLnVybExvYWRlckJsb2IubG9hZCggYmxvYlJlcSApO1xuXG5cdFx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBBUlJBWV9CVUZGRVIgVGVzdFxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHR2YXIgYXJyQlJlcSA9IG5ldyBVUkxSZXF1ZXN0KCAnYXNzZXRzLzEuanBnJyApO1xuXG5cdFx0dGhpcy51cmxMb2FkZXJBcnJiID0gbmV3IFVSTExvYWRlciggICk7XG5cdFx0dGhpcy51cmxMb2FkZXJBcnJiLmRhdGFGb3JtYXQgPSBVUkxMb2FkZXJEYXRhRm9ybWF0LkFSUkFZX0JVRkZFUjtcblx0XHR0aGlzLnVybExvYWRlckFycmIuYWRkRXZlbnRMaXN0ZW5lcihVUkxMb2FkZXJFdmVudC5MT0FEX0NPTVBMRVRFLCAoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpID0+IHRoaXMuYXJyYXlCdWZmZXJMb2FkZWQoZXZlbnQpKTtcblx0XHR0aGlzLnVybExvYWRlckFycmIubG9hZCggYXJyQlJlcSApO1xuXHR9XG5cblx0cHJpdmF0ZSBhcnJheUJ1ZmZlckxvYWRlZCggZXZlbnQ6VVJMTG9hZGVyRXZlbnQgKTp2b2lkXG5cdHtcblx0XHR2YXIgYXJyYXlCdWZmZXIgPSB0aGlzLnVybExvYWRlckFycmIuZGF0YTtcblx0XHR2YXIgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO1xuXG5cdFx0Y29uc29sZS5sb2coICdVUkxMb2FkZXJUZXN0cy5hcnJheUJ1ZmZlckxvYWRlZCcgLCBieXRlQXJyYXlbMV0pO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBieXRlQXJyYXkuYnl0ZUxlbmd0aDsgaSsrKSB7XG5cdFx0XHQvL2NvbnNvbGUubG9nKCBieXRlQXJyYXlbaV0gKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGJsb2JGaWxlTG9hZGVkKCBldmVudDpVUkxMb2FkZXJFdmVudCApOnZvaWRcblx0e1xuXHRcdHZhciBibG9iPSBuZXcgQmxvYihbdGhpcy51cmxMb2FkZXJCbG9iLmRhdGFdLCB7dHlwZTogJ2ltYWdlL3BuZyd9KTtcblx0XHR2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cdFx0XHRpbWcuc3JjICA9IHRoaXMuY3JlYXRlT2JqZWN0VVJMKCBibG9iICk7Ly93aW5kb3dbJ1VSTCddWydjcmVhdGVPYmplY3RVUkwnXShibG9iKTtcblx0XHRcdGltZy5vbmxvYWQgID0gZnVuY3Rpb24oZSkge1xuXHRcdFx0XHR3aW5kb3dbJ1VSTCddWydyZXZva2VPYmplY3RVUkwnXShpbWcuc3JjKTsgLy8gQ2xlYW4gdXAgYWZ0ZXIgeW91cnNlbGYuXG5cdFx0XHR9O1xuXG5cdFx0Y29uc29sZS5sb2coICdVUkxMb2FkZXJUZXN0cy5ibG9iRmlsZUxvYWRlZCcgLCBibG9iICk7XG5cblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCBpbWcgKTtcblx0fVxuXG5cdHByaXZhdGUgY3JlYXRlT2JqZWN0VVJMKCBmaWxlQmxvYiApXG5cdHtcblx0XHQvLyBGb3Igc29tZSByZWFzb24gVHlwZVNjcmlwdCBoYXMgXCJ3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTFwiIGluIGl0J3MgZGljdGlvbmFyeSAtXG5cdFx0Ly8gYnV0IHdpbmRvdy5VUkwgY2F1c2VzIGFuIGVycm9yXG5cdFx0Ly8gY2Fubm90IG1ha2UgbXkgb3duIC5kLnRzIGZpbGUgZWl0aGVyICggcmVzdWx0cyBpbiBkdXBsaWNhdGUgZGVmaW5pdGlvbiBlcnJvciApXG5cdFx0Ly8gVGhpcyBIQUNLIGdldHMgaXQgdG8gd29yazogd2luZG93WydVUkwnXVsnY3JlYXRlT2JqZWN0VVJMJ11cblx0XHRpZiggd2luZG93WydVUkwnXSApe1xuXHRcdFx0aWYgKCB3aW5kb3dbJ1VSTCddWydjcmVhdGVPYmplY3RVUkwnXSApIHtcblx0XHRcdFx0cmV0dXJuIHdpbmRvd1snVVJMJ11bJ2NyZWF0ZU9iamVjdFVSTCddKCBmaWxlQmxvYiApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoIHdpbmRvd1snd2Via2l0VVJMJ10gKXtcblx0XHRcdFx0cmV0dXJuIHdpbmRvd1snd2Via2l0VVJMJ11bJ2NyZWF0ZU9iamVjdFVSTCddKCBmaWxlQmxvYiApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0cHJpdmF0ZSBiaW5GaWxlTG9hZGVkKGV2ZW50OlVSTExvYWRlckV2ZW50KTp2b2lkXG5cdHtcblx0XHR2YXIgbG9hZGVyOlVSTExvYWRlciA9IGV2ZW50LnRhcmdldDtcblx0XHRjb25zb2xlLmxvZyggJ1VSTExvYWRlclRlc3RzLmJpbkZpbGVMb2FkZWQnICwgbG9hZGVyLmRhdGEubGVuZ3RoICk7XG5cdH1cblxuXHRwcml2YXRlIGdldFVSTFZhcnNDb21wbGV0ZShldmVudDpVUkxMb2FkZXJFdmVudCk6dm9pZFxuXHR7XG5cdFx0dmFyIGxvYWRlcjpVUkxMb2FkZXIgPSBldmVudC50YXJnZXQ7XG5cdFx0Y29uc29sZS5sb2coICdVUkxMb2FkZXJUZXN0cy5nZXRVUkxWYXJzQ29tcGxldGUnICwgbG9hZGVyLmRhdGEgKTtcblx0fVxuXG5cdHByaXZhdGUgaHR0cFN0YXR1c0NoYW5nZShldmVudDpVUkxMb2FkZXJFdmVudCk6dm9pZFxuXHR7XG5cdFx0Y29uc29sZS5sb2coICdVUkxMb2FkZXJUZXN0cy5odHRwU3RhdHVzQ2hhbmdlJyAsIGV2ZW50LnRhcmdldC5zdGF0dXMgKTtcblx0fVxuXG5cdHByaXZhdGUgaW9FcnJvcihldmVudDpVUkxMb2FkZXJFdmVudCk6dm9pZFxuXHR7XG5cdFx0dmFyIGxvYWRlcjpVUkxMb2FkZXIgPSBldmVudC50YXJnZXQ7XG5cdFx0Y29uc29sZS5sb2coICdVUkxMb2FkZXJUZXN0cy5pb0Vycm9yJyAsIGxvYWRlci51cmwgKTtcblx0fVxuXG5cdHByaXZhdGUgZXJyb3JDb21wbGV0ZSggZXZlbnQgKTp2b2lkXG5cdHtcblx0XHR2YXIgbG9hZGVyOlVSTExvYWRlciA9IGV2ZW50LnRhcmdldDtcblx0XHRjb25zb2xlLmxvZyggJ0xvYWRlci5lcnJvckNvbXBsZXRlJyApOy8vLCBsb2FkZXIuZGF0YSApO1xuXHR9XG5cblx0cHJpdmF0ZSBwb3N0VVJMVGVzdENvbXBsZXRlKGV2ZW50OlVSTExvYWRlckV2ZW50KTp2b2lkXG5cdHtcblx0XHR2YXIgbG9hZGVyOlVSTExvYWRlciA9IGV2ZW50LnRhcmdldDtcblx0XHRjb25zb2xlLmxvZyggJ1VSTExvYWRlclRlc3RzLnBvc3RVUkxUZXN0Q29tcGxldGUnICwgbG9hZGVyLmRhdGEgKTtcblx0fVxuXG5cdHByaXZhdGUgZ2V0Q3N2Q29tcGxldGUoZXZlbnQ6VVJMTG9hZGVyRXZlbnQpOnZvaWRcblx0e1xuXHRcdHZhciBsb2FkZXI6VVJMTG9hZGVyID0gZXZlbnQudGFyZ2V0O1xuXHRcdGNvbnNvbGUubG9nKCAnVVJMTG9hZGVyVGVzdHMuZ2V0Q3N2Q29tcGxldGUnICk7Ly8sIGxvYWRlci5kYXRhICk7XG5cdH1cblxuXHRwcml2YXRlIGdldENzdk9wZW4oZXZlbnQ6VVJMTG9hZGVyRXZlbnQpOnZvaWRcblx0e1xuXHRcdHZhciBsb2FkZXI6VVJMTG9hZGVyID0gZXZlbnQudGFyZ2V0O1xuXHRcdGNvbnNvbGUubG9nKCAnVVJMTG9hZGVyVGVzdHMuZ2V0Q3N2U3RhcnQnICk7XG5cdH1cbn0iXSwic291cmNlUm9vdCI6Ii4vdGVzdHMifQ==
