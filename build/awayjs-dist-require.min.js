require=function t(e,i,s){function r(n,o){if(!i[n]){if(!e[n]){var h="function"==typeof require&&require;if(!o&&h)return h(n,!0);if(a)return a(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var p=i[n]={exports:{}};e[n][0].call(p.exports,function(t){var i=e[n][1][t];return r(i?i:t)},p,p.exports,t,e,i,s)}return i[n].exports}for(var a="function"==typeof require&&require,n=0;n<s.length;n++)r(s[n]);return r}({"awayjs-dist/node_modules/awayjs-core/lib/base/BitmapDataChannel":[function(t,e){var i=function(){function t(){}return t.ALPHA=8,t.BLUE=4,t.GREEN=2,t.RED=1,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/base/BitmapData":[function(t,e){var i=t("awayjs-core/lib/geom/Rectangle"),s=t("awayjs-core/lib/utils/ColorUtils"),r=function(){function t(t,e,r,a){void 0===r&&(r=!0),void 0===a&&(a=null),this._alpha=0,this._locked=!1,this._transparent=r,this._imageCanvas=document.createElement("canvas"),this._imageCanvas.width=t,this._imageCanvas.height=e,this._context=this._imageCanvas.getContext("2d"),this._rect=new i(0,0,t,e),null!=a&&(this._alpha=this._transparent?s.float32ColorToARGB(a)[0]/255:1,this.fillRect(this._rect,a))}return t.prototype.dispose=function(){this._context=null,this._imageCanvas=null,this._imageData=null,this._rect=null,this._transparent=null,this._locked=null},t.prototype.lock=function(){this._locked=!0,this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)},t.prototype.unlock=function(){this._locked=!1,this._imageData&&(this._context.putImageData(this._imageData,0,0),this._imageData=null)},t.prototype.getPixel=function(t,e){var i,s,r,a;if(this._locked){var n=4*(t+e*this._imageCanvas.width);this._imageData||(this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)),i=this._imageData.data[n+0],s=this._imageData.data[n+1],r=this._imageData.data[n+2],a=this._imageData.data[n+3]}else{var o=this._context.getImageData(t,e,1,1);i=o.data[0],s=o.data[1],r=o.data[2],a=o.data[3]}return this._locked||(this._imageData=null),a<<24|i<<16|s<<8|r},t.prototype.setPixel=function(t,e,i){var r=s.float32ColorToARGB(i);if(this._locked||(this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)),this._imageData){var a=4*(t+e*this._imageCanvas.width);this._imageData.data[a+0]=r[1],this._imageData.data[a+1]=r[2],this._imageData.data[a+2]=r[3],this._imageData.data[a+3]=255}this._locked||(this._context.putImageData(this._imageData,0,0),this._imageData=null)},t.prototype.setPixels=function(t,e){if(this._locked||(this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)),this._imageData){e.position=0;var i,s,r;for(i=0;i<t.width;++i)for(s=0;s<t.height;++s)r=4*(i+t.x+(s+t.y)*this._imageCanvas.width),this._imageData.data[r+0]=e.readUnsignedInt(),this._imageData.data[r+1]=e.readUnsignedInt(),this._imageData.data[r+2]=e.readUnsignedInt(),this._imageData.data[r+3]=e.readUnsignedInt()}this._locked||(this._context.putImageData(this._imageData,0,0),this._imageData=null)},t.prototype.setPixel32=function(t,e,i){var r=s.float32ColorToARGB(i);if(this._locked||(this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)),this._imageData){var a=4*(t+e*this._imageCanvas.width);this._imageData.data[a+0]=r[1],this._imageData.data[a+1]=r[2],this._imageData.data[a+2]=r[3],this._imageData.data[a+3]=r[0]}this._locked||(this._context.putImageData(this._imageData,0,0),this._imageData=null)},t.prototype.setVector=function(t,e){if(this._locked||(this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)),this._imageData){var i,r,a,n;for(i=0;i<t.width;++i)for(r=0;r<t.height;++r)n=s.float32ColorToARGB(e[i+r*t.width]),a=4*(i+t.x+(r+t.y)*this._imageCanvas.width),this._imageData.data[a+0]=n[1],this._imageData.data[a+1]=n[2],this._imageData.data[a+2]=n[3],this._imageData.data[a+3]=n[0]}this._locked||(this._context.putImageData(this._imageData,0,0),this._imageData=null)},t.prototype.drawImage=function(t,e,i){this._locked?(this._imageData&&this._context.putImageData(this._imageData,0,0),this._drawImage(t,e,i),this._imageData&&(this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height))):this._drawImage(t,e,i)},t.prototype._drawImage=function(e,i,s){e instanceof t?this._context.drawImage(e.canvas,i.x,i.y,i.width,i.height,s.x,s.y,s.width,s.height):e instanceof HTMLImageElement&&this._context.drawImage(e,i.x,i.y,i.width,i.height,s.x,s.y,s.width,s.height)},t.prototype.copyPixels=function(t,e,i){this._locked?(this._imageData&&this._context.putImageData(this._imageData,0,0),this._copyPixels(t,e,i),this._imageData&&(this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height))):this._copyPixels(t,e,i)},t.prototype._copyPixels=function(e,i,s){e instanceof t?this._context.drawImage(e.canvas,i.x,i.y,i.width,i.height,s.x,s.y,s.width,s.height):e instanceof HTMLImageElement&&this._context.drawImage(e,i.x,i.y,i.width,i.height,s.x,s.y,s.width,s.height)},t.prototype.fillRect=function(t,e){this._locked?(this._imageData&&this._context.putImageData(this._imageData,0,0),this._context.fillStyle=this.hexToRGBACSS(e),this._context.fillRect(t.x,t.y,t.width,t.height),this._imageData&&(this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height))):(this._context.fillStyle=this.hexToRGBACSS(e),this._context.fillRect(t.x,t.y,t.width,t.height))},t.prototype.draw=function(t,e){this._locked?(this._imageData&&this._context.putImageData(this._imageData,0,0),this._draw(t,e),this._imageData&&(this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height))):this._draw(t,e)},t.prototype._draw=function(e,i){e instanceof t?(this._context.save(),null!=i&&this._context.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this._context.drawImage(e.canvas,0,0),this._context.restore()):e instanceof HTMLImageElement&&(this._context.save(),null!=i&&this._context.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this._context.drawImage(e,0,0),this._context.restore())},t.prototype.copyChannel=function(t,e,i,s,r){t.imageData;if(this._locked||(this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)),this._imageData){var a,n,o,h,l=t.imageData.data,p=this._imageData.data,d=Math.round(Math.log(s)/Math.log(2)),u=Math.round(Math.log(r)/Math.log(2));for(a=0;a<e.width;++a)for(n=0;n<e.height;++n)o=4*(a+e.x+(n+e.y)*t.width),h=4*(a+i.x+(n+i.y)*this.width),p[h+u]=l[o+d]}this._locked||(this._context.putImageData(this._imageData,0,0),this._imageData=null)},t.prototype.colorTransform=function(t,e){if(this._locked||(this._imageData=this._context.getImageData(0,0,this._rect.width,this._rect.height)),this._imageData){var i,s,r,a=this._imageData.data;for(i=0;i<t.width;++i)for(s=0;s<t.height;++s)r=4*(i+t.x+(s+t.y)*this.width),a[r]=a[r]*e.redMultiplier+e.redOffset,a[r+1]=a[r+1]*e.greenMultiplier+e.greenOffset,a[r+2]=a[r+2]*e.blueMultiplier+e.blueOffset,a[r+3]=a[r+3]*e.alphaMultiplier+e.alphaOffset}this._locked||(this._context.putImageData(this._imageData,0,0),this._imageData=null)},Object.defineProperty(t.prototype,"imageData",{get:function(){return this._context.getImageData(0,0,this._rect.width,this._rect.height)},set:function(t){this._context.putImageData(t,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._imageCanvas.width},set:function(t){this._rect.width=t,this._imageCanvas.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._imageCanvas.height},set:function(t){this._rect.height=t,this._imageCanvas.height=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this._imageCanvas},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),t.prototype.hexToRGBACSS=function(t){var e=s.float32ColorToARGB(t);return 0==this._transparent?(e[0]=1,"rgba("+e[1]+","+e[2]+","+e[3]+","+e[0]+")"):"rgba("+e[1]+","+e[2]+","+e[3]+","+e[0]/255+")"},t}();e.exports=r},{"awayjs-core/lib/geom/Rectangle":void 0,"awayjs-core/lib/utils/ColorUtils":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/bounds/AxisAlignedBoundingBox":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/BoundingVolumeBase"),r=t("awayjs-core/lib/geom/Matrix3DUtils"),a=t("awayjs-core/lib/geom/PlaneClassification"),n=t("awayjs-core/lib/geom/Vector3D"),o=function(t){function e(){t.call(this),this._centerX=0,this._centerY=0,this._centerZ=0,this._halfExtentsX=0,this._halfExtentsY=0,this._halfExtentsZ=0}return i(e,t),e.prototype.nullify=function(){t.prototype.nullify.call(this),this._centerX=this._centerY=this._centerZ=0,this._halfExtentsX=this._halfExtentsY=this._halfExtentsZ=0},e.prototype.isInFrustum=function(t,e){for(var i=0;e>i;++i){var s=t[i],r=s.a,a=s.b,n=s.c,o=0>r?-this._halfExtentsX:this._halfExtentsX,h=0>a?-this._halfExtentsY:this._halfExtentsY,l=0>n?-this._halfExtentsZ:this._halfExtentsZ,p=r*(this._centerX+o)+a*(this._centerY+h)+n*(this._centerZ+l)-s.d;if(0>p)return!1}return!0},e.prototype.rayIntersection=function(t,e,i){if(this.containsPoint(t))return 0;var s,r,a,n,o,h=t.x-this._centerX,l=t.y-this._centerY,p=t.z-this._centerZ,d=e.x,u=e.y,c=e.z;return 0>d&&(n=(this._halfExtentsX-h)/d,n>0&&(r=l+n*u,a=p+n*c,r>-this._halfExtentsY&&r<this._halfExtentsY&&a>-this._halfExtentsZ&&a<this._halfExtentsZ&&(i.x=1,i.y=0,i.z=0,o=!0))),!o&&d>0&&(n=(-this._halfExtentsX-h)/d,n>0&&(r=l+n*u,a=p+n*c,r>-this._halfExtentsY&&r<this._halfExtentsY&&a>-this._halfExtentsZ&&a<this._halfExtentsZ&&(i.x=-1,i.y=0,i.z=0,o=!0))),!o&&0>u&&(n=(this._halfExtentsY-l)/u,n>0&&(s=h+n*d,a=p+n*c,s>-this._halfExtentsX&&s<this._halfExtentsX&&a>-this._halfExtentsZ&&a<this._halfExtentsZ&&(i.x=0,i.y=1,i.z=0,o=!0))),!o&&u>0&&(n=(-this._halfExtentsY-l)/u,n>0&&(s=h+n*d,a=p+n*c,s>-this._halfExtentsX&&s<this._halfExtentsX&&a>-this._halfExtentsZ&&a<this._halfExtentsZ&&(i.x=0,i.y=-1,i.z=0,o=!0))),!o&&0>c&&(n=(this._halfExtentsZ-p)/c,n>0&&(s=h+n*d,r=l+n*u,r>-this._halfExtentsY&&r<this._halfExtentsY&&s>-this._halfExtentsX&&s<this._halfExtentsX&&(i.x=0,i.y=0,i.z=1,o=!0))),!o&&c>0&&(n=(-this._halfExtentsZ-p)/c,n>0&&(s=h+n*d,r=l+n*u,r>-this._halfExtentsY&&r<this._halfExtentsY&&s>-this._halfExtentsX&&s<this._halfExtentsX&&(i.x=0,i.y=0,i.z=-1,o=!0))),o?n:-1},e.prototype.containsPoint=function(t){var e=t.x-this._centerX,i=t.y-this._centerY,s=t.z-this._centerZ;return e<=this._halfExtentsX&&e>=-this._halfExtentsX&&i<=this._halfExtentsY&&i>=-this._halfExtentsY&&s<=this._halfExtentsZ&&s>=-this._halfExtentsZ},e.prototype.fromExtremes=function(e,i,s,r,a,n){this._centerX=.5*(r+e),this._centerY=.5*(a+i),this._centerZ=.5*(n+s),this._halfExtentsX=.5*(r-e),this._halfExtentsY=.5*(a-i),this._halfExtentsZ=.5*(n-s),t.prototype.fromExtremes.call(this,e,i,s,r,a,n)},e.prototype.clone=function(){var t=new e;return t.fromExtremes(this._aabb.x,this._aabb.y+this._aabb.height,this._aabb.z,this._aabb.x+this._aabb.width,this._aabb.y,this._aabb.z+this._aabb.depth),t},Object.defineProperty(e.prototype,"halfExtentsX",{get:function(){return this._halfExtentsX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfExtentsY",{get:function(){return this._halfExtentsY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"halfExtentsZ",{get:function(){return this._halfExtentsZ},enumerable:!0,configurable:!0}),e.prototype.closestPointToPoint=function(t,e){void 0===e&&(e=null);var i;return null==e&&(e=new n),i=t.x,i<this._aabb.x&&(i=this._aabb.x),i>this._aabb.x+this._aabb.width&&(i=this._aabb.x+this._aabb.width),e.x=i,i=t.y,i<this._aabb.y+this._aabb.height&&(i=this._aabb.y+this._aabb.height),i>this._aabb.y&&(i=this._aabb.y),e.y=i,i=t.z,i<this._aabb.z&&(i=this._aabb.z),i>this._aabb.z+this._aabb.depth&&(i=this._aabb.z+this._aabb.depth),e.z=i,e},e.prototype.classifyToPlane=function(t){var e=t.a,i=t.b,s=t.c,r=e*this._centerX+i*this._centerY+s*this._centerZ-t.d;0>e&&(e=-e),0>i&&(i=-i),0>s&&(s=-s);var n=e*this._halfExtentsX+i*this._halfExtentsY+s*this._halfExtentsZ;return r>n?a.FRONT:-n>r?a.BACK:a.INTERSECT},e.prototype.transformFrom=function(t,e){var i=t,s=i._centerX,a=i._centerY,n=i._centerZ,o=r.RAW_DATA_CONTAINER;e.copyRawDataTo(o);var h=o[0],l=o[4],p=o[8],d=o[12],u=o[1],c=o[5],_=o[9],y=o[13],g=o[2],f=o[6],m=o[10],b=o[14];this._centerX=s*h+a*l+n*p+d,this._centerY=s*u+a*c+n*_+y,this._centerZ=s*g+a*f+n*m+b,0>h&&(h=-h),0>l&&(l=-l),0>p&&(p=-p),0>u&&(u=-u),0>c&&(c=-c),0>_&&(_=-_),0>g&&(g=-g),0>f&&(f=-f),0>m&&(m=-m);var w=i._halfExtentsX,v=i._halfExtentsY,x=i._halfExtentsZ;this._halfExtentsX=w*h+v*l+x*p,this._halfExtentsY=w*u+v*c+x*_,this._halfExtentsZ=w*g+v*f+x*m,this._aabb.width=this._aabb.height=this._aabb.depth=2*this._halfExtentsX,this._aabb.x=this._centerX-this._halfExtentsX,this._aabb.y=this._centerY+this._halfExtentsY,this._aabb.z=this._centerZ-this._halfExtentsZ},e}(s);e.exports=o},{"awayjs-core/lib/bounds/BoundingVolumeBase":void 0,"awayjs-core/lib/geom/Matrix3DUtils":void 0,"awayjs-core/lib/geom/PlaneClassification":void 0,"awayjs-core/lib/geom/Vector3D":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/bounds/BoundingSphere":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/BoundingVolumeBase"),r=t("awayjs-core/lib/geom/PlaneClassification"),a=t("awayjs-core/lib/geom/Vector3D"),n=function(t){function e(){t.call(this),this._radius=0,this._centerX=0,this._centerY=0,this._centerZ=0}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),e.prototype.nullify=function(){t.prototype.nullify.call(this),this._centerX=this._centerY=this._centerZ=0,this._radius=0},e.prototype.isInFrustum=function(t,e){for(var i=0;e>i;++i){var s=t[i],r=s.a<0?-this._radius:this._radius,a=s.b<0?-this._radius:this._radius,n=s.c<0?-this._radius:this._radius,o=s.a*(this._centerX+r)+s.b*(this._centerY+a)+s.c*(this._centerZ+n)-s.d;if(0>o)return!1}return!0},e.prototype.fromSphere=function(t,e){this._centerX=t.x,this._centerY=t.y,this._centerZ=t.z,this._radius=e,this._aabb.width=this._aabb.height=this._aabb.depth=2*e,this._aabb.x=this._centerX-e,this._aabb.y=this._centerY+e,this._aabb.z=this._centerZ-e,this._pAabbPointsDirty=!0},e.prototype.fromExtremes=function(e,i,s,r,a,n){this._centerX=.5*(r+e),this._centerY=.5*(a+i),this._centerZ=.5*(n+s);var o=r-e,h=a-i,l=n-s;h>o&&(o=h),l>o&&(o=l),this._radius=o*Math.sqrt(.5),t.prototype.fromExtremes.call(this,e,i,s,r,a,n)},e.prototype.clone=function(){var t=new e;return t.fromSphere(new a(this._centerX,this._centerY,this._centerZ),this._radius),t},e.prototype.rayIntersection=function(t,e,i){if(this.containsPoint(t))return 0;var s,r=t.x-this._centerX,a=t.y-this._centerY,n=t.z-this._centerZ,o=e.x,h=e.y,l=e.z,p=o*o+h*h+l*l,d=2*(r*o+a*h+n*l),u=r*r+a*a+n*n-this._radius*this._radius,c=d*d-4*p*u;if(c>=0){var _=Math.sqrt(c);if(s=(-d-_)/(2*p),s>=0)return i.x=r+s*o,i.y=a+s*h,i.z=n+s*l,i.normalize(),s}return-1},e.prototype.containsPoint=function(t){var e=t.x-this._centerX,i=t.y-this._centerY,s=t.z-this._centerZ,r=Math.sqrt(e*e+i*i+s*s);return r<=this._radius},e.prototype.classifyToPlane=function(t){var e=t.a,i=t.b,s=t.c,a=e*this._centerX+i*this._centerY+s*this._centerZ-t.d;0>e&&(e=-e),0>i&&(i=-i),0>s&&(s=-s);var n=(e+i+s)*this._radius;return a>n?r.FRONT:-n>a?r.BACK:r.INTERSECT},e.prototype.transformFrom=function(t,e){var i=t,s=i._centerX,r=i._centerY,a=i._centerZ,n=new Array(16);e.copyRawDataTo(n);var o=n[0],h=n[4],l=n[8],p=n[12],d=n[1],u=n[5],c=n[9],_=n[13],y=n[2],g=n[6],f=n[10],m=n[14];this._centerX=s*o+r*h+a*l+p,this._centerY=s*d+r*u+a*c+_,this._centerZ=s*y+r*g+a*f+m,0>o&&(o=-o),0>h&&(h=-h),0>l&&(l=-l),0>d&&(d=-d),0>u&&(u=-u),0>c&&(c=-c),0>y&&(y=-y),0>g&&(g=-g),0>f&&(f=-f);var b=i._radius,w=o+h+l,v=d+u+c,x=y+g+f;this._radius=b*Math.sqrt(w*w+v*v+x*x),this._aabb.width=this._aabb.height=this._aabb.depth=2*this._radius,this._aabb.x=this._centerX-this._radius,this._aabb.y=this._centerY+this._radius,this._aabb.z=this._centerZ-this._radius},e}(s);e.exports=n},{"awayjs-core/lib/bounds/BoundingVolumeBase":void 0,"awayjs-core/lib/geom/PlaneClassification":void 0,"awayjs-core/lib/geom/Vector3D":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/bounds/BoundingVolumeBase":[function(t,e){var i=t("awayjs-core/lib/geom/Box"),s=t("awayjs-core/lib/errors/AbstractMethodError"),r=function(){function t(){this._pAabbPoints=new Array,this._pAabbPointsDirty=!0,this._aabb=new i}return Object.defineProperty(t.prototype,"aabb",{get:function(){return this._aabb},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aabbPoints",{get:function(){return this._pAabbPointsDirty&&this.pUpdateAABBPoints(),this._pAabbPoints},enumerable:!0,configurable:!0}),t.prototype.nullify=function(){this._aabb.x=this._aabb.y=this._aabb.z=0,this._aabb.width=this._aabb.height=this._aabb.depth=0,this._pAabbPointsDirty=!0},t.prototype.fromVertices=function(t){var e,i,s,r,a,n,o,h=t.length;if(0==h)return void this.nullify();var l;for(i=a=t[e++],s=n=t[e++],r=o=t[e++];h>e;)l=t[e++],i>l?i=l:l>a&&(a=l),l=t[e++],s>l?s=l:l>n&&(n=l),l=t[e++],r>l?r=l:l>o&&(o=l);this.fromExtremes(i,s,r,a,n,o)},t.prototype.fromSphere=function(t,e){this.fromExtremes(t.x-e,t.y-e,t.z-e,t.x+e,t.y+e,t.z+e)},t.prototype.fromExtremes=function(t,e,i,s,r,a){this._aabb.x=t,this._aabb.y=r,this._aabb.z=i,this._aabb.width=s-t,this._aabb.height=r-e,this._aabb.depth=a-i,this._pAabbPointsDirty=!0},t.prototype.isInFrustum=function(){throw new s},t.prototype.overlaps=function(t){return this._aabb.intersects(t.aabb)},t.prototype.clone=function(){throw new s},t.prototype.rayIntersection=function(){return-1},t.prototype.containsPoint=function(){return!1},t.prototype.pUpdateAABBPoints=function(){var t=this._aabb.x,e=this._aabb.y-this._aabb.height,i=this._aabb.z,s=this._aabb.x+this._aabb.width,r=this._aabb.y,a=this._aabb.z+this._aabb.depth;this._pAabbPoints[0]=t,this._pAabbPoints[1]=e,this._pAabbPoints[2]=i,this._pAabbPoints[3]=s,this._pAabbPoints[4]=e,this._pAabbPoints[5]=i,this._pAabbPoints[6]=t,this._pAabbPoints[7]=r,this._pAabbPoints[8]=i,this._pAabbPoints[9]=s,this._pAabbPoints[10]=r,this._pAabbPoints[11]=i,this._pAabbPoints[12]=t,this._pAabbPoints[13]=e,this._pAabbPoints[14]=a,this._pAabbPoints[15]=s,this._pAabbPoints[16]=e,this._pAabbPoints[17]=a,this._pAabbPoints[18]=t,this._pAabbPoints[19]=r,this._pAabbPoints[20]=a,this._pAabbPoints[21]=s,this._pAabbPoints[22]=r,this._pAabbPoints[23]=a,this._pAabbPointsDirty=!1},t.prototype.classifyToPlane=function(){throw new s},t.prototype.transformFrom=function(){throw new s},t}();e.exports=r},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/geom/Box":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/bounds/NullBounds":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/BoundingVolumeBase"),r=t("awayjs-core/lib/geom/PlaneClassification"),a=function(t){function e(e){void 0===e&&(e=!0),t.call(this),this._alwaysIn=e,this._aabb.width=this._aabb.height=this._aabb.depth=Number.POSITIVE_INFINITY,this._aabb.x=this._aabb.y=this._aabb.z=this._alwaysIn?Number.NEGATIVE_INFINITY/2:Number.POSITIVE_INFINITY}return i(e,t),e.prototype.clone=function(){return new e(this._alwaysIn)},e.prototype.isInFrustum=function(){return this._alwaysIn},e.prototype.fromSphere=function(){},e.prototype.fromExtremes=function(){},e.prototype.classifyToPlane=function(){return r.INTERSECT},e.prototype.transformFrom=function(t){this._alwaysIn=t._alwaysIn},e}(s);e.exports=a},{"awayjs-core/lib/bounds/BoundingVolumeBase":void 0,"awayjs-core/lib/geom/PlaneClassification":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/errors/AbstractMethodError":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),r=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=0),t.call(this,e||"An abstract method was called! Either an instance of an abstract class was created, or an abstract method was not overridden by the subclass.",i)}return i(e,t),e}(s);e.exports=r},{"awayjs-core/lib/errors/Error":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/errors/ArgumentError":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),r=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=0),t.call(this,e||"ArgumentError",i)}return i(e,t),e}(s);e.exports=r},{"awayjs-core/lib/errors/Error":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/errors/DocumentError":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),r=function(t){function e(e,i){void 0===e&&(e="DocumentError"),void 0===i&&(i=0),t.call(this,e,i)}return i(e,t),e.DOCUMENT_DOES_NOT_EXIST="documentDoesNotExist",e}(s);e.exports=r},{"awayjs-core/lib/errors/Error":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/errors/Error":[function(t,e){var i=function(){function t(t,e,i){void 0===t&&(t=""),void 0===e&&(e=0),void 0===i&&(i=""),this._errorID=0,this._messsage="",this._name="",this._messsage=t,this._name=name,this._errorID=e}return Object.defineProperty(t.prototype,"message",{get:function(){return this._messsage},set:function(t){this._messsage=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"errorID",{get:function(){return this._errorID},enumerable:!0,configurable:!0}),t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/errors/PartialImplementationError":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),r=function(t){function e(e,i){void 0===e&&(e=""),void 0===i&&(i=0),t.call(this,"PartialImplementationError - this function is in development. Required Dependency: "+e,i)}return i(e,t),e}(s);e.exports=r},{"awayjs-core/lib/errors/Error":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/errors/RangeError":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),r=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=0),t.call(this,e||"RangeError",i)}return i(e,t),e}(s);e.exports=r},{"awayjs-core/lib/errors/Error":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/events/AssetEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e,i,s){void 0===i&&(i=null),void 0===s&&(s=null),t.call(this,e),this._asset=i,this._prevName=s||(this._asset?this._asset.name:null)}return i(e,t),Object.defineProperty(e.prototype,"asset",{get:function(){return this._asset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetPrevName",{get:function(){return this._prevName},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this.asset,this.assetPrevName)},e.ASSET_COMPLETE="assetComplete",e.ASSET_RENAME="assetRename",e.ASSET_CONFLICT_RESOLVED="assetConflictResolved",e.TEXTURE_SIZE_ERROR="textureSizeError",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/events/EventDispatcher":[function(t,e){var i=function(){function t(t){void 0===t&&(t=null),this.listeners=new Array,this.target=t||this}return t.prototype.addEventListener=function(t,e){void 0===this.listeners[t]&&(this.listeners[t]=new Array),-1===this.getEventListenerIndex(t,e)&&this.listeners[t].push(e)},t.prototype.removeEventListener=function(t,e){var i=this.getEventListenerIndex(t,e);-1!==i&&this.listeners[t].splice(i,1)},t.prototype.dispatchEvent=function(t){var e=this.listeners[t.type];if(void 0!==e){var i=e.length;t.target=this.target;for(var s=0;i>s;s++)e[s](t)}},t.prototype.getEventListenerIndex=function(t,e){if(void 0!==this.listeners[t])for(var i=this.listeners[t],s=i.length,r=0;s>r;r++)if(e==i[r])return r;return-1},t.prototype.hasEventListener=function(t,e){return null!=e?-1!==this.getEventListenerIndex(t,e):void 0!==this.listeners[t]?this.listeners[t].length>0:!1},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/events/Event":[function(t,e){var i=function(){function t(t){this.type=void 0,this.target=void 0,this.type=t}return t.prototype.clone=function(){return new t(this.type)},t.COMPLETE="complete",t.OPEN="open",t.ENTER_FRAME="enterFrame",t.EXIT_FRAME="exitFrame",t.RESIZE="resize",t.ERROR="error",t.CHANGE="change",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/events/HTTPStatusEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e,i){void 0===i&&(i=null),t.call(this,e),this.status=i}return i(e,t),e.HTTP_STATUS="httpStatus",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/events/IEventDispatcher":[function(){},{}],"awayjs-dist/node_modules/awayjs-core/lib/events/IOErrorEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e){t.call(this,e)}return i(e,t),e.IO_ERROR="ioError",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/events/LoaderEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e,i,s,r){void 0===i&&(i=null),void 0===s&&(s=null),void 0===r&&(r=null),t.call(this,e),this._url=i,this._content=s,this._assets=r}return i(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assets",{get:function(){return this._assets},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._url,this._content,this._assets)},e.RESOURCE_COMPLETE="resourceComplete",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/events/ParserEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e,i){void 0===i&&(i=""),t.call(this,e),this._message=i}return i(e,t),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this.message)},e.PARSE_COMPLETE="parseComplete",e.PARSE_ERROR="parseError",e.READY_FOR_DEPENDENCIES="readyForDependencies",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/events/ProgressEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e){t.call(this,e)}return i(e,t),e.PROGRESS="progress",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/events/ProjectionEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e,i){t.call(this,e),this._projection=i}return i(e,t),Object.defineProperty(e.prototype,"projection",{get:function(){return this._projection},enumerable:!0,configurable:!0}),e.MATRIX_CHANGED="matrixChanged",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/events/TimerEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e){t.call(this,e)}return i(e,t),e.TIMER="timer",e.TIMER_COMPLETE="timerComplete",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/geom/Box":[function(t,e){var i=t("awayjs-core/lib/geom/Vector3D"),s=function(){function t(t,e,i,s,r,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0),void 0===a&&(a=0),this.x=t,this.y=e,this.z=i,this.width=s,this.height=r,this.depth=a}return Object.defineProperty(t.prototype,"back",{get:function(){return this.z+this.depth},set:function(t){this.depth=t-this.z},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t-this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRightBack",{get:function(){return null==this._bottomRightBack&&(this._bottomRightBack=new i),this._bottomRightBack.x=this.x+this.width,this._bottomRightBack.y=this.y+this.height,this._bottomRightBack.z=this.z+this.depth,this._bottomRightBack},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"front",{get:function(){return this.z},set:function(t){this.depth+=this.z-t,this.z=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t-this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return null==this._size&&(this._size=new i),this._size.x=this.width,this._size.y=this.height,this._size.z=this.depth,this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeftFront",{get:function(){return null==this._topLeftFront&&(this._topLeftFront=new i),this._topLeftFront.x=this.x,this._topLeftFront.y=this.y,this._topLeftFront.z=this.z,this._topLeftFront},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.width,this.height,this.depth)},t.prototype.contains=function(t,e,i){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e&&this.z<=i&&this.z+this.depth>=i},t.prototype.containsPoint=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y&&this.z<=t.z&&this.z+this.depth>=t.z
},t.prototype.containsRect=function(t){return this.x<=t.x&&this.x+this.width>=t.x+t.width&&this.y<=t.y&&this.y+this.height>=t.y+t.height&&this.z<=t.z&&this.z+this.depth>=t.z+t.depth},t.prototype.copyFrom=function(){},t.prototype.equals=function(t){return this.x==t.x&&this.y==t.y&&this.z==t.z&&this.width==t.width&&this.height==t.height&&this.depth==t.depth},t.prototype.inflate=function(t,e,i){this.x-=t/2,this.y-=e/2,this.z-=i/2,this.width+=t/2,this.height+=e/2,this.depth+=i/2},t.prototype.inflatePoint=function(t){this.x-=t.x/2,this.y-=t.y/2,this.z-=t.z/2,this.width+=t.x/2,this.height+=t.y/2,this.depth+=t.z/2},t.prototype.intersection=function(e){if(this.intersects(e)){var i=new t;return this.x>e.x?(i.x=this.x,i.width=e.x-this.x+e.width,i.width>this.width&&(i.width=this.width)):(i.x=e.x,i.width=this.x-e.x+this.width,i.width>e.width&&(i.width=e.width)),this.y>e.y?(i.y=this.y,i.height=e.y-this.y+e.height,i.height>this.height&&(i.height=this.height)):(i.y=e.y,i.height=this.y-e.y+this.height,i.height>e.height&&(i.height=e.height)),this.z>e.z?(i.z=this.z,i.depth=e.z-this.z+e.depth,i.depth>this.depth&&(i.depth=this.depth)):(i.z=e.z,i.depth=this.z-e.z+this.depth,i.depth>e.depth&&(i.depth=e.depth)),i}return new t},t.prototype.intersects=function(t){return this.x+this.width>t.x&&this.x<t.x+t.width&&this.y+this.height>t.y&&this.y<t.y+t.height&&this.z+this.depth>t.z&&this.z<t.z+t.depth},t.prototype.isEmpty=function(){return 0==this.x&&0==this.y&&0==this.z&&0==this.width&&0==this.height&&0==this.depth},t.prototype.offset=function(t,e,i){this.x+=t,this.y+=e,this.z+=i},t.prototype.offsetPosition=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},t.prototype.setEmpty=function(){this.x=0,this.y=0,this.z=0,this.width=0,this.height=0,this.depth=0},t.prototype.setTo=function(t,e,i,s,r,a){this.x=t,this.y=e,this.z=i,this.width=s,this.height=r,this.depth=a},t.prototype.toString=function(){return"[Box] (x="+this.x+", y="+this.y+", z="+this.z+", width="+this.width+", height="+this.height+", depth="+this.depth+")"},t.prototype.union=function(e){var i=new t;return this.x<e.x?(i.x=this.x,i.width=e.x-this.x+e.width,i.width<this.width&&(i.width=this.width)):(i.x=e.x,i.width=this.x-e.x+this.width,i.width<e.width&&(i.width=e.width)),this.y<e.y?(i.y=this.y,i.height=e.y-this.y+e.height,i.height<this.height&&(i.height=this.height)):(i.y=e.y,i.height=this.y-e.y+this.height,i.height<e.height&&(i.height=e.height)),this.z<e.z?(i.z=this.z,i.depth=e.z-this.z+e.depth,i.depth<this.depth&&(i.depth=this.depth)):(i.z=e.z,i.depth=this.z-e.z+this.depth,i.depth<e.depth&&(i.depth=e.depth)),i},t}();e.exports=s},{"awayjs-core/lib/geom/Vector3D":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/geom/ColorTransform":[function(t,e){var i=t("awayjs-core/lib/utils/ColorUtils"),s=function(){function t(t,e,i,s,r,a,n,o){void 0===t&&(t=1),void 0===e&&(e=1),void 0===i&&(i=1),void 0===s&&(s=1),void 0===r&&(r=0),void 0===a&&(a=0),void 0===n&&(n=0),void 0===o&&(o=0),this.redMultiplier=t,this.greenMultiplier=e,this.blueMultiplier=i,this.alphaMultiplier=s,this.redOffset=r,this.greenOffset=a,this.blueOffset=n,this.alphaOffset=o}return Object.defineProperty(t.prototype,"color",{get:function(){return this.redOffset<<16|this.greenOffset<<8|this.blueOffset},set:function(t){var e=i.float32ColorToARGB(t);this.redOffset=e[1],this.greenOffset=e[2],this.blueOffset=e[3],this.redMultiplier=0,this.greenMultiplier=0,this.blueMultiplier=0},enumerable:!0,configurable:!0}),t.prototype.concat=function(t){this.redMultiplier+=t.redMultiplier,this.greenMultiplier+=t.greenMultiplier,this.blueMultiplier+=t.blueMultiplier,this.alphaMultiplier+=t.alphaMultiplier},t}();e.exports=s},{"awayjs-core/lib/utils/ColorUtils":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/geom/MathConsts":[function(t,e){var i=function(){function t(){}return t.RADIANS_TO_DEGREES=180/Math.PI,t.DEGREES_TO_RADIANS=Math.PI/180,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/geom/Matrix3DUtils":[function(t,e){var i=t("awayjs-core/lib/geom/Matrix3D"),s=t("awayjs-core/lib/geom/Vector3D"),r=function(){function t(){}return t.quaternion2matrix=function(e,s){void 0===s&&(s=null);var r=e.x,a=e.y,n=e.z,o=e.w,h=r*r,l=r*a,p=r*n,d=r*o,u=a*a,c=a*n,_=a*o,y=n*n,g=n*o,f=t.RAW_DATA_CONTAINER;return f[0]=1-2*(u+y),f[1]=2*(l+g),f[2]=2*(p-_),f[4]=2*(l-g),f[5]=1-2*(h+y),f[6]=2*(c+d),f[8]=2*(p+_),f[9]=2*(c-d),f[10]=1-2*(h+u),f[3]=f[7]=f[11]=f[12]=f[13]=f[14]=0,f[15]=1,s?(s.copyRawDataFrom(f),s):new i(f)},t.getForward=function(t,e){return void 0===e&&(e=null),null===e&&(e=new s(0,0,0)),t.copyColumnTo(2,e),e.normalize(),e},t.getUp=function(t,e){return void 0===e&&(e=null),null===e&&(e=new s(0,0,0)),t.copyColumnTo(1,e),e.normalize(),e},t.getRight=function(t,e){return void 0===e&&(e=null),null===e&&(e=new s(0,0,0)),t.copyColumnTo(0,e),e.normalize(),e},t.compare=function(e,i){var s=t.RAW_DATA_CONTAINER,r=i.rawData;e.copyRawDataTo(s);for(var a=0;16>a;++a)if(s[a]!=r[a])return!1;return!0},t.lookAt=function(e,i,s,r){var a,n,o,h=t.RAW_DATA_CONTAINER;o=s.crossProduct(r),o.normalize(),n=o.crossProduct(s),n.normalize(),a=s.clone(),a.normalize(),h[0]=o.x,h[1]=n.x,h[2]=-a.x,h[3]=0,h[4]=o.y,h[5]=n.y,h[6]=-a.y,h[7]=0,h[8]=o.z,h[9]=n.z,h[10]=-a.z,h[11]=0,h[12]=-o.dotProduct(i),h[13]=-n.dotProduct(i),h[14]=a.dotProduct(i),h[15]=1,e.copyRawDataFrom(h)},t.reflection=function(e,s){void 0===s&&(s=null),null===s&&(s=new i);var r=e.a,a=e.b,n=e.c,o=e.d,h=t.RAW_DATA_CONTAINER,l=-2*r*a,p=-2*r*n,d=-2*a*n;return h[0]=1-2*r*r,h[4]=l,h[8]=p,h[12]=-2*r*o,h[1]=l,h[5]=1-2*a*a,h[9]=d,h[13]=-2*a*o,h[2]=p,h[6]=d,h[10]=1-2*n*n,h[14]=-2*n*o,h[3]=0,h[7]=0,h[11]=0,h[15]=1,s.copyRawDataFrom(h),s},t.transformVector=function(e,i,r){void 0===r&&(r=null),r||(r=new s);var a=t.RAW_DATA_CONTAINER;e.copyRawDataTo(a);var n=a[0],o=a[1],h=a[2],l=a[3],p=a[4],d=a[5],u=a[6],c=a[7],_=a[8],y=a[9],g=a[10],f=a[11],m=a[12],b=a[13],w=a[14],v=a[15],x=i.x,P=i.y,D=i.z;return r.x=n*x+p*P+_*D+m,r.y=o*x+d*P+y*D+b,r.z=h*x+u*P+g*D+w,r.w=l*x+c*P+f*D+v,r},t.deltaTransformVector=function(e,i,r){void 0===r&&(r=null),r||(r=new s);var a=t.RAW_DATA_CONTAINER;e.copyRawDataTo(a);var n=a[0],o=a[1],h=a[2],l=a[3],p=a[4],d=a[5],u=a[6],c=a[7],_=a[8],y=a[9],g=a[10],f=a[11],m=i.x,b=i.y,w=i.z;return r.x=n*m+p*b+_*w,r.y=o*m+d*b+y*w,r.z=h*m+u*b+g*w,r.w=l*m+c*b+f*w,r},t.getTranslation=function(t,e){return void 0===e&&(e=null),e||(e=new s),t.copyColumnTo(3,e),e},t.deltaTransformVectors=function(e,i,s){var r=t.RAW_DATA_CONTAINER;e.copyRawDataTo(r);for(var a=r[0],n=r[1],o=r[2],h=(r[3],r[4]),l=r[5],p=r[6],d=(r[7],r[8]),u=r[9],c=r[10],_=(r[11],0),y=i.length,g=0;y>g;g+=3){var f=i[g],m=i[g+1],b=i[g+2];s[_++]=a*f+h*m+d*b,s[_++]=n*f+l*m+u*b,s[_++]=o*f+p*m+c*b}},t.RAW_DATA_CONTAINER=new Array(16),t.CALCULATION_MATRIX=new i,t}();e.exports=r},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Vector3D":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/geom/Matrix3D":[function(t,e){var i=t("awayjs-core/lib/geom/Orientation3D"),s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-core/lib/errors/ArgumentError"),a=function(){function t(t){void 0===t&&(t=null),this.rawData=null!=t&&16==t.length?t.concat():[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return t.prototype.append=function(t){var e=this.rawData[0],i=this.rawData[4],s=this.rawData[8],r=this.rawData[12],a=this.rawData[1],n=this.rawData[5],o=this.rawData[9],h=this.rawData[13],l=this.rawData[2],p=this.rawData[6],d=this.rawData[10],u=this.rawData[14],c=this.rawData[3],_=this.rawData[7],y=this.rawData[11],g=this.rawData[15],f=t.rawData[0],m=t.rawData[4],b=t.rawData[8],w=t.rawData[12],v=t.rawData[1],x=t.rawData[5],P=t.rawData[9],D=t.rawData[13],j=t.rawData[2],C=t.rawData[6],T=t.rawData[10],A=t.rawData[14],S=t.rawData[3],O=t.rawData[7],E=t.rawData[11],M=t.rawData[15];this.rawData[0]=e*f+a*m+l*b+c*w,this.rawData[1]=e*v+a*x+l*P+c*D,this.rawData[2]=e*j+a*C+l*T+c*A,this.rawData[3]=e*S+a*O+l*E+c*M,this.rawData[4]=i*f+n*m+p*b+_*w,this.rawData[5]=i*v+n*x+p*P+_*D,this.rawData[6]=i*j+n*C+p*T+_*A,this.rawData[7]=i*S+n*O+p*E+_*M,this.rawData[8]=s*f+o*m+d*b+y*w,this.rawData[9]=s*v+o*x+d*P+y*D,this.rawData[10]=s*j+o*C+d*T+y*A,this.rawData[11]=s*S+o*O+d*E+y*M,this.rawData[12]=r*f+h*m+u*b+g*w,this.rawData[13]=r*v+h*x+u*P+g*D,this.rawData[14]=r*j+h*C+u*T+g*A,this.rawData[15]=r*S+h*O+u*E+g*M},t.prototype.appendRotation=function(e,i){var s=t.getAxisRotation(i.x,i.y,i.z,e);this.append(s)},t.prototype.appendScale=function(e,i,s){this.append(new t([e,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1]))},t.prototype.appendTranslation=function(t,e,i){this.rawData[12]+=t,this.rawData[13]+=e,this.rawData[14]+=i},t.prototype.clone=function(){return new t(this.rawData.slice(0))},t.prototype.copyColumnFrom=function(t,e){switch(t){case 0:this.rawData[0]=e.x,this.rawData[1]=e.y,this.rawData[2]=e.z,this.rawData[3]=e.w;break;case 1:this.rawData[4]=e.x,this.rawData[5]=e.y,this.rawData[6]=e.z,this.rawData[7]=e.w;break;case 2:this.rawData[8]=e.x,this.rawData[9]=e.y,this.rawData[10]=e.z,this.rawData[11]=e.w;break;case 3:this.rawData[12]=e.x,this.rawData[13]=e.y,this.rawData[14]=e.z,this.rawData[15]=e.w;break;default:throw new r("ArgumentError, Column "+t+" out of bounds [0, ..., 3]")}},t.prototype.copyColumnTo=function(t,e){switch(t){case 0:e.x=this.rawData[0],e.y=this.rawData[1],e.z=this.rawData[2],e.w=this.rawData[3];break;case 1:e.x=this.rawData[4],e.y=this.rawData[5],e.z=this.rawData[6],e.w=this.rawData[7];break;case 2:e.x=this.rawData[8],e.y=this.rawData[9],e.z=this.rawData[10],e.w=this.rawData[11];break;case 3:e.x=this.rawData[12],e.y=this.rawData[13],e.z=this.rawData[14],e.w=this.rawData[15];break;default:throw new r("ArgumentError, Column "+t+" out of bounds [0, ..., 3]")}},t.prototype.copyFrom=function(t){for(var e=t.rawData.length,i=0;e>i;i++)this.rawData[i]=t.rawData[i]},t.prototype.copyRawDataFrom=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1),i&&this.transpose();for(var s=t.length-e,r=0;s>r;r++)this.rawData[r]=t[r+e];i&&this.transpose()},t.prototype.copyRawDataTo=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!1),i&&this.transpose();for(var s=this.rawData.length,r=0;s>r;r++)t[r+e]=this.rawData[r];i&&this.transpose()},t.prototype.copyRowFrom=function(t,e){switch(t){case 0:this.rawData[0]=e.x,this.rawData[4]=e.y,this.rawData[8]=e.z,this.rawData[12]=e.w;break;case 1:this.rawData[1]=e.x,this.rawData[5]=e.y,this.rawData[9]=e.z,this.rawData[13]=e.w;break;case 2:this.rawData[2]=e.x,this.rawData[6]=e.y,this.rawData[10]=e.z,this.rawData[14]=e.w;break;case 3:this.rawData[3]=e.x,this.rawData[7]=e.y,this.rawData[11]=e.z,this.rawData[15]=e.w;break;default:throw new r("ArgumentError, Row "+t+" out of bounds [0, ..., 3]")}},t.prototype.copyRowTo=function(t,e){switch(t){case 0:e.x=this.rawData[0],e.y=this.rawData[4],e.z=this.rawData[8],e.w=this.rawData[12];break;case 1:e.x=this.rawData[1],e.y=this.rawData[5],e.z=this.rawData[9],e.w=this.rawData[13];break;case 2:e.x=this.rawData[2],e.y=this.rawData[6],e.z=this.rawData[10],e.w=this.rawData[14];break;case 3:e.x=this.rawData[3],e.y=this.rawData[7],e.z=this.rawData[11],e.w=this.rawData[15];break;default:throw new r("ArgumentError, Row "+t+" out of bounds [0, ..., 3]")}},t.prototype.copyToMatrix3D=function(t){t.rawData=this.rawData.slice(0)},t.prototype.decompose=function(t){void 0===t&&(t="eulerAngles");var e=[],r=this.clone(),a=r.rawData,n=new s(a[12],a[13],a[14]);a[12]=0,a[13]=0,a[14]=0;var o=new s;o.x=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]),o.y=Math.sqrt(a[4]*a[4]+a[5]*a[5]+a[6]*a[6]),o.z=Math.sqrt(a[8]*a[8]+a[9]*a[9]+a[10]*a[10]),a[0]*(a[5]*a[10]-a[6]*a[9])-a[1]*(a[4]*a[10]-a[6]*a[8])+a[2]*(a[4]*a[9]-a[5]*a[8])<0&&(o.z=-o.z),a[0]/=o.x,a[1]/=o.x,a[2]/=o.x,a[4]/=o.y,a[5]/=o.y,a[6]/=o.y,a[8]/=o.z,a[9]/=o.z,a[10]/=o.z;var h=new s;switch(t){case i.AXIS_ANGLE:h.w=Math.acos((a[0]+a[5]+a[10]-1)/2);var l=Math.sqrt((a[6]-a[9])*(a[6]-a[9])+(a[8]-a[2])*(a[8]-a[2])+(a[1]-a[4])*(a[1]-a[4]));h.x=(a[6]-a[9])/l,h.y=(a[8]-a[2])/l,h.z=(a[1]-a[4])/l;break;case i.QUATERNION:var p=a[0]+a[5]+a[10];p>0?(h.w=Math.sqrt(1+p)/2,h.x=(a[6]-a[9])/(4*h.w),h.y=(a[8]-a[2])/(4*h.w),h.z=(a[1]-a[4])/(4*h.w)):a[0]>a[5]&&a[0]>a[10]?(h.x=Math.sqrt(1+a[0]-a[5]-a[10])/2,h.w=(a[6]-a[9])/(4*h.x),h.y=(a[1]+a[4])/(4*h.x),h.z=(a[8]+a[2])/(4*h.x)):a[5]>a[10]?(h.y=Math.sqrt(1+a[5]-a[0]-a[10])/2,h.x=(a[1]+a[4])/(4*h.y),h.w=(a[8]-a[2])/(4*h.y),h.z=(a[6]+a[9])/(4*h.y)):(h.z=Math.sqrt(1+a[10]-a[0]-a[5])/2,h.x=(a[8]+a[2])/(4*h.z),h.y=(a[6]+a[9])/(4*h.z),h.w=(a[1]-a[4])/(4*h.z));break;case i.EULER_ANGLES:h.y=Math.asin(-a[2]),1!=a[2]&&-1!=a[2]?(h.x=Math.atan2(a[6],a[10]),h.z=Math.atan2(a[1],a[0])):(h.z=0,h.x=Math.atan2(a[4],a[5]))}return e.push(n),e.push(h),e.push(o),e},t.prototype.deltaTransformVector=function(t){var e=t.x,i=t.y,r=t.z;return new s(e*this.rawData[0]+i*this.rawData[4]+r*this.rawData[8],e*this.rawData[1]+i*this.rawData[5]+r*this.rawData[9],e*this.rawData[2]+i*this.rawData[6]+r*this.rawData[10],e*this.rawData[3]+i*this.rawData[7]+r*this.rawData[11])},t.prototype.identity=function(){this.rawData=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},t.interpolate=function(e,i,s){for(var r=new t,a=0;16>a;++a)r.rawData[a]=e.rawData[a]+(i.rawData[a]-e.rawData[a])*s;return r},t.prototype.interpolateTo=function(t,e){for(var i=0;16>i;++i)this.rawData[i]=this.rawData[i]+(t.rawData[i]-this.rawData[i])*e},t.prototype.invert=function(){var t=this.determinant,e=Math.abs(t)>1e-11;if(e){t=1/t;var i=this.rawData[0],s=this.rawData[4],r=this.rawData[8],a=this.rawData[12],n=this.rawData[1],o=this.rawData[5],h=this.rawData[9],l=this.rawData[13],p=this.rawData[2],d=this.rawData[6],u=this.rawData[10],c=this.rawData[14],_=this.rawData[3],y=this.rawData[7],g=this.rawData[11],f=this.rawData[15];this.rawData[0]=t*(o*(u*f-c*g)-h*(d*f-c*y)+l*(d*g-u*y)),this.rawData[1]=-t*(n*(u*f-c*g)-h*(p*f-c*_)+l*(p*g-u*_)),this.rawData[2]=t*(n*(d*f-c*y)-o*(p*f-c*_)+l*(p*y-d*_)),this.rawData[3]=-t*(n*(d*g-u*y)-o*(p*g-u*_)+h*(p*y-d*_)),this.rawData[4]=-t*(s*(u*f-c*g)-r*(d*f-c*y)+a*(d*g-u*y)),this.rawData[5]=t*(i*(u*f-c*g)-r*(p*f-c*_)+a*(p*g-u*_)),this.rawData[6]=-t*(i*(d*f-c*y)-s*(p*f-c*_)+a*(p*y-d*_)),this.rawData[7]=t*(i*(d*g-u*y)-s*(p*g-u*_)+r*(p*y-d*_)),this.rawData[8]=t*(s*(h*f-l*g)-r*(o*f-l*y)+a*(o*g-h*y)),this.rawData[9]=-t*(i*(h*f-l*g)-r*(n*f-l*_)+a*(n*g-h*_)),this.rawData[10]=t*(i*(o*f-l*y)-s*(n*f-l*_)+a*(n*y-o*_)),this.rawData[11]=-t*(i*(o*g-h*y)-s*(n*g-h*_)+r*(n*y-o*_)),this.rawData[12]=-t*(s*(h*c-l*u)-r*(o*c-l*d)+a*(o*u-h*d)),this.rawData[13]=t*(i*(h*c-l*u)-r*(n*c-l*p)+a*(n*u-h*p)),this.rawData[14]=-t*(i*(o*c-l*d)-s*(n*c-l*p)+a*(n*d-o*p)),this.rawData[15]=t*(i*(o*u-h*d)-s*(n*u-h*p)+r*(n*d-o*p))}return e},t.prototype.prepend=function(t){var e=t.rawData[0],i=t.rawData[4],s=t.rawData[8],r=t.rawData[12],a=t.rawData[1],n=t.rawData[5],o=t.rawData[9],h=t.rawData[13],l=t.rawData[2],p=t.rawData[6],d=t.rawData[10],u=t.rawData[14],c=t.rawData[3],_=t.rawData[7],y=t.rawData[11],g=t.rawData[15],f=this.rawData[0],m=this.rawData[4],b=this.rawData[8],w=this.rawData[12],v=this.rawData[1],x=this.rawData[5],P=this.rawData[9],D=this.rawData[13],j=this.rawData[2],C=this.rawData[6],T=this.rawData[10],A=this.rawData[14],S=this.rawData[3],O=this.rawData[7],E=this.rawData[11],M=this.rawData[15];this.rawData[0]=e*f+a*m+l*b+c*w,this.rawData[1]=e*v+a*x+l*P+c*D,this.rawData[2]=e*j+a*C+l*T+c*A,this.rawData[3]=e*S+a*O+l*E+c*M,this.rawData[4]=i*f+n*m+p*b+_*w,this.rawData[5]=i*v+n*x+p*P+_*D,this.rawData[6]=i*j+n*C+p*T+_*A,this.rawData[7]=i*S+n*O+p*E+_*M,this.rawData[8]=s*f+o*m+d*b+y*w,this.rawData[9]=s*v+o*x+d*P+y*D,this.rawData[10]=s*j+o*C+d*T+y*A,this.rawData[11]=s*S+o*O+d*E+y*M,this.rawData[12]=r*f+h*m+u*b+g*w,this.rawData[13]=r*v+h*x+u*P+g*D,this.rawData[14]=r*j+h*C+u*T+g*A,this.rawData[15]=r*S+h*O+u*E+g*M},t.prototype.prependRotation=function(e,i){var s=t.getAxisRotation(i.x,i.y,i.z,e);this.prepend(s)},t.prototype.prependScale=function(e,i,s){this.prepend(new t([e,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1]))},t.prototype.prependTranslation=function(e,i,r){var a=new t;a.position=new s(e,i,r),this.prepend(a)},t.prototype.recompose=function(e){if(e.length<3)return!1;this.identity(),this.appendScale(e[2].x,e[2].y,e[2].z);var i;return i=-e[1].x,this.append(new t([1,0,0,0,0,Math.cos(i),-Math.sin(i),0,0,Math.sin(i),Math.cos(i),0,0,0,0,0])),i=-e[1].y,this.append(new t([Math.cos(i),0,Math.sin(i),0,0,1,0,0,-Math.sin(i),0,Math.cos(i),0,0,0,0,0])),i=-e[1].z,this.append(new t([Math.cos(i),-Math.sin(i),0,0,Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,0])),this.position=e[0],this.rawData[15]=1,!0},t.prototype.transformVector=function(t){var e=t.x,i=t.y,r=t.z;return new s(e*this.rawData[0]+i*this.rawData[4]+r*this.rawData[8]+this.rawData[12],e*this.rawData[1]+i*this.rawData[5]+r*this.rawData[9]+this.rawData[13],e*this.rawData[2]+i*this.rawData[6]+r*this.rawData[10]+this.rawData[14],e*this.rawData[3]+i*this.rawData[7]+r*this.rawData[11]+this.rawData[15])},t.prototype.transformVectors=function(t,e){for(var i=0,s=0,r=0,a=0;i+3<=t.length;)s=t[i],r=t[i+1],a=t[i+2],e[i]=s*this.rawData[0]+r*this.rawData[4]+a*this.rawData[8]+this.rawData[12],e[i+1]=s*this.rawData[1]+r*this.rawData[5]+a*this.rawData[9]+this.rawData[13],e[i+2]=s*this.rawData[2]+r*this.rawData[6]+a*this.rawData[10]+this.rawData[14],i+=3},t.prototype.transpose=function(){var t=this.rawData.slice(0);this.rawData[1]=t[4],this.rawData[2]=t[8],this.rawData[3]=t[12],this.rawData[4]=t[1],this.rawData[6]=t[9],this.rawData[7]=t[13],this.rawData[8]=t[2],this.rawData[9]=t[6],this.rawData[11]=t[14],this.rawData[12]=t[3],this.rawData[13]=t[7],this.rawData[14]=t[11]},t.getAxisRotation=function(e,i,s,r){var a,n,o=new t,h=r*(Math.PI/180),l=Math.cos(h),p=Math.sin(h),d=1-l;return o.rawData[0]=l+e*e*d,o.rawData[5]=l+i*i*d,o.rawData[10]=l+s*s*d,a=e*i*d,n=s*p,o.rawData[1]=a+n,o.rawData[4]=a-n,a=e*s*d,n=i*p,o.rawData[8]=a+n,o.rawData[2]=a-n,a=i*s*d,n=e*p,o.rawData[9]=a-n,o.rawData[6]=a+n,o},Object.defineProperty(t.prototype,"determinant",{get:function(){return(this.rawData[0]*this.rawData[5]-this.rawData[4]*this.rawData[1])*(this.rawData[10]*this.rawData[15]-this.rawData[14]*this.rawData[11])-(this.rawData[0]*this.rawData[9]-this.rawData[8]*this.rawData[1])*(this.rawData[6]*this.rawData[15]-this.rawData[14]*this.rawData[7])+(this.rawData[0]*this.rawData[13]-this.rawData[12]*this.rawData[1])*(this.rawData[6]*this.rawData[11]-this.rawData[10]*this.rawData[7])+(this.rawData[4]*this.rawData[9]-this.rawData[8]*this.rawData[5])*(this.rawData[2]*this.rawData[15]-this.rawData[14]*this.rawData[3])-(this.rawData[4]*this.rawData[13]-this.rawData[12]*this.rawData[5])*(this.rawData[2]*this.rawData[11]-this.rawData[10]*this.rawData[3])+(this.rawData[8]*this.rawData[13]-this.rawData[12]*this.rawData[9])*(this.rawData[2]*this.rawData[7]-this.rawData[6]*this.rawData[3])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return new s(this.rawData[12],this.rawData[13],this.rawData[14])},set:function(t){this.rawData[12]=t.x,this.rawData[13]=t.y,this.rawData[14]=t.z},enumerable:!0,configurable:!0}),t.prototype.toFixed=function(t){var e=Math.pow(10,t);return"matrix3d("+Math.round(this.rawData[0]*e)/e+","+Math.round(this.rawData[1]*e)/e+","+Math.round(this.rawData[2]*e)/e+","+Math.round(this.rawData[3]*e)/e+","+Math.round(this.rawData[4]*e)/e+","+Math.round(this.rawData[5]*e)/e+","+Math.round(this.rawData[6]*e)/e+","+Math.round(this.rawData[7]*e)/e+","+Math.round(this.rawData[8]*e)/e+","+Math.round(this.rawData[9]*e)/e+","+Math.round(this.rawData[10]*e)/e+","+Math.round(this.rawData[11]*e)/e+","+Math.round(this.rawData[12]*e)/e+","+Math.round(this.rawData[13]*e)/e+","+Math.round(this.rawData[14]*e)/e+","+Math.round(this.rawData[15]*e)/e+")"},t.prototype.toString=function(){return"matrix3d("+Math.round(1e3*this.rawData[0])/1e3+","+Math.round(1e3*this.rawData[1])/1e3+","+Math.round(1e3*this.rawData[2])/1e3+","+Math.round(1e3*this.rawData[3])/1e3+","+Math.round(1e3*this.rawData[4])/1e3+","+Math.round(1e3*this.rawData[5])/1e3+","+Math.round(1e3*this.rawData[6])/1e3+","+Math.round(1e3*this.rawData[7])/1e3+","+Math.round(1e3*this.rawData[8])/1e3+","+Math.round(1e3*this.rawData[9])/1e3+","+Math.round(1e3*this.rawData[10])/1e3+","+Math.round(1e3*this.rawData[11])/1e3+","+Math.round(1e3*this.rawData[12])/1e3+","+Math.round(1e3*this.rawData[13])/1e3+","+Math.round(1e3*this.rawData[14])/1e3+","+Math.round(1e3*this.rawData[15])/1e3+")"},t}();e.exports=a},{"awayjs-core/lib/errors/ArgumentError":void 0,"awayjs-core/lib/geom/Orientation3D":void 0,"awayjs-core/lib/geom/Vector3D":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/geom/Matrix":[function(t,e){var i=t("awayjs-core/lib/geom/Point"),s=t("awayjs-core/lib/errors/ArgumentError"),r=function(){function t(t,e,i,s,r,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===r&&(r=0),void 0===a&&(a=0),this.a=t,this.b=e,this.c=i,this.d=s,this.tx=r,this.ty=a}return t.prototype.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.prototype.concat=function(t){var e=this.a*t.a+this.b*t.c;this.b=this.a*t.b+this.b*t.d,this.a=e;var i=this.c*t.a+this.d*t.c;this.d=this.c*t.b+this.d*t.d,this.c=i;var s=this.tx*t.a+this.ty*t.c+t.tx;this.ty=this.tx*t.b+this.ty*t.d+t.ty,this.tx=s},t.prototype.copyColumnFrom=function(t,e){if(t>2)throw"Column "+t+" out of bounds (2)";0==t?(this.a=e.x,this.c=e.y):1==t?(this.b=e.x,this.d=e.y):(this.tx=e.x,this.ty=e.y)},t.prototype.copyColumnTo=function(t,e){if(t>2)throw new s("ArgumentError, Column "+t+" out of bounds [0, ..., 2]");0==t?(e.x=this.a,e.y=this.c,e.z=0):1==t?(e.x=this.b,e.y=this.d,e.z=0):(e.x=this.tx,e.y=this.ty,e.z=1)},t.prototype.copyFrom=function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty},t.prototype.copyRowFrom=function(t,e){if(t>2)throw new s("ArgumentError, Row "+t+" out of bounds [0, ..., 2]");0==t?(this.a=e.x,this.c=e.y):1==t?(this.b=e.x,this.d=e.y):(this.tx=e.x,this.ty=e.y)},t.prototype.copyRowTo=function(t,e){if(t>2)throw new s("ArgumentError, Row "+t+" out of bounds [0, ..., 2]");0==t?(e.x=this.a,e.y=this.b,e.z=this.tx):1==t?(e.x=this.c,e.y=this.d,e.z=this.ty):e.setTo(0,0,1)},t.prototype.createBox=function(t,e,i,s,r){void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0),this.a=t,this.d=e,this.b=i,this.tx=s,this.ty=r},t.prototype.createGradientBox=function(t,e,i,s,r){if(void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0),this.a=t/1638.4,this.d=e/1638.4,0!=i){var a=Math.cos(i),n=Math.sin(i);this.b=n*this.d,this.c=-n*this.a,this.a*=a,this.d*=a}else this.b=this.c=0;this.tx=s+t/2,this.ty=r+e/2},t.prototype.deltaTransformPoint=function(t){return new i(t.x*this.a+t.y*this.c,t.x*this.b+t.y*this.d)},t.prototype.identity=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},t.prototype.invert=function(){var t=this.a*this.d-this.b*this.c;if(0==t)this.a=this.b=this.c=this.d=0,this.tx=-this.tx,this.ty=-this.ty;else{t=1/t;var e=this.d*t;this.d=this.a*t,this.a=e,this.b*=-t,this.c*=-t;var i=-this.a*this.tx-this.c*this.ty;this.ty=-this.b*this.tx-this.d*this.ty,this.tx=i}},t.prototype.multiply=function(e){var i=new t;return i.a=this.a*e.a+this.b*e.c,i.b=this.a*e.b+this.b*e.d,i.c=this.c*e.a+this.d*e.c,i.d=this.c*e.b+this.d*e.d,i.tx=this.tx*e.a+this.ty*e.c+e.tx,i.ty=this.tx*e.b+this.ty*e.d+e.ty,i},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),s=this.a*e-this.b*i;this.b=this.a*i+this.b*e,this.a=s;var r=this.c*e-this.d*i;this.d=this.c*i+this.d*e,this.c=r;var a=this.tx*e-this.ty*i;this.ty=this.tx*i+this.ty*e,this.tx=a},t.prototype.scale=function(t,e){this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.tx*=t,this.ty*=e},t.prototype.setTo=function(t,e,i,s,r,a){this.a=t,this.b=e,this.c=i,this.d=s,this.tx=r,this.ty=a},t.prototype.toString=function(){return"[Matrix] (a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},t.prototype.transformPoint=function(t){return new i(t.x*this.a+t.y*this.c+this.tx,t.x*this.b+t.y*this.d+this.ty)},t.prototype.translate=function(t,e){this.tx+=t,this.ty+=e},t}();e.exports=r},{"awayjs-core/lib/errors/ArgumentError":void 0,"awayjs-core/lib/geom/Point":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/geom/Orientation3D":[function(t,e){var i=function(){function t(){}return t.AXIS_ANGLE="axisAngle",t.EULER_ANGLES="eulerAngles",t.QUATERNION="quaternion",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/geom/PerspectiveProjection":[function(t,e){var i=function(){function t(){}return t.prototype.toMatrix3D=function(){return this._matrix3D},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/geom/Plane3D":[function(t,e){var i=t("awayjs-core/lib/geom/PlaneClassification"),s=function(){function t(e,i,s,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0),this.a=e,this.b=i,this.c=s,this.d=r,this._iAlignment=0==e&&0==i?t.ALIGN_XY_AXIS:0==i&&0==s?t.ALIGN_YZ_AXIS:0==e&&0==s?t.ALIGN_XZ_AXIS:t.ALIGN_ANY}return t.prototype.fromPoints=function(e,i,s){var r=i.x-e.x,a=i.y-e.y,n=i.z-e.z,o=s.x-e.x,h=s.y-e.y,l=s.z-e.z;this.a=a*l-n*h,this.b=n*o-r*l,this.c=r*h-a*o,this.d=this.a*e.x+this.b*e.y+this.c*e.z,this._iAlignment=0==this.a&&0==this.b?t.ALIGN_XY_AXIS:0==this.b&&0==this.c?t.ALIGN_YZ_AXIS:0==this.a&&0==this.c?t.ALIGN_XZ_AXIS:t.ALIGN_ANY},t.prototype.fromNormalAndPoint=function(e,i){this.a=e.x,this.b=e.y,this.c=e.z,this.d=this.a*i.x+this.b*i.y+this.c*i.z,this._iAlignment=0==this.a&&0==this.b?t.ALIGN_XY_AXIS:0==this.b&&0==this.c?t.ALIGN_YZ_AXIS:0==this.a&&0==this.c?t.ALIGN_XZ_AXIS:t.ALIGN_ANY},t.prototype.normalize=function(){var t=1/Math.sqrt(this.a*this.a+this.b*this.b+this.c*this.c);return this.a*=t,this.b*=t,this.c*=t,this.d*=t,this},t.prototype.distance=function(e){return this._iAlignment==t.ALIGN_YZ_AXIS?this.a*e.x-this.d:this._iAlignment==t.ALIGN_XZ_AXIS?this.b*e.y-this.d:this._iAlignment==t.ALIGN_XY_AXIS?this.c*e.z-this.d:this.a*e.x+this.b*e.y+this.c*e.z-this.d},t.prototype.classifyPoint=function(e,s){if(void 0===s&&(s=.01),this.d!=this.d)return i.FRONT;var r;return r=this._iAlignment==t.ALIGN_YZ_AXIS?this.a*e.x-this.d:this._iAlignment==t.ALIGN_XZ_AXIS?this.b*e.y-this.d:this._iAlignment==t.ALIGN_XY_AXIS?this.c*e.z-this.d:this.a*e.x+this.b*e.y+this.c*e.z-this.d,-s>r?i.BACK:r>s?i.FRONT:i.INTERSECT},t.prototype.toString=function(){return"Plane3D [a:"+this.a+", b:"+this.b+", c:"+this.c+", d:"+this.d+"]"},t.ALIGN_ANY=0,t.ALIGN_XY_AXIS=1,t.ALIGN_YZ_AXIS=2,t.ALIGN_XZ_AXIS=3,t}();e.exports=s},{"awayjs-core/lib/geom/PlaneClassification":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/geom/PlaneClassification":[function(t,e){var i=function(){function t(){}return t.BACK=0,t.FRONT=1,t.IN=0,t.OUT=1,t.INTERSECT=2,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/geom/Point":[function(t,e){var i=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(){},t.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},t.prototype.normalize=function(t){if(void 0===t&&(t=1),0!=this.length){var e=t/this.length;return this.x*=e,void(this.y*=e)}throw"Cannot divide by zero length."},t.prototype.offset=function(t,e){this.x+=t,this.y+=e},t.prototype.setTo=function(){},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.toString=function(){return"[Point] (x="+this.x+", y="+this.y+")"},t.distance=function(t,e){var i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)},t.interpolate=function(e,i,s){return new t(i.x+(e.x-i.x)*s,i.y+(e.y-i.y)*s)},t.polar=function(e,i){return new t(e*Math.cos(i),e*Math.sin(i))},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/geom/PoissonLookup":[function(t,e){var i=function(){function t(){}return t.initDistributions=function(){this._distributions=new Array,this._distributions[0]=new Array(.3082841,.4320919),this._distributions[1]=new Array(.3082841,.4320919,-.2274942,-.6640266),this._distributions[2]=new Array(.8742689,.0009265686,-.6864116,-.5536607,-.2325206,.7678371),this._distributions[3]=new Array(.3913446,-.7084417,-.7511101,-.5935929,-.2323436,.5320091,.8435315,.5035911),this._distributions[4]=new Array(.2122471,-.5771395,-.8543506,-.1763534,.5189021,.8323698,-.3616908,.5865368,.9523004,-.04948437),this._distributions[5]=new Array(.5791035,.3496495,.2959551,-.6006749,-.2419119,-.06879545,-.7403072,.6110353,-.04555973,.8059174,-.5275017,-.737129),this._distributions[6]=new Array(.06941478,.8519508,-.7441907,.2426432,.6439992,-.2405252,-.1007523,-.2327587,-.6427067,-.7248485,.8050759,.5492936,.3573822,-.8824506),this._distributions[7]=new Array(.8509863,.4452587,-.09507271,.2073005,.1706571,-.6434793,.8029777,-.2718274,-.4401725,.8196304,.2715359,.8598521,-.8121575,-.006447683,-.6486837,-.7237598),this._distributions[8]=new Array(.6951686,-.2680728,-.04933243,.3710589,.6592212,.3661054,-.01579228,-.6909603,-.3275101,-.1756866,.3811549,.9218544,-.216032,.9755028,-.7065172,.3355389,-.6579109,-.6798355),this._distributions[9]=new Array(.6181276,-.09790418,-.2537868,-.5570995,-.1964931,.3459414,.3474613,-.8885581,.5135743,.5753114,-.9549091,.1480672,-.8711916,-.4293123,-.6928071,.6190156,-.13369,.8892705,.0548224,-.1246777),this._distributions[10]=new Array(.4853027,-.5080479,-.1331675,-.506597,.139575,.01316885,.803486,-.07568797,.5240274,.4883182,-.4334005,.1207938,-.7794577,-.3985141,.1576432,-.9861221,-.3712867,.6959021,.1517378,.9847429,-.9762396,.1661073),this._distributions[11]=new Array(-.2790166,-.01252619,.3389016,.3921154,.2408341,-.313211,-.8151779,-.3898362,-.6347761,.3486495,.09471484,-.7722448,-.1385674,.6364574,.2456331,.9295807,-.3864306,-.8247881,.6111673,-.7164014,.8287669,.05466961,.837706,.5415626),this._distributions[12]=new Array(.056417,.3185693,-.8245888,.1882799,.8575996,.1136829,.1070375,.875332,.4076743,-.06000621,-.4311306,.7239349,.2677574,-.538472,-.08486642,-.2083647,-.888989,-.3906443,-.4768958,-.6664082,.09334993,-.9861541,.808736,-.455949,.5889823,.7660807),this._distributions[13]=new Array(-.2681346,-.3955857,-.1315102,-.8852947,-.5143692,.09551838,.4344836,-.546945,-.8620899,-.3813288,.1650431,.02034803,-.1543657,.3842218,-.828457,.5376903,-.6145,-.7818927,-.2639062,.8784655,.1912684,.9720125,.3135219,.5224229,.7850655,.4592297,.7465045,-.1368916),this._distributions[14]=new Array(.4241029,.695281,.150511,-.02304107,-.2482675,.9120338,.8057325,.2622084,-.2445909,.2765962,.8588713,-.1772072,.3117845,-.4385471,-.3923851,-.3298936,-.1751254,-.7405846,.6926506,-.684163,-.9304563,-.3254691,-.8533293,.1523024,.2510415,-.917345,-.6239773,-.7105472,-.6104624,.6041355),this._distributions[15]=new Array(.5844554,.06651045,.1343258,.6756578,.3799674,-.6301104,.5590436,.7940555,.09574714,.02262517,.8697868,.393301,.003945862,-.421735,.9043913,-.2432393,-.4844007,.7190998,-.3201078,.2972371,-.3852352,-.6341155,-.5413069,-.09223081,-.8468984,-.5126905,.004156174,-.8633173,-.9681889,-.03305046,-.846509,.4414353),this._distributions[16]=new Array(.4506488,.657668,.4621297,.07441051,-.2782125,.6201044,.9750003,.09110117,.1019436,.2986514,.03457398,.9631706,.542098,-.5505635,.8675668,.4938077,-.5414361,.2655292,-.7941836,.6003053,-.09847672,-.1001604,-.9316511,-.08572888,.07286467,-.611899,-.5232627,-.4082253,-.5481608,-.827938,-.1551939,-.9621193,.9220031,-.3315949),this._distributions[17]=new Array(.197908,-.4697656,-.4474689,-.3428435,.8529873,-.2228634,.6022478,-.5469642,.2545276,-.931133,-.1507547,-.7855865,-.07606658,.1011628,.3046715,.2785755,.4698432,-.1064076,.6831254,.4152522,.1374381,.8363233,-.2166121,.6682042,.5511393,.7996449,-.4278994,.28836,-.8875198,.2181732,-.8772842,-.2818254,-.7000262,.5762185,-.6062385,-.7439126),this._distributions[18]=new Array(.6645703,-.05678739,.5720971,.4533803,-.07660709,.08802763,.5163431,-.4426552,.1163455,-.3404382,-.4004807,-.5046007,.2932099,-.8201418,-.5322125,.03834766,-.1490209,-.8817304,-.8000439,-.3509448,.5260983,.8421043,.1197811,.6963812,.9498612,.3122156,-.9285746,.02120355,-.6670724,.7217396,.9155889,-.3510147,-.271941,.4727852,.318879,.1634057,-.2686755,.9253026),this._distributions[19]=new Array(.5064292,.422527,.8935515,-.06610427,.1199719,.175568,.403388,-.2003276,.1657927,.8154403,.9301245,.2929218,-.1644068,.6201534,.7113559,-.6589743,-.3364046,-.1799502,.02109996,-.392765,-.382213,.3219992,-.9201946,.1207967,-.726185,.4291916,-.7443482,-.2480059,-.5147594,.7418784,.1935272,-.7406143,-.3643523,-.5559214,-.7147766,-.6326278,-.2524151,-.9096627,.5161405,.7908453),this._distributions[20]=new Array(.7921003,-.3032096,.5992879,-.009052323,.2538549,-.1872749,.7053444,.3677175,.5417761,-.8170255,.9749611,.1210478,.1969143,-.6117041,-.1824499,-.4634196,-.1181338,-.8668742,-.3050112,-.1352596,-.4409327,-.7082354,-.03225285,.1171548,.3113096,.3250439,-.8166144,-.463995,-.01014475,.4715334,-.6868284,.05091889,-.4011163,.2717285,-.06756835,.8307694,-.7938535,.4352129,-.4663842,.7165329,.559729,.8093995),this._distributions[21]=new Array(.07832243,.426151,-.3856795,.5799953,.01970797,.06706189,.4822682,.3014512,-.1532982,.87485,-.4959527,.07888043,.260601,-.2304784,.4996209,.7167382,.585986,-.04265174,-.7679967,.5509416,-.9041753,.1802134,-.8407655,-.4442826,-.2058258,-.2636995,-.4984115,-.5928579,.2926032,-.7886473,-.06933882,-.621177,.578115,-.4813387,.8981777,-.3291056,.1942733,.9255584,.8084362,.5066984,.9920095,.03103104,-.2403206,-.9389018),this._distributions[22]=new Array(-.5691095,.1014316,-.7788262,.384012,-.8253665,-.1645582,-.1830993,.002997211,-.2555013,-.4177977,-.6640869,-.4794711,-.2351242,.5850121,.02436554,.2825883,.006061143,-.8200245,.1618791,-.3063331,-.3765897,-.7249815,.6092919,-.6769328,-.5956934,.6957655,.5383642,.4522677,-.1489165,.9125596,.4167473,.1335986,.1898309,.5874342,.2288171,.9624356,.7540846,-.07672304,.8986252,.2788797,.3555991,-.9262139,.8454325,-.4027667,.4945236,-.2935512),this._distributions[23]=new Array(-.4481403,-.3758374,-.8877251,.08739938,.05015831,-.1339983,-.4070427,-.8534173,.1019274,-.5503222,-.445998,.1997541,-.8686263,-.2788867,-.7695944,-.6033704,-.05515742,-.885711,-.7714347,.5790485,.3466263,-.8799297,.4487582,-.5321087,-.2461368,.6053771,-.05568117,.2457351,-.4668669,.8523816,.8103387,-.4255538,.4054182,-.175663,-.2802011,-.08920153,.2665959,.382935,.555679,.1621837,.105246,.8420411,.6921161,.6902903,.880946,.2483067,.9699264,-.1021767),this._distributions[24]=new Array(-.1703323,-.3119385,.2916039,-.2988263,-.008472982,-.9277695,-.7730271,-.3277904,.3440474,-.6815342,-.2910278,.03461745,-.6764899,-.657078,-.3505501,-.7311988,-.03478927,.3258755,-.6048835,.159423,.2035525,.02212214,.5116573,.2226856,.6664805,-.2500189,.7147882,-.6609634,.03030632,-.5763278,-.2516585,.6116219,-.9434413,-.0116792,.9061816,.2491155,.182867,.6076167,.286593,.9485695,-.5992439,.6970096,-.2082874,.9416641,.9880044,-.1541709,-.9122881,.331555,.7324886,.6725098),this._distributions[25]=new Array(.3869598,-.04974834,.7168844,-.0693711,-.07166742,.1725325,.4599592,.3232779,.5872094,-.4198674,.2442266,-.625667,.1254557,.4500048,-.2290154,-.1803567,.890583,.3373493,.1256081,.7853789,-.2676466,.5305805,-.7063224,.252168,-.3989835,.1189921,.09617215,-.2451447,.6302541,.6085876,.9380925,-.3234899,.5086241,-.8573482,.03576187,-.9876697,-.0876712,-.6365195,-.5276513,.823456,-.6935764,-.2240411,-.5212318,-.5383121,-.2116208,.9639363,-.9840096,.02743555,-.3991577,-.8994547,-.7830126,.614068),this._distributions[26]=new Array(-.8366601,.4464895,-.5917366,-.02073906,-.9845258,.1635625,-.3097973,.4379579,-.5478154,.7173221,-.1685888,.9261969,.01503595,.6046097,.4452421,.5449086,.0315687,.1944619,.3753404,.8688548,.4143643,.1396648,.8711032,.4304703,.7328773,.1461501,.6374492,-.3521495,.145613,-.1341466,.9040975,-.135123,-.7839059,-.5450199,-.516019,-.3320859,-.206158,-.4431106,-.9703014,-.2368356,-.2473119,-.0864351,.2130725,-.4604077,-.003726701,-.7122303,-.4072131,-.6833169,.1632999,-.9776646,.4686888,-.680495,-.2293511,-.9509777),this._distributions[27]=new Array(.107311,-.1311369,-.4194764,-.3148777,.6171439,-.2745973,.2796618,.1937153,-.09106886,.4180236,.6044006,.05577846,.02927299,-.6738263,-.2580845,.1179939,-.09023564,-.3830024,.3570953,-.5000587,.81591,-.5518309,.9300217,-.1257987,.4904627,-.8381903,-.3163182,-.8632009,.1137595,-.9875998,.8390043,.3538185,.2149114,.4993694,.5191584,.3833552,.5002763,.7061465,-.2567276,.9068756,-.5197366,.3467845,.03668867,.9734009,-.5347553,.66747,-.9028882,.1023768,-.8967977,.412834,-.5821944,.0426479,-.8032165,-.2397038,-.5597343,-.6358021),this._distributions[28]=new Array(-.6562496,-.1781036,-.9301494,.1185208,-.3861143,-.4153562,-.1560799,-.1099607,-.5587025,.395218,-.5322112,-.699701,-.5008639,.08726846,-.970524,-.1963461,-.813577,-.5185111,-.1644458,.298,-.3216791,.639982,.3315373,.3339162,.2383235,-.00105722,.1137828,.5450742,-.01899921,.8798413,.2849685,.8255596,.6974412,.2123175,.7588523,.5470437,.5102502,-.1687844,.5853448,.8033476,.2590716,-.5262504,.5607718,-.6342825,.8666443,-.1491841,.8341052,-.4935003,-.1568441,-.6634066,.2512113,-.8769391,-.2559827,-.9572457,-.01928852,-.3966542,-.750667,.6409678),this._distributions[29]=new Array(.3454786,-.04837726,.2649553,.2406852,.5599093,-.3839145,-.1111814,-.05502108,.7586042,-.05818377,.2519488,-.4665135,-.1264972,.2602723,-.08766216,-.3671907,.6428129,.3999204,-.6105871,-.1246869,-.4589451,-.7646643,-.03021116,-.7899352,-.6036922,-.4293956,-.2481938,.6534185,.102798,.6784465,-.6392644,.4821358,-.6789002,.1779133,-.9140783,-.1989647,-.9262617,.3381507,.4794891,-.8093274,.3959447,.668478,.9602883,.2272305,-.123672,.9210883,.2375148,.9523395,-.52898,.7973378,-.382433,.1228794,.695015,.6948439,.7530277,-.6458191,.8777987,-.3272956,.2318525,-.962768),this._distributions[30]=new Array(.4518921,-.1146195,.4720805,-.4238748,.3655423,.1806341,.1589939,-.23568,.7673324,-.5149941,.01163658,.09045836,.7010971,.1245747,.7518286,-.1855433,.4960719,.4601022,.2566979,-.6308268,-.0654714,-.5126389,-.1823319,-.1343282,-.1464312,.4883236,-.3858738,.203523,.1484799,.4432284,-.477109,-.116241,.2719092,.7208626,.9104174,.3578536,-.5956199,.7662588,-.6996251,.3678654,-.2514512,.9251933,.1275825,-.9478135,-.204608,-.8611552,.4264838,-.877443,.9854161,.05521112,.5912951,.7997434,.1140349,.982093,-.9324368,-.2094094,-.42436,-.6441524,-.6722705,-.3554261,-.7844236,.08587621),this._distributions[31]=new Array(-.4206714,-.5613642,-.8733016,-.3373051,-.1046226,-.2902999,-.1318562,-.8434365,.1145093,-.5962623,-.4965627,-.1873259,-.5011808,-.8546229,-.7165636,-.5743566,.1090901,.2017643,.3404809,-.220455,-.1989015,.2372122,-.4538706,.0979171,.4514146,-.572846,.2314168,-.8514503,-.4247236,.5650803,-.943347,.04514639,-.1309718,.5221877,-.7004157,.4561877,.6306441,.04448673,.4301621,.5766876,.1078042,.7245752,.3875354,.2794483,.702876,-.2924213,.7360667,-.6210318,.7486517,.6531103,.4898235,.8591025,.6549174,.3854057,-.2596106,.7916998,.9251194,-.05296265,-.5620695,.820877,-.01228026,.9937211,.9612103,.2628758)
},t.getDistribution=function(t){return this._distributions||this.initDistributions(),2>t||t>32?null:this._distributions[t-1]},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/geom/Quaternion":[function(t,e){var i=t("awayjs-core/lib/geom/Matrix3DUtils"),s=t("awayjs-core/lib/geom/Orientation3D"),r=t("awayjs-core/lib/geom/Matrix3D"),a=t("awayjs-core/lib/geom/Vector3D"),n=function(){function t(t,e,i,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=1),this.x=0,this.y=0,this.z=0,this.w=1,this.x=t,this.y=e,this.z=i,this.w=s}return Object.defineProperty(t.prototype,"magnitude",{get:function(){return Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z)},enumerable:!0,configurable:!0}),t.prototype.multiply=function(t,e){var i=t.w,s=t.x,r=t.y,a=t.z,n=e.w,o=e.x,h=e.y,l=e.z;this.w=i*n-s*o-r*h-a*l,this.x=i*o+s*n+r*l-a*h,this.y=i*h-s*l+r*n+a*o,this.z=i*l+s*h-r*o+a*n},t.prototype.multiplyVector=function(e,i){void 0===i&&(i=null),null===i&&(i=new t);var s=e.x,r=e.y,a=e.z;return i.w=-this.x*s-this.y*r-this.z*a,i.x=this.w*s+this.y*a-this.z*r,i.y=this.w*r-this.x*a+this.z*s,i.z=this.w*a+this.x*r-this.y*s,i},t.prototype.fromAxisAngle=function(t,e){var i=Math.sin(e/2),s=Math.cos(e/2);this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this.w=s,this.normalize()},t.prototype.slerp=function(t,e,i){var s=t.w,r=t.x,a=t.y,n=t.z,o=e.w,h=e.x,l=e.y,p=e.z,d=s*o+r*h+a*l+n*p;if(0>d&&(d=-d,o=-o,h=-h,l=-l,p=-p),.95>d){var u=Math.acos(d),c=1/Math.sin(u),_=Math.sin(u*(1-i))*c,y=Math.sin(u*i)*c;this.w=s*_+o*y,this.x=r*_+h*y,this.y=a*_+l*y,this.z=n*_+p*y}else{this.w=s+i*(o-s),this.x=r+i*(h-r),this.y=a+i*(l-a),this.z=n+i*(p-n);var g=1/Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z);this.w*=g,this.x*=g,this.y*=g,this.z*=g}},t.prototype.lerp=function(t,e,i){var s,r=t.w,a=t.x,n=t.y,o=t.z,h=e.w,l=e.x,p=e.y,d=e.z;0>r*h+a*l+n*p+o*d&&(h=-h,l=-l,p=-p,d=-d),this.w=r+i*(h-r),this.x=a+i*(l-a),this.y=n+i*(p-n),this.z=o+i*(d-o),s=1/Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z),this.w*=s,this.x*=s,this.y*=s,this.z*=s},t.prototype.fromEulerAngles=function(t,e,i){var s=.5*t,r=.5*e,a=.5*i,n=Math.cos(s),o=Math.sin(s),h=Math.cos(r),l=Math.sin(r),p=Math.cos(a),d=Math.sin(a);this.w=n*h*p+o*l*d,this.x=o*h*p-n*l*d,this.y=n*l*p+o*h*d,this.z=n*h*d-o*l*p},t.prototype.toEulerAngles=function(t){return void 0===t&&(t=null),null===t&&(t=new a),t.x=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),t.y=Math.asin(2*(this.w*this.y-this.z*this.x)),t.z=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z)),t},t.prototype.normalize=function(t){void 0===t&&(t=1);var e=t/Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);this.x*=e,this.y*=e,this.z*=e,this.w*=e},t.prototype.toString=function(){return"{x:"+this.x+" y:"+this.y+" z:"+this.z+" w:"+this.w+"}"},t.prototype.toMatrix3D=function(t){void 0===t&&(t=null);var e=i.RAW_DATA_CONTAINER,s=2*this.x*this.y,a=2*this.x*this.z,n=2*this.x*this.w,o=2*this.y*this.z,h=2*this.y*this.w,l=2*this.z*this.w,p=this.x*this.x,d=this.y*this.y,u=this.z*this.z,c=this.w*this.w;return e[0]=p-d-u+c,e[4]=s-l,e[8]=a+h,e[12]=0,e[1]=s+l,e[5]=-p+d-u+c,e[9]=o-n,e[13]=0,e[2]=a-h,e[6]=o+n,e[10]=-p-d+u+c,e[14]=0,e[3]=0,e[7]=0,e[11]=0,e[15]=1,t?(t.copyRawDataFrom(e),t):new r(e)},t.prototype.fromMatrix=function(t){var e=t.decompose(s.QUATERNION)[1];this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w},t.prototype.toRawData=function(t,e){void 0===e&&(e=!1);var i=2*this.x*this.y,s=2*this.x*this.z,r=2*this.x*this.w,a=2*this.y*this.z,n=2*this.y*this.w,o=2*this.z*this.w,h=this.x*this.x,l=this.y*this.y,p=this.z*this.z,d=this.w*this.w;t[0]=h-l-p+d,t[1]=i-o,t[2]=s+n,t[4]=i+o,t[5]=-h+l-p+d,t[6]=a-r,t[8]=s-n,t[9]=a+r,t[10]=-h-l+p+d,t[3]=t[7]=t[11]=0,e||(t[12]=t[13]=t[14]=0,t[15]=1)},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.rotatePoint=function(t,e){void 0===e&&(e=null);var i,s,r,n,o=t.x,h=t.y,l=t.z;return null===e&&(e=new a),n=-this.x*o-this.y*h-this.z*l,i=this.w*o+this.y*l-this.z*h,s=this.w*h-this.x*l+this.z*o,r=this.w*l+this.x*h-this.y*o,e.x=-n*this.x+i*this.w-s*this.z+r*this.y,e.y=-n*this.y+i*this.z+s*this.w-r*this.x,e.z=-n*this.z-i*this.y+s*this.x+r*this.w,e},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},t}();e.exports=n},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Matrix3DUtils":void 0,"awayjs-core/lib/geom/Orientation3D":void 0,"awayjs-core/lib/geom/Vector3D":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/geom/Rectangle":[function(t,e){var i=t("awayjs-core/lib/geom/Point"),s=function(){function t(t,e,i,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),this.x=t,this.y=e,this.width=i,this.height=s}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return null==this._bottomRight&&(this._bottomRight=new i),this._bottomRight.x=this.x+this.width,this._bottomRight.y=this.y+this.height,this._bottomRight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return null==this._size&&(this._size=new i),this._size.x=this.width,this._size.y=this.height,this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return null==this._topLeft&&(this._topLeft=new i),this._topLeft.x=this.x,this._topLeft.y=this.y,this._topLeft},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},t.prototype.containsPoint=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},t.prototype.containsRect=function(t){return this.x<=t.x&&this.x+this.width>=t.x+t.width&&this.y<=t.y&&this.y+this.height>=t.y+t.height},t.prototype.copyFrom=function(){},t.prototype.equals=function(t){return this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},t.prototype.inflate=function(t,e){this.x-=t/2,this.y-=e/2,this.width+=t/2,this.height+=e/2},t.prototype.inflatePoint=function(t){this.x-=t.x/2,this.y-=t.y/2,this.width+=t.x/2,this.height+=t.y/2},t.prototype.intersection=function(e){if(this.intersects(e)){var i=new t;return this.x>e.x?(i.x=this.x,i.width=e.x-this.x+e.width,i.width>this.width&&(i.width=this.width)):(i.x=e.x,i.width=this.x-e.x+this.width,i.width>e.width&&(i.width=e.width)),this.y>e.y?(i.y=this.y,i.height=e.y-this.y+e.height,i.height>this.height&&(i.height=this.height)):(i.y=e.y,i.height=this.y-e.y+this.height,i.height>e.height&&(i.height=e.height)),i}return new t},t.prototype.intersects=function(t){return this.x+this.width>t.x&&this.x<t.x+t.width&&this.y+this.height>t.y&&this.y<t.y+t.height},t.prototype.isEmpty=function(){return 0==this.x&&0==this.y&&0==this.width&&0==this.height},t.prototype.offset=function(t,e){this.x+=t,this.y+=e},t.prototype.offsetPoint=function(t){this.x+=t.x,this.y+=t.y},t.prototype.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},t.prototype.setTo=function(t,e,i,s){this.x=t,this.y=e,this.width=i,this.height=s},t.prototype.toString=function(){return"[Rectangle] (x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},t.prototype.union=function(e){var i=new t;return this.x<e.x?(i.x=this.x,i.width=e.x-this.x+e.width,i.width<this.width&&(i.width=this.width)):(i.x=e.x,i.width=this.x-e.x+this.width,i.width<e.width&&(i.width=e.width)),this.y<e.y?(i.y=this.y,i.height=e.y-this.y+e.height,i.height<this.height&&(i.height=this.height)):(i.y=e.y,i.height=this.y-e.y+this.height,i.height<e.height&&(i.height=e.height)),i},t}();e.exports=s},{"awayjs-core/lib/geom/Point":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/geom/UVTransform":[function(t,e){var i=t("awayjs-core/lib/geom/Matrix"),s=function(){function t(){this._uvMatrix=new i,this._rotation=0,this._scaleU=1,this._scaleV=1,this._offsetU=0,this._offsetV=0}return Object.defineProperty(t.prototype,"offsetU",{get:function(){return this._offsetU},set:function(t){t!=this._offsetU&&(this._offsetU=t,this._uvMatrixDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetV",{get:function(){return this._offsetV},set:function(t){t!=this._offsetV&&(this._offsetV=t,this._uvMatrixDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){t!=this._rotation&&(this._rotation=t,this._uvMatrixDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleU",{get:function(){return this._scaleU},set:function(t){t!=this._scaleU&&(this._scaleU=t,this._uvMatrixDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleV",{get:function(){return this._scaleV},set:function(t){t!=this._scaleV&&(this._scaleV=t,this._uvMatrixDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"matrix",{get:function(){return this._uvMatrixDirty&&this.updateUVMatrix(),this._uvMatrix},enumerable:!0,configurable:!0}),t.prototype.updateUVMatrix=function(){this._uvMatrix.identity(),0!=this._rotation&&this._uvMatrix.rotate(this._rotation),(1!=this._scaleU||1!=this._scaleV)&&this._uvMatrix.scale(this._scaleU,this._scaleV),this._uvMatrix.translate(this._offsetU,this._offsetV),this._uvMatrixDirty=!1},t}();e.exports=s},{"awayjs-core/lib/geom/Matrix":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/geom/Vector3D":[function(t,e){var i=function(){function t(t,e,i,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),this.x=t,this.y=e,this.z=i,this.w=s}return Object.defineProperty(t.prototype,"length",{get:function(){return Math.sqrt(this.lengthSquared)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lengthSquared",{get:function(){return this.x*this.x+this.y*this.y+this.z*this.z},enumerable:!0,configurable:!0}),t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)},t.angleBetween=function(t,e){return Math.acos(t.dotProduct(e)/(t.length*e.length))},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},t.prototype.crossProduct=function(e){return new t(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x,1)},t.prototype.decrementBy=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},t.distance=function(t,e){var i=t.x-e.x,s=t.y-e.y,r=t.z-e.z;return Math.sqrt(i*i+s*s+r*r)},t.prototype.dotProduct=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.equals=function(t,e){return void 0===e&&(e=!1),this.x==t.x&&this.y==t.y&&this.z==t.z&&(!e||this.w==t.w)},t.prototype.incrementBy=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},t.prototype.nearEquals=function(t,e,i){return void 0===i&&(i=!0),Math.abs(this.x-t.x)<e&&Math.abs(this.y-t.y)<e&&Math.abs(this.z-t.z)<e&&(!i||Math.abs(this.w-t.w)<e)},t.prototype.negate=function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},t.prototype.normalize=function(t){if(void 0===t&&(t=1),0!=this.length){var e=t/this.length;return this.x*=e,this.y*=e,void(this.z*=e)}},t.prototype.project=function(){this.x/=this.w,this.y/=this.w,this.z/=this.w},t.prototype.scaleBy=function(t){this.x*=t,this.y*=t,this.z*=t},t.prototype.setTo=function(t,e,i){this.x=t,this.y=e,this.z=i},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z)},t.prototype.toString=function(){return"[Vector3D] (x:"+this.x+" ,y:"+this.y+", z"+this.z+", w:"+this.w+")"},t.X_AXIS=new t(1,0,0),t.Y_AXIS=new t(0,1,0),t.Z_AXIS=new t(0,0,1),t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/library/AssetLibraryBundle":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetLibraryIterator"),r=t("awayjs-core/lib/library/AssetLoader"),a=t("awayjs-core/lib/library/ConflictPrecedence"),n=t("awayjs-core/lib/library/ConflictStrategy"),o=t("awayjs-core/lib/library/NamedAssetBase"),h=t("awayjs-core/lib/errors/Error"),l=t("awayjs-core/lib/events/AssetEvent"),p=t("awayjs-core/lib/events/IOErrorEvent"),d=t("awayjs-core/lib/events/LoaderEvent"),u=t("awayjs-core/lib/events/EventDispatcher"),c=t("awayjs-core/lib/events/ParserEvent"),_=function(t){function e(){var e=this;t.call(this),this._loadingSessionsGarbage=new Array,this._assets=new Array,this._assetDictionary=new Object,this._loadingSessions=new Array,this.conflictStrategy=n.IGNORE.create(),this.conflictPrecedence=a.FAVOR_NEW,this._onAssetRenameDelegate=function(t){return e.onAssetRename(t)},this._onAssetConflictResolvedDelegate=function(t){return e.onAssetConflictResolved(t)},this._onResourceCompleteDelegate=function(t){return e.onResourceComplete(t)},this._onTextureSizeErrorDelegate=function(t){return e.onTextureSizeError(t)},this._onAssetCompleteDelegate=function(t){return e.onAssetComplete(t)},this._onLoadErrorDelegate=function(t){return e.onLoadError(t)},this._onParseErrorDelegate=function(t){return e.onParseError(t)}}return i(e,t),e.getInstance=function(t){return void 0===t&&(t="default"),t||(t="default"),e._iInstances.hasOwnProperty(t)||(e._iInstances[t]=new e),e._iInstances[t]},e.prototype.enableParser=function(t){r.enableParser(t)},e.prototype.enableParsers=function(t){r.enableParsers(t)},Object.defineProperty(e.prototype,"conflictStrategy",{get:function(){return this._strategy},set:function(t){if(!t)throw new h("namingStrategy must not be null. To ignore naming, use AssetLibrary.IGNORE");this._strategy=t.create()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"conflictPrecedence",{get:function(){return this._strategyPreference},set:function(t){this._strategyPreference=t},enumerable:!0,configurable:!0}),e.prototype.createIterator=function(t,e,i){return void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),new s(this._assets,t,e,i)},e.prototype.load=function(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=null);var a=new r;return this._loadingSessions||(this._loadingSessions=new Array),this._loadingSessions.push(a),a.addEventListener(d.RESOURCE_COMPLETE,this._onResourceCompleteDelegate),a.addEventListener(l.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate),a.addEventListener(l.ASSET_COMPLETE,this._onAssetCompleteDelegate),a._iAddErrorHandler(this._onLoadErrorDelegate),a._iAddParseErrorHandler(this._onParseErrorDelegate),a.load(t,e,i,s)},e.prototype.loadData=function(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=null);var a=new r;return this._loadingSessions||(this._loadingSessions=new Array),this._loadingSessions.push(a),a.addEventListener(d.RESOURCE_COMPLETE,this._onResourceCompleteDelegate),a.addEventListener(l.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate),a.addEventListener(l.ASSET_COMPLETE,this._onAssetCompleteDelegate),a._iAddErrorHandler(this._onLoadErrorDelegate),a._iAddParseErrorHandler(this._onParseErrorDelegate),a.loadData(t,"",e,i,s)},e.prototype.getAsset=function(t,e){return void 0===e&&(e=null),this._assetDictDirty&&this.rehashAssetDict(),null==e&&(e=o.DEFAULT_NAMESPACE),this._assetDictionary.hasOwnProperty(e)?this._assetDictionary[e][t]:null},e.prototype.addAsset=function(t){var e,i;this._assets.indexOf(t)>=0||(i=this.getAsset(t.name,t.assetNamespace),e=t.assetNamespace||o.DEFAULT_NAMESPACE,null!=i&&this._strategy.resolveConflict(t,i,this._assetDictionary[e],this._strategyPreference),this._assets.push(t),this._assetDictionary.hasOwnProperty(e)||(this._assetDictionary[e]=new Object),this._assetDictionary[e][t.name]=t,t.addEventListener(l.ASSET_RENAME,this._onAssetRenameDelegate),t.addEventListener(l.ASSET_CONFLICT_RESOLVED,this._onAssetConflictResolvedDelegate))},e.prototype.removeAsset=function(t,e){void 0===e&&(e=!0);var i;this.removeAssetFromDict(t),t.removeEventListener(l.ASSET_RENAME,this._onAssetRenameDelegate),t.removeEventListener(l.ASSET_CONFLICT_RESOLVED,this._onAssetConflictResolvedDelegate),i=this._assets.indexOf(t),i>=0&&this._assets.splice(i,1),e&&t.dispose()},e.prototype.removeAssetByName=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!0);var s=this.getAsset(t,e);return s&&this.removeAsset(s,i),s},e.prototype.removeAllAssets=function(t){if(void 0===t&&(t=!0),t)for(var e,i=0;i<this._assets.length;i++)e=this._assets[i],e.dispose();this._assets.length=0,this.rehashAssetDict()},e.prototype.removeNamespaceAssets=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!0);var i,s,r=0;s=this._assets.concat(),this._assets.length=0,null==t&&(t=o.DEFAULT_NAMESPACE);for(var a=0;a<s.length;a++)i=s[a],i.assetNamespace==t?(e&&i.dispose(),this.removeAssetFromDict(i,!1)):this._assets[r++]=i;this._assetDictionary.hasOwnProperty(t)&&delete this._assetDictionary[t]},e.prototype.removeAssetFromDict=function(t,e){if(void 0===e&&(e=!0),this._assetDictDirty&&this.rehashAssetDict(),this._assetDictionary.hasOwnProperty(t.assetNamespace)&&(this._assetDictionary[t.assetNamespace].hasOwnProperty(t.name)&&delete this._assetDictionary[t.assetNamespace][t.name],e)){var i,s=!0;for(i in this._assetDictionary[t.assetNamespace]){s=!1;break}s&&delete this._assetDictionary[t.assetNamespace]}},e.prototype.stopAllLoadingSessions=function(){var t;this._loadingSessions||(this._loadingSessions=new Array);var e=this._loadingSessions.length;for(t=0;e>t;t++)this.killLoadingSession(this._loadingSessions[t]);this._loadingSessions=null},e.prototype.rehashAssetDict=function(){var t;this._assetDictionary={};for(var e=this._assets.length,i=0;e>i;i++)t=this._assets[i],this._assetDictionary.hasOwnProperty(t.assetNamespace)||(this._assetDictionary[t.assetNamespace]={}),this._assetDictionary[t.assetNamespace][t.name]=t;this._assetDictDirty=!1},e.prototype.onLoadError=function(t){return this.hasEventListener(p.IO_ERROR)?(this.dispatchEvent(t),!0):!1},e.prototype.onParseError=function(t){return this.hasEventListener(c.PARSE_ERROR)?(this.dispatchEvent(t),!0):!1},e.prototype.onAssetComplete=function(t){t.type==l.ASSET_COMPLETE&&this.addAsset(t.asset),this.dispatchEvent(t)},e.prototype.onTextureSizeError=function(t){this.dispatchEvent(t)},e.prototype.onResourceComplete=function(t){var e=this,i=t.target;this.dispatchEvent(t);var s=this._loadingSessions.indexOf(i);this._loadingSessions.splice(s,1),this._loadingSessionsGarbage.push(i),this._gcTimeoutIID=setTimeout(function(){e.loadingSessionGC()},100)},e.prototype.loadingSessionGC=function(){for(var t;this._loadingSessionsGarbage.length>0;)t=this._loadingSessionsGarbage.pop(),this.killLoadingSession(t);clearTimeout(this._gcTimeoutIID),this._gcTimeoutIID=null},e.prototype.killLoadingSession=function(t){t.removeEventListener(d.RESOURCE_COMPLETE,this._onResourceCompleteDelegate),t.removeEventListener(l.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate),t.removeEventListener(l.ASSET_COMPLETE,this._onAssetCompleteDelegate),t.stop()},e.prototype.onAssetRename=function(t){var e=t.target,i=this.getAsset(e.assetNamespace,e.name);if(null!=i)this._strategy.resolveConflict(e,i,this._assetDictionary[e.assetNamespace],this._strategyPreference);else{var s=this._assetDictionary[t.asset.assetNamespace];if(null==s)return;s[t.assetPrevName]=null,s[t.asset.name]=t.asset}},e.prototype.onAssetConflictResolved=function(t){this.dispatchEvent(t.clone())},e._iInstances=new Object,e}(u);e.exports=_},{"awayjs-core/lib/errors/Error":void 0,"awayjs-core/lib/events/AssetEvent":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-core/lib/events/IOErrorEvent":void 0,"awayjs-core/lib/events/LoaderEvent":void 0,"awayjs-core/lib/events/ParserEvent":void 0,"awayjs-core/lib/library/AssetLibraryIterator":void 0,"awayjs-core/lib/library/AssetLoader":void 0,"awayjs-core/lib/library/ConflictPrecedence":void 0,"awayjs-core/lib/library/ConflictStrategy":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/library/AssetLibraryIterator":[function(t,e){var i=function(){function t(t,e,i,s){this._assets=t,this.filter(e,i,s)}return Object.defineProperty(t.prototype,"currentAsset",{get:function(){return this._idx<this._filtered.length?this._filtered[this._idx]:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numAssets",{get:function(){return this._filtered.length},enumerable:!0,configurable:!0}),t.prototype.next=function(){var t=null;return this._idx<this._filtered.length&&(t=this._filtered[this._idx]),this._idx++,t},t.prototype.reset=function(){this._idx=0},t.prototype.setIndex=function(t){this._idx=t},t.prototype.filter=function(t,e,i){if(t||e){var s,r;s=0,this._filtered=new Array;for(var a=this._assets.length,n=0;a>n;n++)r=this._assets[n],t&&r.assetType!=t||e&&r.assetNamespace!=e||(null==i||i(r))&&(this._filtered[s++]=r)}else this._filtered=this._assets},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/library/AssetLibrary":[function(t,e){var i=t("awayjs-core/lib/library/AssetLibraryBundle"),s=t("awayjs-core/lib/library/AssetLoader"),r=function(){function t(){}return t.getBundle=function(t){return void 0===t&&(t="default"),i.getInstance(t)},t.enableParser=function(t){s.enableParser(t)},t.enableParsers=function(t){s.enableParsers(t)},Object.defineProperty(t,"conflictStrategy",{get:function(){return t.getBundle().conflictStrategy},set:function(e){t.getBundle().conflictStrategy=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"conflictPrecedence",{get:function(){return t.getBundle().conflictPrecedence},set:function(e){t.getBundle().conflictPrecedence=e},enumerable:!0,configurable:!0}),t.createIterator=function(e,i,s){return void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=null),t.getBundle().createIterator(e,i,s)},t.load=function(e,i,s,r){return void 0===i&&(i=null),void 0===s&&(s=null),void 0===r&&(r=null),t.getBundle().load(e,i,s,r)},t.loadData=function(e,i,s,r){return void 0===i&&(i=null),void 0===s&&(s=null),void 0===r&&(r=null),t.getBundle().loadData(e,i,s,r)},t.stopLoad=function(){t.getBundle().stopAllLoadingSessions()},t.getAsset=function(e,i){return void 0===i&&(i=null),t.getBundle().getAsset(e,i)},t.addEventListener=function(e,i){t.getBundle().addEventListener(e,i)},t.removeEventListener=function(e,i){t.getBundle().removeEventListener(e,i)},t.addAsset=function(e){t.getBundle().addAsset(e)},t.removeAsset=function(e,i){void 0===i&&(i=!0),t.getBundle().removeAsset(e,i)},t.removeAssetByName=function(e,i,s){return void 0===i&&(i=null),void 0===s&&(s=!0),t.getBundle().removeAssetByName(e,i,s)},t.removeAllAssets=function(e){void 0===e&&(e=!0),t.getBundle().removeAllAssets(e)},t.removeNamespaceAssets=function(e,i){void 0===e&&(e=null),void 0===i&&(i=!0),t.getBundle().removeNamespaceAssets(e,i)},t}();e.exports=r},{"awayjs-core/lib/library/AssetLibraryBundle":void 0,"awayjs-core/lib/library/AssetLoader":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/library/AssetLoaderContext":[function(t,e){var i=function(){function t(e,i){void 0===e&&(e=!0),void 0===i&&(i=null),this._includeDependencies=e,this._dependencyBaseUrl=i||"",this._embeddedDataByUrl={},this._remappedUrls={},this._materialMode=t.UNDEFINED}return Object.defineProperty(t.prototype,"includeDependencies",{get:function(){return this._includeDependencies},set:function(t){this._includeDependencies=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"materialMode",{get:function(){return this._materialMode},set:function(t){this._materialMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dependencyBaseUrl",{get:function(){return this._dependencyBaseUrl},set:function(t){this._dependencyBaseUrl=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overrideAbsolutePaths",{get:function(){return this._overrideAbsPath},set:function(t){this._overrideAbsPath=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overrideFullURLs",{get:function(){return this._overrideFullUrls},set:function(t){this._overrideFullUrls=t},enumerable:!0,configurable:!0}),t.prototype.mapUrl=function(t,e){this._remappedUrls[t]=e},t.prototype.mapUrlToData=function(t,e){this._embeddedDataByUrl[t]=e},t.prototype._iHasDataForUrl=function(t){return this._embeddedDataByUrl.hasOwnProperty(t)},t.prototype._iGetDataForUrl=function(t){return this._embeddedDataByUrl[t]},t.prototype._iHasMappingForUrl=function(t){return this._remappedUrls.hasOwnProperty(t)},t.prototype._iGetRemappedUrl=function(t){return this._remappedUrls[t]},t.UNDEFINED=0,t.SINGLEPASS_MATERIALS=1,t.MULTIPASS_MATERIALS=2,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/library/AssetLoaderToken":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/EventDispatcher"),r=function(t){function e(e){t.call(this),this._iLoader=e}return i(e,t),e.prototype.addEventListener=function(t,e){this._iLoader.addEventListener(t,e)},e.prototype.removeEventListener=function(t,e){this._iLoader.removeEventListener(t,e)},e.prototype.hasEventListener=function(t,e){return void 0===e&&(e=null),this._iLoader.hasEventListener(t,e)},e}(s);e.exports=r},{"awayjs-core/lib/events/EventDispatcher":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/library/AssetLoader":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetLoaderToken"),r=t("awayjs-core/lib/net/URLLoader"),a=t("awayjs-core/lib/net/URLLoaderDataFormat"),n=t("awayjs-core/lib/errors/Error"),o=t("awayjs-core/lib/events/AssetEvent"),h=t("awayjs-core/lib/events/Event"),l=t("awayjs-core/lib/events/EventDispatcher"),p=t("awayjs-core/lib/events/IOErrorEvent"),d=t("awayjs-core/lib/events/LoaderEvent"),u=t("awayjs-core/lib/events/ParserEvent"),c=t("awayjs-core/lib/parsers/CubeTextureParser"),_=t("awayjs-core/lib/parsers/ResourceDependency"),y=t("awayjs-core/lib/parsers/Texture2DParser"),g=function(t){function e(e){var i=this;void 0===e&&(e=0),t.call(this),this._materialMode=e,this._stack=new Array,this._errorHandlers=new Array,this._parseErrorHandlers=new Array,this._onReadyForDependenciesDelegate=function(t){return i.onReadyForDependencies(t)},this._onParseCompleteDelegate=function(t){return i.onParseComplete(t)},this._onParseErrorDelegate=function(t){return i.onParseError(t)},this._onLoadCompleteDelegate=function(t){return i.onLoadComplete(t)},this._onLoadErrorDelegate=function(t){return i.onLoadError(t)},this._onTextureSizeErrorDelegate=function(t){return i.onTextureSizeError(t)},this._onAssetCompleteDelegate=function(t){return i.onAssetComplete(t)}}return i(e,t),e.enableParser=function(t){e._parsers.indexOf(t)<0&&e._parsers.push(t)},e.enableParsers=function(t){for(var i=0;i<t.length;i++)e.enableParser(t[i])},Object.defineProperty(e.prototype,"baseDependency",{get:function(){return this._baseDependency},enumerable:!0,configurable:!0}),e.prototype.load=function(t,e,i,r){return void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null),this._token?null:(this._token=new s(this),this._uri=t.url=t.url.replace(/\\/g,"/"),this._context=e,this._namespace=i,this._baseDependency=new _("",t,null,r,null),this.retrieveDependency(this._baseDependency),this._token)},e.prototype.loadData=function(t,e,i,r,a){return void 0===i&&(i=null),void 0===r&&(r=null),void 0===a&&(a=null),this._token?null:(this._token=new s(this),this._uri=e,this._context=i,this._namespace=r,this._baseDependency=new _(e,null,t,a,null),this.retrieveDependency(this._baseDependency),this._token)},e.prototype.retrieveNext=function(t){if(void 0===t&&(t=null),this._currentDependency.dependencies.length){var e=this._currentDependency.dependencies.pop();this._stack.push(this._currentDependency),this.retrieveDependency(e)}else if(this._currentDependency.parser&&this._currentDependency.parser.parsingPaused)this._currentDependency.parser._iResumeParsingAfterDependencies(),this._stack.pop();else if(this._stack.length){var i=this._currentDependency;this._currentDependency=this._stack.pop(),i._iSuccess&&i.resolve(),this.retrieveNext(t)}else this.dispatchEvent(new d(d.RESOURCE_COMPLETE,this._uri,this._baseDependency.parser.content,this._baseDependency.assets))},e.prototype.retrieveDependency=function(t){var e;this._context&&0!=this._context.materialMode&&(this._materialMode=this._context.materialMode),this._currentDependency=t,t._iLoader=new r,this.addEventListeners(t._iLoader),e=t.data,this._context&&t.request&&this._context._iHasDataForUrl(t.request.url)&&(e=this._context._iGetDataForUrl(t.request.url)),e?(e.constructor===Function&&(e=new e),t._iSetData(e),t.retrieveAsRawData?(t.resolve(),this.retrieveNext()):this.parseDependency(t)):(t.request.url=this.resolveDependencyUrl(t),t.retrieveAsRawData?t._iLoader.dataFormat=a.BINARY:(t.parser||t._iSetParser(this.getParserFromSuffix(t.request.url)),t._iLoader.dataFormat=t.parser?t.parser.dataFormat:a.BINARY),t._iLoader.load(t.request))},e.prototype.joinUrl=function(t,e){return"/"==e.charAt(0)&&(e=e.substr(1)),0==t.length?e:("/"==t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),t.concat("/",e))},e.prototype.resolveDependencyUrl=function(t){var e,i,s=t.request.url;if(this._context&&this._context._iHasMappingForUrl(s))return this._context._iGetRemappedUrl(s);if(s==this._uri)return s;if(e=new RegExp("/^[a-zA-Z]{3,4}:///"),"/"==s.charAt(0))return this._context&&this._context.overrideAbsolutePaths?this.joinUrl(this._context.dependencyBaseUrl,s):s;if(e.test(s)&&this._context&&this._context.overrideFullURLs){var r=s.replace(e,"");return this.joinUrl(this._context.dependencyBaseUrl,r)}return this._context&&this._context.dependencyBaseUrl?(i=this._context.dependencyBaseUrl,this.joinUrl(i,s)):(i=this._uri.substring(0,this._uri.lastIndexOf("/")+1),this.joinUrl(i,s))},e.prototype.retrieveParserDependencies=function(){if(this._currentDependency){var t,e=this._currentDependency.parser.dependencies,i=e.length;for(t=0;i>t;t++)this._currentDependency.dependencies[t]=e[t];e.length=0,this._stack.push(this._currentDependency),this.retrieveNext()}},e.prototype.resolveParserDependencies=function(){this._currentDependency._iSuccess=!0,this._currentDependency.parser&&this._currentDependency.parser.dependencies.length&&(!this._context||this._context.includeDependencies)?this.retrieveParserDependencies():this.retrieveNext()},e.prototype.onLoadError=function(t){var e,i=this._currentDependency!=this._baseDependency,s=t.target;if(this.removeEventListeners(s),this.hasEventListener(p.IO_ERROR))this.dispatchEvent(t),e=!0;else{var r,a=this._errorHandlers.length;for(r=0;a>r;r++)e||(e=this._errorHandlers[r](t))}if(!e)throw new n;return i?(this._currentDependency.resolveFailure(),void this.retrieveNext()):void this.dispose()},e.prototype.onParseError=function(t){var e,i=(this._currentDependency!=this._baseDependency,t.target);if(this.removeEventListeners(i),this.hasEventListener(u.PARSE_ERROR))this.dispatchEvent(t),e=!0;else{var s,r=this._parseErrorHandlers.length;for(s=0;r>s;s++)e||(e=this._parseErrorHandlers[s](t))}if(e)return void this.dispose();throw new n(t.message)},e.prototype.onAssetComplete=function(t){this._currentDependency&&this._currentDependency.assets.push(t.asset),t.asset.resetAssetPath(t.asset.name,this._namespace),this._currentDependency.suppresAssetEvents||this.dispatchEvent(t)},e.prototype.onReadyForDependencies=function(t){var e=t.target;this._context&&!this._context.includeDependencies?e._iResumeParsingAfterDependencies():this.retrieveParserDependencies()
},e.prototype.onLoadComplete=function(t){var e=t.target;this.removeEventListeners(e),this._currentDependency._iSetData(e.data),this._currentDependency.retrieveAsRawData?this.resolveParserDependencies():this.parseDependency(this._currentDependency)},e.prototype.onParseComplete=function(t){var e=t.target;this.resolveParserDependencies(),e.removeEventListener(u.READY_FOR_DEPENDENCIES,this._onReadyForDependenciesDelegate),e.removeEventListener(u.PARSE_COMPLETE,this._onParseCompleteDelegate),e.removeEventListener(u.PARSE_ERROR,this._onParseErrorDelegate),e.removeEventListener(o.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate),e.removeEventListener(o.ASSET_COMPLETE,this._onAssetCompleteDelegate)},e.prototype.onTextureSizeError=function(t){t.asset.name=this._currentDependency.resolveName(t.asset),this.dispatchEvent(t)},e.prototype.addEventListeners=function(t){t.addEventListener(h.COMPLETE,this._onLoadCompleteDelegate),t.addEventListener(p.IO_ERROR,this._onLoadErrorDelegate)},e.prototype.removeEventListeners=function(t){t.removeEventListener(h.COMPLETE,this._onLoadCompleteDelegate),t.removeEventListener(p.IO_ERROR,this._onLoadErrorDelegate)},e.prototype.stop=function(){this.dispose()},e.prototype.dispose=function(){this._errorHandlers=null,this._parseErrorHandlers=null,this._context=null,this._token=null,this._stack=null,this._currentDependency&&this._currentDependency._iLoader&&this.removeEventListeners(this._currentDependency._iLoader),this._currentDependency=null},e.prototype._iAddParseErrorHandler=function(t){this._parseErrorHandlers.indexOf(t)<0&&this._parseErrorHandlers.push(t)},e.prototype._iAddErrorHandler=function(t){this._errorHandlers.indexOf(t)<0&&this._errorHandlers.push(t)},e.prototype.getParserFromData=function(t){for(var i=e._parsers.length,s=i-1;s>=0;s--)if(e._parsers[s].supportsData(t))return new e._parsers[s];return null},e.prototype.parseDependency=function(t){var e=t.parser;if(e||t._iSetParser(e=this.getParserFromData(t.data)),e)e.addEventListener(u.READY_FOR_DEPENDENCIES,this._onReadyForDependenciesDelegate),e.addEventListener(u.PARSE_COMPLETE,this._onParseCompleteDelegate),e.addEventListener(u.PARSE_ERROR,this._onParseErrorDelegate),e.addEventListener(o.TEXTURE_SIZE_ERROR,this._onTextureSizeErrorDelegate),e.addEventListener(o.ASSET_COMPLETE,this._onAssetCompleteDelegate),t.request&&t.request.url&&(e._iFileName=t.request.url),e.materialMode=this._materialMode,e.parseAsync(t.data);else{var i="No parser defined. To enable all parsers for auto-detection, use Parsers.enableAllBundled()";if(!this.hasEventListener(u.PARSE_ERROR))throw new n(i);this.dispatchEvent(new u(u.PARSE_ERROR,i))}},e.prototype.getParserFromSuffix=function(t){for(var i=t.indexOf("?")>0?t.split("?")[0]:t,s=i.substr(i.lastIndexOf(".")+1).toLowerCase(),r=e._parsers.length,a=r-1;a>=0;a--){var n=e._parsers[a];if(n.supportsType(s))return new n}return null},e._parsers=new Array(y,c),e}(l);e.exports=g},{"awayjs-core/lib/errors/Error":void 0,"awayjs-core/lib/events/AssetEvent":void 0,"awayjs-core/lib/events/Event":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-core/lib/events/IOErrorEvent":void 0,"awayjs-core/lib/events/LoaderEvent":void 0,"awayjs-core/lib/events/ParserEvent":void 0,"awayjs-core/lib/library/AssetLoaderToken":void 0,"awayjs-core/lib/net/URLLoader":void 0,"awayjs-core/lib/net/URLLoaderDataFormat":void 0,"awayjs-core/lib/parsers/CubeTextureParser":void 0,"awayjs-core/lib/parsers/ResourceDependency":void 0,"awayjs-core/lib/parsers/Texture2DParser":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/library/AssetType":[function(t,e){var i=function(){function t(){}return t.ANIMATION_NODE="animationNode",t.ANIMATION_SET="animationSet",t.ANIMATION_STATE="animationState",t.ANIMATOR="animator",t.BILLBOARD="billboard",t.CAMERA="camera",t.CONTAINER="container",t.EFFECTS_METHOD="effectsMethod",t.GEOMETRY="geometry",t.LINE_SEGMENT="lineSegment",t.LIGHT="light",t.LIGHT_PICKER="lightPicker",t.MATERIAL="material",t.MESH="mesh",t.TRIANGLE_SUB_MESH="triangleSubMesh",t.LINE_SUB_MESH="lineSubMesh",t.PRIMITIVE_PREFAB="primitivePrefab",t.SHADOW_MAP_METHOD="shadowMapMethod",t.SKELETON="skeleton",t.SKELETON_POSE="skeletonPose",t.SKYBOX="skybox",t.STATE_TRANSITION="stateTransition",t.TEXTURE="texture",t.TEXTURE_PROJECTOR="textureProjector",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/library/ConflictPrecedence":[function(t,e){var i=function(){function t(){}return t.FAVOR_OLD="favorOld",t.FAVOR_NEW="favorNew",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/library/ConflictStrategyBase":[function(t,e){var i=t("awayjs-core/lib/library/ConflictPrecedence"),s=t("awayjs-core/lib/errors/AbstractMethodError"),r=t("awayjs-core/lib/events/AssetEvent"),a=function(){function t(){}return t.prototype.resolveConflict=function(){throw new s},t.prototype.create=function(){throw new s},t.prototype._pUpdateNames=function(t,e,s,a,n,o){var h,l,p;l=o===i.FAVOR_NEW?a:s,p=o===i.FAVOR_NEW?s:a,h=p.name,n[l.name]=l,n[e]=p,p.resetAssetPath(e,t,!1),p.dispatchEvent(new r(r.ASSET_CONFLICT_RESOLVED,p,h))},t}();e.exports=a},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/events/AssetEvent":void 0,"awayjs-core/lib/library/ConflictPrecedence":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/library/ConflictStrategy":[function(t,e){var i=t("awayjs-core/lib/library/ErrorConflictStrategy"),s=t("awayjs-core/lib/library/IgnoreConflictStrategy"),r=t("awayjs-core/lib/library/NumSuffixConflictStrategy"),a=function(){function t(){}return t.APPEND_NUM_SUFFIX=new r,t.IGNORE=new s,t.THROW_ERROR=new i,t}();e.exports=a},{"awayjs-core/lib/library/ErrorConflictStrategy":void 0,"awayjs-core/lib/library/IgnoreConflictStrategy":void 0,"awayjs-core/lib/library/NumSuffixConflictStrategy":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/library/ErrorConflictStrategy":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/ConflictStrategyBase"),r=t("awayjs-core/lib/errors/Error"),a=function(t){function e(){t.call(this)}return i(e,t),e.prototype.resolveConflict=function(t){throw new r("Asset name collision while AssetLibrary.namingStrategy set to AssetLibrary.THROW_ERROR. Asset path: "+t.assetFullPath)},e.prototype.create=function(){return new e},e}(s);e.exports=a},{"awayjs-core/lib/errors/Error":void 0,"awayjs-core/lib/library/ConflictStrategyBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/library/IAsset":[function(){},{}],"awayjs-dist/node_modules/awayjs-core/lib/library/IDUtil":[function(t,e){var i=function(){function t(){}return t.createUID=function(){var e,i,s=new Array(36),r=0;for(e=0;8>e;e++)s[r++]=t.ALPHA_CHAR_CODES[Math.floor(16*Math.random())];for(e=0;3>e;e++)for(s[r++]=45,i=0;4>i;i++)s[r++]=t.ALPHA_CHAR_CODES[Math.floor(16*Math.random())];s[r++]=45;var a=(new Date).getTime(),n=("0000000"+a.toString(16).toUpperCase()).substr(-8);for(e=0;8>e;e++)s[r++]=n.charCodeAt(e);for(e=0;4>e;e++)s[r++]=t.ALPHA_CHAR_CODES[Math.floor(16*Math.random())];return String.fromCharCode.apply(null,s)},t.ALPHA_CHAR_CODES=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70],t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/library/IgnoreConflictStrategy":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/ConflictStrategyBase"),r=function(t){function e(){t.call(this)}return i(e,t),e.prototype.resolveConflict=function(){},e.prototype.create=function(){return new e},e}(s);e.exports=r},{"awayjs-core/lib/library/ConflictStrategyBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/library/NamedAssetBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/AbstractMethodError"),r=t("awayjs-core/lib/events/AssetEvent"),a=t("awayjs-core/lib/events/EventDispatcher"),n=function(t){function e(i){void 0===i&&(i=null),t.call(this),this._id=e.ID_COUNT++,null==i&&(i="null"),this._name=i,this._originalName=i,this.updateFullPath()}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){throw new s},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originalName",{get:function(){return this._originalName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){var e;e=this._name,this._name=t,null==this._name&&(this._name="null"),this.updateFullPath(),this.dispatchEvent(new r(r.ASSET_RENAME,this,e))},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){throw new s},Object.defineProperty(e.prototype,"assetNamespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetFullPath",{get:function(){return this._full_path},enumerable:!0,configurable:!0}),e.prototype.assetPathEquals=function(t,e){return this._name==t&&(!e||this._namespace==e)},e.prototype.resetAssetPath=function(t,i,s){void 0===i&&(i=null),void 0===s&&(s=!0),this._name=t?t:"null",this._namespace=i?i:e.DEFAULT_NAMESPACE,s&&(this._originalName=this._name),this.updateFullPath()},e.prototype.updateFullPath=function(){this._full_path=[this._namespace,this._name]},e.ID_COUNT=0,e.DEFAULT_NAMESPACE="default",e}(a);e.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/events/AssetEvent":void 0,"awayjs-core/lib/events/EventDispatcher":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/library/NumSuffixConflictStrategy":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/ConflictStrategyBase"),r=function(t){function e(e){void 0===e&&(e="."),t.call(this),this._separator=e,this._next_suffix={}}return i(e,t),e.prototype.resolveConflict=function(t,e,i,s){var r,a,n,o;r=t.name,r.indexOf(this._separator)>=0?(n=r.substring(0,r.lastIndexOf(this._separator)),o=parseInt(r.substring(n.length-1)),isNaN(o)&&(n=r,o=0)):(n=r,o=0),0==o&&this._next_suffix.hasOwnProperty(n)&&(o=this._next_suffix[n]);do o++,a=n.concat(this._separator,o.toString());while(i.hasOwnProperty(a));this._next_suffix[n]=o,this._pUpdateNames(e.assetNamespace,a,e,t,i,s)},e.prototype.create=function(){return new e(this._separator)},e}(s);e.exports=r},{"awayjs-core/lib/library/ConflictStrategyBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/net/CrossDomainPolicy":[function(t,e){var i=function(){function t(){}return t.ANONYMOUS="anonymous",t.USE_CREDENTIALS="use-credentials",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/net/URLLoaderDataFormat":[function(t,e){var i=function(){function t(){}return t.TEXT="text",t.VARIABLES="variables",t.BLOB="blob",t.ARRAY_BUFFER="arraybuffer",t.BINARY="binary",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/net/URLLoader":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/net/URLLoaderDataFormat"),r=t("awayjs-core/lib/net/URLRequestMethod"),a=t("awayjs-core/lib/net/URLVariables"),n=t("awayjs-core/lib/events/Event"),o=t("awayjs-core/lib/events/EventDispatcher"),h=t("awayjs-core/lib/events/HTTPStatusEvent"),l=t("awayjs-core/lib/events/IOErrorEvent"),p=t("awayjs-core/lib/events/ProgressEvent"),d=function(t){function e(){t.call(this),this._bytesLoaded=0,this._bytesTotal=0,this._dataFormat=s.TEXT,this._loadError=!1}return i(e,t),Object.defineProperty(e.prototype,"url",{get:function(){return this._request?this._request.url:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataFormat",{get:function(){return this._dataFormat},set:function(t){this._dataFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bytesLoaded",{get:function(){return this._bytesLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bytesTotal",{get:function(){return this._bytesTotal},enumerable:!0,configurable:!0}),e.prototype.load=function(t){this._request=t,this.initXHR(),t.method===r.POST?this.postRequest(t):this.getRequest(t)},e.prototype.close=function(){this._XHR.abort(),this.disposeXHR()},e.prototype.dispose=function(){this._XHR&&this._XHR.abort(),this.disposeXHR(),this._data=null,this._dataFormat=null,this._bytesLoaded=null,this._bytesTotal=null},e.prototype.setResponseType=function(t,e){switch(e){case s.ARRAY_BUFFER:case s.BLOB:case s.TEXT:t.responseType=e;break;case s.VARIABLES:t.responseType=s.TEXT;break;case s.BINARY:t.responseType=""}},e.prototype.getRequest=function(t){try{this._XHR.open(t.method,t.url,t.async),this.setResponseType(this._XHR,this._dataFormat),this._XHR.send()}catch(e){this.handleXmlHttpRequestException(e)}},e.prototype.postRequest=function(t){if(this._loadError=!1,this._XHR.open(t.method,t.url,t.async),null!=t.data)if(t.data instanceof a){var e=t.data;try{this._XHR.responseType="text",this._XHR.send(e.formData)}catch(i){this.handleXmlHttpRequestException(i)}}else this.setResponseType(this._XHR,this._dataFormat),t.data?this._XHR.send(t.data):this._XHR.send();else this._XHR.send()},e.prototype.handleXmlHttpRequestException=function(t){switch(t.code){case 101:}},e.prototype.initXHR=function(){var t=this;this._XHR||(this._XHR=new XMLHttpRequest,this._XHR.onloadstart=function(e){return t.onLoadStart(e)},this._XHR.onprogress=function(e){return t.onProgress(e)},this._XHR.onabort=function(e){return t.onAbort(e)},this._XHR.onerror=function(e){return t.onLoadError(e)},this._XHR.onload=function(e){return t.onLoadComplete(e)},this._XHR.ontimeout=function(e){return t.onTimeOut(e)},this._XHR.onloadend=function(e){return t.onLoadEnd(e)},this._XHR.onreadystatechange=function(e){return t.onReadyStateChange(e)})},e.prototype.disposeXHR=function(){null!==this._XHR&&(this._XHR.onloadstart=null,this._XHR.onprogress=null,this._XHR.onabort=null,this._XHR.onerror=null,this._XHR.onload=null,this._XHR.ontimeout=null,this._XHR.onloadend=null,this._XHR=null)},e.prototype.decodeURLVariables=function(t){var e=new Object;t=t.split("+").join(" ");for(var i,s=/[?&]?([^=]+)=([^&]*)/g;i=s.exec(t);)e[decodeURIComponent(i[1])]=decodeURIComponent(i[2]);return e},e.prototype.onReadyStateChange=function(){4==this._XHR.readyState&&(404==this._XHR.status&&(this._loadError=!0,this._loadErrorEvent||(this._loadErrorEvent=new l(l.IO_ERROR)),this.dispatchEvent(this._loadErrorEvent)),this.dispatchEvent(new h(h.HTTP_STATUS,this._XHR.status)))},e.prototype.onLoadEnd=function(){this._loadError===!0},e.prototype.onTimeOut=function(){},e.prototype.onAbort=function(){},e.prototype.onProgress=function(t){this._progressEvent||(this._progressEvent=new p(p.PROGRESS)),this._progressEvent.bytesTotal=t.total,this._progressEvent.bytesLoaded=t.loaded,this.dispatchEvent(this._progressEvent)},e.prototype.onLoadStart=function(){this._loadStartEvent||(this._loadStartEvent=new n(n.OPEN)),this.dispatchEvent(this._loadStartEvent)},e.prototype.onLoadComplete=function(){if(this._loadError!==!0){switch(this._dataFormat){case s.TEXT:this._data=this._XHR.responseText;break;case s.VARIABLES:this._data=this.decodeURLVariables(this._XHR.responseText);break;case s.BLOB:case s.ARRAY_BUFFER:case s.BINARY:this._data=this._XHR.response;break;default:this._data=this._XHR.responseText}this._loadCompleteEvent||(this._loadCompleteEvent=new n(n.COMPLETE)),this.dispatchEvent(this._loadCompleteEvent)}},e.prototype.onLoadError=function(){this._loadError=!0,this._loadErrorEvent||(this._loadErrorEvent=new l(l.IO_ERROR)),this.dispatchEvent(this._loadErrorEvent)},e}(o);e.exports=d},{"awayjs-core/lib/events/Event":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-core/lib/events/HTTPStatusEvent":void 0,"awayjs-core/lib/events/IOErrorEvent":void 0,"awayjs-core/lib/events/ProgressEvent":void 0,"awayjs-core/lib/net/URLLoaderDataFormat":void 0,"awayjs-core/lib/net/URLRequestMethod":void 0,"awayjs-core/lib/net/URLVariables":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/net/URLRequestMethod":[function(t,e){var i=function(){function t(){}return t.POST="POST",t.GET="GET",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/net/URLRequest":[function(t,e){var i=t("awayjs-core/lib/net/URLRequestMethod"),s=function(){function t(t){void 0===t&&(t=null),this.method=i.GET,this.async=!0,this._url=t}return Object.defineProperty(t.prototype,"url",{get:function(){return this._url},set:function(t){this._url=t},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.data=null,this._url=null},t}();e.exports=s},{"awayjs-core/lib/net/URLRequestMethod":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/net/URLVariables":[function(t,e){var i=function(){function t(t){void 0===t&&(t=null),this._variables=new Object,null!==t&&this.decode(t)}return t.prototype.decode=function(t){t=t.split("+").join(" ");for(var e,i=/[?&]?([^=]+)=([^&]*)/g;e=i.exec(t);)this._variables[decodeURIComponent(e[1])]=decodeURIComponent(e[2])},t.prototype.toString=function(){return""},Object.defineProperty(t.prototype,"variables",{get:function(){return this._variables},set:function(t){this._variables=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formData",{get:function(){var t=new FormData;for(var e in this._variables)t.append(e,this._variables[e]);return t},enumerable:!0,configurable:!0}),t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/parsers/CubeTextureParser":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/net/URLLoaderDataFormat"),r=t("awayjs-core/lib/net/URLRequest"),a=t("awayjs-core/lib/parsers/ParserBase"),n=t("awayjs-core/lib/textures/ImageCubeTexture"),o=function(t){function e(){t.call(this,s.TEXT)}return i(e,t),e.supportsType=function(t){return t=t.toLowerCase(),"cube"==t},e.supportsData=function(t){try{var e=JSON.parse(t);return e?!0:!1}catch(i){return!1}return!1},e.prototype._iResolveDependency=function(){},e.prototype._iResolveDependencyFailure=function(){},e.prototype._pProceedParsing=function(){if(null!=this._imgDependencyDictionary){var t=new n(this._getHTMLImageElement(e.posX),this._getHTMLImageElement(e.negX),this._getHTMLImageElement(e.posY),this._getHTMLImageElement(e.negY),this._getHTMLImageElement(e.posZ),this._getHTMLImageElement(e.negZ));return this._imgDependencyDictionary=null,t.name=this._iFileName,this._pFinalizeAsset(t,this._iFileName),a.PARSING_DONE}try{var i,s=JSON.parse(this.data),o=s.data;if(6!=o.length&&this._pDieWithError("CubeTextureParser: Error - cube texture should have exactly 6 images"),s){this._imgDependencyDictionary=new Object;for(var h=0;h<o.length;h++)i=o[h],this._imgDependencyDictionary[i.id]=this._pAddDependency(i.id,new r(i.image.toString()));return this._validateCubeData()?(this._pPauseAndRetrieveDependencies(),a.MORE_TO_PARSE):(this._pDieWithError("CubeTextureParser: JSON data error - cubes require id of:   \n"+e.posX+", "+e.negX+",  \n"+e.posY+", "+e.negY+",  \n"+e.posZ+", "+e.negZ),a.PARSING_DONE)}}catch(l){this._pDieWithError("CubeTexturePaser Error parsing JSON")}return a.PARSING_DONE},e.prototype._validateCubeData=function(){return null!=this._imgDependencyDictionary[e.posX]&&null!=this._imgDependencyDictionary[e.negX]&&null!=this._imgDependencyDictionary[e.posY]&&null!=this._imgDependencyDictionary[e.negY]&&null!=this._imgDependencyDictionary[e.posZ]&&null!=this._imgDependencyDictionary[e.negZ]},e.prototype._getHTMLImageElement=function(t){var e=this._imgDependencyDictionary[t];return e?e.assets[0].htmlImageElement:null},e.posX="posX",e.negX="negX",e.posY="posY",e.negY="negY",e.posZ="posZ",e.negZ="negZ",e}(a);e.exports=o},{"awayjs-core/lib/net/URLLoaderDataFormat":void 0,"awayjs-core/lib/net/URLRequest":void 0,"awayjs-core/lib/parsers/ParserBase":void 0,"awayjs-core/lib/textures/ImageCubeTexture":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/parsers/ParserBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/AbstractMethodError"),r=t("awayjs-core/lib/events/AssetEvent"),a=t("awayjs-core/lib/events/EventDispatcher"),n=t("awayjs-core/lib/events/ParserEvent"),o=t("awayjs-core/lib/events/TimerEvent"),h=t("awayjs-core/lib/parsers/ParserUtils"),l=t("awayjs-core/lib/parsers/ResourceDependency"),p=t("awayjs-core/lib/utils/TextureUtils"),d=t("awayjs-core/lib/utils/Timer"),u=t("awayjs-core/lib/utils/getTimer"),c=function(t){function e(e){var i=this;t.call(this),this._materialMode=0,this._dataFormat=e,this._dependencies=new Array,this._pOnIntervalDelegate=function(t){return i._pOnInterval(t)}}return i(e,t),e.supportsType=function(){throw new s},Object.defineProperty(e.prototype,"content",{get:function(){return this._pContent},enumerable:!0,configurable:!0}),e.prototype.isBitmapDataValid=function(t){var e=p.isBitmapDataValid(t);return e||console.log(">> Bitmap loaded is not having power of 2 dimensions or is higher than 2048"),e},Object.defineProperty(e.prototype,"parsingFailure",{get:function(){return this._parsingFailure},set:function(t){this._parsingFailure=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parsingPaused",{get:function(){return this._parsingPaused},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parsingComplete",{get:function(){return this._parsingComplete},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"materialMode",{get:function(){return this._materialMode},set:function(t){this._materialMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataFormat",{get:function(){return this._dataFormat},enumerable:!0,configurable:!0}),e.prototype.parseAsync=function(t,e){void 0===e&&(e=30),this._data=t,this._pStartParsing(e)},Object.defineProperty(e.prototype,"dependencies",{get:function(){return this._dependencies},enumerable:!0,configurable:!0}),e.prototype._iResolveDependency=function(){throw new s},e.prototype._iResolveDependencyFailure=function(){throw new s},e.prototype._iResolveDependencyName=function(t,e){return e.name},e.prototype._iResumeParsingAfterDependencies=function(){this._parsingPaused=!1,this._timer&&this._timer.start()},e.prototype._pFinalizeAsset=function(t,e){void 0===e&&(e=null);null!=e&&(t.name=e),t.name||(t.name=t.assetType),this.dispatchEvent(new r(r.ASSET_COMPLETE,t))},e.prototype._pProceedParsing=function(){throw new s},e.prototype._pDieWithError=function(t){void 0===t&&(t="Unknown parsing error"),this._timer&&(this._timer.removeEventListener(o.TIMER,this._pOnIntervalDelegate),this._timer.stop(),this._timer=null),this.dispatchEvent(new n(n.PARSE_ERROR,t))},e.prototype._pAddDependency=function(t,e,i,s,r){void 0===i&&(i=!1),void 0===s&&(s=null),void 0===r&&(r=!1);var a=new l(t,e,s,null,this,i,r);return this._dependencies.push(a),a},e.prototype._pPauseAndRetrieveDependencies=function(){this._timer&&this._timer.stop(),this._parsingPaused=!0,this.dispatchEvent(new n(n.READY_FOR_DEPENDENCIES))},e.prototype._pHasTime=function(){return u()-this._lastFrameTime<this._frameLimit},e.prototype._pOnInterval=function(t){void 0===t&&(t=null),this._lastFrameTime=u(),this._pProceedParsing()&&!this._parsingFailure&&this._pFinishParsing()},e.prototype._pStartParsing=function(t){this._frameLimit=t,this._timer=new d(this._frameLimit,0),this._timer.addEventListener(o.TIMER,this._pOnIntervalDelegate),this._timer.start()},e.prototype._pFinishParsing=function(){this._timer&&(this._timer.removeEventListener(o.TIMER,this._pOnIntervalDelegate),this._timer.stop()),this._timer=null,this._parsingComplete=!0,this.dispatchEvent(new n(n.PARSE_COMPLETE))},e.prototype._pGetTextData=function(){return h.toString(this._data)},e.prototype._pGetByteData=function(){return h.toByteArray(this._data)},e.PARSING_DONE=!0,e.MORE_TO_PARSE=!1,e}(a);e.exports=c},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/events/AssetEvent":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-core/lib/events/ParserEvent":void 0,"awayjs-core/lib/events/TimerEvent":void 0,"awayjs-core/lib/parsers/ParserUtils":void 0,"awayjs-core/lib/parsers/ResourceDependency":void 0,"awayjs-core/lib/utils/TextureUtils":void 0,"awayjs-core/lib/utils/Timer":void 0,"awayjs-core/lib/utils/getTimer":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/parsers/ParserDataFormat":[function(t,e){var i=function(){function t(){}return t.BINARY="binary",t.PLAIN_TEXT="plainText",t.IMAGE="image",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/parsers/ParserUtils":[function(t,e){var i=t("awayjs-core/lib/utils/ByteArray"),s=function(){function t(){}return t.arrayBufferToImage=function(t){for(var e="",i=new Uint8Array(t),s=i.byteLength,r=0;s>r;r++)e+=String.fromCharCode(i[r]);var a=window.btoa(e),n="data:image/png;base64,"+a,o=new Image;return o.src=n,o},t.byteArrayToImage=function(t){for(var e="",i=new Uint8Array(t.arraybytes),s=i.byteLength,r=0;s>r;r++)e+=String.fromCharCode(i[r]);var a=window.btoa(e),n="data:image/png;base64,"+a,o=new Image;return o.src=n,o},t.blobToImage=function(t){var e=window.URL||window.webkitURL,i=e.createObjectURL(t),s=new Image;return s.src=i,s},t.toByteArray=function(t){var e=new i;return e.setArrayBuffer(t),e},t.toString=function(t,e){if(void 0===e&&(e=0),"string"==typeof t){var s=t;if(null!=s.substr)return s.substr(0,s.length)}if(t instanceof i){var r=t;return r.position=0,r.readUTFBytes(Math.min(r.getBytesAvailable(),e))}return null},t}();e.exports=s},{"awayjs-core/lib/utils/ByteArray":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/parsers/ResourceDependency":[function(t,e){var i=function(){function t(t,e,i,s,r,a,n){void 0===a&&(a=!1),void 0===n&&(n=!1),this._id=t,this._request=e,this._data=i,this._parser=s,this._parentParser=r,this._retrieveAsRawData=a,this._suppressAssetEvents=n,this._assets=new Array,this._dependencies=new Array}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"request",{get:function(){return this._request},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parser",{get:function(){return this._parser},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentParser",{get:function(){return this._parentParser},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"retrieveAsRawData",{get:function(){return this._retrieveAsRawData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suppresAssetEvents",{get:function(){return this._suppressAssetEvents},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"assets",{get:function(){return this._assets},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dependencies",{get:function(){return this._dependencies},enumerable:!0,configurable:!0}),t.prototype._iSetData=function(t){this._data=t},t.prototype._iSetParser=function(t){this._parser=t},t.prototype.resolve=function(){this._parentParser&&this._parentParser._iResolveDependency(this)},t.prototype.resolveFailure=function(){this._parentParser&&this._parentParser._iResolveDependencyFailure(this)},t.prototype.resolveName=function(t){return this._parentParser?this._parentParser._iResolveDependencyName(this,t):t.name},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/parsers/Texture2DParser":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/net/URLLoaderDataFormat"),r=t("awayjs-core/lib/parsers/ParserBase"),a=t("awayjs-core/lib/parsers/ParserUtils"),n=t("awayjs-core/lib/utils/ByteArray"),o=t("awayjs-core/lib/utils/TextureUtils"),h=t("awayjs-core/lib/textures/ImageTexture"),l=function(t){function e(){t.call(this,s.BLOB)}return i(e,t),e.supportsType=function(t){return t=t.toLowerCase(),"jpg"==t||"jpeg"==t||"png"==t||"gif"==t},e.supportsData=function(t){if(t instanceof HTMLImageElement)return!0;if(!(t instanceof n))return!1;var e=t;return e.position=0,65496==e.readUnsignedShort()?!0:(e.position=0,16973==e.readShort()?!0:(e.position=1,"PNG"==e.readUTFBytes(3)?!0:(e.position=0,"GIF"==e.readUTFBytes(3)&&14393==e.readShort()&&97==e.readByte()?!0:(e.position=0,"ATF"==e.readUTFBytes(3)?!0:!1))))},e.prototype._pProceedParsing=function(){var t,e=this,i=!1;if(this._loadingImage)return r.MORE_TO_PARSE;if(this._htmlImageElement)o.isHTMLImageElementValid(this._htmlImageElement)&&(t=new h(this._htmlImageElement),this._pFinalizeAsset(t,this._iFileName));else if(this.data instanceof HTMLImageElement)o.isHTMLImageElementValid(this.data)?(t=new h(this.data),this._pFinalizeAsset(t,this._iFileName)):i=!0;else if(this.data instanceof n){var s=this.data;s.position=0;var l=a.byteArrayToImage(this.data);o.isHTMLImageElementValid(l)?(t=new h(l),this._pFinalizeAsset(t,this._iFileName)):i=!0}else if(this.data instanceof ArrayBuffer)this._htmlImageElement=a.arrayBufferToImage(this.data),t=new h(this._htmlImageElement),this._pFinalizeAsset(t,this._iFileName);else if(this.data instanceof Blob)return this._htmlImageElement=a.blobToImage(this.data),this._htmlImageElement.onload=function(t){return e.onLoadComplete(t)},this._loadingImage=!0,r.MORE_TO_PARSE;return this._pContent=t,r.PARSING_DONE},e.prototype.onLoadComplete=function(){this._loadingImage=!1},e}(r);e.exports=l},{"awayjs-core/lib/net/URLLoaderDataFormat":void 0,"awayjs-core/lib/parsers/ParserBase":void 0,"awayjs-core/lib/parsers/ParserUtils":void 0,"awayjs-core/lib/textures/ImageTexture":void 0,"awayjs-core/lib/utils/ByteArray":void 0,"awayjs-core/lib/utils/TextureUtils":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/pool/ITextureData":[function(){},{}],"awayjs-dist/node_modules/awayjs-core/lib/projections/CoordinateSystem":[function(t,e){var i=function(){function t(){}return t.LEFT_HANDED="leftHanded",t.RIGHT_HANDED="rightHanded",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/projections/FreeMatrixProjection":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/projections/PerspectiveProjection"),r=t("awayjs-core/lib/projections/ProjectionBase"),a=function(t){function e(){t.call(this),this._pMatrix.copyFrom((new s).matrix)}return i(e,t),Object.defineProperty(e.prototype,"near",{set:function(t){this._pNear=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"far",{set:function(t){this._pFar=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iAspectRatio",{set:function(t){this._pAspectRatio=t},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=new e;return t._pMatrix.copyFrom(this._pMatrix),t._pNear=this._pNear,t._pFar=this._pFar,t._pAspectRatio=this._pAspectRatio,t.pInvalidateMatrix(),t},e.prototype.pUpdateMatrix=function(){this._pMatrixInvalid=!1},e}(r);e.exports=a},{"awayjs-core/lib/projections/PerspectiveProjection":void 0,"awayjs-core/lib/projections/ProjectionBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/projections/IProjection":[function(){},{}],"awayjs-dist/node_modules/awayjs-core/lib/projections/ObliqueNearPlaneProjection":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t
}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-core/lib/events/ProjectionEvent"),a=t("awayjs-core/lib/projections/ProjectionBase"),n=function(t){function e(e,i){var s=this;t.call(this),this.baseProjection=e,this.plane=i,this._onProjectionMatrixChangedDelegate=function(t){return s.onProjectionMatrixChanged(t)}}return i(e,t),Object.defineProperty(e.prototype,"frustumCorners",{get:function(){return this._baseProjection.frustumCorners},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"near",{get:function(){return this._baseProjection.near},set:function(t){this._baseProjection.near=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"far",{get:function(){return this._baseProjection.far},set:function(t){this._baseProjection.far=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iAspectRatio",{get:function(){return this._baseProjection._iAspectRatio},set:function(t){this._baseProjection._iAspectRatio=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plane",{get:function(){return this._plane},set:function(t){this._plane=t,this.pInvalidateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseProjection",{set:function(t){this._baseProjection&&this._baseProjection.removeEventListener(r.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate),this._baseProjection=t,this._baseProjection&&this._baseProjection.addEventListener(r.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate),this.pInvalidateMatrix()},enumerable:!0,configurable:!0}),e.prototype.onProjectionMatrixChanged=function(){this.pInvalidateMatrix()},e.prototype.pUpdateMatrix=function(){this._pMatrix.copyFrom(this._baseProjection.matrix);var t=this._plane.a,e=this._plane.b,i=this._plane.c,r=-this._plane.d+.05,a=t>=0?1:-1,n=e>=0?1:-1,o=new s(a,n,1,1),h=this._pMatrix.clone();h.invert();var l=h.transformVector(o);this._pMatrix.copyRowTo(3,o);var p=(l.x*o.x+l.y*o.y+l.z*o.z+l.w*o.w)/(t*l.x+e*l.y+i*l.z+r*l.w);this._pMatrix.copyRowFrom(2,new s(t*p,e*p,i*p,r*p))},e}(a);e.exports=n},{"awayjs-core/lib/events/ProjectionEvent":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-core/lib/projections/ProjectionBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/projections/OrthographicOffCenterProjection":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-core/lib/projections/ProjectionBase"),a=function(t){function e(e,i,s,r){t.call(this),this._minX=e,this._maxX=i,this._minY=s,this._maxY=r}return i(e,t),Object.defineProperty(e.prototype,"minX",{get:function(){return this._minX},set:function(t){this._minX=t,this.pInvalidateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxX",{get:function(){return this._maxX},set:function(t){this._maxX=t,this.pInvalidateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minY",{get:function(){return this._minY},set:function(t){this._minY=t,this.pInvalidateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxY",{get:function(){return this._maxY},set:function(t){this._maxY=t,this.pInvalidateMatrix()},enumerable:!0,configurable:!0}),e.prototype.unproject=function(t,e,i){var r=new s(t,-e,i,1);return r=this.unprojectionMatrix.transformVector(r),r.z=i,r},e.prototype.clone=function(){var t=new e(this._minX,this._maxX,this._minY,this._maxY);return t._pNear=this._pNear,t._pFar=this._pFar,t._pAspectRatio=this._pAspectRatio,t},e.prototype.pUpdateMatrix=function(){var t=[],e=1/(this._maxX-this._minX),i=1/(this._maxY-this._minY),s=1/(this._pFar-this._pNear);t[0]=2*e,t[5]=2*i,t[10]=s,t[12]=-(this._maxX+this._minX)*e,t[13]=-(this._maxY+this._minY)*i,t[14]=-this._pNear*s,t[15]=1,t[1]=t[2]=t[3]=t[4]=t[6]=t[7]=t[8]=t[9]=t[11]=0,this._pMatrix.copyRawDataFrom(t),this._pFrustumCorners[0]=this._pFrustumCorners[9]=this._pFrustumCorners[12]=this._pFrustumCorners[21]=this._minX,this._pFrustumCorners[3]=this._pFrustumCorners[6]=this._pFrustumCorners[15]=this._pFrustumCorners[18]=this._maxX,this._pFrustumCorners[1]=this._pFrustumCorners[4]=this._pFrustumCorners[13]=this._pFrustumCorners[16]=this._minY,this._pFrustumCorners[7]=this._pFrustumCorners[10]=this._pFrustumCorners[19]=this._pFrustumCorners[22]=this._maxY,this._pFrustumCorners[2]=this._pFrustumCorners[5]=this._pFrustumCorners[8]=this._pFrustumCorners[11]=this._pNear,this._pFrustumCorners[14]=this._pFrustumCorners[17]=this._pFrustumCorners[20]=this._pFrustumCorners[23]=this._pFar,this._pMatrixInvalid=!1},e}(r);e.exports=a},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-core/lib/projections/ProjectionBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/projections/OrthographicProjection":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-core/lib/projections/ProjectionBase"),a=function(t){function e(e){void 0===e&&(e=500),t.call(this),this._projectionHeight=e}return i(e,t),Object.defineProperty(e.prototype,"projectionHeight",{get:function(){return this._projectionHeight},set:function(t){t!=this._projectionHeight&&(this._projectionHeight=t,this.pInvalidateMatrix())},enumerable:!0,configurable:!0}),e.prototype.unproject=function(t,e,i){var r=new s(t+this.matrix.rawData[12],-e+this.matrix.rawData[13],i,1);return r=this.unprojectionMatrix.transformVector(r),r.z=i,r},e.prototype.clone=function(){var t=new e;return t._pNear=this._pNear,t._pFar=this._pFar,t._pAspectRatio=this._pAspectRatio,t.projectionHeight=this._projectionHeight,t},e.prototype.pUpdateMatrix=function(){var t=[];this._yMax=.5*this._projectionHeight,this._xMax=this._yMax*this._pAspectRatio;var e,i,s,r;if(0==this._pScissorRect.x&&0==this._pScissorRect.y&&this._pScissorRect.width==this._pViewPort.width&&this._pScissorRect.height==this._pViewPort.height)e=-this._xMax,i=this._xMax,s=-this._yMax,r=this._yMax,t[0]=2/(this._projectionHeight*this._pAspectRatio),t[5]=2/this._projectionHeight,t[10]=1/(this._pFar-this._pNear),t[14]=this._pNear/(this._pNear-this._pFar),t[1]=t[2]=t[3]=t[4]=t[6]=t[7]=t[8]=t[9]=t[11]=t[12]=t[13]=0,t[15]=1;else{var a=this._xMax*(this._pViewPort.width/this._pScissorRect.width),n=this._yMax*(this._pViewPort.height/this._pScissorRect.height),o=this._xMax*(2*this._pScissorRect.x-this._pViewPort.width)/this._pScissorRect.width+this._xMax,h=-this._yMax*(2*this._pScissorRect.y-this._pViewPort.height)/this._pScissorRect.height-this._yMax;e=o-a,i=o+a,s=h-n,r=h+n,t[0]=2/(i-e),t[5]=-2/(s-r),t[10]=1/(this._pFar-this._pNear),t[12]=(i+e)/(i-e),t[13]=(r+s)/(r-s),t[14]=this._pNear/(this.near-this.far),t[1]=t[2]=t[3]=t[4]=t[6]=t[7]=t[8]=t[9]=t[11]=0,t[15]=1}this._pFrustumCorners[0]=this._pFrustumCorners[9]=this._pFrustumCorners[12]=this._pFrustumCorners[21]=e,this._pFrustumCorners[3]=this._pFrustumCorners[6]=this._pFrustumCorners[15]=this._pFrustumCorners[18]=i,this._pFrustumCorners[1]=this._pFrustumCorners[4]=this._pFrustumCorners[13]=this._pFrustumCorners[16]=s,this._pFrustumCorners[7]=this._pFrustumCorners[10]=this._pFrustumCorners[19]=this._pFrustumCorners[22]=r,this._pFrustumCorners[2]=this._pFrustumCorners[5]=this._pFrustumCorners[8]=this._pFrustumCorners[11]=this._pNear,this._pFrustumCorners[14]=this._pFrustumCorners[17]=this._pFrustumCorners[20]=this._pFrustumCorners[23]=this._pFar,this._pMatrix.copyRawDataFrom(t),this._pMatrixInvalid=!1},e}(r);e.exports=a},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-core/lib/projections/ProjectionBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/projections/PerspectiveProjection":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-core/lib/projections/CoordinateSystem"),a=t("awayjs-core/lib/projections/ProjectionBase"),n=function(t){function e(e,i){void 0===e&&(e=60),void 0===i&&(i="leftHanded"),t.call(this,i),this._fieldOfView=60,this._focalLength=1e3,this._hFieldOfView=60,this._hFocalLength=1e3,this._preserveAspectRatio=!0,this._preserveFocalLength=!1,this.fieldOfView=e}return i(e,t),Object.defineProperty(e.prototype,"preserveAspectRatio",{get:function(){return this._preserveAspectRatio},set:function(t){this._preserveAspectRatio!=t&&(this._preserveAspectRatio=t,this._preserveAspectRatio&&this.pInvalidateMatrix())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preserveFocalLength",{get:function(){return this._preserveFocalLength},set:function(t){this._preserveFocalLength!=t&&(this._preserveFocalLength=t,this.pInvalidateMatrix())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldOfView",{get:function(){return this._fieldOfView},set:function(t){this._fieldOfView!=t&&(this._fieldOfView=t,this.pInvalidateMatrix())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focalLength",{get:function(){return this._focalLength},set:function(t){this._focalLength!=t&&(this._focalLength=t,this.pInvalidateMatrix())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hFieldOfView",{get:function(){return this._hFieldOfView},set:function(t){this._hFieldOfView!=t&&(this._hFieldOfView=t,this._hFocalLength=1/Math.tan(this._hFieldOfView*Math.PI/360),this.pInvalidateMatrix())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hFocalLength",{get:function(){return this._hFocalLength},set:function(t){this._hFocalLength!=t&&(this._hFocalLength=t,this.pInvalidateMatrix())},enumerable:!0,configurable:!0}),e.prototype.unproject=function(t,e,i){var r=new s(t,-e,i,1);return r.x*=i,r.y*=i,r=this.unprojectionMatrix.transformVector(r),r.z=i,r},e.prototype.clone=function(){var t=new e(this._fieldOfView);return t._pNear=this._pNear,t._pFar=this._pFar,t._pAspectRatio=this._pAspectRatio,t._pCoordinateSystem=this._pCoordinateSystem,t},e.prototype.pUpdateMatrix=function(){var t=[];this._preserveFocalLength?(this._preserveAspectRatio&&(this._hFocalLength=this._focalLength),this._fieldOfView=360*Math.atan(.5*this._pScissorRect.height/this._focalLength)/Math.PI,this._hFieldOfView=360*Math.atan(.5*this._pScissorRect.width/this._hFocalLength)/Math.PI):(this._focalLength=.5*this._pScissorRect.height/Math.tan(this._fieldOfView*Math.PI/360),this._hFocalLength=this._preserveAspectRatio?this._focalLength:.5*this._pScissorRect.width/Math.tan(this._hFieldOfView*Math.PI/360));var e,i,s,a,n=-this._pOriginX/this._hFocalLength,o=(1-this._pOriginX)/this._hFocalLength,h=-this._pOriginY/this._focalLength,l=(1-this._pOriginY)/this._focalLength,p=-((n-o)*this._pScissorRect.x+n*this._pScissorRect.width),d=(h-l)*this._pScissorRect.y+h*this._pScissorRect.height;e=p-(o-n)*this._pViewPort.width,i=p,s=d,a=d+(l-h)*this._pViewPort.height,t[0]=2/(i-e),t[5]=2/(a-s),t[8]=(i+e)/(i-e),t[9]=(a+s)/(a-s),t[10]=(this._pFar+this._pNear)/(this._pFar-this._pNear),t[11]=1,t[1]=t[2]=t[3]=t[4]=t[6]=t[7]=t[12]=t[13]=t[15]=0,t[14]=-2*this._pFar*this._pNear/(this._pFar-this._pNear),this._pCoordinateSystem==r.RIGHT_HANDED&&(t[5]=-t[5]),this._pMatrix.copyRawDataFrom(t),this._pFrustumCorners[0]=this._pFrustumCorners[9]=this._pNear*e,this._pFrustumCorners[3]=this._pFrustumCorners[6]=this._pNear*i,this._pFrustumCorners[1]=this._pFrustumCorners[4]=this._pNear*s,this._pFrustumCorners[7]=this._pFrustumCorners[10]=this._pNear*a,this._pFrustumCorners[12]=this._pFrustumCorners[21]=this._pFar*e,this._pFrustumCorners[15]=this._pFrustumCorners[18]=this._pFar*i,this._pFrustumCorners[13]=this._pFrustumCorners[16]=this._pFar*s,this._pFrustumCorners[19]=this._pFrustumCorners[22]=this._pFar*a,this._pFrustumCorners[2]=this._pFrustumCorners[5]=this._pFrustumCorners[8]=this._pFrustumCorners[11]=this._pNear,this._pFrustumCorners[14]=this._pFrustumCorners[17]=this._pFrustumCorners[20]=this._pFrustumCorners[23]=this._pFar,this._pMatrixInvalid=!1},e}(a);e.exports=n},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-core/lib/projections/CoordinateSystem":void 0,"awayjs-core/lib/projections/ProjectionBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/projections/ProjectionBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),r=t("awayjs-core/lib/geom/Rectangle"),a=t("awayjs-core/lib/events/EventDispatcher"),n=t("awayjs-core/lib/events/ProjectionEvent"),o=t("awayjs-core/lib/errors/AbstractMethodError"),h=function(t){function e(e){void 0===e&&(e="leftHanded"),t.call(this),this._pMatrix=new s,this._pScissorRect=new r,this._pViewPort=new r,this._pNear=20,this._pFar=3e3,this._pAspectRatio=1,this._pMatrixInvalid=!0,this._pFrustumCorners=[],this._pOriginX=.5,this._pOriginY=.5,this._unprojectionInvalid=!0,this.coordinateSystem=e}return i(e,t),Object.defineProperty(e.prototype,"coordinateSystem",{get:function(){return this._pCoordinateSystem},set:function(t){this._pCoordinateSystem!=t&&(this._pCoordinateSystem=t,this.pInvalidateMatrix())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frustumCorners",{get:function(){return this._pFrustumCorners},set:function(t){this._pFrustumCorners=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"matrix",{get:function(){return this._pMatrixInvalid&&(this.pUpdateMatrix(),this._pMatrixInvalid=!1),this._pMatrix},set:function(t){this._pMatrix=t,this.pInvalidateMatrix()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"near",{get:function(){return this._pNear},set:function(t){t!=this._pNear&&(this._pNear=t,this.pInvalidateMatrix())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originX",{get:function(){return this._pOriginX},set:function(t){this._pOriginX!=t&&(this._pOriginX=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"originY",{get:function(){return this._pOriginY},set:function(t){this._pOriginY!=t&&(this._pOriginY=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"far",{get:function(){return this._pFar},set:function(t){t!=this._pFar&&(this._pFar=t,this.pInvalidateMatrix())},enumerable:!0,configurable:!0}),e.prototype.project=function(t){var e=this.matrix.transformVector(t);return e.x=e.x/e.w,e.y=-e.y/e.w,e.z=t.z,e},Object.defineProperty(e.prototype,"unprojectionMatrix",{get:function(){return this._unprojectionInvalid&&(this._unprojection||(this._unprojection=new s),this._unprojection.copyFrom(this.matrix),this._unprojection.invert(),this._unprojectionInvalid=!1),this._unprojection},enumerable:!0,configurable:!0}),e.prototype.unproject=function(){throw new o},e.prototype.clone=function(){throw new o},Object.defineProperty(e.prototype,"_iAspectRatio",{get:function(){return this._pAspectRatio},set:function(t){this._pAspectRatio!=t&&(this._pAspectRatio=t,this.pInvalidateMatrix())},enumerable:!0,configurable:!0}),e.prototype.pInvalidateMatrix=function(){this._pMatrixInvalid=!0,this._unprojectionInvalid=!0,this.dispatchEvent(new n(n.MATRIX_CHANGED,this))},e.prototype.pUpdateMatrix=function(){throw new o},e.prototype._iUpdateScissorRect=function(t,e,i,s){this._pScissorRect.x=t,this._pScissorRect.y=e,this._pScissorRect.width=i,this._pScissorRect.height=s,this.pInvalidateMatrix()},e.prototype._iUpdateViewport=function(t,e,i,s){this._pViewPort.x=t,this._pViewPort.y=e,this._pViewPort.width=i,this._pViewPort.height=s,this.pInvalidateMatrix()},e}(a);e.exports=h},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-core/lib/events/ProjectionEvent":void 0,"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Rectangle":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/textures/BitmapCubeTexture":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),r=t("awayjs-core/lib/textures/CubeTextureBase"),a=t("awayjs-core/lib/utils/TextureUtils"),n=function(t){function e(e,i,s,r,a,n,o){void 0===o&&(o=!1),t.call(this,o),this._bitmapDatas=new Array(6),this._testSize(this._bitmapDatas[0]=e),this._testSize(this._bitmapDatas[1]=i),this._testSize(this._bitmapDatas[2]=s),this._testSize(this._bitmapDatas[3]=r),this._testSize(this._bitmapDatas[4]=a),this._testSize(this._bitmapDatas[5]=n),this.invalidateContent(),this._pSetSize(e.width)}return i(e,t),Object.defineProperty(e.prototype,"positiveX",{get:function(){return this._bitmapDatas[0]},set:function(t){this._testSize(t),this.invalidateContent(),this._pSetSize(t.width),this._bitmapDatas[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"negativeX",{get:function(){return this._bitmapDatas[1]},set:function(t){this._testSize(t),this.invalidateContent(),this._pSetSize(t.width),this._bitmapDatas[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positiveY",{get:function(){return this._bitmapDatas[2]},set:function(t){this._testSize(t),this.invalidateContent(),this._pSetSize(t.width),this._bitmapDatas[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"negativeY",{get:function(){return this._bitmapDatas[3]},set:function(t){this._testSize(t),this.invalidateContent(),this._pSetSize(t.width),this._bitmapDatas[3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positiveZ",{get:function(){return this._bitmapDatas[4]},set:function(t){this._testSize(t),this.invalidateContent(),this._pSetSize(t.width),this._bitmapDatas[4]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"negativeZ",{get:function(){return this._bitmapDatas[5]},set:function(t){this._testSize(t),this.invalidateContent(),this._pSetSize(t.width),this._bitmapDatas[5]=t},enumerable:!0,configurable:!0}),e.prototype._testSize=function(t){if(t.width!=t.height)throw new s("BitmapData should have equal width and height!");if(!a.isBitmapDataValid(t))throw new s("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048")},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=this._bitmapDatas.length,i=0;e>i;i++)this._bitmapDatas[i].dispose(),this._bitmapDatas[i]=null;this._bitmapDatas=null},e.prototype._iGetTextureData=function(t){return this._bitmapDatas[t]},e}(r);e.exports=n},{"awayjs-core/lib/errors/Error":void 0,"awayjs-core/lib/textures/CubeTextureBase":void 0,"awayjs-core/lib/utils/TextureUtils":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/textures/BitmapTexture":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),r=t("awayjs-core/lib/textures/Texture2DBase"),a=t("awayjs-core/lib/utils/TextureUtils"),n=function(t){function e(e,i){void 0===i&&(i=!1),t.call(this,i),this.bitmapData=e}return i(e,t),Object.defineProperty(e.prototype,"bitmapData",{get:function(){return this._bitmapData},set:function(t){if(this._bitmapData!=t){if(!a.isBitmapDataValid(t))throw new s("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048");this._bitmapData=t,this.invalidateContent(),this._pSetSize(t.width,t.height)}},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),this._bitmapData.dispose(),this._bitmapData=null},e.prototype._iGetTextureData=function(){return this._bitmapData},e}(r);e.exports=n},{"awayjs-core/lib/errors/Error":void 0,"awayjs-core/lib/textures/Texture2DBase":void 0,"awayjs-core/lib/utils/TextureUtils":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/textures/CubeTextureBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/AbstractMethodError"),r=t("awayjs-core/lib/textures/MipmapGenerator"),a=t("awayjs-core/lib/textures/TextureProxyBase"),n=function(t){function e(e){void 0===e&&(e=!1),t.call(this,e),this._mipmapDataArray=new Array(6),this._mipmapDataDirtyArray=new Array(6)}return i(e,t),e.prototype._pSetSize=function(t){this._pSize!=t&&this.invalidateSize();for(var e=0;6>e;e++)this._mipmapDataDirtyArray[e]=!0;this._pSize=t},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=0;6>e;e++)for(var i=this._mipmapDataArray[e],s=i.length,a=0;s>a;a++)r.freeMipMapHolder(i[a])},e.prototype.invalidateContent=function(){t.prototype.invalidateContent.call(this);for(var e=0;6>e;e++)this._mipmapDataDirtyArray[e]=!0},e.prototype._iGetMipmapData=function(t){if(this._mipmapDataDirtyArray[t]){this._mipmapDataDirtyArray[t]=!1;var e=this._mipmapDataArray[t]||(this._mipmapDataArray[t]=new Array);r.generateMipMaps(this._iGetTextureData(t),e,!0)}return this._mipmapDataArray[t]},e.prototype._iGetTextureData=function(){throw new s},e}(a);e.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/textures/MipmapGenerator":void 0,"awayjs-core/lib/textures/TextureProxyBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/textures/ImageCubeTexture":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),r=t("awayjs-core/lib/textures/CubeTextureBase"),a=t("awayjs-core/lib/utils/TextureUtils"),n=function(t){function e(e,i,s,r,a,n,o){void 0===o&&(o=!1),t.call(this,o),this._htmlImageElements=new Array(6),this._testSize(this._htmlImageElements[0]=e),this._testSize(this._htmlImageElements[1]=i),this._testSize(this._htmlImageElements[2]=s),this._testSize(this._htmlImageElements[3]=r),this._testSize(this._htmlImageElements[4]=a),this._testSize(this._htmlImageElements[5]=n),this.invalidateContent(),this._pSetSize(e.width)}return i(e,t),Object.defineProperty(e.prototype,"positiveX",{get:function(){return this._htmlImageElements[0]},set:function(t){this._testSize(t),this.invalidateContent(),this._pSetSize(t.width),this._htmlImageElements[0]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"negativeX",{get:function(){return this._htmlImageElements[1]},set:function(t){this._testSize(t),this.invalidateContent(),this._pSetSize(t.width),this._htmlImageElements[1]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positiveY",{get:function(){return this._htmlImageElements[2]},set:function(t){this._testSize(t),this.invalidateContent(),this._pSetSize(t.width),this._htmlImageElements[2]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"negativeY",{get:function(){return this._htmlImageElements[3]},set:function(t){this._testSize(t),this.invalidateContent(),this._pSetSize(t.width),this._htmlImageElements[3]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positiveZ",{get:function(){return this._htmlImageElements[4]},set:function(t){this._testSize(t),this.invalidateContent(),this._pSetSize(t.width),this._htmlImageElements[4]=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"negativeZ",{get:function(){return this._htmlImageElements[5]},set:function(t){this._testSize(t),this.invalidateContent(),this._pSetSize(t.width),this._htmlImageElements[5]=t},enumerable:!0,configurable:!0}),e.prototype._testSize=function(t){if(t.width!=t.height)throw new s("BitmapData should have equal width and height!");if(!a.isHTMLImageElementValid(t))throw new s("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048")},e.prototype._iGetTextureData=function(t){return this._htmlImageElements[t]},e}(r);e.exports=n},{"awayjs-core/lib/errors/Error":void 0,"awayjs-core/lib/textures/CubeTextureBase":void 0,"awayjs-core/lib/utils/TextureUtils":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/textures/ImageTexture":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),r=t("awayjs-core/lib/textures/Texture2DBase"),a=t("awayjs-core/lib/utils/TextureUtils"),n=function(t){function e(e,i){void 0===i&&(i=!1),t.call(this,i),this.htmlImageElement=e}return i(e,t),Object.defineProperty(e.prototype,"htmlImageElement",{get:function(){return this._htmlImageElement},set:function(t){if(this._htmlImageElement!=t){if(!a.isHTMLImageElementValid(t))throw new s("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048");this._htmlImageElement=t,this.invalidateContent(),this._pSetSize(t.width,t.height)}},enumerable:!0,configurable:!0}),e.prototype._iGetTextureData=function(){return this._htmlImageElement},e}(r);e.exports=n},{"awayjs-core/lib/errors/Error":void 0,"awayjs-core/lib/textures/Texture2DBase":void 0,"awayjs-core/lib/utils/TextureUtils":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/textures/MipmapGenerator":[function(t,e){var i=t("awayjs-core/lib/base/BitmapData"),s=t("awayjs-core/lib/geom/Matrix"),r=t("awayjs-core/lib/geom/Rectangle"),a=function(){function t(){}return t.generateMipMaps=function(e,i,s){void 0===s&&(s=!1);var r,a=e.width,n=e.height,o=0;for(t._rect.width=a,t._rect.height=n;a>=1&&n>=1;)r=i[o]=t._getMipmapHolder(i[o],a,n),s&&r.fillRect(t._rect,0),t._matrix.a=t._rect.width/e.width,t._matrix.d=t._rect.height/e.height,r.draw(e,t._matrix),a>>=1,n>>=1,t._rect.width=a>1?a:1,t._rect.height=n>1?n:1,o++},t._getMipmapHolder=function(e,s,r){if(e){if(e.width==s&&e.height==r)return e;t.freeMipMapHolder(e)}return t._mipMaps[s]||(t._mipMaps[s]=[],t._mipMapUses[s]=[]),t._mipMaps[s][r]?(t._mipMapUses[s][r]=t._mipMapUses[s][r]+1,e=t._mipMaps[s][r]):(e=t._mipMaps[s][r]=new i(s,r,!0),t._mipMapUses[s][r]=1),e},t.freeMipMapHolder=function(e){var i=e.width,s=e.height;0==--t._mipMapUses[i][s]&&(t._mipMaps[i][s].dispose(),t._mipMaps[i][s]=null)},t._mipMaps=[],t._mipMapUses=[],t._matrix=new s,t._rect=new r,t}();e.exports=a},{"awayjs-core/lib/base/BitmapData":void 0,"awayjs-core/lib/geom/Matrix":void 0,"awayjs-core/lib/geom/Rectangle":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/textures/RenderTexture":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),r=t("awayjs-core/lib/textures/Texture2DBase"),a=t("awayjs-core/lib/utils/TextureUtils"),n=function(t){function e(e,i){t.call(this,!1),this._pSetSize(e,i)}return i(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._pWidth},set:function(t){if(t!=this._pWidth){if(!a.isDimensionValid(t))throw new s("Invalid size: Width and height must be power of 2 and cannot exceed 2048");this.invalidateContent(),this._pSetSize(t,this._pHeight)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._pHeight},set:function(t){if(t!=this._pHeight){if(!a.isDimensionValid(t))throw new s("Invalid size: Width and height must be power of 2 and cannot exceed 2048");this.invalidateContent(),this._pSetSize(this._pWidth,t)}},enumerable:!0,configurable:!0}),e}(r);e.exports=n},{"awayjs-core/lib/errors/Error":void 0,"awayjs-core/lib/textures/Texture2DBase":void 0,"awayjs-core/lib/utils/TextureUtils":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/textures/SpecularBitmapTexture":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/base/BitmapData"),r=t("awayjs-core/lib/base/BitmapDataChannel"),a=t("awayjs-core/lib/geom/Point"),n=t("awayjs-core/lib/textures/BitmapTexture"),o=function(t){function e(e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=!0);var a=e?e:i;a=a?new s(a.width,a.height,!1,16777215):new s(1,1,!1,16777215),t.call(this,a,r),this.specularMap=e,this.glossMap=i}return i(e,t),Object.defineProperty(e.prototype,"specularMap",{get:function(){return this._specularMap},set:function(t){this._specularMap=t,this.invalidateContent(),this._testSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glossMap",{get:function(){return this._glossMap},set:function(t){this._glossMap=t,this.invalidateContent(),this._testSize()},enumerable:!0,configurable:!0}),e.prototype._testSize=function(){var t,e;if(this._specularMap?(t=this._specularMap.width,e=this._specularMap.height):this._glossMap?(t=this._glossMap.width,e=this._glossMap.height):(t=1,e=1),t!=this._bitmapData.width&&e!=this._bitmapData.height){var i=this._bitmapData;this.bitmapData=new s(this._specularMap.width,this._specularMap.height,!1,16777215),i.dispose()}},e.prototype._iGetTextureData=function(){var t=this._specularMap.rect,e=new a;return this._bitmapData.fillRect(t,16777215),this._glossMap&&this._bitmapData.copyChannel(this._glossMap,t,e,r.GREEN,r.GREEN),this._specularMap&&this._bitmapData.copyChannel(this._specularMap,t,e,r.RED,r.RED),this._bitmapData},e}(n);e.exports=o},{"awayjs-core/lib/base/BitmapData":void 0,"awayjs-core/lib/base/BitmapDataChannel":void 0,"awayjs-core/lib/geom/Point":void 0,"awayjs-core/lib/textures/BitmapTexture":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/textures/Texture2DBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/AbstractMethodError"),r=t("awayjs-core/lib/textures/MipmapGenerator"),a=t("awayjs-core/lib/textures/TextureProxyBase"),n=function(t){function e(e){void 0===e&&(e=!1),t.call(this,e)}return i(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._pWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._pHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._pWidth},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(t.prototype.dispose.call(this),this._mipmapData)for(var e=this._mipmapData.length,i=0;e>i;i++)r.freeMipMapHolder(this._mipmapData[i])},e.prototype.invalidateContent=function(){t.prototype.invalidateContent.call(this),this._mipmapDataDirty=!0},e.prototype._pSetSize=function(t,e){(this._pWidth!=t||this._pHeight!=e)&&this.invalidateSize(),this._mipmapDataDirty=!0,this._pWidth=t,this._pHeight=e},e.prototype._iGetMipmapData=function(){return this._mipmapDataDirty&&(this._mipmapDataDirty=!1,this._mipmapData||(this._mipmapData=new Array),r.generateMipMaps(this._iGetTextureData(),this._mipmapData,!0)),this._mipmapData},e.prototype._iGetTextureData=function(){throw new s},e}(a);e.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/textures/MipmapGenerator":void 0,"awayjs-core/lib/textures/TextureProxyBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/textures/TextureProxyBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/library/NamedAssetBase"),a=function(t){function e(e){void 0===e&&(e=!1),t.call(this),this._pFormat="bgra",this._textureData=new Array,this._generateMipmaps=this._hasMipmaps=e}return i(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return this._pSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasMipmaps",{get:function(){return this._hasMipmaps},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._pFormat
},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"generateMipmaps",{get:function(){return this._generateMipmaps},set:function(t){this._generateMipmaps!=t&&(this._generateMipmaps=this._hasMipmaps=t,this.invalidateContent())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.TEXTURE},enumerable:!0,configurable:!0}),e.prototype.invalidateContent=function(){for(var t=this._textureData.length,e=0;t>e;e++)this._textureData[e].invalidate()},e.prototype.invalidateSize=function(){for(;this._textureData.length;)this._textureData[0].dispose()},e.prototype.dispose=function(){for(;this._textureData.length;)this._textureData[0].dispose()},e.prototype._iAddTextureData=function(t){return this._textureData.push(t),t},e.prototype._iRemoveTextureData=function(t){return this._textureData.splice(this._textureData.indexOf(t),1),t},e}(r);e.exports=a},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/ui/Keyboard":[function(t,e){var i=function(){function t(){}return t.A=65,t.ALTERNATE=18,t.AUDIO=16777239,t.B=66,t.BACK=16777238,t.BACKQUOTE=192,t.BACKSLASH=220,t.BACKSPACE=8,t.BLUE=16777219,t.C=67,t.CAPS_LOCK=20,t.CHANNEL_DOWN=16777221,t.CHANNEL_UP=16777221,t.COMMA=188,t.COMMAND=15,t.CONTROL=17,t.D=68,t.DELETE=46,t.DOWN=40,t.DVR=16777241,t.E=69,t.END=35,t.ENTER=13,t.EQUAL=187,t.ESCAPE=27,t.EXIT=16777237,t.F=70,t.F1=112,t.F10=121,t.F11=122,t.F12=123,t.F13=124,t.F14=125,t.F15=126,t.F2=113,t.F3=114,t.F4=115,t.F5=116,t.F6=117,t.F7=118,t.F8=119,t.F9=120,t.FAST_FORWARD=16777226,t.G=71,t.GREEN=16777217,t.GUIDE=16777236,t.H=72,t.HELP=16777245,t.HOME=36,t.I=73,t.INFO=16777235,t.INPUT=16777243,t.INSERT=45,t.J=74,t.K=75,t.KEYNAME_BEGIN="Begin",t.KEYNAME_BREAK="Break",t.KEYNAME_CLEARDISPLAY="ClrDsp",t.KEYNAME_CLEARLINE="ClrLn",t.KEYNAME_DELETE="Delete",t.KEYNAME_DELETECHAR="DelChr",t.KEYNAME_DELETELINE="DelLn",t.KEYNAME_DOWNARROW="Down",t.KEYNAME_END="End",t.KEYNAME_EXECUTE="Exec",t.KEYNAME_F1="F1",t.KEYNAME_F10="F10",t.KEYNAME_F11="F11",t.KEYNAME_F12="F12",t.KEYNAME_F13="F13",t.KEYNAME_F14="F14",t.KEYNAME_F15="F15",t.KEYNAME_F16="F16",t.KEYNAME_F17="F17",t.KEYNAME_F18="F18",t.KEYNAME_F19="F19",t.KEYNAME_F2="F2",t.KEYNAME_F20="F20",t.KEYNAME_F21="F21",t.KEYNAME_F22="F22",t.KEYNAME_F23="F23",t.KEYNAME_F24="F24",t.KEYNAME_F25="F25",t.KEYNAME_F26="F26",t.KEYNAME_F27="F27",t.KEYNAME_F28="F28",t.KEYNAME_F29="F29",t.KEYNAME_F3="F3",t.KEYNAME_F30="F30",t.KEYNAME_F31="F31",t.KEYNAME_F32="F32",t.KEYNAME_F33="F33",t.KEYNAME_F34="F34",t.KEYNAME_F35="F35",t.KEYNAME_F4="F4",t.KEYNAME_F5="F5",t.KEYNAME_F6="F6",t.KEYNAME_F7="F7",t.KEYNAME_F8="F8",t.KEYNAME_F9="F9",t.KEYNAME_FIND="Find",t.KEYNAME_HELP="Help",t.KEYNAME_HOME="Home",t.KEYNAME_INSERT="Insert",t.KEYNAME_INSERTCHAR="InsChr",t.KEYNAME_INSERTLINE="LnsLn",t.KEYNAME_LEFTARROW="Left",t.KEYNAME_MENU="Menu",t.KEYNAME_MODESWITCH="ModeSw",t.KEYNAME_NEXT="Next",t.KEYNAME_PAGEDOWN="PgDn",t.KEYNAME_PAGEUP="PgUp",t.KEYNAME_PAUSE="Pause",t.KEYNAME_PREV="Prev",t.KEYNAME_PRINT="Print",t.KEYNAME_PRINTSCREEN="PrntScrn",t.KEYNAME_REDO="Redo",t.KEYNAME_RESET="Reset",t.KEYNAME_RIGHTARROW="Right",t.KEYNAME_SCROLLLOCK="ScrlLck",t.KEYNAME_SELECT="Select",t.KEYNAME_STOP="Stop",t.KEYNAME_SYSREQ="SysReq",t.KEYNAME_SYSTEM="Sys",t.KEYNAME_UNDO="Undo",t.KEYNAME_UPARROW="Up",t.KEYNAME_USER="User",t.L=76,t.LAST=16777233,t.LEFT=37,t.LEFTBRACKET=219,t.LIVE=16777232,t.M=77,t.MASTER_SHELL=16777246,t.MENU=16777234,t.MINUS=189,t.N=78,t.NEXT=16777230,t.NUMBER_0=48,t.NUMBER_1=49,t.NUMBER_2=50,t.NUMBER_3=51,t.NUMBER_4=52,t.NUMBER_5=53,t.NUMBER_6=54,t.NUMBER_7=55,t.NUMBER_8=56,t.NUMBER_9=57,t.NUMPAD=21,t.NUMPAD_0=96,t.NUMPAD_1=97,t.NUMPAD_2=98,t.NUMPAD_3=99,t.NUMPAD_4=100,t.NUMPAD_5=101,t.NUMPAD_6=102,t.NUMPAD_7=103,t.NUMPAD_8=104,t.NUMPAD_9=105,t.NUMPAD_ADD=107,t.NUMPAD_DECIMAL=110,t.NUMPAD_DIVIDE=111,t.NUMPAD_ENTER=108,t.NUMPAD_MULTIPLY=106,t.NUMPAD_SUBTRACT=109,t.O=79,t.P=80,t.PAGE_DOWN=34,t.PAGE_UP=33,t.PAUSE=16777224,t.PERIOD=190,t.PLAY=16777223,t.PREVIOUS=16777231,t.Q=81,t.QUOTE=222,t.R=82,t.RECORD=16777222,t.RED=16777216,t.REWIND=16777227,t.RIGHT=39,t.RIGHTBRACKET=221,t.S=83,t.SEARCH=16777247,t.SEMICOLON=186,t.SETUP=16777244,t.SHIFT=16,t.SKIP_BACKWARD=16777229,t.SKIP_FORWARD=16777228,t.SLASH=191,t.SPACE=32,t.STOP=16777225,t.SUBTITLE=16777240,t.T=84,t.TAB=9,t.U=85,t.UP=38,t.V=86,t.VOD=16777242,t.W=87,t.X=88,t.Y=89,t.YELLOW=16777218,t.Z=90,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/utils/ByteArrayBase":[function(t,e){var i=t("awayjs-core/lib/errors/AbstractMethodError"),s=function(){function t(){this.position=0,this.length=0,this._mode=""}return t.prototype.writeByte=function(){throw"Virtual method"},t.prototype.readByte=function(){throw"Virtual method"},t.prototype.writeUnsignedByte=function(){throw"Virtual method"},t.prototype.readUnsignedByte=function(){throw"Virtual method"},t.prototype.writeUnsignedShort=function(){throw"Virtual method"},t.prototype.readUnsignedShort=function(){throw"Virtual method"},t.prototype.writeUnsignedInt=function(){throw"Virtual method"},t.prototype.readUnsignedInt=function(){throw"Virtual method"},t.prototype.writeFloat=function(){throw"Virtual method"},t.prototype.toFloatBits=function(){throw"Virtual method"},t.prototype.readFloat=function(){throw"Virtual method"},t.prototype.fromFloatBits=function(){throw"Virtual method"},t.prototype.getBytesAvailable=function(){throw new i("ByteArrayBase, getBytesAvailable() not implemented ")},t.prototype.toString=function(){return"[ByteArray] ( "+this._mode+" ) position="+this.position+" length="+this.length},t.prototype.compareEqual=function(t,e){(void 0==e||e>this.length-this.position)&&(e=this.length-this.position),e>t.length-t.position&&(e=t.length-t.position);for(var i=!0;i&&e>=4;)e-=4,this.readUnsignedInt()!=t.readUnsignedInt()&&(i=!1);for(;i&&e>=1;)e--,this.readUnsignedByte()!=t.readUnsignedByte()&&(i=!1);var s;return this.position-=s-e,t.position-=s-e,i},t.prototype.writeBase64String=function(t){for(var e=0;e<t.length;e++){t.charAt(e)}},t.prototype.dumpToConsole=function(){function t(t,e){for(var i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],s="",r=0;e>r;r++)s=i[t>>(r<<2)&15]+s;return s}var e=this.position;this.position=0;for(var i=8,s=0;s<this.length;s+=i){for(var r=t(s,4)+":",a=0;i>a&&s+a<this.length;a++)r+=" "+t(this.readUnsignedByte(),2);console.log(r)}this.position=e},t.prototype.readBase64String=function(e){return(void 0==e||e>this.length-this.position)&&(e=this.length-this.position),e>0?t.internalGetBase64String(e,this.readUnsignedByte,this):""},t.internalGetBase64String=function(e,i,s){for(var r,a,n,o,h,l,p,d="",u=t.Base64Key;e>=3;)r=i.apply(s),a=i.apply(s),n=i.apply(s),o=r>>2,h=(3&r)<<4|a>>4,l=(15&a)<<2|n>>6,p=63&n,d+=u.charAt(o)+u.charAt(h)+u.charAt(l)+u.charAt(p),e-=3;return 2==e?(r=i.apply(s),a=i.apply(s),o=r>>2,h=(3&r)<<4|a>>4,l=(15&a)<<2,d+=u.charAt(o)+u.charAt(h)+u.charAt(l)+"="):1==e&&(r=i.apply(s),o=r>>2,h=(3&r)<<4,d+=u.charAt(o)+u.charAt(h)+"=="),d},t.Base64Key="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t}();e.exports=s},{"awayjs-core/lib/errors/AbstractMethodError":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/utils/ByteArrayBuffer":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/utils/ByteArrayBase"),r=function(t){function e(){t.call(this),this._bytes=[],this._mode="Array"}return i(e,t),e.prototype.writeByte=function(t){var e=~~t;this._bytes[this.position++]=e,this.position>this.length&&(this.length=this.position)},e.prototype.readByte=function(){if(this.position>=this.length)throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length;return this._bytes[this.position++]},e.prototype.writeUnsignedByte=function(t){var e=~~t;this._bytes[this.position++]=255&e,this.position>this.length&&(this.length=this.position)},e.prototype.readUnsignedByte=function(){if(this.position>=this.length)throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length;return this._bytes[this.position++]},e.prototype.writeUnsignedShort=function(t){var e=~~t;this._bytes[this.position++]=255&e,this._bytes[this.position++]=e>>8&255,this.position>this.length&&(this.length=this.position)},e.prototype.readUnsignedShort=function(){if(this.position+2>this.length)throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length;var t=this._bytes[this.position]|this._bytes[this.position+1]<<8;return this.position+=2,t},e.prototype.writeUnsignedInt=function(t){var e=~~t;this._bytes[this.position++]=255&e,this._bytes[this.position++]=e>>>8&255,this._bytes[this.position++]=e>>>16&255,this._bytes[this.position++]=e>>>24&255,this.position>this.length&&(this.length=this.position)},e.prototype.readUnsignedInt=function(){if(this.position+4>this.length)throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length;var t=this._bytes[this.position]|this._bytes[this.position+1]<<8|this._bytes[this.position+2]<<16|this._bytes[this.position+3]<<24;return this.position+=4,t>>>0},e.prototype.writeFloat=function(t){this.writeUnsignedInt(this.toFloatBits(Number(t)))},e.prototype.toFloatBits=function(t){if(0==t)return 0;var e=0;0>t?(t=-t,e=1):e=0;var i=Math.log(t)/Math.log(2);i=Math.floor(i),t*=Math.pow(2,23-i);var s=Math.floor(t)-8388608;return i+=127,e<<31>>>0|i<<23|s},e.prototype.readFloat=function(){return this.fromFloatBits(this.readUnsignedInt())},e.prototype.fromFloatBits=function(t){if(0==t)return 0;var e=t>>>23&255,i=8388607&t|8388608,s=Math.pow(2,e-127-23)*i;return t>>>31!=0&&(s=-s),s},e}(s);e.exports=r},{"awayjs-core/lib/utils/ByteArrayBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/utils/ByteArray":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/utils/ByteArrayBase"),r=function(t){function e(){t.call(this),this.maxlength=0,this._mode="Typed array",this.maxlength=4,this.arraybytes=new ArrayBuffer(this.maxlength),this.unalignedarraybytestemp=new ArrayBuffer(16)}return i(e,t),e.prototype.ensureWriteableSpace=function(t){this.ensureSpace(t+this.position)},e.prototype.setArrayBuffer=function(t){this.ensureSpace(t.byteLength),this.length=t.byteLength;var e=new Int8Array(t),i=new Int8Array(this.arraybytes,0,this.length);i.set(e),this.position=0},e.prototype.getBytesAvailable=function(){return this.length-this.position},e.prototype.ensureSpace=function(t){if(t>this.maxlength){var e=t+255&-256,i=new ArrayBuffer(e),s=new Uint8Array(this.arraybytes,0,this.length),r=new Uint8Array(i,0,this.length);r.set(s),this.arraybytes=i,this.maxlength=e}},e.prototype.writeByte=function(t){this.ensureWriteableSpace(1);var e=new Int8Array(this.arraybytes);e[this.position++]=~~t,this.position>this.length&&(this.length=this.position)},e.prototype.readByte=function(){if(this.position>=this.length)throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length;var t=new Int8Array(this.arraybytes);return t[this.position++]},e.prototype.readBytes=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),null==i&&(i=t.length),t.ensureWriteableSpace(e+i);var s=new Int8Array(t.arraybytes),r=new Int8Array(this.arraybytes);s.set(r.subarray(this.position,this.position+i),e),this.position+=i,i+e>t.length&&(t.length+=i+e-t.length)},e.prototype.writeUnsignedByte=function(t){this.ensureWriteableSpace(1);var e=new Uint8Array(this.arraybytes);e[this.position++]=255&~~t,this.position>this.length&&(this.length=this.position)},e.prototype.readUnsignedByte=function(){if(this.position>=this.length)throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length;var t=new Uint8Array(this.arraybytes);return t[this.position++]},e.prototype.writeUnsignedShort=function(t){if(this.ensureWriteableSpace(2),0==(1&this.position)){var e=new Uint16Array(this.arraybytes);e[this.position>>1]=65535&~~t}else{var e=new Uint16Array(this.unalignedarraybytestemp,0,1);e[0]=65535&~~t;var i=new Uint8Array(this.arraybytes,this.position,2),s=new Uint8Array(this.unalignedarraybytestemp,0,2);i.set(s)}this.position+=2,this.position>this.length&&(this.length=this.position)},e.prototype.readUTFBytes=function(t){for(var e="",i=this.position+t,s=new DataView(this.arraybytes);this.position<i;){var r=s.getUint8(this.position++);if(128>r){if(0==r)break;e+=String.fromCharCode(r)}else if(224>r)e+=String.fromCharCode((63&r)<<6|127&s.getUint8(this.position++));else if(240>r){var a=s.getUint8(this.position++);e+=String.fromCharCode((31&r)<<12|(127&a)<<6|127&s.getUint8(this.position++))}else{var a=s.getUint8(this.position++),n=s.getUint8(this.position++);e+=String.fromCharCode((15&r)<<18|(127&a)<<12|n<<6&127|127&s.getUint8(this.position++))}}return e},e.prototype.readInt=function(){var t=new DataView(this.arraybytes),e=t.getInt32(this.position,!0);return this.position+=4,e},e.prototype.readShort=function(){var t=new DataView(this.arraybytes),e=t.getInt16(this.position,!0);return this.position+=2,e},e.prototype.readDouble=function(){var t=new DataView(this.arraybytes),e=t.getFloat64(this.position,!0);return this.position+=8,e},e.prototype.readUnsignedShort=function(){if(this.position>this.length+2)throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length;if(0==(1&this.position)){var t=new Uint16Array(this.arraybytes),e=this.position>>1;return this.position+=2,t[e]}var t=new Uint16Array(this.unalignedarraybytestemp,0,1),i=new Uint8Array(this.arraybytes,this.position,2),s=new Uint8Array(this.unalignedarraybytestemp,0,2);return s.set(i),this.position+=2,t[0]},e.prototype.writeUnsignedInt=function(t){if(this.ensureWriteableSpace(4),0==(3&this.position)){var e=new Uint32Array(this.arraybytes);e[this.position>>2]=4294967295&~~t}else{var e=new Uint32Array(this.unalignedarraybytestemp,0,1);e[0]=4294967295&~~t;var i=new Uint8Array(this.arraybytes,this.position,4),s=new Uint8Array(this.unalignedarraybytestemp,0,4);i.set(s)}this.position+=4,this.position>this.length&&(this.length=this.position)},e.prototype.readUnsignedInt=function(){if(this.position>this.length+4)throw"ByteArray out of bounds read. Position="+this.position+", Length="+this.length;if(0==(3&this.position)){var t=new Uint32Array(this.arraybytes),e=this.position>>2;return this.position+=4,t[e]}var t=new Uint32Array(this.unalignedarraybytestemp,0,1),i=new Uint8Array(this.arraybytes,this.position,4),s=new Uint8Array(this.unalignedarraybytestemp,0,4);return s.set(i),this.position+=4,t[0]},e.prototype.writeFloat=function(t){if(this.ensureWriteableSpace(4),0==(3&this.position)){var e=new Float32Array(this.arraybytes);e[this.position>>2]=t}else{var e=new Float32Array(this.unalignedarraybytestemp,0,1);e[0]=t;var i=new Uint8Array(this.arraybytes,this.position,4),s=new Uint8Array(this.unalignedarraybytestemp,0,4);i.set(s)}this.position+=4,this.position>this.length&&(this.length=this.position)},e.prototype.readFloat=function(){if(this.position>this.length+4)throw"ByteArray out of bounds read. Positon="+this.position+", Length="+this.length;if(0==(3&this.position)){var t=new Float32Array(this.arraybytes),e=this.position>>2;return this.position+=4,t[e]}var t=new Float32Array(this.unalignedarraybytestemp,0,1),i=new Uint8Array(this.arraybytes,this.position,4),s=new Uint8Array(this.unalignedarraybytestemp,0,4);return s.set(i),this.position+=4,t[0]},e}(s);e.exports=r},{"awayjs-core/lib/utils/ByteArrayBase":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/utils/CSS":[function(t,e){var i=function(){function t(){}return t.setElementSize=function(t,e,i){t.style.width=e+"px",t.style.height=i+"px",t.width=e,t.height=i},t.setElementWidth=function(t,e){t.style.width=e+"px",t.width=e},t.setElementHeight=function(t,e){t.style.height=e+"px",t.height=e},t.setElementX=function(t,e){t.style.position="absolute",t.style.left=e+"px"},t.setElementY=function(t,e){t.style.position="absolute",t.style.top=e+"px"},t.getElementVisibility=function(t){return"visible"==t.style.visibility},t.setElementVisibility=function(t,e){t.style.visibility=e?"visible":"hidden"},t.setElementAlpha=function(t,e){if(t instanceof HTMLCanvasElement){var i=t.getContext("2d");i.globalAlpha=e}},t.setElementPosition=function(t,e,i,s){void 0===s&&(s=!1),t.style.position=s?"absolute":"relative",t.style.left=e+"px",t.style.top=i+"px"},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/utils/ColorUtils":[function(t,e){var i=function(){function t(){}return t.float32ColorToARGB=function(t){var e=(4278190080&t)>>>24,i=(16711680&t)>>>16,s=(65280&t)>>>8,r=255&t,a=[e,i,s,r];return a},t.componentToHex=function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},t.RGBToHexString=function(e){return"#"+t.componentToHex(e[1])+t.componentToHex(e[2])+t.componentToHex(e[3])},t.ARGBToHexString=function(e){return"#"+t.componentToHex(e[0])+t.componentToHex(e[1])+t.componentToHex(e[2])+t.componentToHex(e[3])},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/utils/Debug":[function(t,e){var i=t("awayjs-core/lib/errors/PartialImplementationError"),s=function(){function t(){}return t.breakpoint=function(){t["break"]()},t.throwPIROnKeyWordOnly=function(e,i){void 0===i&&(i=!0),t.keyword=i?e:null},t.throwPIR=function(e,s,r){if(t.logPIR("PartialImplementationError "+e,s,r),t.THROW_ERRORS){if(t.keyword){var a=e+s+r;if(-1==a.indexOf(t.keyword))return}throw new i(e+"."+s+": "+r)}},t.logPIR=function(e,i,s){void 0===s&&(s=""),t.LOG_PI_ERRORS&&console.log(e+"."+i+": "+s)},t.log=function(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];t.ENABLE_LOG&&console.log(e)},t.THROW_ERRORS=!0,t.ENABLE_LOG=!0,t.LOG_PI_ERRORS=!0,t.keyword=null,t}();e.exports=s},{"awayjs-core/lib/errors/PartialImplementationError":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/utils/RequestAnimationFrame":[function(t,e){var i=t("awayjs-core/lib/utils/getTimer"),s=function(){function t(t,e){var s=this;this._active=!1,this._argsArray=new Array,this._getTimer=i,this.setCallback(t,e),this._rafUpdateFunction=function(){s._active&&s._tick()},this._argsArray.push(this._dt)}return t.prototype.setCallback=function(t,e){this._callback=t,this._callbackContext=e},t.prototype.start=function(){this._prevTime=this._getTimer(),this._active=!0,window.requestAnimationFrame?window.requestAnimationFrame(this._rafUpdateFunction):window.mozRequestAnimationFrame?window.requestAnimationFrame=window.mozRequestAnimationFrame:window.webkitRequestAnimationFrame?window.requestAnimationFrame=window.webkitRequestAnimationFrame:window.oRequestAnimationFrame&&(window.requestAnimationFrame=window.oRequestAnimationFrame)},t.prototype.stop=function(){this._active=!1},Object.defineProperty(t.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),t.prototype._tick=function(){this._currentTime=this._getTimer(),this._dt=this._currentTime-this._prevTime,this._argsArray[0]=this._dt,this._callback.apply(this._callbackContext,this._argsArray),window.requestAnimationFrame(this._rafUpdateFunction),this._prevTime=this._currentTime},t}();e.exports=s},{"awayjs-core/lib/utils/getTimer":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/utils/TextureUtils":[function(t,e){var i=function(){function t(){}return t.isBitmapDataValid=function(e){return null==e?!0:t.isDimensionValid(e.width)&&t.isDimensionValid(e.height)},t.isHTMLImageElementValid=function(e){return null==e?!0:t.isDimensionValid(e.width)&&t.isDimensionValid(e.height)},t.isDimensionValid=function(e){return e>=1&&e<=t.MAX_SIZE&&t.isPowerOfTwo(e)},t.isPowerOfTwo=function(t){return t?(t&-t)==t:!1},t.getBestPowerOf2=function(e){for(var i=1;e>i;)i<<=1;return i>t.MAX_SIZE&&(i=t.MAX_SIZE),i},t.MAX_SIZE=2048,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-core/lib/utils/Timer":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),r=t("awayjs-core/lib/events/EventDispatcher"),a=t("awayjs-core/lib/events/TimerEvent"),n=function(t){function e(e,i){if(void 0===i&&(i=0),t.call(this),this._repeatCount=0,this._currentCount=0,this._running=!1,this._delay=e,this._repeatCount=i,isNaN(e)||0>e)throw new s("Delay is negative or not a number")}return i(e,t),Object.defineProperty(e.prototype,"currentCount",{get:function(){return this._currentCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=t,this._running&&(this.stop(),this.start())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(t){this._repeatCount=t},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._running&&this.stop(),this._currentCount=0},Object.defineProperty(e.prototype,"running",{get:function(){return this._running},enumerable:!0,configurable:!0}),e.prototype.start=function(){var t=this;this._running=!0,clearInterval(this._iid),this._iid=setInterval(function(){return t.tick()},this._delay)},e.prototype.stop=function(){this._running=!1,clearInterval(this._iid)},e.prototype.tick=function(){this._currentCount++,this._repeatCount>0&&this._currentCount>=this._repeatCount?(this.stop(),this.dispatchEvent(new a(a.TIMER)),this.dispatchEvent(new a(a.TIMER_COMPLETE))):this.dispatchEvent(new a(a.TIMER))},e}(r);e.exports=n},{"awayjs-core/lib/errors/Error":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-core/lib/events/TimerEvent":void 0}],"awayjs-dist/node_modules/awayjs-core/lib/utils/getTimer":[function(t,e){function i(){return Date.now()}e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/animators/IAnimationSet":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/animators/IAnimator":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/animators/nodes/AnimationNodeBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/library/NamedAssetBase"),a=function(t){function e(){t.call(this)}return i(e,t),Object.defineProperty(e.prototype,"stateClass",{get:function(){return this._pStateClass},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){},Object.defineProperty(e.prototype,"assetType",{get:function(){return s.ANIMATION_NODE},enumerable:!0,configurable:!0}),e}(r);e.exports=a},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/base/AlignmentMode":[function(t,e){var i=function(){function t(){}return t.REGISTRATION_POINT="registrationPoint",t.PIVOT_POINT="pivot",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/BlendMode":[function(t,e){var i=function(){function t(){}return t.ADD="add",t.ALPHA="alpha",t.DARKEN="darken",t.DIFFERENCE="difference",t.ERASE="erase",t.HARDLIGHT="hardlight",t.INVERT="invert",t.LAYER="layer",t.LIGHTEN="lighten",t.MULTIPLY="multiply",t.NORMAL="normal",t.OVERLAY="overlay",t.SCREEN="screen",t.SHADER="shader",t.SUBTRACT="subtract",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/CapsStyle":[function(t,e){var i=function(){function t(){}return t.ROUND="round",t.NONE="none",t.SQUARE="square",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/DisplayObject":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/AxisAlignedBoundingBox"),r=t("awayjs-core/lib/geom/MathConsts"),a=t("awayjs-core/lib/geom/Matrix3D"),n=t("awayjs-core/lib/geom/Matrix3DUtils"),o=t("awayjs-core/lib/geom/Point"),h=t("awayjs-core/lib/geom/Vector3D"),l=t("awayjs-core/lib/library/NamedAssetBase"),p=t("awayjs-core/lib/errors/AbstractMethodError"),d=t("awayjs-display/lib/base/AlignmentMode"),u=t("awayjs-display/lib/base/OrientationMode"),c=t("awayjs-display/lib/base/Transform"),_=t("awayjs-display/lib/pick/PickingCollisionVO"),y=t("awayjs-display/lib/events/DisplayObjectEvent"),g=t("awayjs-display/lib/events/SceneEvent"),f=function(t){function e(){t.call(this),this._pSceneTransform=new a,this._pSceneTransformDirty=!0,this._matrix3D=new a,this._matrix3DDirty=!0,this._inverseSceneTransform=new a,this._inverseSceneTransformDirty=!0,this._scenePosition=new h,this._scenePositionDirty=!0,this._explicitVisibility=!0,this._pImplicitVisibility=!0,this._explicitMouseEnabled=!0,this._pImplicitMouseEnabled=!0,this._positionDirty=!0,this._rotationDirty=!0,this._scaleDirty=!0,this._rotationX=0,this._rotationY=0,this._rotationZ=0,this._eulers=new h,this._flipY=new a,this._zOffset=0,this._pScaleX=1,this._pScaleY=1,this._pScaleZ=1,this._x=0,this._y=0,this._z=0,this._pivot=new h,this._orientationMatrix=new a,this._pivotZero=!0,this._pivotDirty=!0,this._pos=new h,this._rot=new h,this._sca=new h,this._pIgnoreTransform=!1,this._pBoundsInvalid=!0,this._worldBoundsInvalid=!0,this._pRenderables=new Array,this.alignmentMode=d.REGISTRATION_POINT,this.castsShadows=!0,this.orientationMode=u.DEFAULT,this._transformComponents=new Array(3),this._transformComponents[0]=this._pos,this._transformComponents[1]=this._rot,this._transformComponents[2]=this._sca,this._transform=new c(this),this._matrix3D.identity(),this._flipY.appendScale(1,-1,1),this._pBounds=this.pCreateDefaultBoundingVolume(),this._worldBounds=this.pCreateDefaultBoundingVolume()}return i(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this._pBoundsInvalid&&this.pUpdateBounds(),this._pBounds},set:function(t){this._pBounds!=t&&(this._pBounds=t,this._worldBounds=t.clone(),this.pInvalidateBounds(),this._boundsVisible&&this._partitionNode._iUpdateEntityBounds())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._pBoundsInvalid&&this.pUpdateBounds(),this._depth},set:function(t){this._depth!=t&&(this._depth==t,this._pScaleZ=t/this.bounds.aabb.depth,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eulers",{get:function(){return this._eulers.x=this._rotationX*r.RADIANS_TO_DEGREES,this._eulers.y=this._rotationY*r.RADIANS_TO_DEGREES,this._eulers.z=this._rotationZ*r.RADIANS_TO_DEGREES,this._eulers},set:function(t){this._rotationX=t.x*r.DEGREES_TO_RADIANS,this._rotationY=t.y*r.DEGREES_TO_RADIANS,this._rotationZ=t.z*r.DEGREES_TO_RADIANS,this.invalidateRotation()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._pBoundsInvalid&&this.pUpdateBounds(),this._height},set:function(t){this._height!=t&&(this._height==t,this._pScaleY=t/this.bounds.aabb.height,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._pParent?this._pParent.getChildIndex(this):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inverseSceneTransform",{get:function(){return this._inverseSceneTransformDirty&&(this._inverseSceneTransform.copyFrom(this.sceneTransform),this._inverseSceneTransform.invert(),this._inverseSceneTransformDirty=!1),this._inverseSceneTransform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreTransform",{get:function(){return this._pIgnoreTransform},set:function(t){this._pIgnoreTransform!=t&&(this._pIgnoreTransform=t,t&&(this._pSceneTransform.identity(),this._scenePosition.setTo(0,0,0)),this.pInvalidateSceneTransform())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEntity",{get:function(){return this._pIsEntity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loaderInfo",{get:function(){return this._loaderInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseEnabled",{get:function(){return this._explicitMouseEnabled},set:function(t){this._explicitMouseEnabled!=t&&(this._explicitMouseEnabled=t,this._pUpdateImplicitMouseEnabled(this._pParent?this._pParent.mouseChildren:!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseX",{get:function(){return this._mouseX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){return this._mouseY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._pParent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partition",{get:function(){return this._explicitPartition},set:function(t){this._explicitPartition!=t&&(this._pScene&&this._explicitPartition&&this._pScene.iUnregisterPartition(this._explicitPartition),this._explicitPartition=t,this._pScene&&t&&this._pScene.iRegisterPartition(t),this._pUpdateImplicitPartition(this._pParent?this._pParent._iAssignedPartition:null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partitionNode",{get:function(){return this._partitionNode||(this._partitionNode=this.pCreateEntityPartitionNode()),this._partitionNode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pickingCollider",{get:function(){return this._pPickingCollider},set:function(t){this._pPickingCollider=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this._pivot},set:function(t){this._pivot=t.clone(),this.invalidatePivot()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationX",{get:function(){return this._rotationX*r.RADIANS_TO_DEGREES},set:function(t){this.rotationX!=t&&(this._rotationX=t*r.DEGREES_TO_RADIANS,this.invalidateRotation())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationY",{get:function(){return this._rotationY*r.RADIANS_TO_DEGREES},set:function(t){this.rotationY!=t&&(this._rotationY=t*r.DEGREES_TO_RADIANS,this.invalidateRotation())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationZ",{get:function(){return this._rotationZ*r.RADIANS_TO_DEGREES},set:function(t){this.rotationZ!=t&&(this._rotationZ=t*r.DEGREES_TO_RADIANS,this.invalidateRotation())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleX",{get:function(){return this._pScaleX},set:function(t){this._pScaleX!=t&&(this._pScaleX=t,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleY",{get:function(){return this._pScaleY},set:function(t){this._pScaleY!=t&&(this._pScaleY=t,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleZ",{get:function(){return this._pScaleZ},set:function(t){this._pScaleZ!=t&&(this._pScaleZ=t,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._pScene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scenePosition",{get:function(){if(this._scenePositionDirty){if(this._pivotZero||this.alignmentMode!=d.PIVOT_POINT)this.sceneTransform.copyColumnTo(3,this._scenePosition);else{var t=new h(this._pivot.x/this._pScaleX,this._pivot.y/this._pScaleY,this._pivot.z/this._pScaleZ);this._scenePosition=this.sceneTransform.transformVector(t)}this._scenePositionDirty=!1}return this._scenePosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sceneTransform",{get:function(){return this._pSceneTransformDirty&&this.pUpdateSceneTransform(),this._pSceneTransform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shaderPickingDetails",{get:function(){return this._shaderPickingDetails},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsVisible",{get:function(){return this._boundsVisible
},set:function(t){t!=this._boundsVisible&&(this._boundsVisible=t,this._partitionNode.boundsVisible=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transform",{get:function(){return this._transform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._explicitVisibility},set:function(t){this._explicitVisibility!=t&&(this._explicitVisibility=t,this._pUpdateImplicitVisibility(this._pParent?this._pParent._iIsVisible():!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._pBoundsInvalid&&this.pUpdateBounds(),this._width},set:function(t){this._width!=t&&(this._width==t,this._pScaleX=t/this.bounds.aabb.width,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"worldBounds",{get:function(){return this._iSourcePrefab&&this._iSourcePrefab._iValidate(),this._worldBoundsInvalid&&(this._worldBoundsInvalid=!1,this._worldBounds.transformFrom(this.bounds,this.sceneTransform)),this._worldBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!=t&&(this._x=t,this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!=t&&(this._y=t,this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._z},set:function(t){this._z!=t&&(this._z=t,this.invalidatePosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zOffset",{get:function(){return this._zOffset},set:function(t){this._zOffset=t},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,i){switch(t.prototype.addEventListener.call(this,e,i),e){case y.POSITION_CHANGED:this._listenToPositionChanged=!0;break;case y.ROTATION_CHANGED:this._listenToRotationChanged=!0;break;case y.SCALE_CHANGED:this._listenToScaleChanged=!0}},e.prototype.clone=function(){var t=new e;return t.pivot=this.pivot,t._iMatrix3D=this._iMatrix3D,t.name=name,t},e.prototype.dispose=function(){for(this.parent&&this.parent.removeChild(this);this._pRenderables.length;)this._pRenderables[0].dispose()},e.prototype.disposeAsset=function(){this.dispose()},e.prototype.getBounds=function(){return this._bounds},e.prototype.getRect=function(){return this._bounds},e.prototype.globalToLocal=function(t){return t},e.prototype.globalToLocal3D=function(){return new h},e.prototype.hitTestObject=function(){return!1},e.prototype.hitTestPoint=function(t,e,i){return void 0===i&&(i=!1),!1},e.prototype.isIntersectingRay=function(t,e){var i=this.inverseSceneTransform.transformVector(t),s=this.inverseSceneTransform.deltaTransformVector(e),r=this._iPickingCollisionVO;r.localNormal||(r.localNormal=new h);var a=this.bounds.rayIntersection(i,s,r.localNormal);return 0>a?!1:(r.rayEntryDistance=a,r.localRayPosition=i,r.localRayDirection=s,r.rayPosition=t,r.rayDirection=e,r.rayOriginIsInsideBounds=0==a,!0)},e.prototype.local3DToGlobal=function(){return new o},e.prototype.lookAt=function(t,e){void 0===e&&(e=null);var i,s,r,o;null==e?e=h.Y_AXIS:e.normalize(),s=t.subtract(this._iMatrix3D.position),s.normalize(),r=e.crossProduct(s),r.normalize(),r.length<.05&&(r.x=e.y,r.y=e.x,r.z=0,r.normalize()),i=s.crossProduct(r),o=n.RAW_DATA_CONTAINER,o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=0,o[4]=i.x,o[5]=i.y,o[6]=i.z,o[7]=0,o[8]=s.x,o[9]=s.y,o[10]=s.z,o[11]=0;var l=new a;l.copyRawDataFrom(o);var p=l.decompose()[1];this._rotationX=p.x,this._rotationY=p.y,this._rotationZ=p.z,this.invalidateRotation()},e.prototype.localToGlobal=function(){return new o},e.prototype.moveTo=function(t,e,i){(this._x!=t||this._y!=e||this._z!=i)&&(this._x=t,this._y=e,this._z=i,this.invalidatePosition())},e.prototype.movePivot=function(t,e,i){null==this._pivot&&(this._pivot=new h),this._pivot.x+=t,this._pivot.y+=e,this._pivot.z+=i,this.invalidatePivot()},e.prototype.pitch=function(t){this.rotate(h.X_AXIS,t)},e.prototype.getRenderSceneTransform=function(t){if(this.orientationMode==u.CAMERA_PLANE){var e=t.sceneTransform.decompose(),i=e[2];return e[0]=this.scenePosition,i.x=this._pScaleX,i.y=this._pScaleY,i.z=this._pScaleZ,this._orientationMatrix.recompose(e),this._pivotZero||this.alignmentMode!=d.PIVOT_POINT||this._orientationMatrix.prependTranslation(-this._pivot.x/this._pScaleX,-this._pivot.y/this._pScaleY,-this._pivot.z/this._pScaleZ),this._orientationMatrix}return this.sceneTransform},e.prototype.roll=function(t){this.rotate(h.Z_AXIS,t)},e.prototype.rotate=function(t,e){var i=new a;i.prependRotation(e,t);var s=i.decompose()[1];this._rotationX+=s.x,this._rotationY+=s.y,this._rotationZ+=s.z,this.invalidateRotation()},e.prototype.rotateTo=function(t,e,i){this._rotationX=t*r.DEGREES_TO_RADIANS,this._rotationY=e*r.DEGREES_TO_RADIANS,this._rotationZ=i*r.DEGREES_TO_RADIANS,this.invalidateRotation()},e.prototype.removeEventListener=function(e,i){if(t.prototype.removeEventListener.call(this,e,i),!this.hasEventListener(e,i))switch(e){case y.POSITION_CHANGED:this._listenToPositionChanged=!1;break;case y.ROTATION_CHANGED:this._listenToRotationChanged=!1;break;case y.SCALE_CHANGED:this._listenToScaleChanged=!1}},e.prototype.translate=function(t,e){var i=t.x,s=t.y,r=t.z,a=e/Math.sqrt(i*i+s*s+r*r);this._x+=i*a,this._y+=s*a,this._z+=r*a,this.invalidatePosition()},e.prototype.translateLocal=function(t,e){var i=t.x,s=t.y,r=t.z,a=e/Math.sqrt(i*i+s*s+r*r);this._iMatrix3D.prependTranslation(i*a,s*a,r*a),this._matrix3D.copyColumnTo(3,this._pos),this._x=this._pos.x,this._y=this._pos.y,this._z=this._pos.z,this.invalidatePosition()},e.prototype.yaw=function(t){this.rotate(h.Y_AXIS,t)},Object.defineProperty(e.prototype,"_iAssignedPartition",{get:function(){return this._pImplicitPartition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_iMatrix3D",{get:function(){return this._matrix3DDirty&&this._pUpdateMatrix3D(),this._matrix3D},set:function(t){var e,i=t.decompose();e=i[0],(this._x!=e.x||this._y!=e.y||this._z!=e.z)&&(this._x=e.x,this._y=e.y,this._z=e.z,this.invalidatePosition()),e=i[1],(this._rotationX!=e.x||this._rotationY!=e.y||this._rotationZ!=e.z)&&(this._rotationX=e.x,this._rotationY=e.y,this._rotationZ=e.z,this.invalidateRotation()),e=i[2],(this._pScaleX!=e.x||this._pScaleY!=e.y||this._pScaleZ!=e.z)&&(this._pScaleX=e.x,this._pScaleY=e.y,this._pScaleZ=e.z,this.invalidateScale())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_iPickingCollisionVO",{get:function(){return this._pPickingCollisionVO||(this._pPickingCollisionVO=new _(this)),this._pPickingCollisionVO},enumerable:!0,configurable:!0}),e.prototype.iSetParent=function(t){this._pParent=t,t?(this._pUpdateImplicitMouseEnabled(t.mouseChildren),this._pUpdateImplicitVisibility(t._iIsVisible()),this._pUpdateImplicitPartition(t._iAssignedPartition),this._iSetScene(t._pScene)):(this._pUpdateImplicitMouseEnabled(!0),this._pUpdateImplicitVisibility(!0),this._pUpdateImplicitPartition(null),this._iSetScene(null))},e.prototype.pCreateDefaultBoundingVolume=function(){return new s},e.prototype.pCreateEntityPartitionNode=function(){throw new p},e.prototype.pInvalidateBounds=function(){this._pBoundsInvalid=!0,this._worldBoundsInvalid=!0,this.isEntity&&this.invalidatePartition()},e.prototype.pInvalidateSceneTransform=function(){this._pSceneTransformDirty=!this._pIgnoreTransform,this._inverseSceneTransformDirty=!this._pIgnoreTransform,this._scenePositionDirty=!this._pIgnoreTransform,this._worldBoundsInvalid=!this._pIgnoreTransform,this.isEntity&&this.invalidatePartition(),this._listenToSceneTransformChanged&&this.notifySceneTransformChange()},e.prototype.pUpdateBounds=function(){this._width=this._pBounds.aabb.width*this._pScaleX,this._height=this._pBounds.aabb.height*this._pScaleY,this._depth=this._pBounds.aabb.depth*this._pScaleZ,this._pBoundsInvalid=!1},e.prototype._pUpdateImplicitMouseEnabled=function(t){this._pImplicitMouseEnabled=this._explicitMouseEnabled&&t,this._pImplicitMouseEnabled&&this._pParent&&!this._pPickingCollider&&(this._pPickingCollider=this._pParent._pPickingCollider)},e.prototype._pUpdateImplicitPartition=function(t){this._pImplicitPartition=this._explicitPartition||t},e.prototype._pUpdateImplicitVisibility=function(t){this._pImplicitVisibility=this._explicitVisibility&&t},e.prototype._pUpdateMatrix3D=function(){this._pos.x=this._x,this._pos.y=this._y,this._pos.z=this._z,this._rot.x=this._rotationX,this._rot.y=this._rotationY,this._rot.z=this._rotationZ,this._sca.x=this._pScaleX,this._sca.y=this._pScaleY,this._sca.z=this._pScaleZ,this._matrix3D.recompose(this._transformComponents),this._pivotZero||(this._matrix3D.prependTranslation(-this._pivot.x/this._pScaleX,-this._pivot.y/this._pScaleY,-this._pivot.z/this._pScaleZ),this.alignmentMode!=d.PIVOT_POINT&&this._matrix3D.appendTranslation(this._pivot.x,this._pivot.y,this._pivot.z)),this._matrix3DDirty=!1,this._positionDirty=!1,this._rotationDirty=!1,this._scaleDirty=!1,this._pivotDirty=!1},e.prototype.pUpdateSceneTransform=function(){this._pParent&&!this._pParent._iIsRoot?(this._pSceneTransform.copyFrom(this._pParent.sceneTransform),this._pSceneTransform.prepend(this._iMatrix3D)):this._pSceneTransform.copyFrom(this._iMatrix3D),this._pSceneTransformDirty=!1},e.prototype._iAddRenderable=function(t){return this._pRenderables.push(t),t},e.prototype._iRemoveRenderable=function(t){var e=this._pRenderables.indexOf(t);return this._pRenderables.splice(e,1),t},e.prototype._iTestCollision=function(){return!1},e.prototype._iInternalUpdate=function(){this._iController&&this._iController.update()},e.prototype._iIsVisible=function(){return this._pImplicitVisibility},e.prototype._iIsMouseEnabled=function(){return this._pImplicitMouseEnabled},e.prototype._iSetScene=function(t){this._pScene!=t&&(this._pUpdateScene(t),this._pSceneTransformDirty||this._pIgnoreTransform||this.pInvalidateSceneTransform())},e.prototype._pUpdateScene=function(t){this._pScene&&(this._pScene.dispatchEvent(new g(g.REMOVED_FROM_SCENE,this)),this._pScene.iUnregisterEntity(this)),this._pScene=t,t&&(t.dispatchEvent(new g(g.ADDED_TO_SCENE,this)),t.iRegisterEntity(this)),this.notifySceneChange()},e.prototype.notifyPositionChanged=function(){this._positionChanged||(this._positionChanged=new y(y.POSITION_CHANGED,this)),this.dispatchEvent(this._positionChanged)},e.prototype.notifyRotationChanged=function(){this._rotationChanged||(this._rotationChanged=new y(y.ROTATION_CHANGED,this)),this.dispatchEvent(this._rotationChanged)},e.prototype.notifyScaleChanged=function(){this._scaleChanged||(this._scaleChanged=new y(y.SCALE_CHANGED,this)),this.dispatchEvent(this._scaleChanged)},e.prototype.notifySceneChange=function(){this._listenToSceneChanged&&(this._scenechanged||(this._scenechanged=new y(y.SCENE_CHANGED,this)),this.dispatchEvent(this._scenechanged))},e.prototype.notifySceneTransformChange=function(){this._sceneTransformChanged||(this._sceneTransformChanged=new y(y.SCENETRANSFORM_CHANGED,this)),this.dispatchEvent(this._sceneTransformChanged)},e.prototype.invalidateMatrix3D=function(){this._matrix3DDirty||(this._matrix3DDirty=!0,this._pSceneTransformDirty||this._pIgnoreTransform||this.pInvalidateSceneTransform())},e.prototype.invalidatePartition=function(){this._iAssignedPartition&&this._iAssignedPartition.iMarkForUpdate(this)},e.prototype.invalidatePivot=function(){this._pivotZero=0==this._pivot.x&&0==this._pivot.y&&0==this._pivot.z,this._pivotDirty||(this._pivotDirty=!0,this.invalidateMatrix3D())},e.prototype.invalidatePosition=function(){this._positionDirty||(this._positionDirty=!0,this.invalidateMatrix3D(),this._listenToPositionChanged&&this.notifyPositionChanged())},e.prototype.invalidateRotation=function(){this._rotationDirty||(this._rotationDirty=!0,this.invalidateMatrix3D(),this._listenToRotationChanged&&this.notifyRotationChanged())},e.prototype.invalidateScale=function(){this._scaleDirty||(this._scaleDirty=!0,this.invalidateMatrix3D(),this._listenToScaleChanged&&this.notifyScaleChanged())},e}(l);e.exports=f},{"awayjs-core/lib/bounds/AxisAlignedBoundingBox":void 0,"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/geom/MathConsts":void 0,"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Matrix3DUtils":void 0,"awayjs-core/lib/geom/Point":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0,"awayjs-display/lib/base/AlignmentMode":void 0,"awayjs-display/lib/base/OrientationMode":void 0,"awayjs-display/lib/base/Transform":void 0,"awayjs-display/lib/events/DisplayObjectEvent":void 0,"awayjs-display/lib/events/SceneEvent":void 0,"awayjs-display/lib/pick/PickingCollisionVO":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/base/Geometry":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/library/NamedAssetBase"),a=t("awayjs-display/lib/events/GeometryEvent"),n=function(t){function e(){t.call(this),this._subGeometries=new Array}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.GEOMETRY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subGeometries",{get:function(){return this._subGeometries},enumerable:!0,configurable:!0}),e.prototype.getSubGeometries=function(){return this._subGeometries},e.prototype.applyTransformation=function(t){for(var e=this._subGeometries.length,i=0;e>i;++i)this._subGeometries[i].applyTransformation(t)},e.prototype.addSubGeometry=function(t){this._subGeometries.push(t),t.parentGeometry=this,this.hasEventListener(a.SUB_GEOMETRY_ADDED)&&this.dispatchEvent(new a(a.SUB_GEOMETRY_ADDED,t)),this.iInvalidateBounds(t)},e.prototype.removeSubGeometry=function(t){this._subGeometries.splice(this._subGeometries.indexOf(t),1),t.parentGeometry=null,this.hasEventListener(a.SUB_GEOMETRY_REMOVED)&&this.dispatchEvent(new a(a.SUB_GEOMETRY_REMOVED,t)),this.iInvalidateBounds(t)},e.prototype.clone=function(){for(var t=new e,i=this._subGeometries.length,s=0;i>s;++s)t.addSubGeometry(this._subGeometries[s].clone());return t},e.prototype.scale=function(t){for(var e=this._subGeometries.length,i=0;e>i;++i)this._subGeometries[i].scale(t)},e.prototype.dispose=function(){for(var t=this._subGeometries.length,e=0;t>e;++e){var i=this._subGeometries[0];this.removeSubGeometry(i),i.dispose()}},e.prototype.scaleUV=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);for(var i=this._subGeometries.length,s=0;i>s;++s)this._subGeometries[s].scaleUV(t,e)},e.prototype.iInvalidateBounds=function(t){this.hasEventListener(a.BOUNDS_INVALID)&&this.dispatchEvent(new a(a.BOUNDS_INVALID,t))},e}(r);e.exports=n},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0,"awayjs-display/lib/events/GeometryEvent":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/base/GradientType":[function(t,e){var i=function(){function t(){}return t.LINEAR="linear",t.RADIAL="radial",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/GraphicsPathWinding":[function(t,e){var i=function(){function t(){}return t.EVEN_ODD="evenOdd",t.NON_ZERO="nonZero",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/Graphics":[function(t,e){var i=function(){function t(){}return t.prototype.beginBitmapFill=function(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=!0),void 0===s&&(s=!1)},t.prototype.beginFill=function(t,e){void 0===e&&(e=1)},t.prototype.beginGradientFill=function(t,e,i,s,r,a,n,o){void 0===r&&(r=null),void 0===a&&(a="pad"),void 0===n&&(n="rgb"),void 0===o&&(o=0)},t.prototype.clear=function(){},t.prototype.copyFrom=function(){},t.prototype.cubicCurveTo=function(){},t.prototype.curveTo=function(){},t.prototype.drawCircle=function(){},t.prototype.drawEllipse=function(){},t.prototype.drawGraphicsData=function(){},t.prototype.drawPath=function(){},t.prototype.drawRect=function(){},t.prototype.drawRoundRect=function(t,e,i,s,r,a){void 0===a&&(a=0/0)},t.prototype.drawTriangles=function(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=null)},t.prototype.endFill=function(){},t.prototype.lineBitmapStyle=function(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=!0),void 0===s&&(s=!1)},t.prototype.lineGradientStyle=function(t,e,i,s,r,a,n,o){void 0===r&&(r=null),void 0===a&&(a=null),void 0===n&&(n=null),void 0===o&&(o=0)},t.prototype.lineStyle=function(t,e,i,s,r,a,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===s&&(s=!1),void 0===r&&(r=null),void 0===a&&(a=null),void 0===n&&(n=null),void 0===o&&(o=3)},t.prototype.lineTo=function(){},t.prototype.moveTo=function(){},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/IBitmapDrawable":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/IGraphicsData":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/IMaterialOwner":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/IStage":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/ISubMeshClass":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/ISubMesh":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/InterpolationMethod":[function(t,e){var i=function(){function t(){}return t.LINEAR_RGB="linearRGB",t.RGB="rgb",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/JointStyle":[function(t,e){var i=function(){function t(){}return t.BEVEL="bevel",t.MITER="miter",t.ROUND="round",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/LightBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/errors/AbstractMethodError"),a=t("awayjs-display/lib/containers/DisplayObjectContainer"),n=t("awayjs-display/lib/events/LightEvent"),o=function(t){function e(){t.call(this),this._color=16777215,this._colorR=1,this._colorG=1,this._colorB=1,this._ambientColor=16777215,this._ambient=0,this._iAmbientR=0,this._iAmbientG=0,this._iAmbientB=0,this._specular=1,this._iSpecularR=1,this._iSpecularG=1,this._iSpecularB=1,this._diffuse=1,this._iDiffuseR=1,this._iDiffuseG=1,this._iDiffuseB=1,this._castsShadows=!1}return i(e,t),Object.defineProperty(e.prototype,"castsShadows",{get:function(){return this._castsShadows},set:function(t){this._castsShadows!=t&&(this._castsShadows=t,t?(null==this._shadowMapper&&(this._shadowMapper=this.pCreateShadowMapper()),this._shadowMapper.light=this):(this._shadowMapper.dispose(),this._shadowMapper=null),this.dispatchEvent(new n(n.CASTS_SHADOW_CHANGE)))},enumerable:!0,configurable:!0}),e.prototype.pCreateShadowMapper=function(){throw new r},Object.defineProperty(e.prototype,"specular",{get:function(){return this._specular},set:function(t){0>t&&(t=0),this._specular=t,this.updateSpecular()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuse",{get:function(){return this._diffuse},set:function(t){0>t&&(t=0),this._diffuse=t,this.updateDiffuse()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this._colorR=(this._color>>16&255)/255,this._colorG=(this._color>>8&255)/255,this._colorB=(255&this._color)/255,this.updateDiffuse(),this.updateSpecular()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ambient",{get:function(){return this._ambient},set:function(t){0>t?t=0:t>1&&(t=1),this._ambient=t,this.updateAmbient()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ambientColor",{get:function(){return this._ambientColor},set:function(t){this._ambientColor=t,this.updateAmbient()},enumerable:!0,configurable:!0}),e.prototype.updateAmbient=function(){this._iAmbientR=(this._ambientColor>>16&255)/255*this._ambient,this._iAmbientG=(this._ambientColor>>8&255)/255*this._ambient,this._iAmbientB=(255&this._ambientColor)/255*this._ambient},e.prototype.iGetObjectProjectionMatrix=function(t,e,i){throw void 0===i&&(i=null),new r},Object.defineProperty(e.prototype,"assetType",{get:function(){return s.LIGHT},enumerable:!0,configurable:!0}),e.prototype.updateSpecular=function(){this._iSpecularR=this._colorR*this._specular,this._iSpecularG=this._colorG*this._specular,this._iSpecularB=this._colorB*this._specular},e.prototype.updateDiffuse=function(){this._iDiffuseR=this._colorR*this._diffuse,this._iDiffuseG=this._colorG*this._diffuse,this._iDiffuseB=this._colorB*this._diffuse},Object.defineProperty(e.prototype,"shadowMapper",{get:function(){return this._shadowMapper},set:function(t){this._shadowMapper=t,this._shadowMapper.light=this},enumerable:!0,configurable:!0}),e}(a);e.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0,"awayjs-display/lib/events/LightEvent":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/base/LineScaleMode":[function(t,e){var i=function(){function t(){}return t.HORIZONTAL="horizontal",t.NONE="none",t.NORMAL="normal",t.VERTICAL="vertical",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/LineSubGeometry":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/base/LineSubMesh"),r=t("awayjs-display/lib/base/SubGeometryBase"),a=t("awayjs-display/lib/base/TriangleSubGeometry"),n=t("awayjs-display/lib/events/SubGeometryEvent"),o=function(t){function e(){t.call(this,!0),this._positionsDirty=!0,this._boundingPositionDirty=!0,this._thicknessDirty=!0,this._colorsDirty=!0,this._pSubMeshClass=s}return i(e,t),e.prototype._pUpdateStrideOffset=function(){this._pOffset[e.VERTEX_DATA]=0;var t=0;this._pOffset[e.START_POSITION_DATA]=t,t+=3,this._pOffset[e.END_POSITION_DATA]=t,t+=3,this._pOffset[e.THICKNESS_DATA]=t,t+=1,this._pOffset[e.COLOR_DATA]=t,t+=4,this._pStride[e.VERTEX_DATA]=t,this._pStride[e.START_POSITION_DATA]=t,this._pStride[e.END_POSITION_DATA]=t,this._pStride[e.THICKNESS_DATA]=t,this._pStride[e.COLOR_DATA]=t;var i=this._pNumVertices*t;null==this._pVertices?this._pVertices=new Array(i):this._pVertices.length!=i&&(this._pVertices.length=i),this._pStrideOffsetDirty=!1},Object.defineProperty(e.prototype,"vertices",{get:function(){return this._positionsDirty&&this.updatePositions(this._startPositions,this._endPositions),this._thicknessDirty&&this.updateThickness(this._thickness),this._colorsDirty&&this.updateColors(this._startColors,this._endColors),this._pVertices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startPositions",{get:function(){return this._positionsDirty&&this.updatePositions(this._startPositions,this._endPositions),this._startPositions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPositions",{get:function(){return this._positionsDirty&&this.updatePositions(this._startPositions,this._endPositions),this._endPositions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return this._thicknessDirty&&this.updateThickness(this._thickness),this._thickness},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startColors",{get:function(){return this._colorsDirty&&this.updateColors(this._startColors,this._endColors),this._startColors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endColors",{get:function(){return this._colorsDirty&&this.updateColors(this._startColors,this._endColors),this._endColors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numSegments",{get:function(){return this._numSegments},enumerable:!0,configurable:!0}),e.prototype.getBoundingPositions=function(){return this._boundingPositionDirty&&(this._boundingPositions=this.startPositions.concat(this.endPositions)),this._boundingPositions},e.prototype.updatePositions=function(t,i){var s,r,a,n,o,h,l;this._startPositions=t,null==this._startPositions&&(this._startPositions=new Array),this._endPositions=i,null==this._endPositions&&(this._endPositions=new Array),this._boundingPositionDirty=!0,this._numSegments=this._startPositions.length/3,this._pNumVertices=4*this._numSegments;var p=this._pNumVertices*this.getStride(e.VERTEX_DATA);for(null==this._pVertices?this._pVertices=new Array(p):this._pVertices.length!=p&&(this._pVertices.length=p),s=0,r=0,n=this.getOffset(e.START_POSITION_DATA),o=this.getStride(e.START_POSITION_DATA),h=this._pVertices,l=new Array;s<t.length;){if(a=n/o&1?i:t,h[n]=a[s],h[n+1]=a[s+1],h[n+2]=a[s+2],a=n/o&1?t:i,h[n+3]=a[s],h[n+4]=a[s+1],h[n+5]=a[s+2],4==++r){var d=n/o-3;l.push(d,d+1,d+2,d+3,d+2,d+1),r=0,s+=3}n+=o}this.updateIndices(l),this.pInvalidateBounds(),this.notifyPositionsUpdate(),this._positionsDirty=!1},e.prototype.updateThickness=function(t){var i,s,r,a,n,o;if(this._thickness=t,null!=t)for(i=0,s=0,a=this.getOffset(e.THICKNESS_DATA),n=this.getStride(e.THICKNESS_DATA),o=this._pVertices,r=a;i<t.length;)o[r]=1&Math.floor(.5*(r-a)/n+.5)?-t[i]:t[i],4==++s&&(s=0,i++),r+=n;this.notifyThicknessUpdate(),this._thicknessDirty=!1},e.prototype.updateColors=function(t,i){var s,r,a,n,o,h,l;if(this._startColors=t,this._endColors=i,null==this._startColors)for(this._startColors=new Array(4*this._numSegments),s=0;s<this._startColors.length;)this._startColors[s++]=1;if(null==this._endColors)for(this._endColors=new Array(4*this._numSegments),s=0;s<this._endColors.length;)this._endColors[s++]=1;for(s=0,r=0,o=this.getOffset(e.COLOR_DATA),h=this.getStride(e.COLOR_DATA),l=this._pVertices,n=o;s<this._startColors.length;)a=(n-o)/h&1?this._endColors:this._startColors,l[n]=a[s],l[n+1]=a[s+1],l[n+2]=a[s+2],l[n+3]=a[s+3],4==++r&&(r=0,s+=4),n+=h;this.notifyColorsUpdate(),this._colorsDirty=!1},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._startPositions=null,this._endPositions=null,this._thickness=null,this._startColors=null,this._endColors=null},e.prototype.pInvalidateBounds=function(){this.parentGeometry&&this.parentGeometry.iInvalidateBounds(this)},e.prototype.clone=function(){var t=new e;return t.updateIndices(this._pIndices.concat()),t.updatePositions(this._startPositions.concat(),this._endPositions.concat()),t.updateThickness(this._thickness.concat()),t.updatePositions(this._startPositions.concat(),this._endPositions.concat()),t},e.prototype._pNotifyVerticesUpdate=function(){this._pStrideOffsetDirty=!0,this.notifyPositionsUpdate(),this.notifyThicknessUpdate(),this.notifyColorsUpdate()},e.prototype.notifyPositionsUpdate=function(){this._positionsDirty||(this._positionsDirty=!0,this._positionsUpdated||(this._positionsUpdated=new n(n.VERTICES_UPDATED,a.POSITION_DATA)),this.dispatchEvent(this._positionsUpdated))},e.prototype.notifyThicknessUpdate=function(){this._thicknessDirty||(this._thicknessDirty=!0,this._thicknessUpdated||(this._thicknessUpdated=new n(n.VERTICES_UPDATED,e.THICKNESS_DATA)),this.dispatchEvent(this._thicknessUpdated))},e.prototype.notifyColorsUpdate=function(){this._colorsDirty||(this._colorsDirty=!0,this._colorUpdated||(this._colorUpdated=new n(n.VERTICES_UPDATED,e.COLOR_DATA)),this.dispatchEvent(this._colorUpdated))},e.VERTEX_DATA="vertices",e.START_POSITION_DATA="startPositions",e.END_POSITION_DATA="endPositions",e.THICKNESS_DATA="thickness",e.COLOR_DATA="colors",e.POSITION_FORMAT="float3",e.COLOR_FORMAT="float4",e.THICKNESS_FORMAT="float1",e}(r);e.exports=o},{"awayjs-display/lib/base/LineSubMesh":void 0,"awayjs-display/lib/base/SubGeometryBase":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-display/lib/events/SubGeometryEvent":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/base/LineSubMesh":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-display/lib/base/SubMeshBase"),a=function(t){function e(e,i,s){void 0===s&&(s=null),t.call(this),this._pParentMesh=i,this._subGeometry=e,this.material=s}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.LINE_SUB_MESH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.material=null,t.prototype.dispose.call(this)},e.prototype._iCollectRenderable=function(t){t.applyLineSubMesh(this)},e}(r);e.exports=a},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/SubMeshBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/base/LoaderInfo":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/EventDispatcher"),r=function(t){function e(){t.apply(this,arguments)}return i(e,t),Object.defineProperty(e.prototype,"bytes",{get:function(){return this._bytes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bytesLoaded",{get:function(){return this._bytesLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bytesTotal",{get:function(){return this._bytesTotal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentType",{get:function(){return this._contentType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loader",{get:function(){return this._loader},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),e}(s);e.exports=r},{"awayjs-core/lib/events/EventDispatcher":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/base/OrientationMode":[function(t,e){var i=function(){function t(){}return t.DEFAULT="default",t.CAMERA_PLANE="cameraPlane",t.CAMERA_POSITION="cameraPosition",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/PixelSnapping":[function(t,e){var i=function(){function t(){}return t.ALWAYS="always",t.AUTO="auto",t.NEVER="never",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/SpreadMethod":[function(t,e){var i=function(){function t(){}return t.PAD="pad",t.REFLECT="reflect",t.REPEAT="repeat",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/SubGeometryBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/NamedAssetBase"),r=t("awayjs-core/lib/errors/AbstractMethodError"),a=t("awayjs-display/lib/events/SubGeometryEvent"),n=function(t){function e(e){t.call(this),this._pStrideOffsetDirty=!0,this._pConcatenateArrays=!0,this._pStride=new Object,this._pOffset=new Object,this._pConcatenateArrays=e}return i(e,t),e.prototype._pUpdateStrideOffset=function(){throw new r},Object.defineProperty(e.prototype,"subMeshClass",{get:function(){return this._pSubMeshClass},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"concatenateArrays",{get:function(){return this._pConcatenateArrays},set:function(t){this._pConcatenateArrays!=t&&(this._pConcatenateArrays=t,this._pStrideOffsetDirty=!0,t&&this._pNotifyVerticesUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indices",{get:function(){return this._pIndices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.updateVertices(),this._pVertices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numTriangles",{get:function(){return this._numTriangles
},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numVertices",{get:function(){return this._pNumVertices},enumerable:!0,configurable:!0}),e.prototype.getStride=function(t){return this._pStrideOffsetDirty&&this._pUpdateStrideOffset(),this._pStride[t]},e.prototype.getOffset=function(t){return this._pStrideOffsetDirty&&this._pUpdateStrideOffset(),this._pOffset[t]},e.prototype.updateVertices=function(){throw new r},e.prototype.dispose=function(){this._pIndices=null,this._pVertices=null},e.prototype.updateIndices=function(t){this._pIndices=t,this._numIndices=t.length,this._numTriangles=this._numIndices/3,this.notifyIndicesUpdate()},e.prototype.pInvalidateBounds=function(){this.parentGeometry&&this.parentGeometry.iInvalidateBounds(this)},e.prototype.clone=function(){throw new r},e.prototype.applyTransformation=function(){},e.prototype.scale=function(){},e.prototype.scaleUV=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1)},e.prototype.getBoundingPositions=function(){throw new r},e.prototype.notifyIndicesUpdate=function(){this._indicesUpdated||(this._indicesUpdated=new a(a.INDICES_UPDATED)),this.dispatchEvent(this._indicesUpdated)},e.prototype._pNotifyVerticesUpdate=function(){throw new r},e.VERTEX_DATA="vertices",e}(s);e.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0,"awayjs-display/lib/events/SubGeometryEvent":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/base/SubMeshBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/AbstractMethodError"),r=t("awayjs-core/lib/library/NamedAssetBase"),a=function(t){function e(){t.call(this),this._iIndex=0,this._renderables=new Array}return i(e,t),Object.defineProperty(e.prototype,"animator",{get:function(){return this._pParentMesh.animator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material||this._pParentMesh.material},set:function(t){this.material&&this.material.iRemoveOwner(this),this._material=t,this.material&&this.material.iAddOwner(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sceneTransform",{get:function(){return this._pParentMesh.sceneTransform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentMesh",{get:function(){return this._pParentMesh},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform||this._pParentMesh.uvTransform},set:function(t){this._uvTransform=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.material=null;for(var t=this._renderables.length,e=0;t>e;e++)this._renderables[e].dispose()},e.prototype.getRenderSceneTransform=function(t){return this._pParentMesh.getRenderSceneTransform(t)},e.prototype._iAddRenderable=function(t){return this._renderables.push(t),t},e.prototype._iRemoveRenderable=function(t){var e=this._renderables.indexOf(t);return this._renderables.splice(e,1),t},e.prototype._iInvalidateRenderableGeometry=function(){for(var t=this._renderables.length,e=0;t>e;e++)this._renderables[e].invalidateGeometry()},e.prototype._iCollectRenderable=function(){throw new s},e.prototype._iGetExplicitMaterial=function(){return this._material},e}(r);e.exports=a},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/base/Transform":[function(t,e){var i=t("awayjs-core/lib/geom/Matrix3D"),s=t("awayjs-core/lib/geom/Matrix3DUtils"),r=t("awayjs-core/lib/geom/Vector3D"),a=function(){function t(t){this._position=new r,this._displayObject=t}return Object.defineProperty(t.prototype,"backVector",{get:function(){var t=s.getForward(this._displayObject._iMatrix3D);return t.negate(),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"concatenatedColorTransform",{get:function(){return this._concatenatedColorTransform},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"concatenatedMatrix",{get:function(){return this._concatenatedMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downVector",{get:function(){var t=s.getUp(this._displayObject._iMatrix3D);return t.negate(),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forwardVector",{get:function(){return s.getForward(this._displayObject._iMatrix3D)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftVector",{get:function(){var t=s.getRight(this._displayObject._iMatrix3D);return t.negate(),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"matrix3D",{get:function(){return this._displayObject._iMatrix3D},set:function(t){this._displayObject._iMatrix3D=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixelBounds",{get:function(){return this._pixelBounds},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._displayObject._iMatrix3D.position},set:function(t){this._displayObject.x=t.x,this._displayObject.y=t.y,this._displayObject.z=t.z},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightVector",{get:function(){return s.getRight(this._displayObject._iMatrix3D)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return new r(this._displayObject.rotationX,this._displayObject.rotationY,this._displayObject.rotationZ)},set:function(t){this._displayObject.rotationX=t.x,this._displayObject.rotationY=t.y,this._displayObject.rotationZ=t.z},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return new r(this._displayObject.scaleX,this._displayObject.scaleY,this._displayObject.scaleZ)},set:function(t){this._displayObject.scaleX=t.x,this._displayObject.scaleY=t.y,this._displayObject.scaleZ=t.z},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"upVector",{get:function(){return s.getUp(this._displayObject._iMatrix3D)},enumerable:!0,configurable:!0}),t.prototype.getRelativeMatrix3D=function(){return new i},t.prototype.moveForward=function(t){this._displayObject.translateLocal(r.Z_AXIS,t)},t.prototype.moveBackward=function(t){this._displayObject.translateLocal(r.Z_AXIS,-t)},t.prototype.moveLeft=function(t){this._displayObject.translateLocal(r.X_AXIS,-t)},t.prototype.moveRight=function(t){this._displayObject.translateLocal(r.X_AXIS,t)},t.prototype.moveUp=function(t){this._displayObject.translateLocal(r.Y_AXIS,t)},t.prototype.moveDown=function(t){this._displayObject.translateLocal(r.Y_AXIS,-t)},t}();e.exports=a},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Matrix3DUtils":void 0,"awayjs-core/lib/geom/Vector3D":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/base/TriangleCulling":[function(t,e){var i=function(){function t(){}return t.NEGATIVE="negative",t.NONE="none",t.POSITIVE="positive",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/base/TriangleSubGeometry":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-display/lib/base/SubGeometryBase"),a=t("awayjs-display/lib/base/TriangleSubMesh"),n=t("awayjs-display/lib/events/SubGeometryEvent"),o=function(t){function e(e){t.call(this,e),this._positionsDirty=!0,this._faceNormalsDirty=!0,this._faceTangentsDirty=!0,this._vertexNormalsDirty=!0,this._vertexTangentsDirty=!0,this._uvsDirty=!0,this._secondaryUVsDirty=!0,this._jointIndicesDirty=!0,this._jointWeightsDirty=!0,this._concatenateArrays=!0,this._autoDeriveNormals=!0,this._autoDeriveTangents=!0,this._autoDeriveUVs=!1,this._useFaceWeights=!1,this._scaleU=1,this._scaleV=1,this._pSubMeshClass=a}return i(e,t),Object.defineProperty(e.prototype,"scaleU",{get:function(){return this._scaleU},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleV",{get:function(){return this._scaleV},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useCondensedIndices",{get:function(){return this._useCondensedIndices},set:function(t){this._useCondensedIndices!=t&&(this._useCondensedIndices=t,this.notifyJointIndicesUpdate())},enumerable:!0,configurable:!0}),e.prototype._pUpdateStrideOffset=function(){if(this._concatenateArrays){this._pOffset[e.VERTEX_DATA]=0,this._pOffset[e.POSITION_DATA]=0;var t=3;null!=this._vertexNormals&&(this._pOffset[e.NORMAL_DATA]=t,t+=3),null!=this._vertexTangents&&(this._pOffset[e.TANGENT_DATA]=t,t+=3),null!=this._uvs&&(this._pOffset[e.UV_DATA]=t,t+=2),null!=this._secondaryUVs&&(this._pOffset[e.SECONDARY_UV_DATA]=t,t+=2),null!=this._jointIndices&&(this._pOffset[e.JOINT_INDEX_DATA]=t,t+=this._jointsPerVertex),null!=this._jointWeights&&(this._pOffset[e.JOINT_WEIGHT_DATA]=t,t+=this._jointsPerVertex),this._pStride[e.VERTEX_DATA]=t,this._pStride[e.POSITION_DATA]=t,this._pStride[e.NORMAL_DATA]=t,this._pStride[e.TANGENT_DATA]=t,this._pStride[e.UV_DATA]=t,this._pStride[e.SECONDARY_UV_DATA]=t,this._pStride[e.JOINT_INDEX_DATA]=t,this._pStride[e.JOINT_WEIGHT_DATA]=t;var i=this._pNumVertices*t;null==this._pVertices?this._pVertices=new Array(i):this._pVertices.length!=i&&(this._pVertices.length=i)}else this._pOffset[e.POSITION_DATA]=0,this._pOffset[e.NORMAL_DATA]=0,this._pOffset[e.TANGENT_DATA]=0,this._pOffset[e.UV_DATA]=0,this._pOffset[e.SECONDARY_UV_DATA]=0,this._pOffset[e.JOINT_INDEX_DATA]=0,this._pOffset[e.JOINT_WEIGHT_DATA]=0,this._pStride[e.POSITION_DATA]=3,this._pStride[e.NORMAL_DATA]=3,this._pStride[e.TANGENT_DATA]=3,this._pStride[e.UV_DATA]=2,this._pStride[e.SECONDARY_UV_DATA]=2,this._pStride[e.JOINT_INDEX_DATA]=this._jointsPerVertex,this._pStride[e.JOINT_WEIGHT_DATA]=this._jointsPerVertex;this._pStrideOffsetDirty=!1},Object.defineProperty(e.prototype,"jointsPerVertex",{get:function(){return this._jointsPerVertex},set:function(t){this._jointsPerVertex!=t&&(this._jointsPerVertex=t,this._pStrideOffsetDirty=!0,this._pConcatenateArrays&&this._pNotifyVerticesUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoDeriveUVs",{get:function(){return this._autoDeriveUVs},set:function(t){this._autoDeriveUVs!=t&&(this._autoDeriveUVs=t,t&&this.notifyUVsUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoDeriveNormals",{get:function(){return this._autoDeriveNormals},set:function(t){this._autoDeriveNormals!=t&&(this._autoDeriveNormals=t,t&&this.notifyNormalsUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoDeriveTangents",{get:function(){return this._autoDeriveTangents},set:function(t){this._autoDeriveTangents!=t&&(this._autoDeriveTangents=t,t&&this.notifyTangentsUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertices",{get:function(){return this._positionsDirty&&this.updatePositions(this._positions),this._vertexNormalsDirty&&this.updateVertexNormals(this._vertexNormals),this._vertexTangentsDirty&&this.updateVertexTangents(this._vertexTangents),this._uvsDirty&&this.updateUVs(this._uvs),this._secondaryUVsDirty&&this.updateSecondaryUVs(this._secondaryUVs),this._jointIndicesDirty&&this.updateJointIndices(this._jointIndices),this._jointWeightsDirty&&this.updateJointWeights(this._jointWeights),this._pVertices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positionsDirty&&this.updatePositions(this._positions),this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertexNormals",{get:function(){return this._vertexNormalsDirty&&this.updateVertexNormals(this._vertexNormals),this._vertexNormals},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertexTangents",{get:function(){return this._vertexTangentsDirty&&this.updateVertexTangents(this._vertexTangents),this._vertexTangents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"faceNormals",{get:function(){return this._faceNormalsDirty&&this.updateFaceNormals(),this._faceNormals},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"faceTangents",{get:function(){return this._faceTangentsDirty&&this.updateFaceTangents(),this._faceTangents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uvs",{get:function(){return this._uvsDirty&&this.updateUVs(this._uvs),this._uvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondaryUVs",{get:function(){return this._secondaryUVsDirty&&this.updateSecondaryUVs(this._secondaryUVs),this._secondaryUVs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"jointIndices",{get:function(){return this._jointIndicesDirty&&this.updateJointIndices(this._jointIndices),this._useCondensedIndices?this._condensedJointIndices:this._jointIndices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"jointWeights",{get:function(){return this._jointWeightsDirty&&this.updateJointWeights(this._jointWeights),this._jointWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useFaceWeights",{get:function(){return this._useFaceWeights},set:function(t){this._useFaceWeights!=t&&(this._useFaceWeights=t,this._autoDeriveNormals&&this.notifyNormalsUpdate(),this._autoDeriveTangents&&this.notifyTangentsUpdate(),this._faceNormalsDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numCondensedJoints",{get:function(){return this._jointIndicesDirty&&this.updateJointIndices(this._jointIndices),this._numCondensedJoints},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"condensedIndexLookUp",{get:function(){return this._jointIndicesDirty&&this.updateJointIndices(this._jointIndices),this._condensedIndexLookUp},enumerable:!0,configurable:!0}),e.prototype.getBoundingPositions=function(){return this._positionsDirty&&this.updatePositions(this._positions),this._positions},e.prototype.updatePositions=function(t){var i,s,r,a;if(this._positions=t,null==this._positions&&(this._positions=new Array),this._pNumVertices=this._positions.length/3,this._concatenateArrays){var n=this._pNumVertices*this.getStride(e.VERTEX_DATA);for(null==this._pVertices?this._pVertices=new Array(n):this._pVertices.length!=n&&(this._pVertices.length=n),i=0,s=this.getOffset(e.POSITION_DATA),r=this.getStride(e.POSITION_DATA),a=this._pVertices;i<t.length;)a[s]=t[i++],a[s+1]=t[i++],a[s+2]=t[i++],s+=r}this._autoDeriveNormals&&this.notifyNormalsUpdate(),this._autoDeriveTangents&&this.notifyTangentsUpdate(),this._autoDeriveUVs&&this.notifyUVsUpdate(),this.pInvalidateBounds(),this.notifyPositionsUpdate(),this._positionsDirty=!1},e.prototype.updateVertexNormals=function(t){var i,s,r,a,n;if(this._autoDeriveNormals){null==this._vertexNormals&&(this._vertexNormals=new Array(this._positions.length),this._concatenateArrays?this._pNotifyVerticesUpdate():this._pStrideOffsetDirty=!0),this._faceNormalsDirty&&this.updateFaceNormals(),r=this.getOffset(e.NORMAL_DATA),a=this.getStride(e.NORMAL_DATA),n=this._concatenateArrays?this._pVertices:this._vertexNormals;var o=0,h=1,l=2;s=r;for(var p=n.length;p>s;)n[s]=0,n[s+1]=0,n[s+2]=0,s+=a;var d,u=0,c=this._pIndices.length;for(i=0;c>i;)d=this._useFaceWeights?this._faceWeights[u++]:1,s=r+this._pIndices[i++]*a,n[s]+=this._faceNormals[o]*d,n[s+1]+=this._faceNormals[h]*d,n[s+2]+=this._faceNormals[l]*d,s=r+this._pIndices[i++]*a,n[s]+=this._faceNormals[o]*d,n[s+1]+=this._faceNormals[h]*d,n[s+2]+=this._faceNormals[l]*d,s=r+this._pIndices[i++]*a,n[s]+=this._faceNormals[o]*d,n[s+1]+=this._faceNormals[h]*d,n[s+2]+=this._faceNormals[l]*d,o+=3,h+=3,l+=3;for(i=0,s=r;p>s;){var _=n[s],y=n[s+1],g=n[s+2],f=1/Math.sqrt(_*_+y*y+g*g);this._concatenateArrays?(this._vertexNormals[i++]=n[s]=_*f,this._vertexNormals[i++]=n[s+1]=y*f,this._vertexNormals[i++]=n[s+2]=g*f):(n[s]=_*f,n[s+1]=y*f,n[s+2]=g*f),s+=a}}else if(null!=this._vertexNormals&&null!=t||null==this._vertexNormals&&null==t||(this._concatenateArrays?this._pNotifyVerticesUpdate():this._pStrideOffsetDirty=!0),this._vertexNormals=t,null!=t&&this._concatenateArrays)for(i=0,s=this.getOffset(e.NORMAL_DATA),a=this.getStride(e.NORMAL_DATA),n=this._pVertices;i<t.length;)n[s]=t[i++],n[s+1]=t[i++],n[s+2]=t[i++],s+=a;this.notifyNormalsUpdate(),this._vertexNormalsDirty=!1},e.prototype.updateVertexTangents=function(t){var i,s,r,a,n;if(this._autoDeriveTangents){null==this._vertexTangents&&(this._vertexTangents=new Array(this._positions.length),this._concatenateArrays?this._pNotifyVerticesUpdate():this._pStrideOffsetDirty=!0),this._faceTangentsDirty&&this.updateFaceTangents(),r=this.getOffset(e.TANGENT_DATA),a=this.getStride(e.TANGENT_DATA),n=this._concatenateArrays?this._pVertices:this._vertexTangents,s=r;for(var o=n.length;o>s;)n[s]=0,n[s+1]=0,n[s+2]=0,s+=a;var h,l=0,p=0,d=1,u=2;i=0;for(var c=this._pIndices.length;c>i;)h=this._useFaceWeights?this._faceWeights[l++]:1,s=r+this._pIndices[i++]*a,n[s++]+=this._faceTangents[p]*h,n[s++]+=this._faceTangents[d]*h,n[s]+=this._faceTangents[u]*h,s=r+this._pIndices[i++]*a,n[s++]+=this._faceTangents[p]*h,n[s++]+=this._faceTangents[d]*h,n[s]+=this._faceTangents[u]*h,s=r+this._pIndices[i++]*a,n[s++]+=this._faceTangents[p]*h,n[s++]+=this._faceTangents[d]*h,n[s]+=this._faceTangents[u]*h,p+=3,d+=3,u+=3;for(i=0,s=r;o>s;){var _=n[s],y=n[s+1],g=n[s+2],f=1/Math.sqrt(_*_+y*y+g*g);this._concatenateArrays?(this._vertexTangents[i++]=n[s]=_*f,this._vertexTangents[i++]=n[s+1]=y*f,this._vertexTangents[i++]=n[s+2]=g*f):(n[s]=_*f,n[s+1]=y*f,n[s+2]=g*f),s+=a}}else if(null!=this._vertexTangents&&null!=t||null==this._vertexTangents&&null==t||(this._concatenateArrays?this._pNotifyVerticesUpdate():this._pStrideOffsetDirty=!0),this._vertexTangents=t,null!=t&&this._concatenateArrays)for(i=0,s=this.getOffset(e.TANGENT_DATA),a=this.getStride(e.TANGENT_DATA),n=this._pVertices;i<t.length;)n[s]=t[i++],n[s+1]=t[i++],n[s+2]=t[i++],s+=a;this.notifyTangentsUpdate(),this._vertexTangentsDirty=!1},e.prototype.updateUVs=function(t){var i,s,r,a,n;if(this._autoDeriveUVs){null==this._uvs&&(this._uvs=new Array(2*this._positions.length/3),this._concatenateArrays?this._pNotifyVerticesUpdate():this._pStrideOffsetDirty=!0),r=this.getOffset(e.UV_DATA),a=this.getStride(e.UV_DATA),n=this._concatenateArrays?this._pVertices:this._uvs,i=0,s=r;for(var o=0,h=n.length;h>s;)this._concatenateArrays?(this._uvs[i++]=n[s]=.5*o,this._uvs[i++]=n[s+1]=1-(1&o)):(n[s]=.5*o,n[s+1]=1-(1&o)),3==++o&&(o=0),s+=a}else if(null!=this._uvs&&null!=t||null==this._uvs&&null==t||(this._concatenateArrays?this._pNotifyVerticesUpdate():this._pStrideOffsetDirty=!0),this._uvs=t,null!=t&&this._concatenateArrays)for(i=0,s=this.getOffset(e.UV_DATA),a=this.getStride(e.UV_DATA),n=this._pVertices;i<t.length;)n[s]=t[i++],n[s+1]=t[i++],s+=a;this._autoDeriveTangents&&this.notifyTangentsUpdate(),this.notifyUVsUpdate(),this._uvsDirty=!1},e.prototype.updateSecondaryUVs=function(t){var i,s,r,a,n;if(!this._concatenateArrays||null!=this._secondaryUVs&&null!=t||null==this._secondaryUVs&&null==t||this._pNotifyVerticesUpdate(),this._secondaryUVs=t,null!=t&&this._concatenateArrays)for(r=this.getOffset(e.SECONDARY_UV_DATA),a=this.getStride(e.SECONDARY_UV_DATA),i=0,s=r,n=this._pVertices;i<t.length;)n[s]=t[i++],n[s+1]=t[i++],s+=a;this.notifySecondaryUVsUpdate(),this._secondaryUVsDirty=!1},e.prototype.updateJointIndices=function(t){var i,s,r,a,n,o;if(!this._concatenateArrays||null!=this._jointIndices&&null!=t||null==this._jointIndices&&null==t||this._pNotifyVerticesUpdate(),this._jointIndices=t,null!=t)if(a=this.getOffset(e.JOINT_INDEX_DATA),n=this.getStride(e.JOINT_INDEX_DATA),this._useCondensedIndices){i=0,s=0,r=a,o=this._concatenateArrays?this._pVertices:this._condensedJointIndices;var h,l=0,p=new Object;for(this._concatenateArrays||(this._condensedJointIndices=new Array(t.length)),this._condensedIndexLookUp=new Array;i<t.length;){for(s=0;s<this._jointsPerVertex;s++)h=t[i++],void 0==p[h]&&(p[h]=3*l,this._condensedIndexLookUp[l++]=h),o[r+s]=p[h];r+=n}this._numCondensedJoints=l}else if(this._concatenateArrays)for(i=0,r=a,o=this._pVertices;i<t.length;){for(s=0;s<this._jointsPerVertex;)o[r+s++]=t[i++];r+=n}this.notifyJointIndicesUpdate(),this._jointIndicesDirty=!1},e.prototype.updateJointWeights=function(t){var i,s,r,a,n,o;if(!this._concatenateArrays||null!=this._jointWeights&&null!=t||null==this._jointWeights&&null==t||this._pNotifyVerticesUpdate(),this._jointWeights=t,null!=t&&this._concatenateArrays)for(a=this.getOffset(e.JOINT_WEIGHT_DATA),n=this.getStride(e.JOINT_WEIGHT_DATA),i=0,r=a,o=this._pVertices;i<t.length;){for(s=0;s<this._jointsPerVertex;)o[r+s++]=t[i++];r+=n}this.notifyJointWeightsUpdate(),this._jointWeightsDirty=!1},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._positions=null,this._vertexNormals=null,this._vertexTangents=null,this._uvs=null,this._secondaryUVs=null,this._jointIndices=null,this._jointWeights=null,this._faceNormals=null,this._faceWeights=null,this._faceTangents=null},e.prototype.updateIndices=function(e){t.prototype.updateIndices.call(this,e),this._faceNormalsDirty=!0,this._autoDeriveNormals&&(this._vertexNormalsDirty=!0),this._autoDeriveTangents&&(this._vertexTangentsDirty=!0),this._autoDeriveUVs&&(this._uvsDirty=!0)},e.prototype.clone=function(){var t=new e(this._concatenateArrays);return t.updateIndices(this._pIndices.concat()),t.updatePositions(this._positions.concat()),t.updateVertexNormals(this._vertexNormals&&!this._autoDeriveNormals?this._vertexNormals.concat():null),t.updateUVs(this._uvs&&!this._autoDeriveUVs?this._uvs.concat():null),t.updateVertexTangents(this._vertexTangents&&!this._autoDeriveTangents?this._vertexTangents.concat():null),this._secondaryUVs&&t.updateSecondaryUVs(this._secondaryUVs.concat()),this._jointIndices&&(t.jointsPerVertex=this._jointsPerVertex,t.updateJointIndices(this._jointIndices.concat())),this._jointWeights&&t.updateJointWeights(this._jointWeights.concat()),t},e.prototype.scaleUV=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);var i,s,r,a;a=this._uvs;var n=t/this._scaleU,o=e/this._scaleV;this._scaleU=t,this._scaleV=e;var h=a.length;for(s=0,r=2,i=s;h>i;)a[i]*=n,a[i+1]*=o,i+=r;this.notifyUVsUpdate()},e.prototype.scale=function(t){var e,i,s,r,a;a=this._positions;var n=a.length;for(s=0,r=3,e=0,i=s;n>e;)a[i]*=t,a[i+1]*=t,a[i+2]*=t,e+=3,i+=r;this.notifyPositionsUpdate()},e.prototype.applyTransformation=function(t){var i,r,a;this._concatenateArrays?(i=this._pVertices,r=this._pVertices,a=this._pVertices):(i=this._positions,r=this._vertexNormals,a=this._vertexTangents);var n,o,h,l,p=this._positions.length/3,d=new s,u=null!=this._vertexNormals,c=null!=this._vertexTangents;(u||c)&&(l=t.clone(),l.invert(),l.transpose());var _=this.getOffset(e.POSITION_DATA),y=this.getOffset(e.NORMAL_DATA),g=this.getOffset(e.TANGENT_DATA),f=this.getStride(e.POSITION_DATA),m=this.getStride(e.NORMAL_DATA),b=this.getStride(e.TANGENT_DATA);for(n=0;p>n;++n)o=_+1,h=_+2,d.x=i[_],d.y=i[o],d.z=i[h],d=t.transformVector(d),i[_]=d.x,i[o]=d.y,i[h]=d.z,_+=f,u&&(o=y+1,h=y+2,d.x=r[y],d.y=r[o],d.z=r[h],d=l.deltaTransformVector(d),d.normalize(),r[y]=d.x,r[o]=d.y,r[h]=d.z,y+=m),c&&(o=g+1,h=g+2,d.x=a[g],d.y=a[o],d.z=a[h],d=l.deltaTransformVector(d),d.normalize(),a[g]=d.x,a[o]=d.y,a[h]=d.z,g+=b);this.notifyPositionsUpdate(),this.notifyNormalsUpdate(),this.notifyTangentsUpdate()},e.prototype.updateFaceTangents=function(){var t,e,i,s,r,a,n,o,h,l,p,d,u,c,_,y,g,f,m,b,w=0,v=this._positions,x=this._uvs,P=this._pIndices.length;for(null==this._faceTangents&&(this._faceTangents=new Array(P));P>w;)t=this._pIndices[w],e=this._pIndices[w+1],i=this._pIndices[w+2],r=x[2*t+1],a=x[2*e+1]-r,n=x[2*i+1]-r,s=3*t,h=v[s],l=v[s+1],p=v[s+2],s=3*e,d=v[s]-h,u=v[s+1]-l,c=v[s+2]-p,s=3*i,_=v[s]-h,y=v[s+1]-l,g=v[s+2]-p,f=n*d-a*_,m=n*u-a*y,b=n*c-a*g,o=1/Math.sqrt(f*f+m*m+b*b),this._faceTangents[w++]=o*f,this._faceTangents[w++]=o*m,this._faceTangents[w++]=o*b;this._faceTangentsDirty=!1},e.prototype.updateFaceNormals=function(){var t,e,i,s,r,a,n,o,h,l,p,d,u,c,_,y,g,f,m,b,w=0,v=0,x=0,P=this._positions,D=this._pIndices.length;for(null==this._faceNormals&&(this._faceNormals=new Array(D)),this._useFaceWeights&&null==this._faceWeights&&(this._faceWeights=new Array(D/3));D>w;){if(t=3*this._pIndices[w++],e=P[t],r=P[t+1],o=P[t+2],t=3*this._pIndices[w++],i=P[t],a=P[t+1],h=P[t+2],t=3*this._pIndices[w++],s=P[t],n=P[t+1],l=P[t+2],p=s-e,d=n-r,u=l-o,c=i-e,_=a-r,y=h-o,g=u*_-d*y,f=p*y-u*c,m=d*c-p*_,b=Math.sqrt(g*g+f*f+m*m),this._useFaceWeights){var j=1e4*b;1>j&&(j=1),this._faceWeights[x++]=j}b=1/b,this._faceNormals[v++]=g*b,this._faceNormals[v++]=f*b,this._faceNormals[v++]=m*b}this._faceNormalsDirty=!1},e.prototype._pNotifyVerticesUpdate=function(){this._pStrideOffsetDirty=!0,this.notifyPositionsUpdate(),this.notifyNormalsUpdate(),this.notifyTangentsUpdate(),this.notifyUVsUpdate(),this.notifySecondaryUVsUpdate(),this.notifyJointIndicesUpdate(),this.notifyJointWeightsUpdate()},e.prototype.notifyPositionsUpdate=function(){this._positionsDirty||(this._positionsDirty=!0,this._positionsUpdated||(this._positionsUpdated=new n(n.VERTICES_UPDATED,e.POSITION_DATA)),this.dispatchEvent(this._positionsUpdated))},e.prototype.notifyNormalsUpdate=function(){this._vertexNormalsDirty||(this._vertexNormalsDirty=!0,this._normalsUpdated||(this._normalsUpdated=new n(n.VERTICES_UPDATED,e.NORMAL_DATA)),this.dispatchEvent(this._normalsUpdated))},e.prototype.notifyTangentsUpdate=function(){this._vertexTangentsDirty||(this._vertexTangentsDirty=!0,this._tangentsUpdated||(this._tangentsUpdated=new n(n.VERTICES_UPDATED,e.TANGENT_DATA)),this.dispatchEvent(this._tangentsUpdated))},e.prototype.notifyUVsUpdate=function(){this._uvsDirty||(this._uvsDirty=!0,this._uvsUpdated||(this._uvsUpdated=new n(n.VERTICES_UPDATED,e.UV_DATA)),this.dispatchEvent(this._uvsUpdated))},e.prototype.notifySecondaryUVsUpdate=function(){this._secondaryUVsDirty||(this._secondaryUVsDirty=!0,this._secondaryUVsUpdated||(this._secondaryUVsUpdated=new n(n.VERTICES_UPDATED,e.SECONDARY_UV_DATA)),this.dispatchEvent(this._secondaryUVsUpdated))},e.prototype.notifyJointIndicesUpdate=function(){this._jointIndicesDirty||(this._jointIndicesDirty=!0,this._jointIndicesUpdated||(this._jointIndicesUpdated=new n(n.VERTICES_UPDATED,e.JOINT_INDEX_DATA)),this.dispatchEvent(this._jointIndicesUpdated))},e.prototype.notifyJointWeightsUpdate=function(){this._jointWeightsDirty||(this._jointWeightsDirty=!0,this._jointWeightsUpdated||(this._jointWeightsUpdated=new n(n.VERTICES_UPDATED,e.JOINT_WEIGHT_DATA)),this.dispatchEvent(this._jointWeightsUpdated))},e.POSITION_DATA="positions",e.NORMAL_DATA="vertexNormals",e.TANGENT_DATA="vertexTangents",e.UV_DATA="uvs",e.SECONDARY_UV_DATA="secondaryUVs",e.JOINT_INDEX_DATA="jointIndices",e.JOINT_WEIGHT_DATA="jointWeights",e.POSITION_FORMAT="float3",e.NORMAL_FORMAT="float3",e.TANGENT_FORMAT="float3",e.UV_FORMAT="float2",e.SECONDARY_UV_FORMAT="float2",e}(r);e.exports=o},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/base/SubGeometryBase":void 0,"awayjs-display/lib/base/TriangleSubMesh":void 0,"awayjs-display/lib/events/SubGeometryEvent":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/base/TriangleSubMesh":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-display/lib/base/SubMeshBase"),a=function(t){function e(e,i,s){void 0===s&&(s=null),t.call(this),this._pParentMesh=i,this._subGeometry=e,this.material=s}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.TRIANGLE_SUB_MESH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype._iCollectRenderable=function(t){t.applyTriangleSubMesh(this)},e}(r);e.exports=a},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/SubMeshBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/containers/DisplayObjectContainer":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/errors/ArgumentError"),a=t("awayjs-core/lib/errors/Error"),n=t("awayjs-core/lib/errors/RangeError"),o=t("awayjs-display/lib/base/DisplayObject"),h=function(t){function e(){t.call(this),this._mouseChildren=!0,this._children=new Array}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.CONTAINER},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseChildren",{get:function(){return this._mouseChildren},set:function(t){this._mouseChildren!=t&&(this._mouseChildren=t,this._pUpdateImplicitMouseEnabled(this._pParent?this._pParent.mouseChildren:!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numChildren",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),e.prototype.addChild=function(t){if(null==t)throw new a("Parameter child cannot be null.");return t._pParent&&t._pParent.removeChildInternal(t),t.iSetParent(this),this._children.push(t),t},e.prototype.addChildAt=function(t){return t},e.prototype.addChildren=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var i=t.length,s=0;i>s;s++)this.addChild(t[s])},e.prototype.clone=function(){var t=new e;t.pivot=this.pivot,t._iMatrix3D=this._iMatrix3D,t.partition=this.partition,t.name=name;for(var i=this._children.length,s=0;i>s;++s)t.addChild(this._children[s].clone());return t},e.prototype.contains=function(t){return this._children.indexOf(t)>=0},e.prototype.disposeWithChildren=function(){for(this.dispose();this.numChildren>0;)this.getChildAt(0).dispose()},e.prototype.getChildAt=function(t){var e=this._children[t];if(null==e)throw new n("Index does not exist in the child list of the caller");return e},e.prototype.getChildByName=function(t){for(var e=this._children.length,i=0;e>i;++i)if(this._children[i].name==t)return this._children[i];return null},e.prototype.getChildIndex=function(t){var e=this._children.indexOf(t);if(-1==e)throw new r("Child parameter is not a child of the caller");return e},e.prototype.getObjectsUnderPoint=function(){return new Array},e.prototype.removeChild=function(t){if(null==t)throw new a("Parameter child cannot be null");return this.removeChildInternal(t),t.iSetParent(null),t},e.prototype.removeChildAt=function(t){return this.removeChild(this._children[t])},e.prototype.removeChildren=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=2147483647),0>t)throw new n("beginIndex is out of range of the child list");if(e>this._children.length)throw new n("endIndex is out of range of the child list");for(var i=t;e>i;i++)this.removeChild(this._children[i])},e.prototype.setChildIndex=function(){},e.prototype.swapChildren=function(){},e.prototype.swapChildrenAt=function(){},e.prototype.pInvalidateSceneTransform=function(){t.prototype.pInvalidateSceneTransform.call(this);for(var e=this._children.length,i=0;e>i;++i)this._children[i].pInvalidateSceneTransform()},e.prototype._pUpdateScene=function(e){t.prototype._pUpdateScene.call(this,e);for(var i=this._children.length,s=0;i>s;++s)this._children[s]._pUpdateScene(e)},e.prototype._pUpdateImplicitMouseEnabled=function(e){t.prototype._pUpdateImplicitMouseEnabled.call(this,e);for(var i=this._children.length,s=0;i>s;++s)this._children[s]._pUpdateImplicitMouseEnabled(this._mouseChildren)},e.prototype._pUpdateImplicitVisibility=function(e){t.prototype._pUpdateImplicitVisibility.call(this,e);for(var i=this._children.length,s=0;i>s;++s)this._children[s]._pUpdateImplicitVisibility(this._pImplicitVisibility)},e.prototype._pUpdateImplicitPartition=function(e){t.prototype._pUpdateImplicitPartition.call(this,e);
for(var i=this._children.length,s=0;i>s;++s)this._children[s]._pUpdateImplicitPartition(this._pImplicitPartition)},e.prototype.removeChildInternal=function(t){return this._children.splice(this.getChildIndex(t),1),t},e}(o);e.exports=h},{"awayjs-core/lib/errors/ArgumentError":void 0,"awayjs-core/lib/errors/Error":void 0,"awayjs-core/lib/errors/RangeError":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/DisplayObject":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/containers/Loader":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetLibraryBundle"),r=t("awayjs-core/lib/library/AssetLoader"),a=t("awayjs-core/lib/events/AssetEvent"),n=t("awayjs-core/lib/events/IOErrorEvent"),o=t("awayjs-core/lib/events/LoaderEvent"),h=t("awayjs-core/lib/events/ParserEvent"),l=t("awayjs-display/lib/containers/DisplayObjectContainer"),p=function(t){function e(e,i){var s=this;void 0===e&&(e=!0),void 0===i&&(i=null),t.call(this),this._loadingSessions=new Array,this._useAssetLib=e,this._assetLibId=i,this._onResourceCompleteDelegate=function(t){return s.onResourceComplete(t)},this._onAssetCompleteDelegate=function(t){return s.onAssetComplete(t)}}return i(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentLoaderInfo",{get:function(){return this._contentLoaderInfo},enumerable:!0,configurable:!0}),e.prototype.close=function(){if(this._useAssetLib){var t;return t=s.getInstance(this._assetLibId),t.stopAllLoadingSessions(),void(this._loadingSessions=null)}var e,i=this._loadingSessions.length;for(e=0;i>e;e++)this.removeListeners(this._loadingSessions[e]),this._loadingSessions[e].stop(),this._loadingSessions[e]=null;this._loadingSessions=null},e.prototype.load=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var h;if(this._useAssetLib){var l;l=s.getInstance(this._assetLibId),h=l.load(t,e,i,n)}else{var p=new r;this._loadingSessions.push(p),h=p.load(t,e,i,n)}return h.addEventListener(o.RESOURCE_COMPLETE,this._onResourceCompleteDelegate),h.addEventListener(a.ASSET_COMPLETE,this._onAssetCompleteDelegate),h._iLoader._iAddErrorHandler(this.onLoadError),h._iLoader._iAddParseErrorHandler(this.onParseError),h},e.prototype.loadData=function(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var h;if(this._useAssetLib){var l;l=s.getInstance(this._assetLibId),h=l.loadData(t,e,i,n)}else{var p=new r;this._loadingSessions.push(p),h=p.loadData(t,"",e,i,n)}return h.addEventListener(o.RESOURCE_COMPLETE,this._onResourceCompleteDelegate),h.addEventListener(a.ASSET_COMPLETE,this._onAssetCompleteDelegate),h._iLoader._iAddErrorHandler(this.onLoadError),h._iLoader._iAddParseErrorHandler(this.onParseError),h},e.prototype.unload=function(){},e.enableParser=function(t){r.enableParser(t)},e.enableParsers=function(t){r.enableParsers(t)},e.prototype.removeListeners=function(t){t.removeEventListener(o.RESOURCE_COMPLETE,this._onResourceCompleteDelegate),t.removeEventListener(a.ASSET_COMPLETE,this._onAssetCompleteDelegate)},e.prototype.onAssetComplete=function(t){this.dispatchEvent(t)},e.prototype.onLoadError=function(t){return this.hasEventListener(n.IO_ERROR)?(this.dispatchEvent(t),!0):!1},e.prototype.onParseError=function(t){return this.hasEventListener(h.PARSE_ERROR)?(this.dispatchEvent(t),!0):!1},e.prototype.onResourceComplete=function(t){this._content=t.content,this._content&&this.addChild(this._content),this.dispatchEvent(t)},e}(l);e.exports=p},{"awayjs-core/lib/events/AssetEvent":void 0,"awayjs-core/lib/events/IOErrorEvent":void 0,"awayjs-core/lib/events/LoaderEvent":void 0,"awayjs-core/lib/events/ParserEvent":void 0,"awayjs-core/lib/library/AssetLibraryBundle":void 0,"awayjs-core/lib/library/AssetLoader":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/containers/Scene":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/EventDispatcher"),r=t("awayjs-display/lib/containers/DisplayObjectContainer"),a=t("awayjs-display/lib/events/SceneEvent"),n=t("awayjs-display/lib/partition/NodeBase"),o=t("awayjs-display/lib/partition/Partition"),h=function(t){function e(){t.call(this),this._expandedPartitions=new Array,this._partitions=new Array,this._iCollectionMark=0,this._iSceneGraphRoot=new r,this._iSceneGraphRoot._iSetScene(this),this._iSceneGraphRoot._iIsRoot=!0,this._iSceneGraphRoot.partition=new o(new n)}return i(e,t),e.prototype.traversePartitions=function(t){var e=0,i=this._partitions.length;for(t.scene=this;i>e;)this._iCollectionMark++,this._partitions[e++].traverse(t)},Object.defineProperty(e.prototype,"partition",{get:function(){return this._iSceneGraphRoot.partition},set:function(t){this._iSceneGraphRoot.partition=t,this.dispatchEvent(new a(a.PARTITION_CHANGED,this._iSceneGraphRoot))},enumerable:!0,configurable:!0}),e.prototype.contains=function(t){return this._iSceneGraphRoot.contains(t)},e.prototype.addChild=function(t){return this._iSceneGraphRoot.addChild(t)},e.prototype.removeChild=function(t){this._iSceneGraphRoot.removeChild(t)},e.prototype.removeChildAt=function(t){this._iSceneGraphRoot.removeChildAt(t)},e.prototype.getChildAt=function(t){return this._iSceneGraphRoot.getChildAt(t)},Object.defineProperty(e.prototype,"numChildren",{get:function(){return this._iSceneGraphRoot.numChildren},enumerable:!0,configurable:!0}),e.prototype.iRegisterEntity=function(t){t.partition&&this.iRegisterPartition(t.partition),t.isEntity&&t._iAssignedPartition.iMarkForUpdate(t)},e.prototype.iRegisterPartition=function(t){this._expandedPartitions.push(t),-1==this._partitions.indexOf(t)&&this._partitions.push(t)},e.prototype.iUnregisterEntity=function(t){t.partition&&this.iUnregisterPartition(t.partition),t.isEntity&&t._iAssignedPartition.iRemoveEntity(t)},e.prototype.iUnregisterPartition=function(t){this._expandedPartitions.splice(this._expandedPartitions.indexOf(t),1),-1==this._expandedPartitions.indexOf(t)&&this._partitions.splice(this._partitions.indexOf(t),1)},e}(s);e.exports=h},{"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0,"awayjs-display/lib/events/SceneEvent":void 0,"awayjs-display/lib/partition/NodeBase":void 0,"awayjs-display/lib/partition/Partition":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/containers/View":[function(t,e){var i=t("awayjs-core/lib/utils/getTimer"),s=t("awayjs-display/lib/containers/Scene"),r=t("awayjs-display/lib/pick/RaycastPicker"),a=t("awayjs-display/lib/entities/Camera"),n=t("awayjs-display/lib/events/CameraEvent"),o=t("awayjs-display/lib/events/SceneEvent"),h=t("awayjs-display/lib/events/RendererEvent"),l=t("awayjs-display/lib/managers/MouseManager"),p=function(){function t(t,e,i){var n=this;void 0===e&&(e=null),void 0===i&&(i=null),this._width=0,this._height=0,this._time=0,this._deltaTime=0,this._backgroundColor=0,this._backgroundAlpha=1,this._viewportDirty=!0,this._scissorDirty=!0,this._mousePicker=new r,this._onScenePartitionChangedDelegate=function(t){return n.onScenePartitionChanged(t)},this._onProjectionChangedDelegate=function(t){return n.onProjectionChanged(t)},this._onViewportUpdatedDelegate=function(t){return n.onViewportUpdated(t)},this._onScissorUpdatedDelegate=function(t){return n.onScissorUpdated(t)},this.scene=e||new s,this.camera=i||new a,this.renderer=t,document.body.style.margin="0px",this._htmlElement=document.createElement("div"),this._htmlElement.style.position="absolute",document.body.appendChild(this._htmlElement),this._mouseManager=l.getInstance(),this._mouseManager.registerView(this)}return t.prototype.onScenePartitionChanged=function(){this._pCamera&&(this._pCamera.partition=this.scene.partition)},Object.defineProperty(t.prototype,"mouseX",{get:function(){return this._pMouseX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseY",{get:function(){return this._pMouseY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderer",{get:function(){return this._pRenderer},set:function(t){this._pRenderer!=t&&(this._pRenderer&&(this._pRenderer.dispose(),this._pRenderer.removeEventListener(h.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate),this._pRenderer.removeEventListener(h.SCISSOR_UPDATED,this._onScissorUpdatedDelegate)),this._pRenderer=t,this._pRenderer.addEventListener(h.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate),this._pRenderer.addEventListener(h.SCISSOR_UPDATED,this._onScissorUpdatedDelegate),this._pEntityCollector=this._pRenderer._iCreateEntityCollector(),this._pCamera&&(this._pEntityCollector.camera=this._pCamera),this._pRenderer._iBackgroundR=(this._backgroundColor>>16&255)/255,this._pRenderer._iBackgroundG=(this._backgroundColor>>8&255)/255,this._pRenderer._iBackgroundB=(255&this._backgroundColor)/255,this._pRenderer._iBackgroundAlpha=this._backgroundAlpha,this._pRenderer.width=this._width,this._pRenderer.height=this._height,this._pRenderer.shareContext=this._shareContext)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shareContext",{get:function(){return this._shareContext},set:function(t){this._shareContext!=t&&(this._shareContext=t,this._pRenderer&&(this._pRenderer.shareContext=this._shareContext))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor!=t&&(this._backgroundColor=t,this._pRenderer._iBackgroundR=(t>>16&255)/255,this._pRenderer._iBackgroundG=(t>>8&255)/255,this._pRenderer._iBackgroundB=(255&t)/255)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundAlpha",{get:function(){return this._backgroundAlpha},set:function(t){t>1?t=1:0>t&&(t=0),this._backgroundAlpha!=t&&(this._pRenderer._iBackgroundAlpha=this._backgroundAlpha=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"camera",{get:function(){return this._pCamera},set:function(t){this._pCamera!=t&&(this._pCamera&&this._pCamera.removeEventListener(n.PROJECTION_CHANGED,this._onProjectionChangedDelegate),this._pCamera=t,this._pEntityCollector&&(this._pEntityCollector.camera=this._pCamera),this._pScene&&(this._pCamera.partition=this._pScene.partition),this._pCamera.addEventListener(n.PROJECTION_CHANGED,this._onProjectionChangedDelegate),this._scissorDirty=!0,this._viewportDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scene",{get:function(){return this._pScene},set:function(t){this._pScene!=t&&(this._pScene&&this._pScene.removeEventListener(o.PARTITION_CHANGED,this._onScenePartitionChangedDelegate),this._pScene=t,this._pScene.addEventListener(o.PARTITION_CHANGED,this._onScenePartitionChangedDelegate),this._pCamera&&(this._pCamera.partition=this._pScene.partition))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deltaTime",{get:function(){return this._deltaTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width!=t&&(this._width=t,this._aspectRatio=this._width/this._height,this._pCamera.projection._iAspectRatio=this._aspectRatio,this._pRenderer.width=t,this._htmlElement.style.width=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height!=t&&(this._height=t,this._aspectRatio=this._width/this._height,this._pCamera.projection._iAspectRatio=this._aspectRatio,this._pRenderer.height=t,this._htmlElement.style.height=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mousePicker",{get:function(){return this._mousePicker},set:function(t){this._mousePicker!=t&&(this._mousePicker=null==t?new r:t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._pRenderer.x},set:function(t){this._pRenderer.x!=t&&(this._pRenderer.x==t,this._htmlElement.style.left=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._pRenderer.y},set:function(t){this._pRenderer.y!=t&&(this._pRenderer.y==t,this._htmlElement.style.top=t+"px")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return"visible"==this._htmlElement.style.visibility},set:function(t){this._htmlElement.style.visibility=t?"visible":"hidden"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderedFacesCount",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.render=function(){this.pUpdateTime(),this._pCamera.projection._iAspectRatio=this._aspectRatio,this._scissorDirty&&(this._scissorDirty=!1,this._pCamera.projection._iUpdateScissorRect(this._pRenderer.scissorRect.x,this._pRenderer.scissorRect.y,this._pRenderer.scissorRect.width,this._pRenderer.scissorRect.height)),this._viewportDirty&&(this._viewportDirty=!1,this._pCamera.projection._iUpdateViewport(this._pRenderer.viewPort.x,this._pRenderer.viewPort.y,this._pRenderer.viewPort.width,this._pRenderer.viewPort.height)),this._shareContext||(this.forceMouseMove&&this._htmlElement==this._mouseManager._iActiveDiv&&!this._mouseManager._iUpdateDirty&&(this._mouseManager._iCollidingObject=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this)),this._mouseManager.fireMouseEvents(this.forceMouseMove)),this._pEntityCollector.clear(),this._pScene.traversePartitions(this._pEntityCollector),this._pRenderer.render(this._pEntityCollector)},t.prototype.pUpdateTime=function(){var t=i();0==this._time&&(this._time=t),this._deltaTime=t-this._time,this._time=t},t.prototype.dispose=function(){this._pRenderer.dispose(),this._mouseManager.unregisterView(this),this._mouseManager=null,this._pRenderer=null,this._pEntityCollector=null},Object.defineProperty(t.prototype,"iEntityCollector",{get:function(){return this._pEntityCollector},enumerable:!0,configurable:!0}),t.prototype.onProjectionChanged=function(){this._scissorDirty=!0,this._viewportDirty=!0},t.prototype.onViewportUpdated=function(){this._viewportDirty=!0},t.prototype.onScissorUpdated=function(){this._scissorDirty=!0},t.prototype.project=function(t){var e=this._pCamera.project(t);return e.x=e.x*this._pRenderer.viewPort.width/2+this._width*this._pCamera.projection.originX,e.y=e.y*this._pRenderer.viewPort.height/2+this._height*this._pCamera.projection.originY,e},t.prototype.unproject=function(t,e,i){return this._pCamera.unproject(2*(t-this._width*this._pCamera.projection.originX)/this._pRenderer.viewPort.width,2*(e-this._height*this._pCamera.projection.originY)/this._pRenderer.viewPort.height,i)},t.prototype.getRay=function(t,e,i){return this._pCamera.getRay((2*t-this._width)/this._width,(2*e-this._height)/this._height,i)},t.prototype.updateCollider=function(){if(this._shareContext){var t=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this);(this.layeredView||null==this._mouseManager._iCollidingObject||t.rayEntryDistance<this._mouseManager._iCollidingObject.rayEntryDistance)&&(this._mouseManager._iCollidingObject=t)}else this._htmlElement==this._mouseManager._iActiveDiv&&(this._mouseManager._iCollidingObject=this.mousePicker.getViewCollision(this._pMouseX,this._pMouseY,this))},t}();e.exports=p},{"awayjs-core/lib/utils/getTimer":void 0,"awayjs-display/lib/containers/Scene":void 0,"awayjs-display/lib/entities/Camera":void 0,"awayjs-display/lib/events/CameraEvent":void 0,"awayjs-display/lib/events/RendererEvent":void 0,"awayjs-display/lib/events/SceneEvent":void 0,"awayjs-display/lib/managers/MouseManager":void 0,"awayjs-display/lib/pick/RaycastPicker":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/controllers/ControllerBase":[function(t,e){var i=t("awayjs-core/lib/errors/AbstractMethodError"),s=function(){function t(t){void 0===t&&(t=null),this._pAutoUpdate=!0,this.targetObject=t}return t.prototype.pNotifyUpdate=function(){this._pTargetObject&&this._pTargetObject._iAssignedPartition&&this._pAutoUpdate&&this._pTargetObject._iAssignedPartition.iMarkForUpdate(this._pTargetObject)},Object.defineProperty(t.prototype,"targetObject",{get:function(){return this._pTargetObject},set:function(t){this._pTargetObject!=t&&(this._pTargetObject&&this._pAutoUpdate&&(this._pTargetObject._iController=null),this._pTargetObject=t,this._pTargetObject&&this._pAutoUpdate&&(this._pTargetObject._iController=this),this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._pAutoUpdate},set:function(t){this._pAutoUpdate!=t&&(this._pAutoUpdate=t,this._pTargetObject&&(this._pTargetObject._iController=this._pTargetObject?this:null))},enumerable:!0,configurable:!0}),t.prototype.update=function(t){throw void 0===t&&(t=!0),new i},t}();e.exports=s},{"awayjs-core/lib/errors/AbstractMethodError":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/controllers/FirstPersonController":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/MathConsts"),r=t("awayjs-display/lib/controllers/ControllerBase"),a=function(t){function e(e,i,s,r,a,n,o){void 0===e&&(e=null),void 0===i&&(i=0),void 0===s&&(s=90),void 0===r&&(r=-90),void 0===a&&(a=90),void 0===n&&(n=8),void 0===o&&(o=!1),t.call(this,e),this._iCurrentPanAngle=0,this._iCurrentTiltAngle=90,this._panAngle=0,this._tiltAngle=90,this._minTiltAngle=-90,this._maxTiltAngle=90,this._steps=8,this._walkIncrement=0,this._strafeIncrement=0,this._wrapPanAngle=!1,this.fly=!1,this.panAngle=i,this.tiltAngle=s,this.minTiltAngle=r,this.maxTiltAngle=a,this.steps=n,this.wrapPanAngle=o,this._iCurrentPanAngle=this._panAngle,this._iCurrentTiltAngle=this._tiltAngle}return i(e,t),Object.defineProperty(e.prototype,"steps",{get:function(){return this._steps},set:function(t){t=1>t?1:t,this._steps!=t&&(this._steps=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panAngle",{get:function(){return this._panAngle},set:function(t){this._panAngle!=t&&(this._panAngle=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tiltAngle",{get:function(){return this._tiltAngle},set:function(t){t=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,t)),this._tiltAngle!=t&&(this._tiltAngle=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minTiltAngle",{get:function(){return this._minTiltAngle},set:function(t){this._minTiltAngle!=t&&(this._minTiltAngle=t,this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTiltAngle",{get:function(){return this._maxTiltAngle},set:function(t){this._maxTiltAngle!=t&&(this._maxTiltAngle=t,this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapPanAngle",{get:function(){return this._wrapPanAngle},set:function(t){this._wrapPanAngle!=t&&(this._wrapPanAngle=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),e.prototype.update=function(t){if(void 0===t&&(t=!0),this._tiltAngle!=this._iCurrentTiltAngle||this._panAngle!=this._iCurrentPanAngle){if(this.pNotifyUpdate(),this._wrapPanAngle){for(this._panAngle<0?(this._iCurrentPanAngle+=this._panAngle%360+360-this._panAngle,this._panAngle=this._panAngle%360+360):(this._iCurrentPanAngle+=this._panAngle%360-this._panAngle,this._panAngle=this._panAngle%360);this._panAngle-this._iCurrentPanAngle<-180;)this._iCurrentPanAngle-=360;for(;this._panAngle-this._iCurrentPanAngle>180;)this._iCurrentPanAngle+=360}t?(this._iCurrentTiltAngle+=(this._tiltAngle-this._iCurrentTiltAngle)/(this.steps+1),this._iCurrentPanAngle+=(this._panAngle-this._iCurrentPanAngle)/(this.steps+1)):(this._iCurrentTiltAngle=this._tiltAngle,this._iCurrentPanAngle=this._panAngle),Math.abs(this.tiltAngle-this._iCurrentTiltAngle)<.01&&Math.abs(this._panAngle-this._iCurrentPanAngle)<.01&&(this._iCurrentTiltAngle=this._tiltAngle,this._iCurrentPanAngle=this._panAngle)}this.targetObject.rotationX=this._iCurrentTiltAngle,this.targetObject.rotationY=this._iCurrentPanAngle,this._walkIncrement&&(this.fly?this.targetObject.transform.moveForward(this._walkIncrement):(this.targetObject.x+=this._walkIncrement*Math.sin(this._panAngle*s.DEGREES_TO_RADIANS),this.targetObject.z+=this._walkIncrement*Math.cos(this._panAngle*s.DEGREES_TO_RADIANS)),this._walkIncrement=0),this._strafeIncrement&&(this.targetObject.transform.moveRight(this._strafeIncrement),this._strafeIncrement=0)},e.prototype.incrementWalk=function(t){0!=t&&(this._walkIncrement+=t,this.pNotifyUpdate())},e.prototype.incrementStrafe=function(t){0!=t&&(this._strafeIncrement+=t,this.pNotifyUpdate())},e}(r);e.exports=a},{"awayjs-core/lib/geom/MathConsts":void 0,"awayjs-display/lib/controllers/ControllerBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/controllers/FollowController":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/controllers/HoverController"),r=function(t){function e(e,i,s,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=45),void 0===r&&(r=700),t.call(this,e,i,0,s,r)}return i(e,t),e.prototype.update=function(e){void 0===e&&(e=!0),e=e,this.lookAtObject&&(this.panAngle=this._pLookAtObject.rotationY-180,t.prototype.update.call(this))},e}(s);e.exports=r},{"awayjs-display/lib/controllers/HoverController":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/controllers/HoverController":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/MathConsts"),r=t("awayjs-core/lib/geom/Vector3D"),a=t("awayjs-display/lib/controllers/LookAtController"),n=function(t){function e(e,i,s,a,n,o,h,l,p,d,u,c){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=0),void 0===a&&(a=90),void 0===n&&(n=1e3),void 0===o&&(o=-90),void 0===h&&(h=90),void 0===l&&(l=null),void 0===p&&(p=null),void 0===d&&(d=8),void 0===u&&(u=2),void 0===c&&(c=!1),t.call(this,e,i),this._iCurrentPanAngle=0,this._iCurrentTiltAngle=90,this._panAngle=0,this._tiltAngle=90,this._distance=1e3,this._minPanAngle=-1/0,this._maxPanAngle=1/0,this._minTiltAngle=-90,this._maxTiltAngle=90,this._steps=8,this._yFactor=2,this._wrapPanAngle=!1,this._upAxis=new r,this.distance=n,this.panAngle=s,this.tiltAngle=a,this.minPanAngle=null!=l?l:-1/0,this.maxPanAngle=null!=p?p:1/0,this.minTiltAngle=o,this.maxTiltAngle=h,this.steps=d,this.yFactor=u,this.wrapPanAngle=c,this._iCurrentPanAngle=this._panAngle,this._iCurrentTiltAngle=this._tiltAngle}return i(e,t),Object.defineProperty(e.prototype,"steps",{get:function(){return this._steps},set:function(t){t=1>t?1:t,this._steps!=t&&(this._steps=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panAngle",{get:function(){return this._panAngle},set:function(t){t=Math.max(this._minPanAngle,Math.min(this._maxPanAngle,t)),this._panAngle!=t&&(this._panAngle=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tiltAngle",{get:function(){return this._tiltAngle},set:function(t){t=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,t)),this._tiltAngle!=t&&(this._tiltAngle=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},set:function(t){this._distance!=t&&(this._distance=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minPanAngle",{get:function(){return this._minPanAngle},set:function(t){this._minPanAngle!=t&&(this._minPanAngle=t,this.panAngle=Math.max(this._minPanAngle,Math.min(this._maxPanAngle,this._panAngle)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPanAngle",{get:function(){return this._maxPanAngle},set:function(t){this._maxPanAngle!=t&&(this._maxPanAngle=t,this.panAngle=Math.max(this._minPanAngle,Math.min(this._maxPanAngle,this._panAngle)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minTiltAngle",{get:function(){return this._minTiltAngle},set:function(t){this._minTiltAngle!=t&&(this._minTiltAngle=t,this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxTiltAngle",{get:function(){return this._maxTiltAngle},set:function(t){this._maxTiltAngle!=t&&(this._maxTiltAngle=t,this.tiltAngle=Math.max(this._minTiltAngle,Math.min(this._maxTiltAngle,this._tiltAngle)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yFactor",{get:function(){return this._yFactor},set:function(t){this._yFactor!=t&&(this._yFactor=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapPanAngle",{get:function(){return this._wrapPanAngle},set:function(t){this._wrapPanAngle!=t&&(this._wrapPanAngle=t,this.pNotifyUpdate())},enumerable:!0,configurable:!0}),e.prototype.update=function(t){if(void 0===t&&(t=!0),this._tiltAngle!=this._iCurrentTiltAngle||this._panAngle!=this._iCurrentPanAngle){if(this.pNotifyUpdate(),this._wrapPanAngle){for(this._panAngle<0?(this._iCurrentPanAngle+=this._panAngle%360+360-this._panAngle,this._panAngle=this._panAngle%360+360):(this._iCurrentPanAngle+=this._panAngle%360-this._panAngle,this._panAngle=this._panAngle%360);this._panAngle-this._iCurrentPanAngle<-180;)this._iCurrentPanAngle-=360;for(;this._panAngle-this._iCurrentPanAngle>180;)this._iCurrentPanAngle+=360}t?(this._iCurrentTiltAngle+=(this._tiltAngle-this._iCurrentTiltAngle)/(this.steps+1),this._iCurrentPanAngle+=(this._panAngle-this._iCurrentPanAngle)/(this.steps+1)):(this._iCurrentPanAngle=this._panAngle,this._iCurrentTiltAngle=this._tiltAngle),Math.abs(this.tiltAngle-this._iCurrentTiltAngle)<.01&&Math.abs(this._panAngle-this._iCurrentPanAngle)<.01&&(this._iCurrentTiltAngle=this._tiltAngle,this._iCurrentPanAngle=this._panAngle)}var e=this.lookAtObject?this.lookAtObject.transform.position:this.lookAtPosition?this.lookAtPosition:this._pOrigin;this.targetObject.x=e.x+this.distance*Math.sin(this._iCurrentPanAngle*s.DEGREES_TO_RADIANS)*Math.cos(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS),this.targetObject.y=e.y+this.distance*Math.sin(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS)*this.yFactor,this.targetObject.z=e.z+this.distance*Math.cos(this._iCurrentPanAngle*s.DEGREES_TO_RADIANS)*Math.cos(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS),this._upAxis.x=-Math.sin(this._iCurrentPanAngle*s.DEGREES_TO_RADIANS)*Math.sin(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS),this._upAxis.y=Math.cos(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS),this._upAxis.z=-Math.cos(this._iCurrentPanAngle*s.DEGREES_TO_RADIANS)*Math.sin(this._iCurrentTiltAngle*s.DEGREES_TO_RADIANS),this._pTargetObject&&(this._pLookAtPosition?this._pTargetObject.lookAt(this._pLookAtPosition,this._upAxis):this._pLookAtObject&&this._pTargetObject.lookAt(this._pLookAtObject.scene?this._pLookAtObject.scenePosition:this._pLookAtObject.transform.position,this._upAxis))},e}(a);e.exports=n},{"awayjs-core/lib/geom/MathConsts":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/controllers/LookAtController":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/controllers/LookAtController":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-display/lib/controllers/ControllerBase"),a=t("awayjs-display/lib/events/DisplayObjectEvent"),n=function(t){function e(e,i){var r=this;void 0===e&&(e=null),void 0===i&&(i=null),t.call(this,e),this._pOrigin=new s(0,0,0),this._onLookAtObjectChangedDelegate=function(t){return r.onLookAtObjectChanged(t)},i?this.lookAtObject=i:this.lookAtPosition=new s}return i(e,t),Object.defineProperty(e.prototype,"lookAtPosition",{get:function(){return this._pLookAtPosition},set:function(t){this._pLookAtObject&&(this._pLookAtObject.removeEventListener(a.SCENETRANSFORM_CHANGED,this._onLookAtObjectChangedDelegate),this._pLookAtObject=null),this._pLookAtPosition=t,this.pNotifyUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookAtObject",{get:function(){return this._pLookAtObject},set:function(t){this._pLookAtPosition&&(this._pLookAtPosition=null),this._pLookAtObject!=t&&(this._pLookAtObject&&this._pLookAtObject.removeEventListener(a.SCENETRANSFORM_CHANGED,this._onLookAtObjectChangedDelegate),this._pLookAtObject=t,this._pLookAtObject&&this._pLookAtObject.addEventListener(a.SCENETRANSFORM_CHANGED,this._onLookAtObjectChangedDelegate),this.pNotifyUpdate())},enumerable:!0,configurable:!0}),e.prototype.update=function(t){void 0===t&&(t=!0),this._pTargetObject&&(this._pLookAtPosition?this._pTargetObject.lookAt(this._pLookAtPosition):this._pLookAtObject&&this._pTargetObject.lookAt(this._pLookAtObject.scene?this._pLookAtObject.scenePosition:this._pLookAtObject.transform.position))},e.prototype.onLookAtObjectChanged=function(){this.pNotifyUpdate()},e}(r);e.exports=n},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/controllers/ControllerBase":void 0,"awayjs-display/lib/events/DisplayObjectEvent":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/controllers/SpringController":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-display/lib/controllers/LookAtController"),a=function(t){function e(e,i,r,a,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=1),void 0===a&&(a=40),void 0===n&&(n=4),t.call(this,e,i),this.positionOffset=new s(0,500,-1e3),this.stiffness=r,this.damping=n,this.mass=a,this._velocity=new s,this._dv=new s,this._stretch=new s,this._force=new s,this._acceleration=new s,this._desiredPosition=new s}return i(e,t),e.prototype.update=function(e){void 0===e&&(e=!0);var i;this._pLookAtObject&&this._pTargetObject&&(i=this._pLookAtObject.transform.matrix3D.deltaTransformVector(this.positionOffset),this._desiredPosition.x=this._pLookAtObject.x+i.x,this._desiredPosition.y=this._pLookAtObject.y+i.y,this._desiredPosition.z=this._pLookAtObject.z+i.z,this._stretch=this._pTargetObject.transform.position.add(this._desiredPosition),this._stretch.scaleBy(-this.stiffness),this._dv.copyFrom(this._velocity),this._dv.scaleBy(this.damping),this._force.x=this._stretch.x-this._dv.x,this._force.y=this._stretch.y-this._dv.y,this._force.z=this._stretch.z-this._dv.z,this._acceleration.copyFrom(this._force),this._acceleration.scaleBy(1/this.mass),this._velocity.incrementBy(this._acceleration),this._pTargetObject.transform.position=this._pTargetObject.transform.position.add(this._velocity),t.prototype.update.call(this))},e}(r);e.exports=a},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/controllers/LookAtController":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/display/ContextMode":[function(t,e){var i=function(){function t(){}return t.AUTO="auto",t.WEBGL="webgl",t.FLASH="flash",t.NATIVE="native",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/display/IContext":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/entities/Billboard":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t
}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-display/lib/base/DisplayObject"),a=t("awayjs-display/lib/partition/EntityNode"),n=t("awayjs-display/lib/events/MaterialEvent"),o=function(t){function e(e,i,s){var r=this;void 0===i&&(i="auto"),void 0===s&&(s=!1),t.call(this),this._pIsEntity=!0,this.onSizeChangedDelegate=function(t){return r.onSizeChanged(t)},this.material=e,this._billboardWidth=e.width,this._billboardHeight=e.height}return i(e,t),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.BILLBOARD},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"billboardHeight",{get:function(){return this._billboardHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"billboardWidth",{get:function(){return this._billboardWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){t!=this._material&&(this._material&&(this._material.iRemoveOwner(this),this._material.removeEventListener(n.SIZE_CHANGED,this.onSizeChangedDelegate)),this._material=t,this._material&&(this._material.iAddOwner(this),this._material.addEventListener(n.SIZE_CHANGED,this.onSizeChangedDelegate)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(t){this._uvTransform=t},enumerable:!0,configurable:!0}),e.prototype.pCreateEntityPartitionNode=function(){return new a(this)},e.prototype.pUpdateBounds=function(){this._pBounds.fromExtremes(0,0,0,this._billboardWidth,this._billboardHeight,0),t.prototype.pUpdateBounds.call(this)},e.prototype._iTestCollision=function(t){return this._pPickingCollider.testBillboardCollision(this,this._pPickingCollisionVO,t)},e.prototype.onSizeChanged=function(){this._billboardWidth=this._material.width,this._billboardHeight=this._material.height,this._pBoundsInvalid=!0;for(var t=this._pRenderables.length,e=0;t>e;e++)this._pRenderables[e].invalidateVertexData("vertices")},e.prototype._iCollectRenderables=function(t){this._iSourcePrefab&&this._iSourcePrefab._iValidate(),this._iCollectRenderable(t)},e.prototype._iCollectRenderable=function(t){t.applyBillboard(this)},e}(r);e.exports=o},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/DisplayObject":void 0,"awayjs-display/lib/events/MaterialEvent":void 0,"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/entities/Camera":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/NullBounds"),r=t("awayjs-core/lib/geom/Matrix3D"),a=t("awayjs-core/lib/geom/Plane3D"),n=t("awayjs-core/lib/library/AssetType"),o=t("awayjs-core/lib/events/ProjectionEvent"),h=t("awayjs-core/lib/projections/PerspectiveProjection"),l=t("awayjs-display/lib/containers/DisplayObjectContainer"),p=t("awayjs-display/lib/events/CameraEvent"),d=t("awayjs-display/lib/partition/CameraNode"),u=function(t){function e(e){var i=this;void 0===e&&(e=null),t.call(this),this._viewProjection=new r,this._viewProjectionDirty=!0,this._frustumPlanesDirty=!0,this._pIsEntity=!0,this._onProjectionMatrixChangedDelegate=function(t){return i.onProjectionMatrixChanged(t)},this._projection=e||new h,this._projection.addEventListener(o.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate),this._frustumPlanes=[];for(var s=0;6>s;++s)this._frustumPlanes[s]=new a;this.z=-1e3}return i(e,t),e.prototype.pCreateDefaultBoundingVolume=function(){return new s},e.prototype.pCreateEntityPartitionNode=function(){return new d(this)},Object.defineProperty(e.prototype,"assetType",{get:function(){return n.CAMERA},enumerable:!0,configurable:!0}),e.prototype.onProjectionMatrixChanged=function(t){this._viewProjectionDirty=!0,this._frustumPlanesDirty=!0,this.dispatchEvent(t)},Object.defineProperty(e.prototype,"frustumPlanes",{get:function(){return this._frustumPlanesDirty&&this.updateFrustum(),this._frustumPlanes},enumerable:!0,configurable:!0}),e.prototype.updateFrustum=function(){var t,e,i,s,r,a,n,o,h,l,p,d,u,c,_,y,g,f,m,b,w,v=new Array(16);this.viewProjection.copyRawDataTo(v),s=v[0],r=v[4],a=v[8],n=v[12],o=v[1],h=v[5],l=v[9],p=v[13],d=v[2],u=v[6],c=v[10],_=v[14],y=v[3],g=v[7],f=v[11],m=v[15],b=this._frustumPlanes[0],t=y+s,e=g+r,i=f+a,w=1/Math.sqrt(t*t+e*e+i*i),b.a=t*w,b.b=e*w,b.c=i*w,b.d=-(m+n)*w,b=this._frustumPlanes[1],t=y-s,e=g-r,i=f-a,w=1/Math.sqrt(t*t+e*e+i*i),b.a=t*w,b.b=e*w,b.c=i*w,b.d=(n-m)*w,b=this._frustumPlanes[2],t=y+o,e=g+h,i=f+l,w=1/Math.sqrt(t*t+e*e+i*i),b.a=t*w,b.b=e*w,b.c=i*w,b.d=-(m+p)*w,b=this._frustumPlanes[3],t=y-o,e=g-h,i=f-l,w=1/Math.sqrt(t*t+e*e+i*i),b.a=t*w,b.b=e*w,b.c=i*w,b.d=(p-m)*w,b=this._frustumPlanes[4],t=d,e=u,i=c,w=1/Math.sqrt(t*t+e*e+i*i),b.a=t*w,b.b=e*w,b.c=i*w,b.d=-_*w,b=this._frustumPlanes[5],t=y-d,e=g-u,i=f-c,w=1/Math.sqrt(t*t+e*e+i*i),b.a=t*w,b.b=e*w,b.c=i*w,b.d=(_-m)*w,this._frustumPlanesDirty=!1},e.prototype.pInvalidateSceneTransform=function(){t.prototype.pInvalidateSceneTransform.call(this),this._viewProjectionDirty=!0,this._frustumPlanesDirty=!0},e.prototype.pUpdateBounds=function(){this._pBoundsInvalid=!1,this._pBounds.nullify()},Object.defineProperty(e.prototype,"projection",{get:function(){return this._projection},set:function(t){if(this._projection!=t){if(!t)throw new Error("Projection cannot be null!");this._projection.removeEventListener(o.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate),this._projection=t,this._projection.addEventListener(o.MATRIX_CHANGED,this._onProjectionMatrixChangedDelegate),this.dispatchEvent(new p(p.PROJECTION_CHANGED,this))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewProjection",{get:function(){return this._viewProjectionDirty&&(this._viewProjection.copyFrom(this.inverseSceneTransform),this._viewProjection.append(this._projection.matrix),this._viewProjectionDirty=!1),this._viewProjection},enumerable:!0,configurable:!0}),e.prototype.getRay=function(t,e,i){return this.sceneTransform.deltaTransformVector(this._projection.unproject(t,e,i))},e.prototype.project=function(t){return this._projection.project(this.inverseSceneTransform.transformVector(t))},e.prototype.unproject=function(t,e,i){return this.sceneTransform.transformVector(this._projection.unproject(t,e,i))},e.prototype._iCollectRenderables=function(t){this._iSourcePrefab&&this._iSourcePrefab._iValidate(),this._iCollectRenderable(t)},e.prototype._iCollectRenderable=function(){},e}(l);e.exports=u},{"awayjs-core/lib/bounds/NullBounds":void 0,"awayjs-core/lib/events/ProjectionEvent":void 0,"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Plane3D":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/projections/PerspectiveProjection":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0,"awayjs-display/lib/events/CameraEvent":void 0,"awayjs-display/lib/partition/CameraNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/entities/DirectionalLight":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/NullBounds"),r=t("awayjs-core/lib/geom/Matrix3D"),a=t("awayjs-core/lib/geom/Vector3D"),n=t("awayjs-display/lib/base/LightBase"),o=t("awayjs-display/lib/partition/DirectionalLightNode"),h=t("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper"),l=function(t){function e(e,i,s){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===s&&(s=1),t.call(this),this._pIsEntity=!0,this.direction=new a(e,i,s),this._sceneDirection=new a}return i(e,t),Object.defineProperty(e.prototype,"sceneDirection",{get:function(){return this._pSceneTransformDirty&&this.pUpdateSceneTransform(),this._sceneDirection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t,this._tmpLookAt||(this._tmpLookAt=new a),this._tmpLookAt.x=this.x+this._direction.x,this._tmpLookAt.y=this.y+this._direction.y,this._tmpLookAt.z=this.z+this._direction.z,this.lookAt(this._tmpLookAt)},enumerable:!0,configurable:!0}),e.prototype.pCreateDefaultBoundingVolume=function(){return new s},e.prototype.pUpdateBounds=function(){},e.prototype.pUpdateSceneTransform=function(){t.prototype.pUpdateSceneTransform.call(this),this.sceneTransform.copyColumnTo(2,this._sceneDirection),this._sceneDirection.normalize()},e.prototype.pCreateShadowMapper=function(){return new h},e.prototype.pCreateEntityPartitionNode=function(){return new o(this)},e.prototype.iGetObjectProjectionMatrix=function(t,e,i){void 0===i&&(i=null);var s=new Array,a=t.bounds,n=new r;n.copyFrom(t.getRenderSceneTransform(e)),n.append(this.inverseSceneTransform),this._projAABBPoints||(this._projAABBPoints=[]),n.transformVectors(a.aabbPoints,this._projAABBPoints);for(var o,h=1/0,l=-1/0,p=1/0,d=-1/0,u=1/0,c=-1/0,_=0;24>_;)o=this._projAABBPoints[_++],h>o&&(h=o),o>l&&(l=o),o=this._projAABBPoints[_++],p>o&&(p=o),o>d&&(d=o),o=this._projAABBPoints[_++],u>o&&(u=o),o>c&&(c=o);var y=1/(l-h),g=1/(d-p),f=1/(c-u);return s[0]=2*y,s[5]=2*g,s[10]=f,s[12]=-(l+h)*y,s[13]=-(d+p)*g,s[14]=-u*f,s[1]=s[2]=s[3]=s[4]=s[6]=s[7]=s[8]=s[9]=s[11]=0,s[15]=1,i||(i=new r),i.copyRawDataFrom(s),i.prepend(n),i},e.prototype._iCollectRenderables=function(){},e}(n);e.exports=l},{"awayjs-core/lib/bounds/NullBounds":void 0,"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/base/LightBase":void 0,"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":void 0,"awayjs-display/lib/partition/DirectionalLightNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/entities/IEntity":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/entities/LightProbe":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/NullBounds"),r=t("awayjs-core/lib/errors/Error"),a=t("awayjs-display/lib/base/LightBase"),n=t("awayjs-display/lib/partition/LightProbeNode"),o=function(t){function e(e,i){void 0===i&&(i=null),t.call(this),this._pIsEntity=!0,this._diffuseMap=e,this._specularMap=i}return i(e,t),Object.defineProperty(e.prototype,"diffuseMap",{get:function(){return this._diffuseMap},set:function(t){this._diffuseMap=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specularMap",{get:function(){return this._specularMap},set:function(t){this._specularMap=t},enumerable:!0,configurable:!0}),e.prototype.pCreateEntityPartitionNode=function(){return new n(this)},e.prototype.pUpdateBounds=function(){this._pBoundsInvalid=!1},e.prototype.pCreateDefaultBoundingVolume=function(){return new s},e.prototype.iGetObjectProjectionMatrix=function(t,e,i){throw void 0===i&&(i=null),new r("Object projection matrices are not supported for LightProbe objects!")},e.prototype._iCollectRenderables=function(){},e}(a);e.exports=o},{"awayjs-core/lib/bounds/NullBounds":void 0,"awayjs-core/lib/errors/Error":void 0,"awayjs-display/lib/base/LightBase":void 0,"awayjs-display/lib/partition/LightProbeNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/entities/LineSegment":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-display/lib/base/DisplayObject"),a=t("awayjs-display/lib/partition/EntityNode"),n=t("awayjs-display/lib/events/MaterialEvent"),o=function(t){function e(e,i,s,r){var a=this;void 0===r&&(r=1),t.call(this),this._pIsEntity=!0,this.onSizeChangedDelegate=function(t){return a.onSizeChanged(t)},this.material=e,this._startPosition=i,this._endPosition=s,this._halfThickness=.5*r}return i(e,t),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.LINE_SEGMENT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startPostion",{get:function(){return this._startPosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startPosition",{set:function(t){this._startPosition!=t&&(this._startPosition=t,this.notifyRenderableUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){return this._endPosition},set:function(t){this._endPosition!=t&&(this._endPosition=t,this.notifyRenderableUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){t!=this._material&&(this._material&&(this._material.iRemoveOwner(this),this._material.removeEventListener(n.SIZE_CHANGED,this.onSizeChangedDelegate)),this._material=t,this._material&&(this._material.iAddOwner(this),this._material.addEventListener(n.SIZE_CHANGED,this.onSizeChangedDelegate)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thickness",{get:function(){return 2*this._halfThickness},set:function(t){this._halfThickness!=t&&(this._halfThickness=.5*t,this.notifyRenderableUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(t){this._uvTransform=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._startPosition=null,this._endPosition=null},e.prototype.pCreateEntityPartitionNode=function(){return new a(this)},e.prototype.pUpdateBounds=function(){this._pBounds.fromExtremes(this._startPosition.x,this._startPosition.y,this._startPosition.z,this._endPosition.x,this._endPosition.y,this._endPosition.z),t.prototype.pUpdateBounds.call(this)},e.prototype.onSizeChanged=function(){this.notifyRenderableUpdate()},e.prototype.notifyRenderableUpdate=function(){for(var t=this._pRenderables.length,e=0;t>e;e++)this._pRenderables[e].invalidateVertexData("vertices")},e.prototype._iCollectRenderables=function(t){this._iSourcePrefab&&this._iSourcePrefab._iValidate(),this._iCollectRenderable(t)},e.prototype._iCollectRenderable=function(){},e}(r);e.exports=o},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/DisplayObject":void 0,"awayjs-display/lib/events/MaterialEvent":void 0,"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/entities/Mesh":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-display/lib/base/Geometry"),a=t("awayjs-display/lib/containers/DisplayObjectContainer"),n=t("awayjs-display/lib/partition/EntityNode"),o=t("awayjs-display/lib/events/GeometryEvent"),h=function(t){function e(e,i){var s=this;void 0===i&&(i=null),t.call(this),this._castsShadows=!0,this._shareAnimationGeometry=!0,this._pIsEntity=!0,this._subMeshes=new Array,this._onGeometryBoundsInvalidDelegate=function(t){return s.onGeometryBoundsInvalid(t)},this._onSubGeometryAddedDelegate=function(t){return s.onSubGeometryAdded(t)},this._onSubGeometryRemovedDelegate=function(t){return s.onSubGeometryRemoved(t)},this.geometry=e||new r,this.material=i}return i(e,t),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},set:function(t){this._animator&&this._animator.removeOwner(this),this._animator=t;for(var e,i=this._subMeshes.length,s=0;i>s;++s)e=this._subMeshes[s],e.material&&(e.material.iRemoveOwner(e),e.material.iAddOwner(e)),e._iInvalidateRenderableGeometry();this._animator&&this._animator.addOwner(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.MESH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"castsShadows",{get:function(){return this._castsShadows},set:function(t){this._castsShadows=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._iSourcePrefab&&this._iSourcePrefab._iValidate(),this._geometry},set:function(t){var e;if(this._geometry){for(this._geometry.removeEventListener(o.BOUNDS_INVALID,this._onGeometryBoundsInvalidDelegate),this._geometry.removeEventListener(o.SUB_GEOMETRY_ADDED,this._onSubGeometryAddedDelegate),this._geometry.removeEventListener(o.SUB_GEOMETRY_REMOVED,this._onSubGeometryRemovedDelegate),e=0;e<this._subMeshes.length;++e)this._subMeshes[e].dispose();this._subMeshes.length=0}if(this._geometry=t,this._geometry){this._geometry.addEventListener(o.BOUNDS_INVALID,this._onGeometryBoundsInvalidDelegate),this._geometry.addEventListener(o.SUB_GEOMETRY_ADDED,this._onSubGeometryAddedDelegate),this._geometry.addEventListener(o.SUB_GEOMETRY_REMOVED,this._onSubGeometryRemovedDelegate);var i=this._geometry.subGeometries;for(e=0;e<i.length;++e)this.addSubMesh(i[e])}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){if(t!=this._material){var e,i,s=this._subMeshes.length;for(e=0;s>e;e++)this._material&&(i=this._subMeshes[e]).material==this._material&&this._material.iRemoveOwner(i);for(this._material=t,e=0;s>e;e++)this._material&&(i=this._subMeshes[e]).material==this._material&&this._material.iAddOwner(i)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shareAnimationGeometry",{get:function(){return this._shareAnimationGeometry},set:function(t){this._shareAnimationGeometry=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subMeshes",{get:function(){return this._iSourcePrefab&&this._iSourcePrefab._iValidate(),this._subMeshes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(t){this._uvTransform=t},enumerable:!0,configurable:!0}),e.prototype.bakeTransformations=function(){this.geometry.applyTransformation(this._iMatrix3D),this._iMatrix3D.identity()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.material=null,this.geometry=null},e.prototype.disposeWithAnimatorAndChildren=function(){this.disposeWithChildren(),this._animator&&this._animator.dispose()},e.prototype.clone=function(){var t=new e(this._geometry,this._material);t._iMatrix3D=this._iMatrix3D,t.pivot=this.pivot,t.partition=this.partition,t.bounds=this.bounds.clone(),t.name=this.name,t.castsShadows=this.castsShadows,t.shareAnimationGeometry=this.shareAnimationGeometry,t.mouseEnabled=this.mouseEnabled,t.mouseChildren=this.mouseChildren,t.extra=this.extra;for(var i=this._subMeshes.length,s=0;i>s;++s)t._subMeshes[s].material=this._subMeshes[s]._iGetExplicitMaterial();i=this.numChildren;var r;for(s=0;i>s;++s)r=this.getChildAt(s).clone(),t.addChild(r);return this._animator&&(t.animator=this._animator.clone()),t},e.prototype.getSubMeshFromSubGeometry=function(t){return this._subMeshes[this._geometry.subGeometries.indexOf(t)]},e.prototype.pCreateEntityPartitionNode=function(){return new n(this)},e.prototype.pUpdateBounds=function(){var e,i,s,r,a,n,o,h,l,p,d,u=this._geometry.subGeometries,c=u.length;if(c>0){for(e=0,r=u[0],a=r.getBoundingPositions(),n=l=a[e],o=p=a[e+1],h=d=a[e+2],i=c;i--;)for(r=u[i],a=r.getBoundingPositions(),e=a.length;e--;)s=a[e],n>s?n=s:s>l&&(l=s),s=a[e+1],o>s?o=s:s>p&&(p=s),s=a[e+2],h>s?h=s:s>d&&(d=s);this._pBounds.fromExtremes(n,o,h,l,p,d)}else this._pBounds.fromExtremes(0,0,0,0,0,0);t.prototype.pUpdateBounds.call(this)},e.prototype.onGeometryBoundsInvalid=function(){this.pInvalidateBounds()},e.prototype.onSubGeometryAdded=function(t){this.addSubMesh(t.subGeometry)},e.prototype.onSubGeometryRemoved=function(t){var e,i,s=t.subGeometry,r=this._subMeshes.length;for(i=0;r>i;++i)if(e=this._subMeshes[i],e.subGeometry==s){e.dispose(),this._subMeshes.splice(i,1);break}for(--r;r>i;++i)this._subMeshes[i]._iIndex=i},e.prototype.addSubMesh=function(t){var e=t.subMeshClass,i=new e(t,this,null),s=this._subMeshes.length;i._iIndex=s,this._subMeshes[s]=i,this.pInvalidateBounds()},e.prototype._iTestCollision=function(t,e){return this._pPickingCollider.testMeshCollision(this,this._pPickingCollisionVO,t,e)},e.prototype._iCollectRenderables=function(t){this._iSourcePrefab&&this._iSourcePrefab._iValidate();for(var e=this._subMeshes.length,i=0;e>i;i++)this._subMeshes[i]._iCollectRenderable(t)},e.prototype._iInvalidateRenderableGeometries=function(){for(var t=this._subMeshes.length,e=0;t>e;++e)this._subMeshes[e]._iInvalidateRenderableGeometry()},e}(a);e.exports=h},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/Geometry":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0,"awayjs-display/lib/events/GeometryEvent":void 0,"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/entities/PointLight":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/BoundingSphere"),r=t("awayjs-core/lib/geom/Matrix3D"),a=t("awayjs-core/lib/geom/Vector3D"),n=t("awayjs-display/lib/base/LightBase"),o=t("awayjs-display/lib/partition/PointLightNode"),h=t("awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper"),l=function(t){function e(){t.call(this),this._pRadius=9e4,this._pFallOff=1e5,this._pIsEntity=!0,this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius)}return i(e,t),e.prototype.pCreateShadowMapper=function(){return new h},Object.defineProperty(e.prototype,"radius",{get:function(){return this._pRadius},set:function(t){this._pRadius=t,this._pRadius<0?this._pRadius=0:this._pRadius>this._pFallOff&&(this._pFallOff=this._pRadius,this.pInvalidateBounds()),this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius)},enumerable:!0,configurable:!0}),e.prototype.iFallOffFactor=function(){return this._pFallOffFactor},Object.defineProperty(e.prototype,"fallOff",{get:function(){return this._pFallOff},set:function(t){this._pFallOff=t,this._pFallOff<0&&(this._pFallOff=0),this._pFallOff<this._pRadius&&(this._pRadius=this._pFallOff),this._pFallOffFactor=1/(this._pFallOff*this._pFallOff-this._pRadius*this._pRadius),this.pInvalidateBounds()},enumerable:!0,configurable:!0}),e.prototype.pCreateEntityPartitionNode=function(){return new o(this)},e.prototype.pUpdateBounds=function(){this._pBounds.fromSphere(new a,this._pFallOff),this._pBoundsInvalid=!1},e.prototype.pCreateDefaultBoundingVolume=function(){return new s},e.prototype.iGetObjectProjectionMatrix=function(t,e,i){void 0===i&&(i=null);var s=new Array(16),n=t.bounds,o=new r;o.copyFrom(t.getRenderSceneTransform(e)),o.append(this._pParent.inverseSceneTransform),this.lookAt(o.position),o.copyFrom(t.getRenderSceneTransform(e)),o.append(this.inverseSceneTransform);var h,l,p=n.aabb,d=o.deltaTransformVector(new a(p.left,p.bottom,p.front)),u=o.deltaTransformVector(new a(p.right,p.top,p.back)),c=d.x*d.x+d.y*d.y+d.z*d.z,_=u.x*u.x+u.y*u.y+u.z*u.z,y=Math.sqrt(c>_?c:_),g=o.rawData[14];return h=g-y,l=g+y,s[5]=s[0]=h/y,s[10]=l/(l-h),s[11]=1,s[1]=s[2]=s[3]=s[4]=s[6]=s[7]=s[8]=s[9]=s[12]=s[13]=s[15]=0,s[14]=-h*s[10],i||(i=new r),i.copyRawDataFrom(s),i.prepend(o),i},e.prototype._iCollectRenderables=function(){},e}(n);e.exports=l},{"awayjs-core/lib/bounds/BoundingSphere":void 0,"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/base/LightBase":void 0,"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":void 0,"awayjs-display/lib/partition/PointLightNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/entities/Shape":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/base/DisplayObject"),r=function(t){function e(){t.call(this)}return i(e,t),Object.defineProperty(e.prototype,"graphics",{get:function(){return this._graphics},enumerable:!0,configurable:!0}),e}(s);e.exports=r},{"awayjs-display/lib/base/DisplayObject":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/entities/Skybox":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/bounds/NullBounds"),r=t("awayjs-core/lib/library/AssetType"),a=t("awayjs-display/lib/base/DisplayObject"),n=t("awayjs-display/lib/partition/SkyboxNode"),o=function(t){function e(e){t.call(this),this._pIsEntity=!0,this.material=e}return i(e,t),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uvTransform",{get:function(){return this._uvTransform},set:function(t){this._uvTransform=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){t!=this._material&&(this._material&&this._material.iRemoveOwner(this),this._material=t,this._material&&this._material.iAddOwner(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return r.SKYBOX},enumerable:!0,configurable:!0}),e.prototype.pInvalidateBounds=function(){},e.prototype.pCreateEntityPartitionNode=function(){return new n(this)},e.prototype.pCreateDefaultBoundingVolume=function(){return new s},e.prototype.pUpdateBounds=function(){this._pBoundsInvalid=!1},Object.defineProperty(e.prototype,"castsShadows",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype._iCollectRenderables=function(){},e.prototype._iCollectRenderable=function(){},e}(a);e.exports=o},{"awayjs-core/lib/bounds/NullBounds":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/DisplayObject":void 0,"awayjs-display/lib/partition/SkyboxNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/entities/TextField":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/base/DisplayObject"),r=function(t){function e(){t.call(this),this._text=""}return i(e,t),Object.defineProperty(e.prototype,"bottomScrollV",{get:function(){return this._bottomScrollV},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caretIndex",{get:function(){return this._caretIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.maxScrollH=function(){return this._maxScrollH},e.prototype.maxScrollV=function(){return this._maxScrollV},Object.defineProperty(e.prototype,"numLines",{get:function(){return this._numLines},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionBeginIndex",{get:function(){return this._selectionBeginIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionEndIndex",{get:function(){return this._selectionEndIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text!=t&&(this._text=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this._textHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textInteractionMode",{get:function(){return this._textInteractionMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this._textWidth},enumerable:!0,configurable:!0}),e.prototype.appendText=function(){},e.prototype.getCharBoundaries=function(){return this._charBoundaries},e.prototype.getCharIndexAtPoint=function(){return this._charIndexAtPoint},e.prototype.getFirstCharInParagraph=function(){return this._firstCharInParagraph},e.prototype.getImageReference=function(){return this._imageReference},e.prototype.getLineIndexAtPoint=function(){return this._lineIndexAtPoint},e.prototype.getLineIndexOfChar=function(){return this._lineIndexOfChar},e.prototype.getLineLength=function(){return this._lineLength},e.prototype.getLineMetrics=function(){return this._lineMetrics},e.prototype.getLineOffset=function(){return this._lineOffset},e.prototype.getLineText=function(){return this._lineText},e.prototype.getParagraphLength=function(){return this._paragraphLength},e.prototype.getTextFormat=function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=-1),this._textFormat},e.prototype.replaceSelectedText=function(){},e.prototype.replaceText=function(){},e.prototype.setSelection=function(){},e.prototype.setTextFormat=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1)},e.isFontCompatible=function(){return!1},e}(s);e.exports=r},{"awayjs-display/lib/base/DisplayObject":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/errors/CastError":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),r=function(t){function e(e){t.call(this,e)}return i(e,t),e}(s);e.exports=r},{"awayjs-core/lib/errors/Error":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/events/CameraEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e,i){t.call(this,e),this._camera=i}return i(e,t),Object.defineProperty(e.prototype,"camera",{get:function(){return this._camera},enumerable:!0,configurable:!0}),e.PROJECTION_CHANGED="projectionChanged",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/events/DisplayObjectEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e,i){t.call(this,e),this.object=i}return i(e,t),e.VISIBLITY_UPDATED="visiblityUpdated",e.SCENETRANSFORM_CHANGED="scenetransformChanged",e.SCENE_CHANGED="sceneChanged",e.POSITION_CHANGED="positionChanged",e.ROTATION_CHANGED="rotationChanged",e.SCALE_CHANGED="scaleChanged",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/events/GeometryEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e,i){void 0===i&&(i=null),t.call(this,e),this._subGeometry=i}return i(e,t),Object.defineProperty(e.prototype,"subGeometry",{get:function(){return this._subGeometry},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._subGeometry)},e.SUB_GEOMETRY_ADDED="SubGeometryAdded",e.SUB_GEOMETRY_REMOVED="SubGeometryRemoved",e.BOUNDS_INVALID="BoundsInvalid",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/events/LightEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype.clone=function(){return new e(this.type)},e.CASTS_SHADOW_CHANGE="castsShadowChange",e
}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/events/MaterialEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e){t.call(this,e)}return i(e,t),e.SIZE_CHANGED="sizeChanged",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/events/MouseEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e){t.call(this,e),this._iAllowedToPropagate=!0}return i(e,t),Object.defineProperty(e.prototype,"bubbles",{get:function(){var t=this._iAllowedToPropagate;return this._iAllowedToPropagate=!0,t},enumerable:!0,configurable:!0}),e.prototype.stopPropagation=function(){this._iAllowedToPropagate=!1,this._iParentEvent&&this._iParentEvent.stopPropagation()},e.prototype.stopImmediatePropagation=function(){this._iAllowedToPropagate=!1,this._iParentEvent&&this._iParentEvent.stopImmediatePropagation()},e.prototype.clone=function(){var t=new e(this.type);return t.screenX=this.screenX,t.screenY=this.screenY,t.view=this.view,t.object=this.object,t.materialOwner=this.materialOwner,t.material=this.material,t.uv=this.uv,t.localPosition=this.localPosition,t.localNormal=this.localNormal,t.index=this.index,t.subGeometryIndex=this.subGeometryIndex,t.delta=this.delta,t.ctrlKey=this.ctrlKey,t.shiftKey=this.shiftKey,t._iParentEvent=this,t._iAllowedToPropagate=this._iAllowedToPropagate,t},Object.defineProperty(e.prototype,"scenePosition",{get:function(){return this.object.sceneTransform.transformVector(this.localPosition)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sceneNormal",{get:function(){var t=this.object.sceneTransform.deltaTransformVector(this.localNormal);return t.normalize(),t},enumerable:!0,configurable:!0}),e.MOUSE_OVER="mouseOver3d",e.MOUSE_OUT="mouseOut3d",e.MOUSE_UP="mouseUp3d",e.MOUSE_DOWN="mouseDown3d",e.MOUSE_MOVE="mouseMove3d",e.CLICK="click3d",e.DOUBLE_CLICK="doubleClick3d",e.MOUSE_WHEEL="mouseWheel3d",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/events/RendererEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e){t.call(this,e)}return i(e,t),e.VIEWPORT_UPDATED="viewportUpdated",e.SCISSOR_UPDATED="scissorUpdated",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/events/ResizeEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e,i,s){void 0===i&&(i=0/0),void 0===s&&(s=0/0),t.call(this,e),this._oldHeight=i,this._oldWidth=s}return i(e,t),Object.defineProperty(e.prototype,"oldHeight",{get:function(){return this._oldHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oldWidth",{get:function(){return this._oldWidth},enumerable:!0,configurable:!0}),e.RESIZE="resize",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/events/SceneEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e,i){t.call(this,e),this.displayObject=i}return i(e,t),e.ADDED_TO_SCENE="addedToScene",e.REMOVED_FROM_SCENE="removedFromScene",e.PARTITION_CHANGED="partitionChanged",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/events/StageEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e){t.call(this,e)}return i(e,t),e.CONTEXT_CREATED="contextCreated",e.CONTEXT_DISPOSED="contextDisposed",e.CONTEXT_RECREATED="contextRecreated",e.VIEWPORT_UPDATED="viewportUpdated",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/events/SubGeometryEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e,i){void 0===i&&(i=""),t.call(this,e),this._dataType=i}return i(e,t),Object.defineProperty(e.prototype,"dataType",{get:function(){return this._dataType},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._dataType)},e.INDICES_UPDATED="indicesUpdated",e.VERTICES_UPDATED="verticesUpdated",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/managers/MouseManager":[function(t,e){var i=t("awayjs-core/lib/geom/Vector3D"),s=t("awayjs-display/lib/events/MouseEvent"),r=function(){function t(){var t=this;this._viewLookup=new Array,this._nullVector=new i,this._queuedEvents=new Array,this._mouseUp=new s(s.MOUSE_UP),this._mouseClick=new s(s.CLICK),this._mouseOut=new s(s.MOUSE_OUT),this._mouseDown=new s(s.MOUSE_DOWN),this._mouseMove=new s(s.MOUSE_MOVE),this._mouseOver=new s(s.MOUSE_OVER),this._mouseWheel=new s(s.MOUSE_WHEEL),this._mouseDoubleClick=new s(s.DOUBLE_CLICK),this.onClickDelegate=function(e){return t.onClick(e)},this.onDoubleClickDelegate=function(e){return t.onDoubleClick(e)},this.onMouseDownDelegate=function(e){return t.onMouseDown(e)},this.onMouseMoveDelegate=function(e){return t.onMouseMove(e)},this.onMouseUpDelegate=function(e){return t.onMouseUp(e)},this.onMouseWheelDelegate=function(e){return t.onMouseWheel(e)},this.onMouseOverDelegate=function(e){return t.onMouseOver(e)},this.onMouseOutDelegate=function(e){return t.onMouseOut(e)}}return t.getInstance=function(){return this._instance?this._instance:this._instance=new t},t.prototype.fireMouseEvents=function(t){this._iCollidingObject!=this._previousCollidingObject&&(this._previousCollidingObject&&this.queueDispatch(this._mouseOut,this._mouseMoveEvent,this._previousCollidingObject),this._iCollidingObject&&this.queueDispatch(this._mouseOver,this._mouseMoveEvent)),t&&this._iCollidingObject&&this.queueDispatch(this._mouseMove,this._mouseMoveEvent);for(var e,i,s=this._queuedEvents.length,r=0;s>r;++r){for(e=this._queuedEvents[r],i=e.object;i&&!i._iIsMouseEnabled();)i=i.parent;i&&i.dispatchEvent(e)}this._queuedEvents.length=0,this._previousCollidingObject=this._iCollidingObject,this._iUpdateDirty=!1},t.prototype.registerView=function(t){t.htmlElement.addEventListener("click",this.onClickDelegate),t.htmlElement.addEventListener("dblclick",this.onDoubleClickDelegate),t.htmlElement.addEventListener("mousedown",this.onMouseDownDelegate),t.htmlElement.addEventListener("mousemove",this.onMouseMoveDelegate),t.htmlElement.addEventListener("mouseup",this.onMouseUpDelegate),t.htmlElement.addEventListener("mousewheel",this.onMouseWheelDelegate),t.htmlElement.addEventListener("mouseover",this.onMouseOverDelegate),t.htmlElement.addEventListener("mouseout",this.onMouseOutDelegate),this._viewLookup.push(t)},t.prototype.unregisterView=function(t){t.htmlElement.removeEventListener("click",this.onClickDelegate),t.htmlElement.removeEventListener("dblclick",this.onDoubleClickDelegate),t.htmlElement.removeEventListener("mousedown",this.onMouseDownDelegate),t.htmlElement.removeEventListener("mousemove",this.onMouseMoveDelegate),t.htmlElement.removeEventListener("mouseup",this.onMouseUpDelegate),t.htmlElement.removeEventListener("mousewheel",this.onMouseWheelDelegate),t.htmlElement.removeEventListener("mouseover",this.onMouseOverDelegate),t.htmlElement.removeEventListener("mouseout",this.onMouseOutDelegate),this._viewLookup.slice(this._viewLookup.indexOf(t),1)},t.prototype.queueDispatch=function(t,e,i){void 0===i&&(i=null),e&&(t.ctrlKey=e.ctrlKey,t.altKey=e.altKey,t.shiftKey=e.shiftKey,t.screenX=e.clientX,t.screenY=e.clientY),null==i&&(i=this._iCollidingObject),i?(t.object=i.displayObject,t.materialOwner=i.materialOwner,t.uv=i.uv,t.localPosition=i.localPosition?i.localPosition.clone():null,t.localNormal=i.localNormal?i.localNormal.clone():null,t.index=i.index):(t.uv=null,t.object=null,t.localPosition=this._nullVector,t.localNormal=this._nullVector,t.index=0,t.subGeometryIndex=0),this._queuedEvents.push(t)},t.prototype.onMouseMove=function(t){this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseMove,this._mouseMoveEvent=t)},t.prototype.onMouseOut=function(t){this._iActiveDiv=null,this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseOut,t)},t.prototype.onMouseOver=function(t){this._iActiveDiv=t.target,this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseOver,t)},t.prototype.onClick=function(t){this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseClick,t)},t.prototype.onDoubleClick=function(t){this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseDoubleClick,t)},t.prototype.onMouseDown=function(t){this._iActiveDiv=t.target,this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseDown,t)},t.prototype.onMouseUp=function(t){this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseUp,t)},t.prototype.onMouseWheel=function(t){this.updateColliders(t),this._iCollidingObject&&this.queueDispatch(this._mouseWheel,t)},t.prototype.updateColliders=function(t){if(!this._iUpdateDirty){for(var e,i,s=t.clientX,r=t.clientY,a=this._viewLookup.length,n=0;a>n;n++)if(e=this._viewLookup[n],i=e.htmlElement.getBoundingClientRect(),s<i.left||s>i.right||r<i.top||r>i.bottom)e._pMouseX=null,e._pMouseY=null;else if(e._pMouseX=s+i.left,e._pMouseY=r+i.top,e.updateCollider(),e.layeredView&&this._iCollidingObject)break;this._iUpdateDirty=!0}},t}();e.exports=r},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/events/MouseEvent":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/materials/CSSMaterialBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/materials/MaterialBase"),r=t("awayjs-core/lib/textures/ImageTexture"),a=function(t){function e(e,i,s){void 0===e&&(e=null),void 0===i&&(i=!0),void 0===s&&(s=!1),t.call(this),this._iMaterialId=Number(this.id),this.texture=e,this.smooth=i,this.repeat=s}return i(e,t),Object.defineProperty(e.prototype,"imageElement",{get:function(){return this._imageElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageStyle",{get:function(){return this._imageStyle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._pTexture},set:function(t){if(this._pTexture!=t&&(this._pTexture=t,t instanceof r)){this._imageElement=t.htmlImageElement;var e=document.createElement("style");e.type="text/css",document.getElementsByTagName("head")[0].appendChild(e);var i=document.styleSheets[document.styleSheets.length-1];i.insertRule(".material"+this.id+"{ }",0);var s=i.cssRules[0].style;s.backgroundImage="url("+this._imageElement.src+")",s.backgroundSize="100% 100%",s.position="absolute",s.width=this._imageElement.width+"px",s.height=this._imageElement.height+"px",s.transformOrigin=s["-webkit-transform-origin"]=s["-moz-transform-origin"]=s["-o-transform-origin"]=s["-ms-transform-origin"]="0% 0%",this._pHeight=this._imageElement.height,this._pWidth=this._imageElement.width,this._pNotifySizeChanged()}},enumerable:!0,configurable:!0}),e}(s);e.exports=a},{"awayjs-core/lib/textures/ImageTexture":void 0,"awayjs-display/lib/materials/MaterialBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/materials/LightSources":[function(t,e){var i=function(){function t(){}return t.LIGHTS=1,t.PROBES=2,t.ALL=3,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/materials/MaterialBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=t("awayjs-core/lib/library/AssetType"),a=t("awayjs-core/lib/library/NamedAssetBase"),n=t("awayjs-display/lib/base/BlendMode"),o=t("awayjs-display/lib/events/MaterialEvent"),h=function(t){function e(){var e=this;t.call(this),this._materialPassData=new Array,this._materialData=new Array,this._pAlphaThreshold=0,this._pAnimateUVs=!1,this._enableLightFallOff=!0,this._specularLightSources=1,this._diffuseLightSources=3,this._iMaterialId=0,this._iBaseScreenPassIndex=0,this._bothSides=!1,this._pScreenPassesInvalid=!0,this._pBlendMode=n.NORMAL,this._numPasses=0,this._mipmap=!1,this._smooth=!0,this._repeat=!1,this._color=16777215,this._pHeight=1,this._pWidth=1,this._pRequiresBlending=!1,this._iMaterialId=Number(this.id),this._owners=new Array,this._passes=new Array,this._onPassChangeDelegate=function(t){return e.onPassChange(t)},this._onLightChangeDelegate=function(t){return e.onLightsChange(t)},this.alphaPremultiplied=!1}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return r.MATERIAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._pHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationSet",{get:function(){return this._animationSet},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightPicker",{get:function(){return this._pLightPicker},set:function(t){this._pLightPicker!=t&&(this._pLightPicker&&this._pLightPicker.removeEventListener(s.CHANGE,this._onLightChangeDelegate),this._pLightPicker=t,this._pLightPicker&&this._pLightPicker.addEventListener(s.CHANGE,this._onLightChangeDelegate),this._pInvalidateScreenPasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!=t&&(this._mipmap=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smooth",{get:function(){return this._smooth},set:function(t){this._smooth!=t&&(this._smooth=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repeat",{get:function(){return this._repeat},set:function(t){this._repeat!=t&&(this._repeat=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color!=t&&(this._color=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._pTexture},set:function(t){this._pTexture!=t&&(this._pTexture=t,this._pInvalidatePasses(),this._pHeight=this._pTexture.height,this._pWidth=this._pTexture.width,this._pNotifySizeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animateUVs",{get:function(){return this._pAnimateUVs},set:function(t){this._pAnimateUVs!=t&&(this._pAnimateUVs=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enableLightFallOff",{get:function(){return this._enableLightFallOff},set:function(t){this._enableLightFallOff!=t&&(this._enableLightFallOff=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuseLightSources",{get:function(){return this._diffuseLightSources},set:function(t){this._diffuseLightSources!=t&&(this._diffuseLightSources=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specularLightSources",{get:function(){return this._specularLightSources},set:function(t){this._specularLightSources!=t&&(this._specularLightSources=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t,e;for(this._pClearScreenPasses(),e=this._materialData.length,t=0;e>t;t++)this._materialData[t].dispose();for(this._materialData=new Array,e=this._materialPassData.length,t=0;e>t;t++)this._materialPassData[t].dispose();this._materialPassData=new Array},Object.defineProperty(e.prototype,"bothSides",{get:function(){return this._bothSides},set:function(t){(this._bothSides=t)||(this._bothSides=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._pBlendMode},set:function(t){this._pBlendMode!=t&&(this._pBlendMode=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaPremultiplied",{get:function(){return this._alphaPremultiplied},set:function(t){this._alphaPremultiplied!=t&&(this._alphaPremultiplied=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaThreshold",{get:function(){return this._pAlphaThreshold},set:function(t){0>t?t=0:t>1&&(t=1),this._pAlphaThreshold!=t&&(this._pAlphaThreshold=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requiresBlending",{get:function(){return this._pRequiresBlending},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._pWidth},enumerable:!0,configurable:!0}),e.prototype._iActivatePass=function(t,e,i){t.materialPass._iActivate(t,e,i)},e.prototype._iDeactivatePass=function(t,e){t.materialPass._iDeactivate(t,e)},e.prototype._iRenderPass=function(t,e,i,s,r){this._pLightPicker&&this._pLightPicker.collectLights(e),t.materialPass._iRender(t,e,i,s,r)},e.prototype.iAddOwner=function(t){this._owners.push(t);var e,i=t.animator;if(i&&(e=i.animationSet),t.animator){if(this._animationSet&&e!=this._animationSet)throw new Error("A Material instance cannot be shared across material owners with different animation sets");this._animationSet!=e&&(this._animationSet=e,this.invalidateAnimation())}},e.prototype.iRemoveOwner=function(t){this._owners.splice(this._owners.indexOf(t),1),0==this._owners.length&&(this._animationSet=null,this.invalidateAnimation())},Object.defineProperty(e.prototype,"iOwners",{get:function(){return this._owners},enumerable:!0,configurable:!0}),e.prototype._iNumScreenPasses=function(){return this._numPasses},Object.defineProperty(e.prototype,"_iScreenPasses",{get:function(){return this._passes},enumerable:!0,configurable:!0}),e.prototype._pInvalidatePasses=function(){for(var t=this._materialPassData.length,e=0;t>e;e++)this._materialPassData[e].invalidate();this.invalidateMaterial()},e.prototype._pInvalidateScreenPasses=function(){this._pScreenPassesInvalid=!0},e.prototype._pRemoveScreenPass=function(t){t.removeEventListener(s.CHANGE,this._onPassChangeDelegate),this._passes.splice(this._passes.indexOf(t),1),this._numPasses--},e.prototype._pClearScreenPasses=function(){for(var t=0;t<this._numPasses;++t)this._passes[t].removeEventListener(s.CHANGE,this._onPassChangeDelegate);this._passes.length=this._numPasses=0},e.prototype._pAddScreenPass=function(t){this._passes[this._numPasses++]=t,t.lightPicker=this._pLightPicker,t.addEventListener(s.CHANGE,this._onPassChangeDelegate),this.invalidateMaterial()},e.prototype._iAddMaterialData=function(t){return this._materialData.push(t),t},e.prototype._iRemoveMaterialData=function(t){return this._materialData.splice(this._materialData.indexOf(t),1),t},e.prototype._iUpdateMaterial=function(){},e.prototype.onPassChange=function(){this.invalidateMaterial()},e.prototype.invalidateAnimation=function(){for(var t=this._materialData.length,e=0;t>e;e++)this._materialData[e].invalidateAnimation()},e.prototype.invalidateMaterial=function(){for(var t=this._materialData.length,e=0;t>e;e++)this._materialData[e].invalidateMaterial()},e.prototype.onLightsChange=function(){this._pInvalidateScreenPasses()},e.prototype._pNotifySizeChanged=function(){this._sizeChanged||(this._sizeChanged=new o(o.SIZE_CHANGED)),this.dispatchEvent(this._sizeChanged)},e.prototype._iAddMaterialPassData=function(t){return this._materialPassData.push(t),t},e.prototype._iRemoveMaterialPassData=function(t){return this._materialPassData.splice(this._materialPassData.indexOf(t),1),t},e}(a);e.exports=h},{"awayjs-core/lib/events/Event":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0,"awayjs-display/lib/base/BlendMode":void 0,"awayjs-display/lib/events/MaterialEvent":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/materials/lightpickers/LightPickerBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/library/NamedAssetBase"),a=function(t){function e(){t.call(this),this._pNumPointLights=0,this._pNumDirectionalLights=0,this._pNumCastingPointLights=0,this._pNumCastingDirectionalLights=0,this._pNumLightProbes=0}return i(e,t),e.prototype.dispose=function(){},Object.defineProperty(e.prototype,"assetType",{get:function(){return s.LIGHT_PICKER},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numDirectionalLights",{get:function(){return this._pNumDirectionalLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numPointLights",{get:function(){return this._pNumPointLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numCastingDirectionalLights",{get:function(){return this._pNumCastingDirectionalLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numCastingPointLights",{get:function(){return this._pNumCastingPointLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numLightProbes",{get:function(){return this._pNumLightProbes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointLights",{get:function(){return this._pPointLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"directionalLights",{get:function(){return this._pDirectionalLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"castingPointLights",{get:function(){return this._pCastingPointLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"castingDirectionalLights",{get:function(){return this._pCastingDirectionalLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightProbes",{get:function(){return this._pLightProbes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightProbeWeights",{get:function(){return this._pLightProbeWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allPickedLights",{get:function(){return this._pAllPickedLights},enumerable:!0,configurable:!0}),e.prototype.collectLights=function(t){this.updateProbeWeights(t)},e.prototype.updateProbeWeights=function(t){var e,i,s,r,a,n,o=t.sourceEntity.scenePosition,h=o.x,l=o.y,p=o.z,d=0;for(n=0;n<this._pNumLightProbes;++n)e=this._pLightProbes[n].scenePosition,i=h-e.x,s=l-e.y,r=p-e.z,a=i*i+s*s+r*r,a=a>1e-5?1/a:5e7,this._pLightProbeWeights[n]=a,d+=a;for(d=1/d,n=0;n<this._pNumLightProbes;++n)this._pLightProbeWeights[n]*=d},e}(r);e.exports=a},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/materials/lightpickers/StaticLightPicker":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=t("awayjs-display/lib/entities/DirectionalLight"),a=t("awayjs-display/lib/entities/LightProbe"),n=t("awayjs-display/lib/entities/PointLight"),o=t("awayjs-display/lib/events/LightEvent"),h=t("awayjs-display/lib/materials/lightpickers/LightPickerBase"),l=function(t){function e(e){var i=this;t.call(this),this._onCastShadowChangeDelegate=function(t){return i.onCastShadowChange(t)},this.lights=e}return i(e,t),Object.defineProperty(e.prototype,"lights",{get:function(){return this._lights},set:function(t){var e,i=0,h=0,l=0,p=0,d=0;this._lights&&this.clearListeners(),this._lights=t,this._pAllPickedLights=t,this._pPointLights=new Array,this._pCastingPointLights=new Array,this._pDirectionalLights=new Array,this._pCastingDirectionalLights=new Array,this._pLightProbes=new Array;for(var u=t.length,c=0;u>c;++c)e=t[c],e.addEventListener(o.CASTS_SHADOW_CHANGE,this._onCastShadowChangeDelegate),e instanceof n?e.castsShadows?this._pCastingPointLights[l++]=e:this._pPointLights[i++]=e:e instanceof r?e.castsShadows?this._pCastingDirectionalLights[p++]=e:this._pDirectionalLights[h++]=e:e instanceof a&&(this._pLightProbes[d++]=e);(this._pNumDirectionalLights!=h||this._pNumPointLights!=i||this._pNumLightProbes!=d||this._pNumCastingPointLights!=l||this._pNumCastingDirectionalLights!=p)&&(this._pNumDirectionalLights=h,this._pNumCastingDirectionalLights=p,this._pNumPointLights=i,this._pNumCastingPointLights=l,this._pNumLightProbes=d,this._pLightProbeWeights=new Array(4*Math.ceil(d/4)),this.dispatchEvent(new s(s.CHANGE)))},enumerable:!0,configurable:!0}),e.prototype.clearListeners=function(){for(var t=this._lights.length,e=0;t>e;++e)this._lights[e].removeEventListener(o.CASTS_SHADOW_CHANGE,this._onCastShadowChangeDelegate)},e.prototype.onCastShadowChange=function(t){var e=t.target;e instanceof n?this.updatePointCasting(e):e instanceof r&&this.updateDirectionalCasting(e),this.dispatchEvent(new s(s.CHANGE))},e.prototype.updateDirectionalCasting=function(t){var e=t;t.castsShadows?(--this._pNumDirectionalLights,++this._pNumCastingDirectionalLights,this._pDirectionalLights.splice(this._pDirectionalLights.indexOf(e),1),this._pCastingDirectionalLights.push(t)):(++this._pNumDirectionalLights,--this._pNumCastingDirectionalLights,this._pCastingDirectionalLights.splice(this._pCastingDirectionalLights.indexOf(e),1),this._pDirectionalLights.push(t))},e.prototype.updatePointCasting=function(t){var e=t;t.castsShadows?(--this._pNumPointLights,++this._pNumCastingPointLights,this._pPointLights.splice(this._pPointLights.indexOf(e),1),this._pCastingPointLights.push(t)):(++this._pNumPointLights,--this._pNumCastingPointLights,this._pCastingPointLights.splice(this._pCastingPointLights.indexOf(e),1),this._pPointLights.push(t))},e}(h);e.exports=l},{"awayjs-core/lib/events/Event":void 0,"awayjs-display/lib/entities/DirectionalLight":void 0,"awayjs-display/lib/entities/LightProbe":void 0,"awayjs-display/lib/entities/PointLight":void 0,"awayjs-display/lib/events/LightEvent":void 0,"awayjs-display/lib/materials/lightpickers/LightPickerBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/materials/passes/IMaterialPass":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/materials/shadowmappers/CascadeShadowMapper":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3DUtils"),r=t("awayjs-core/lib/geom/Rectangle"),a=t("awayjs-core/lib/events/Event"),n=t("awayjs-core/lib/events/EventDispatcher"),o=t("awayjs-core/lib/projections/FreeMatrixProjection"),h=t("awayjs-display/lib/entities/Camera"),l=t("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper"),p=function(t){function e(e){if(void 0===e&&(e=3),t.call(this),this._pScissorRectsInvalid=!0,1>e||e>4)throw new Error("numCascades must be an integer between 1 and 4");this._numCascades=e,this._changeDispatcher=new n(this),this.init()}return i(e,t),e.prototype.getSplitRatio=function(t){return this._splitRatios[t]},e.prototype.setSplitRatio=function(t,e){if(0>e?e=0:e>1&&(e=1),t>=this._numCascades)throw new Error("index must be smaller than the number of cascades!");this._splitRatios[t]=e},e.prototype.getDepthProjections=function(t){return this._depthCameras[t].viewProjection},e.prototype.init=function(){this._splitRatios=new Array(this._numCascades),this._nearPlaneDistances=new Array(this._numCascades);for(var t=1,e=this._numCascades-1;e>=0;--e)this._splitRatios[e]=t,t*=.4;for(this._texOffsetsX=Array(-1,1,-1,1),this._texOffsetsY=Array(1,1,-1,-1),this._pScissorRects=new Array(4),this._depthLenses=new Array,this._depthCameras=new Array,e=0;e<this._numCascades;++e)this._depthLenses[e]=new o,this._depthCameras[e]=new h(this._depthLenses[e])},e.prototype._pSetDepthMapSize=function(e){t.prototype._pSetDepthMapSize.call(this,e),this.invalidateScissorRects()},e.prototype.invalidateScissorRects=function(){this._pScissorRectsInvalid=!0},Object.defineProperty(e.prototype,"numCascades",{get:function(){return this._numCascades},set:function(t){if(t!=this._numCascades){if(1>t||t>4)throw new Error("numCascades must be an integer between 1 and 4");this._numCascades=t,this.invalidateScissorRects(),this.init(),this.dispatchEvent(new a(a.CHANGE))}},enumerable:!0,configurable:!0}),e.prototype.pDrawDepthMap=function(t,e,i){this._pScissorRectsInvalid&&this.updateScissorRects(),this._pCasterCollector.cullPlanes=this._pCullPlanes,this._pCasterCollector.camera=this._pOverallDepthCamera,this._pCasterCollector.clear(),e.traversePartitions(this._pCasterCollector),i._iRenderCascades(this._pCasterCollector,t,this._numCascades,this._pScissorRects,this._depthCameras)},e.prototype.updateScissorRects=function(){var t=.5*this._pDepthMapSize;this._pScissorRects[0]=new r(0,0,t,t),this._pScissorRects[1]=new r(t,0,t,t),this._pScissorRects[2]=new r(0,t,t,t),this._pScissorRects[3]=new r(t,t,t,t),this._pScissorRectsInvalid=!1},e.prototype.pUpdateDepthProjection=function(t){var e,i=t.projection,s=i.near,r=i.far-s;this.pUpdateProjectionFromFrustumCorners(t,t.projection.frustumCorners,this._pMatrix),this._pMatrix.appendScale(.96,.96,1),this._pOverallDepthProjection.matrix=this._pMatrix,this.pUpdateCullPlanes(t);for(var a=0;a<this._numCascades;++a)e=this._depthLenses[a].matrix,this._nearPlaneDistances[a]=s+this._splitRatios[a]*r,this._depthCameras[a].transform=this._pOverallDepthCamera.transform,this.updateProjectionPartition(e,this._splitRatios[a],this._texOffsetsX[a],this._texOffsetsY[a]),this._depthLenses[a].matrix=e},e.prototype.updateProjectionPartition=function(t,e,i,r){for(var a,n,o,h,l,p,d,u=s.RAW_DATA_CONTAINER,c=Number.POSITIVE_INFINITY,_=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY,m=0;12>m;)a=this._pLocalFrustum[m],n=this._pLocalFrustum[m+1],o=this._pLocalFrustum[m+2],h=a+(this._pLocalFrustum[m+12]-a)*e,l=n+(this._pLocalFrustum[m+13]-n)*e,p=o+(this._pLocalFrustum[m+14]-o)*e,c>a&&(c=a),a>y&&(y=a),_>n&&(_=n),n>g&&(g=n),o>f&&(f=o),c>h&&(c=h),h>y&&(y=h),_>l&&(_=l),l>g&&(g=l),p>f&&(f=p),m+=3;d=1;var b=y-c,w=g-_,v=1/(f-d);0>c&&(c-=this._pSnap),0>_&&(_-=this._pSnap),c=Math.floor(c/this._pSnap)*this._pSnap,_=Math.floor(_/this._pSnap)*this._pSnap;var x=2*this._pSnap;b=Math.floor(b/x+1)*x,w=Math.floor(w/x+1)*x,y=c+b,g=_+w,b=1/b,w=1/w,u[0]=2*b,u[5]=2*w,u[10]=v,u[12]=-(y+c)*b,u[13]=-(g+_)*w,u[14]=-d*v,u[15]=1,u[1]=u[2]=u[3]=u[4]=u[6]=u[7]=u[8]=u[9]=u[11]=0,t.copyRawDataFrom(u),t.appendScale(.96,.96,1),t.appendTranslation(i,r,0),t.appendScale(.5,.5,1)},e.prototype.addEventListener=function(t,e){this._changeDispatcher.addEventListener(t,e)},e.prototype.removeEventListener=function(t,e){this._changeDispatcher.removeEventListener(t,e)},e.prototype.dispatchEvent=function(t){return this._changeDispatcher.dispatchEvent(t)},e.prototype.hasEventListener=function(t){return this._changeDispatcher.hasEventListener(t)
},Object.defineProperty(e.prototype,"_iNearPlaneDistances",{get:function(){return this._nearPlaneDistances},enumerable:!0,configurable:!0}),e}(l);e.exports=p},{"awayjs-core/lib/events/Event":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-core/lib/geom/Matrix3DUtils":void 0,"awayjs-core/lib/geom/Rectangle":void 0,"awayjs-core/lib/projections/FreeMatrixProjection":void 0,"awayjs-display/lib/entities/Camera":void 0,"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/PartialImplementationError"),r=t("awayjs-display/lib/entities/Camera"),a=t("awayjs-display/lib/materials/shadowmappers/ShadowMapperBase"),n=function(t){function e(){t.call(this),this._pDepthMapSize=512,this._needsRender=new Array,this.initCameras()}return i(e,t),e.prototype.initCameras=function(){this._depthCameras=new Array,this._projections=new Array,this.addCamera(0,90,0),this.addCamera(0,-90,0),this.addCamera(-90,0,0),this.addCamera(90,0,0),this.addCamera(0,0,0),this.addCamera(0,180,0)},e.prototype.addCamera=function(t,e,i){var s=new r;s.rotationX=t,s.rotationY=e,s.rotationZ=i,s.projection.near=.01;var a=s.projection;a.fieldOfView=90,this._projections.push(a),s.projection._iAspectRatio=1,this._depthCameras.push(s)},e.prototype.pCreateDepthTexture=function(){throw new s},e.prototype.pUpdateDepthProjection=function(){for(var t=this._pLight,e=t._pFallOff,i=this._pLight.scenePosition,s=0;6>s;++s)this._projections[s].far=e,this._depthCameras[s].transform.position=i,this._needsRender[s]=!0},e.prototype.pDrawDepthMap=function(t,e,i){for(var s=0;6>s;++s)this._needsRender[s]&&(this._pCasterCollector.camera=this._depthCameras[s],this._pCasterCollector.clear(),e.traversePartitions(this._pCasterCollector),i._iRender(this._pCasterCollector,t,null,s))},e}(a);e.exports=n},{"awayjs-core/lib/errors/PartialImplementationError":void 0,"awayjs-display/lib/entities/Camera":void 0,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),r=t("awayjs-core/lib/projections/FreeMatrixProjection"),a=t("awayjs-display/lib/entities/Camera"),n=t("awayjs-display/lib/materials/shadowmappers/ShadowMapperBase"),o=function(t){function e(){t.call(this),this._pLightOffset=1e4,this._pSnap=64,this._pCullPlanes=[],this._pOverallDepthProjection=new r,this._pOverallDepthCamera=new a(this._pOverallDepthProjection),this._pLocalFrustum=[],this._pMatrix=new s}return i(e,t),Object.defineProperty(e.prototype,"snap",{get:function(){return this._pSnap},set:function(t){this._pSnap=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightOffset",{get:function(){return this._pLightOffset},set:function(t){this._pLightOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iDepthProjection",{get:function(){return this._pOverallDepthCamera.viewProjection},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._pMaxZ-this._pMinZ},enumerable:!0,configurable:!0}),e.prototype.pDrawDepthMap=function(t,e,i){this._pCasterCollector.camera=this._pOverallDepthCamera,this._pCasterCollector.cullPlanes=this._pCullPlanes,this._pCasterCollector.clear(),e.traversePartitions(this._pCasterCollector),i._iRender(this._pCasterCollector,t)},e.prototype.pUpdateCullPlanes=function(t){var e=this._pOverallDepthCamera.frustumPlanes,i=t.frustumPlanes;this._pCullPlanes.length=4,this._pCullPlanes[0]=e[0],this._pCullPlanes[1]=e[1],this._pCullPlanes[2]=e[2],this._pCullPlanes[3]=e[3];for(var s=this._pLight,r=s.sceneDirection,a=r.x,n=r.y,o=r.z,h=4,l=0;6>l;++l){var p=i[l];p.a*a+p.b*n+p.c*o<0&&(this._pCullPlanes[h++]=p)}},e.prototype.pUpdateDepthProjection=function(t){this.pUpdateProjectionFromFrustumCorners(t,t.projection.frustumCorners,this._pMatrix),this._pOverallDepthProjection.matrix=this._pMatrix,this.pUpdateCullPlanes(t)},e.prototype.pUpdateProjectionFromFrustumCorners=function(t,e,i){var s,r,a,n,o,h,l,p,d,u=new Array,c=this._pLight;for(s=c.sceneDirection,this._pOverallDepthCamera.transform.matrix3D=this._pLight.sceneTransform,r=Math.floor((t.x-s.x*this._pLightOffset)/this._pSnap)*this._pSnap,a=Math.floor((t.y-s.y*this._pLightOffset)/this._pSnap)*this._pSnap,n=Math.floor((t.z-s.z*this._pLightOffset)/this._pSnap)*this._pSnap,this._pOverallDepthCamera.x=r,this._pOverallDepthCamera.y=a,this._pOverallDepthCamera.z=n,this._pMatrix.copyFrom(this._pOverallDepthCamera.inverseSceneTransform),this._pMatrix.prepend(t.sceneTransform),this._pMatrix.transformVectors(e,this._pLocalFrustum),o=l=this._pLocalFrustum[0],h=p=this._pLocalFrustum[1],this._pMaxZ=this._pLocalFrustum[2],d=3;24>d;)r=this._pLocalFrustum[d],a=this._pLocalFrustum[d+1],n=this._pLocalFrustum[d+2],o>r&&(o=r),r>l&&(l=r),h>a&&(h=a),a>p&&(p=a),n>this._pMaxZ&&(this._pMaxZ=n),d+=3;this._pMinZ=1;var _=l-o,y=p-h,g=1/(this._pMaxZ-this._pMinZ);0>o&&(o-=this._pSnap),0>h&&(h-=this._pSnap),o=Math.floor(o/this._pSnap)*this._pSnap,h=Math.floor(h/this._pSnap)*this._pSnap;var f=2*this._pSnap;_=Math.floor(_/f+2)*f,y=Math.floor(y/f+2)*f,l=o+_,p=h+y,_=1/_,y=1/y,u[0]=2*_,u[5]=2*y,u[10]=g,u[12]=-(l+o)*_,u[13]=-(p+h)*y,u[14]=-this._pMinZ*g,u[15]=1,u[1]=u[2]=u[3]=u[4]=u[6]=u[7]=u[8]=u[9]=u[11]=0,i.copyRawDataFrom(u)},e}(n);e.exports=o},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/projections/FreeMatrixProjection":void 0,"awayjs-display/lib/entities/Camera":void 0,"awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/materials/shadowmappers/NearDirectionalShadowMapper":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper"),r=function(t){function e(e){void 0===e&&(e=.5),t.call(this),this.coverageRatio=e}return i(e,t),Object.defineProperty(e.prototype,"coverageRatio",{get:function(){return this._coverageRatio},set:function(t){t>1?t=1:0>t&&(t=0),this._coverageRatio=t},enumerable:!0,configurable:!0}),e.prototype.pUpdateDepthProjection=function(t){for(var e=t.projection.frustumCorners,i=0;12>i;++i){var s=e[i];this._pLocalFrustum[i]=s,this._pLocalFrustum[i+12]=s+(e[i+12]-s)*this._coverageRatio}this.pUpdateProjectionFromFrustumCorners(t,this._pLocalFrustum,this._pMatrix),this._pOverallDepthProjection.matrix=this._pMatrix},e}(s);e.exports=r},{"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/materials/shadowmappers/ShadowMapperBase":[function(t,e){var i=t("awayjs-core/lib/errors/AbstractMethodError"),s=t("awayjs-display/lib/traverse/ShadowCasterCollector"),r=t("awayjs-core/lib/textures/RenderTexture"),a=function(){function t(){this._pDepthMapSize=2048,this._autoUpdateShadows=!0,this._pCasterCollector=this.pCreateCasterCollector()}return t.prototype.pCreateCasterCollector=function(){return new s},Object.defineProperty(t.prototype,"autoUpdateShadows",{get:function(){return this._autoUpdateShadows},set:function(t){this._autoUpdateShadows=t},enumerable:!0,configurable:!0}),t.prototype.updateShadows=function(){this._iShadowsInvalid=!0},t.prototype.iSetDepthMap=function(t){this._depthMap!=t&&(this._depthMap&&!this._explicitDepthMap&&this._depthMap.dispose(),this._depthMap=t,this._depthMap?(this._explicitDepthMap=!0,this._pDepthMapSize=this._depthMap.size):this._explicitDepthMap=!1)},Object.defineProperty(t.prototype,"light",{get:function(){return this._pLight},set:function(t){this._pLight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"depthMap",{get:function(){return this._depthMap||(this._depthMap=this.pCreateDepthTexture()),this._depthMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"depthMapSize",{get:function(){return this._pDepthMapSize},set:function(t){t!=this._pDepthMapSize&&this._pSetDepthMapSize(t)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._pCasterCollector=null,this._depthMap&&!this._explicitDepthMap&&this._depthMap.dispose(),this._depthMap=null},t.prototype.pCreateDepthTexture=function(){return new r(this._pDepthMapSize,this._pDepthMapSize)},t.prototype.iRenderDepthMap=function(t,e){this._iShadowsInvalid=!1,this.pUpdateDepthProjection(t.camera),this._depthMap||(this._depthMap=this.pCreateDepthTexture()),this.pDrawDepthMap(this._depthMap,t.scene,e)},t.prototype.pUpdateDepthProjection=function(){throw new i},t.prototype.pDrawDepthMap=function(){throw new i},t.prototype._pSetDepthMapSize=function(t){if(this._pDepthMapSize=t,this._explicitDepthMap)throw Error("Cannot set depth map size for the current renderer.");this._depthMap&&(this._depthMap.dispose(),this._depthMap=null)},t}();e.exports=a},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/textures/RenderTexture":void 0,"awayjs-display/lib/traverse/ShadowCasterCollector":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/partition/CameraNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/partition/EntityNode"),r=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype.acceptTraverser=function(){},e}(s);e.exports=r},{"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/partition/DirectionalLightNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/partition/EntityNode"),r=function(t){function e(e){t.call(this,e),this._directionalLight=e}return i(e,t),e.prototype.acceptTraverser=function(t){t.enterNode(this)&&t.applyDirectionalLight(this._directionalLight)},e.prototype.isCastingShadow=function(){return!1},e}(s);e.exports=r},{"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/partition/EntityNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/PartialImplementationError"),r=t("awayjs-display/lib/partition/NodeBase"),a=function(t){function e(e){t.call(this),this._entity=e,this._iNumEntities=1}return i(e,t),Object.defineProperty(e.prototype,"entity",{get:function(){return this._entity},enumerable:!0,configurable:!0}),e.prototype.removeFromParent=function(){this._iParent&&this._iParent.iRemoveNode(this),this._iParent=null},e.prototype.isCastingShadow=function(){return this.entity.castsShadows},e.prototype.isInFrustum=function(t,e){return this._entity._iIsVisible()?this._entity.worldBounds.isInFrustum(t,e):!1},e.prototype.acceptTraverser=function(t){t.enterNode(this)&&t.applyEntity(this._entity)},e.prototype.isIntersectingRay=function(t,e){return this._entity._iIsVisible()?this._entity.isIntersectingRay(t,e):!1},e.prototype._pCreateBoundsPrimitive=function(){throw new s},e}(r);e.exports=a},{"awayjs-core/lib/errors/PartialImplementationError":void 0,"awayjs-display/lib/partition/NodeBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/partition/LightProbeNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/partition/EntityNode"),r=function(t){function e(e){t.call(this,e),this._lightProbe=e}return i(e,t),e.prototype.acceptTraverser=function(t){t.enterNode(this)&&t.applyLightProbe(this._lightProbe)},e.prototype.isCastingShadow=function(){return!1},e}(s);e.exports=r},{"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/partition/NodeBase":[function(t,e){var i=function(){function t(){this._pNumChildNodes=0,this._iNumEntities=0,this._pChildNodes=new Array}return Object.defineProperty(t.prototype,"boundsVisible",{get:function(){return this._explicitBoundsVisible},set:function(t){this._explicitBoundsVisible!=t&&(this._explicitBoundsVisible=t,this._iUpdateImplicitBoundsVisible(this._iParent?this._iParent.boundsChildrenVisible:!1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boundsChildrenVisible",{get:function(){return this._boundsChildrenVisible},set:function(t){if(this._boundsChildrenVisible!=t){this._boundsChildrenVisible=t;for(var e=0;e<this._pNumChildNodes;++e)this._pChildNodes[e]._iUpdateImplicitBoundsVisible(this._boundsChildrenVisible)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._iParent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_pNumEntities",{get:function(){return this._iNumEntities},enumerable:!0,configurable:!0}),t.prototype.isInFrustum=function(){return!0},t.prototype.isIntersectingRay=function(){return!0},t.prototype.isCastingShadow=function(){return!0},t.prototype.findPartitionForEntity=function(){return this},t.prototype.acceptTraverser=function(t){if((0!=this._pNumEntities||this._implicitBoundsVisible)&&t.enterNode(this)){for(var e=0;e<this._pNumChildNodes;)this._pChildNodes[e++].acceptTraverser(t);this._implicitBoundsVisible&&this._pBoundsPrimitive.partitionNode.acceptTraverser(t)}},t.prototype._pCreateBoundsPrimitive=function(){return null},t.prototype.iAddNode=function(t){t._iParent=this,this._iNumEntities+=t._pNumEntities,this._pChildNodes[this._pNumChildNodes++]=t,t._iUpdateImplicitBoundsVisible(this.boundsChildrenVisible);var e=t._pNumEntities;t=this;do t._iNumEntities+=e;while(null!=(t=t._iParent))},t.prototype.iRemoveNode=function(t){var e=this._pChildNodes.indexOf(t);this._pChildNodes[e]=this._pChildNodes[--this._pNumChildNodes],this._pChildNodes.pop(),t._iUpdateImplicitBoundsVisible(!1);var i=t._pNumEntities;t=this;do t._pNumEntities-=i;while(null!=(t=t._iParent))},t.prototype._iUpdateImplicitBoundsVisible=function(t){if(this._implicitBoundsVisible!=this._explicitBoundsVisible&&!t){this._implicitBoundsVisible=this._explicitBoundsVisible||t,this._iUpdateEntityBounds();for(var e=0;e<this._pNumChildNodes;++e)this._pChildNodes[e]._iUpdateImplicitBoundsVisible(this._boundsChildrenVisible)}},t.prototype._iIsBoundsVisible=function(){return this._implicitBoundsVisible},t.prototype._iUpdateEntityBounds=function(){this._pBoundsPrimitive&&(this._pBoundsPrimitive.dispose(),this._pBoundsPrimitive=null),this._implicitBoundsVisible&&(this._pBoundsPrimitive=this._pCreateBoundsPrimitive())},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/partition/NullNode":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/partition/Partition":[function(t,e){var i=t("awayjs-display/lib/partition/NullNode"),s=function(){function t(t){this._updatesMade=!1,this._rootNode=t||new i}return Object.defineProperty(t.prototype,"rootNode",{get:function(){return this._rootNode},enumerable:!0,configurable:!0}),t.prototype.traverse=function(t){this._updatesMade&&this.updateEntities(),this._rootNode.acceptTraverser(t)},t.prototype.iMarkForUpdate=function(t){for(var e=t.partitionNode,i=this._updateQueue;i;){if(e==i)return;i=i._iUpdateQueueNext}e._iUpdateQueueNext=this._updateQueue,this._updateQueue=e,this._updatesMade=!0},t.prototype.iRemoveEntity=function(t){var e,i=t.partitionNode;if(i.removeFromParent(),i==this._updateQueue)this._updateQueue=i._iUpdateQueueNext;else{for(e=this._updateQueue;e&&e._iUpdateQueueNext!=i;)e=e._iUpdateQueueNext;e&&(e._iUpdateQueueNext=i._iUpdateQueueNext)}i._iUpdateQueueNext=null,this._updateQueue||(this._updatesMade=!1)},t.prototype.updateEntities=function(){var t,e,i=this._updateQueue;this._updateQueue=null,this._updatesMade=!1;do t=this._rootNode.findPartitionForEntity(i.entity),i.parent!=t&&(i&&i.removeFromParent(),t.iAddNode(i)),e=i._iUpdateQueueNext,i._iUpdateQueueNext=null,i.entity._iInternalUpdate();while(null!=(i=e))},t}();e.exports=s},{"awayjs-display/lib/partition/NullNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/partition/PointLightNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/partition/EntityNode"),r=function(t){function e(e){t.call(this,e),this._pointLight=e}return i(e,t),e.prototype.acceptTraverser=function(t){t.enterNode(this)&&t.applyPointLight(this._pointLight)},e.prototype.isCastingShadow=function(){return!1},e}(s);e.exports=r},{"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/partition/SkyboxNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/partition/EntityNode"),r=function(t){function e(e){t.call(this,e),this._skyBox=e}return i(e,t),e.prototype.acceptTraverser=function(t){t.enterNode(this)&&t.applySkybox(this._skyBox)},e.prototype.isInFrustum=function(){return this._skyBox._iIsVisible?!0:!1},e}(s);e.exports=r},{"awayjs-display/lib/partition/EntityNode":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/pick/IPicker":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/pick/IPickingCollider":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/pick/PickingCollisionVO":[function(t,e){var i=function(){function t(t){this.displayObject=t}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/pick/RaycastPicker":[function(t,e){var i=t("awayjs-core/lib/geom/Vector3D"),s=t("awayjs-display/lib/traverse/RaycastCollector"),r=function(){function t(t){void 0===t&&(t=!1),this._ignoredEntities=[],this._onlyMouseEnabled=!0,this._numEntities=0,this._raycastCollector=new s,this._findClosestCollision=t,this._entities=new Array}return Object.defineProperty(t.prototype,"onlyMouseEnabled",{get:function(){return this._onlyMouseEnabled},set:function(t){this._onlyMouseEnabled=t},enumerable:!0,configurable:!0}),t.prototype.getViewCollision=function(t,e,i){var s=i.unproject(t,e,0),r=i.unproject(t,e,1).subtract(s);return this.getSceneCollision(s,r,i.scene)},t.prototype.getSceneCollision=function(t,e,i){this._raycastCollector.clear(),this._raycastCollector.rayPosition=t,this._raycastCollector.rayDirection=e,i.traversePartitions(this._raycastCollector),this._numEntities=0;for(var s,r=this._raycastCollector.entityHead;r;)this.isIgnored(s=r.entity)||(this._entities[this._numEntities++]=s),r=r.next;return this._numEntities?this.getPickingCollisionVO(this._raycastCollector):null},t.prototype.setIgnoreList=function(t){this._ignoredEntities=t},t.prototype.isIgnored=function(t){if(this._onlyMouseEnabled&&!t._iIsMouseEnabled())return!0;for(var e=this._ignoredEntities.length,i=0;e>i;i++)if(this._ignoredEntities[i]==t)return!0;return!1},t.prototype.sortOnNearT=function(t,e){return t._iPickingCollisionVO.rayEntryDistance>e._iPickingCollisionVO.rayEntryDistance?1:-1},t.prototype.getPickingCollisionVO=function(){this._entities.length=this._numEntities,this._entities=this._entities.sort(this.sortOnNearT);var t,e,i,s,r=Number.MAX_VALUE;for(s=0;s<this._numEntities;++s)if(i=this._entities[s],e=i._iPickingCollisionVO,i.pickingCollider){if((null==t||e.rayEntryDistance<t.rayEntryDistance)&&i._iTestCollision(r,this._findClosestCollision)&&(r=e.rayEntryDistance,t=e,!this._findClosestCollision))return this.updateLocalPosition(e),e}else if((null==t||e.rayEntryDistance<t.rayEntryDistance)&&!e.rayOriginIsInsideBounds)return this.updateLocalPosition(e),e;return t},t.prototype.updateLocalPosition=function(t){var e=null==t.localPosition?new i:t.localPosition,s=t.localRayDirection,r=t.localRayPosition,a=t.rayEntryDistance;e.x=r.x+a*s.x,e.y=r.y+a*s.y,e.z=r.z+a*s.z},t.prototype.dispose=function(){},t}();e.exports=r},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/traverse/RaycastCollector":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/pool/CSSBillboardRenderable":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/pool/CSSRenderableBase"),r=function(t){function e(e,i){t.call(this,e,i,i);var s=document.createElement("div");s.onmousedown=function(){return!1},this.htmlElement=s;var r=s.style;r.position="absolute",r.transformOrigin=r["-webkit-transform-origin"]=r["-moz-transform-origin"]=r["-o-transform-origin"]=r["-ms-transform-origin"]="0% 0%";var a=document.createElement("div");s.appendChild(a),a.className="material"+i.material.id}return i(e,t),e.id="billboard",e}(s);e.exports=r},{"awayjs-display/lib/pool/CSSRenderableBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/pool/CSSLineSegmentRenderable":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/pool/CSSRenderableBase"),r=function(t){function e(e,i){t.call(this,e,i,i);var s=document.createElement("div");s.onmousedown=function(){return!1},this.htmlElement=s;var r=s.style;r.position="absolute",r.transformOrigin=r["-webkit-transform-origin"]=r["-moz-transform-origin"]=r["-o-transform-origin"]=r["-ms-transform-origin"]="0% 0%";var a=document.createElement("div");s.appendChild(a),a.className="material"+i.material.id}return i(e,t),e.id="lineSegment",e}(s);e.exports=r},{"awayjs-display/lib/pool/CSSRenderableBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/pool/CSSRenderableBase":[function(t,e){var i=function(){function t(t,e,i){this._pool=t,this.sourceEntity=e,this.materialOwner=i}return t.prototype.dispose=function(){this._pool.disposeItem(this.materialOwner)},t.prototype.invalidateGeometry=function(){},t.prototype.invalidateIndexData=function(){},t.prototype.invalidateVertexData=function(){},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/pool/CSSSkyboxRenderable":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/pool/CSSRenderableBase"),r=function(t){function e(e,i){t.call(this,e,i,i);var s=document.createElement("div");s.onmousedown=function(){return!1},this.htmlElement=s;var r,a=s.style;a.position="absolute",a.transformOrigin=a["-webkit-transform-origin"]=a["-moz-transform-origin"]=a["-o-transform-origin"]=a["-ms-transform-origin"]="0% 0%",r=document.createElement("div"),s.appendChild(r),r.className="material"+i.material.id}return i(e,t),e.id="skybox",e}(s);e.exports=r},{"awayjs-display/lib/pool/CSSRenderableBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/pool/EntityListItemPool":[function(t,e){var i=t("awayjs-display/lib/pool/EntityListItem"),s=function(){function t(){this._index=0,this._poolSize=0,this._pool=new Array}return t.prototype.getItem=function(){var t;return this._index==this._poolSize?(t=new i,this._pool[this._index++]=t,++this._poolSize):t=this._pool[this._index++],t},t.prototype.freeAll=function(){this._index=0},t.prototype.dispose=function(){this._pool.length=0},t}();e.exports=s},{"awayjs-display/lib/pool/EntityListItem":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/pool/EntityListItem":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/pool/IMaterialData":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/pool/IMaterialPassData":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/pool/IRenderableClass":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/pool/IRenderable":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/pool/RenderablePool":[function(t,e){var i=function(){function t(t){this._pool=new Object,this._renderableClass=t}return t.prototype.getItem=function(t){return this._pool[t.id]||(this._pool[t.id]=t._iAddRenderable(new this._renderableClass(this,t)))},t.prototype.disposeItem=function(t){t._iRemoveRenderable(this._pool[t.id]),this._pool[t.id]=null},t.getPool=function(e){var i=t._pools[e.id];return void 0!=i?i:t._pools[e.id]=new t(e)},t.disposePool=function(e){t._pools[e.id]&&(t._pools[e.id]=void 0)},t._pools=new Object,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/prefabs/PrefabBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/NamedAssetBase"),r=t("awayjs-core/lib/errors/AbstractMethodError"),a=function(t){function e(){t.call(this),this._pObjects=new Array}return i(e,t),e.prototype.getNewObject=function(){var t=this._pCreateObject();return this._pObjects.push(t),t},e.prototype._pCreateObject=function(){throw new r},e.prototype._iValidate=function(){},e}(s);e.exports=a},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/prefabs/PrimitiveCapsulePrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase"),r=function(t){function e(e,i,s,r,a){void 0===e&&(e=50),void 0===i&&(i=100),void 0===s&&(s=16),void 0===r&&(r=15),void 0===a&&(a=!0),t.call(this),this._numVertices=0,this._radius=e,this._height=i,this._segmentsW=s,this._segmentsH=r%2==0?r+1:r,this._yUp=a}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t%2==0?t+1:t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(t,e){var i,s,r,a,n,o,h,l,p,d,u,c=0,_=0,y=0;if("triangleSubGeometry"==e){var g=t;for(this._numVertices=(this._segmentsH+1)*(this._segmentsW+1),y=(this._segmentsH-1)*this._segmentsW*6,this._numVertices==g.numVertices?(i=g.indices,s=g.positions,r=g.vertexNormals,a=g.vertexTangents):(i=new Array(y),s=new Array(3*this._numVertices),r=new Array(3*this._numVertices),a=new Array(3*this._numVertices),this._pInvalidateUVs()),o=0;o<=this._segmentsH;++o){var f=Math.PI*o/this._segmentsH,m=-this._radius*Math.cos(f),b=this._radius*Math.sin(f);for(h=_,n=0;n<=this._segmentsW;++n){var w=2*Math.PI*n/this._segmentsW,v=b*Math.cos(w),x=o>this._segmentsH/2?this._height/2:-this._height/2,P=b*Math.sin(w),D=1/Math.sqrt(v*v+P*P+m*m),j=Math.sqrt(P*P+v*v);if(this._yUp?(d=0,u=j>.007?v/j:0,l=-m,p=P):(d=j>.007?v/j:0,u=0,l=P,p=m),n==this._segmentsW?(s[_]=s[h],s[_+1]=s[h+1],s[_+2]=s[h+2],r[_]=.5*(r[h]+v*D),r[_+1]=.5*(r[h+1]+l*D),r[_+2]=.5*(r[h+2]+p*D),a[_]=.5*(a[h]+(j>.007?-P/j:1)),a[_+1]=.5*(a[h+1]+d),a[_+2]=.5*(a[h+2]+u)):(s[_]=v,s[_+1]=this._yUp?l-x:l,s[_+2]=this._yUp?p:p+x,r[_]=v*D,r[_+1]=l*D,r[_+2]=p*D,a[_]=j>.007?-P/j:1,a[_+1]=d,a[_+2]=u),n>0&&o>0){var C=(this._segmentsW+1)*o+n,T=(this._segmentsW+1)*o+n-1,A=(this._segmentsW+1)*(o-1)+n-1,S=(this._segmentsW+1)*(o-1)+n;o==this._segmentsH?(s[_]=s[h],s[_+1]=s[h+1],s[_+2]=s[h+2],i[c++]=C,i[c++]=A,i[c++]=S):1==o?(i[c++]=C,i[c++]=T,i[c++]=A):(i[c++]=C,i[c++]=T,i[c++]=A,i[c++]=C,i[c++]=A,i[c++]=S)}_+=3}}g.updateIndices(i),g.updatePositions(s),g.updateVertexNormals(r),g.updateVertexTangents(a)}},e.prototype._pBuildUVs=function(t,e){var i,s,r;if("triangleSubGeometry"==e){var a=t;r=a.uvs&&this._numVertices==a.numVertices?a.uvs:new Array(2*this._numVertices);var n=0;for(s=0;s<=this._segmentsH;++s)for(i=0;i<=this._segmentsW;++i)r[n++]=i/this._segmentsW*a.scaleU,r[n++]=s/this._segmentsH*a.scaleV;a.updateUVs(r)}},e}(s);e.exports=r},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/prefabs/PrimitiveConePrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitiveCylinderPrefab"),r=function(t){function e(e,i,s,r,a,n){void 0===e&&(e=50),void 0===i&&(i=100),void 0===s&&(s=16),void 0===r&&(r=1),void 0===a&&(a=!0),void 0===n&&(n=!0),t.call(this,0,e,i,s,r,!1,a,!0,n)}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._pBottomRadius},set:function(t){this._pBottomRadius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),e}(s);e.exports=r},{"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/prefabs/PrimitiveCubePrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase"),r=function(t){function e(e,i,s,r,a,n,o){void 0===e&&(e=100),void 0===i&&(i=100),void 0===s&&(s=100),void 0===r&&(r=1),void 0===a&&(a=1),void 0===n&&(n=1),void 0===o&&(o=!0),t.call(this),this._width=e,this._height=i,this._depth=s,this._segmentsW=r,this._segmentsH=a,this._segmentsD=n,this._tile6=o}return i(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tile6",{get:function(){return this._tile6},set:function(t){this._tile6=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsD",{get:function(){return this._segmentsD},set:function(t){this._segmentsD=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(t,e){var i,s,r,a,n,o,h,l,p,d,u,c,_,y,g,f,m,b,w,v,x,P=0;if(_=this._width/2,y=this._height/2,g=this._depth/2,"triangleSubGeometry"==e){var D=t;
for(x=2*((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1)),v=12*(this._segmentsW*this._segmentsH+this._segmentsW*this._segmentsD+this._segmentsH*this._segmentsD),x==D.numVertices&&null!=D.indices?(i=D.indices,s=D.positions,r=D.vertexNormals,a=D.vertexTangents):(i=new Array(v),s=new Array(3*x),r=new Array(3*x),a=new Array(3*x),this._pInvalidateUVs()),u=0,c=0,f=this._width/this._segmentsW,m=this._height/this._segmentsH,b=this._depth/this._segmentsD,p=0;p<=this._segmentsW;p++)for(w=-_+p*f,d=0;d<=this._segmentsH;d++)s[u]=w,s[u+1]=-y+d*m,s[u+2]=-g,r[u]=0,r[u+1]=0,r[u+2]=-1,a[u]=1,a[u+1]=0,a[u+2]=0,u+=3,s[u]=w,s[u+1]=-y+d*m,s[u+2]=g,r[u]=0,r[u+1]=0,r[u+2]=1,a[u]=-1,a[u+1]=0,a[u+2]=0,u+=3,p&&d&&(n=2*((p-1)*(this._segmentsH+1)+(d-1)),o=2*(p*(this._segmentsH+1)+(d-1)),h=n+2,l=o+2,i[c++]=n,i[c++]=h,i[c++]=l,i[c++]=n,i[c++]=l,i[c++]=o,i[c++]=o+1,i[c++]=l+1,i[c++]=h+1,i[c++]=o+1,i[c++]=h+1,i[c++]=n+1);for(P+=2*(this._segmentsW+1)*(this._segmentsH+1),p=0;p<=this._segmentsW;p++)for(w=-_+p*f,d=0;d<=this._segmentsD;d++)s[u]=w,s[u+1]=y,s[u+2]=-g+d*b,r[u]=0,r[u+1]=1,r[u+2]=0,a[u]=1,a[u+1]=0,a[u+2]=0,u+=3,s[u]=w,s[u+1]=-y,s[u+2]=-g+d*b,r[u]=0,r[u+1]=-1,r[u+2]=0,a[u]=1,a[u+1]=0,a[u+2]=0,u+=3,p&&d&&(n=P+2*((p-1)*(this._segmentsD+1)+(d-1)),o=P+2*(p*(this._segmentsD+1)+(d-1)),h=n+2,l=o+2,i[c++]=n,i[c++]=h,i[c++]=l,i[c++]=n,i[c++]=l,i[c++]=o,i[c++]=o+1,i[c++]=l+1,i[c++]=h+1,i[c++]=o+1,i[c++]=h+1,i[c++]=n+1);for(P+=2*(this._segmentsW+1)*(this._segmentsD+1),p=0;p<=this._segmentsD;p++)for(w=g-p*b,d=0;d<=this._segmentsH;d++)s[u]=-_,s[u+1]=-y+d*m,s[u+2]=w,r[u]=-1,r[u+1]=0,r[u+2]=0,a[u]=0,a[u+1]=0,a[u+2]=-1,u+=3,s[u]=_,s[u+1]=-y+d*m,s[u+2]=w,r[u]=1,r[u+1]=0,r[u+2]=0,a[u]=0,a[u+1]=0,a[u+2]=1,u+=3,p&&d&&(n=P+2*((p-1)*(this._segmentsH+1)+(d-1)),o=P+2*(p*(this._segmentsH+1)+(d-1)),h=n+2,l=o+2,i[c++]=n,i[c++]=h,i[c++]=l,i[c++]=n,i[c++]=l,i[c++]=o,i[c++]=o+1,i[c++]=l+1,i[c++]=h+1,i[c++]=o+1,i[c++]=h+1,i[c++]=n+1);D.updateIndices(i),D.updatePositions(s),D.updateVertexNormals(r),D.updateVertexTangents(a)}else if("lineSubGeometry"==e){var j,C,T,A=t,S=4*this._segmentsH+4*this._segmentsW+4*this._segmentsD;for(null!=A.indices&&S==A.numSegments?(j=A.startPositions,C=A.endPositions,T=A.thickness):(j=new Array(3*S),C=new Array(3*S),T=new Array(S)),u=0,c=0,p=0;p<this._segmentsH;++p)j[u]=-_,j[u+1]=p*this._height/this._segmentsH-y,j[u+2]=-g,C[u]=_,C[u+1]=p*this._height/this._segmentsH-y,C[u+2]=-g,T[c++]=1,u+=3,j[u]=-_,j[u+1]=y-p*this._height/this._segmentsH,j[u+2]=g,C[u]=_,C[u+1]=y-p*this._height/this._segmentsH,C[u+2]=g,T[c++]=1,u+=3;for(p=0;p<this._segmentsW;++p)j[u]=p*this._width/this._segmentsW-_,j[u+1]=-y,j[u+2]=-g,C[u]=p*this._width/this._segmentsW-_,C[u+1]=y,C[u+2]=-g,T[c++]=1,u+=3,j[u]=_-p*this._width/this._segmentsW,j[u+1]=-y,j[u+2]=g,C[u]=_-p*this._width/this._segmentsW,C[u+1]=y,C[u+2]=g,T[c++]=1,u+=3;for(p=0;p<this._segmentsH;++p)j[u]=-_,j[u+1]=p*this._height/this._segmentsH-y,j[u+2]=-g,C[u]=-_,C[u+1]=p*this._height/this._segmentsH-y,C[u+2]=g,T[c++]=1,u+=3,j[u]=_,j[u+1]=y-p*this._height/this._segmentsH,j[u+2]=-g,C[u]=_,C[u+1]=y-p*this._height/this._segmentsH,C[u+2]=g,T[c++]=1,u+=3;for(p=0;p<this._segmentsD;++p)j[u]=_,j[u+1]=-y,j[u+2]=p*this._depth/this._segmentsD-g,C[u]=_,C[u+1]=y,C[u+2]=p*this._depth/this._segmentsD-g,T[c++]=1,u+=3,j[u]=-_,j[u+1]=-y,j[u+2]=g-p*this._depth/this._segmentsD,C[u]=-_,C[u+1]=y,C[u+2]=g-p*this._depth/this._segmentsD,T[c++]=1,u+=3;for(p=0;p<this._segmentsD;++p)j[u]=-_,j[u+1]=-y,j[u+2]=g-p*this._depth/this._segmentsD,C[u]=_,C[u+1]=-y,C[u+2]=g-p*this._depth/this._segmentsD,T[c++]=1,u+=3,j[u]=-_,j[u+1]=y,j[u+2]=p*this._depth/this._segmentsD-g,C[u]=_,C[u+1]=y,C[u+2]=p*this._depth/this._segmentsD-g,T[c++]=1,u+=3;for(p=0;p<this._segmentsW;++p)j[u]=_-p*this._width/this._segmentsW,j[u+1]=-y,j[u+2]=-g,C[u]=_-p*this._width/this._segmentsW,C[u+1]=-y,C[u+2]=g,T[c++]=1,u+=3,j[u]=p*this._width/this._segmentsW-_,j[u+1]=y,j[u+2]=-g,C[u]=p*this._width/this._segmentsW-_,C[u+1]=y,C[u+2]=g,T[c++]=1,u+=3;A.updatePositions(j,C),A.updateThickness(T)}},e.prototype._pBuildUVs=function(t,e){var i,s,r,a,n,o,h,l,p,d,u,c,_,y,g;if("triangleSubGeometry"==e){g=2*((this._segmentsW+1)*(this._segmentsH+1)+(this._segmentsW+1)*(this._segmentsD+1)+(this._segmentsH+1)*(this._segmentsD+1));var f=t;for(a=g==f.numVertices&&null!=f.uvs?f.uvs:new Array(2*g),this._tile6?(n=h=1/3,o=l=.5):(n=o=1,h=l=0),r=0,p=1*h,d=1*l,u=2*h,c=0*l,_=n/this._segmentsW,y=o/this._segmentsH,i=0;i<=this._segmentsW;i++)for(s=0;s<=this._segmentsH;s++)a[r++]=(p+i*_)*f.scaleU,a[r++]=(d+(o-s*y))*f.scaleV,a[r++]=(u+(n-i*_))*f.scaleU,a[r++]=(c+(o-s*y))*f.scaleV;for(p=1*h,d=0*l,u=0*h,c=0*l,_=n/this._segmentsW,y=o/this._segmentsD,i=0;i<=this._segmentsW;i++)for(s=0;s<=this._segmentsD;s++)a[r++]=(p+i*_)*f.scaleU,a[r++]=(d+(o-s*y))*f.scaleV,a[r++]=(u+i*_)*f.scaleU,a[r++]=(c+s*y)*f.scaleV;for(p=0*h,d=1*l,u=2*h,c=1*l,_=n/this._segmentsD,y=o/this._segmentsH,i=0;i<=this._segmentsD;i++)for(s=0;s<=this._segmentsH;s++)a[r++]=(p+i*_)*f.scaleU,a[r++]=(d+(o-s*y))*f.scaleV,a[r++]=(u+(n-i*_))*f.scaleU,a[r++]=(c+(o-s*y))*f.scaleV;f.updateUVs(a)}},e}(s);e.exports=r},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/prefabs/PrimitiveCylinderPrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase"),r=function(t){function e(e,i,s,r,a,n,o,h,l){void 0===e&&(e=50),void 0===i&&(i=50),void 0===s&&(s=100),void 0===r&&(r=16),void 0===a&&(a=1),void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===h&&(h=!0),void 0===l&&(l=!0),t.call(this),this._numVertices=0,this._topRadius=e,this._pBottomRadius=i,this._height=s,this._pSegmentsW=r,this._pSegmentsH=a,this._topClosed=n,this._bottomClosed=o,this._surfaceClosed=h,this._yUp=l}return i(e,t),Object.defineProperty(e.prototype,"topRadius",{get:function(){return this._topRadius},set:function(t){this._topRadius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRadius",{get:function(){return this._pBottomRadius},set:function(t){this._pBottomRadius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._pSegmentsW},set:function(t){this.setSegmentsW(t)},enumerable:!0,configurable:!0}),e.prototype.setSegmentsW=function(t){this._pSegmentsW=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._pSegmentsH},set:function(t){this.setSegmentsH(t)},enumerable:!0,configurable:!0}),e.prototype.setSegmentsH=function(t){this._pSegmentsH=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},Object.defineProperty(e.prototype,"topClosed",{get:function(){return this._topClosed},set:function(t){this._topClosed=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomClosed",{get:function(){return this._bottomClosed},set:function(t){this._bottomClosed=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(t,e){var i,s,r,a,n,o,h,l,p,d,u,c,_,y,g,f,m,b,w,v,x=0,P=0,D=0;this._numVertices=0;var j=2*Math.PI/this._pSegmentsW;if("triangleSubGeometry"==e){var C=t;if(this._surfaceClosed&&(this._numVertices+=(this._pSegmentsH+1)*(this._pSegmentsW+1),x+=this._pSegmentsH*this._pSegmentsW*6),this._topClosed&&(this._numVertices+=2*(this._pSegmentsW+1),x+=3*this._pSegmentsW),this._bottomClosed&&(this._numVertices+=2*(this._pSegmentsW+1),x+=3*this._pSegmentsW),this._numVertices==C.numVertices?(i=C.indices,s=C.positions,r=C.vertexNormals,a=C.vertexTangents):(i=new Array(x),s=new Array(3*this._numVertices),r=new Array(3*this._numVertices),a=new Array(3*this._numVertices),this._pInvalidateUVs()),d=0,u=0,this._topClosed&&this._topRadius>0){for(p=-.5*this._height,n=0;n<=this._pSegmentsW;++n)this._yUp?(w=1,v=0,m=-p,b=0):(w=0,v=-1,m=0,b=p),s[d]=0,s[d+1]=m,s[d+2]=b,r[d]=0,r[d+1]=w,r[d+2]=v,a[d]=1,a[d+1]=0,a[d+2]=0,d+=3,_=n*j,h=this._topRadius*Math.cos(_),l=this._topRadius*Math.sin(_),this._yUp?(m=-p,b=l):(m=l,b=p),n==this._pSegmentsW?(s[d]=s[P+3],s[d+1]=s[P+4],s[d+2]=s[P+5]):(s[d]=h,s[d+1]=m,s[d+2]=b),r[d]=0,r[d+1]=w,r[d+2]=v,a[d]=1,a[d+1]=0,a[d+2]=0,d+=3,n>0&&(i[u++]=D,i[u++]=D+1,i[u++]=D+2,D+=2);D+=2}if(this._bottomClosed&&this._pBottomRadius>0){for(p=.5*this._height,P=3*D,n=0;n<=this._pSegmentsW;++n)this._yUp?(w=-1,v=0,m=-p,b=0):(w=0,v=1,m=0,b=p),s[d]=0,s[d+1]=m,s[d+2]=b,r[d]=0,r[d+1]=w,r[d+2]=v,a[d]=1,a[d+1]=0,a[d+2]=0,d+=3,_=n*j,h=this._pBottomRadius*Math.cos(_),l=this._pBottomRadius*Math.sin(_),this._yUp?(m=-p,b=l):(m=l,b=p),n==this._pSegmentsW?(s[d]=s[P+3],s[d+1]=s[P+4],s[d+2]=s[P+5]):(s[d]=h,s[d+1]=m,s[d+2]=b),r[d]=0,r[d+1]=w,r[d+2]=v,a[d]=1,a[d+1]=0,a[d+2]=0,d+=3,n>0&&(i[u++]=D,i[u++]=D+2,i[u++]=D+1,D+=2);D+=2}if(y=this._pBottomRadius-this._topRadius,g=y/this._height,f=0==g?1:this._height/y,this._surfaceClosed){var T,A,S,O,E,M,R,I;for(o=0;o<=this._pSegmentsH;++o)for(c=this._topRadius-o/this._pSegmentsH*(this._topRadius-this._pBottomRadius),p=-(this._height/2)+o/this._pSegmentsH*this._height,P=3*D,n=0;n<=this._pSegmentsW;++n)_=n*j,h=c*Math.cos(_),l=c*Math.sin(_),E=f*Math.cos(_),M=f*Math.sin(_),this._yUp?(w=0,v=-E,m=-p,b=l,R=g,I=M):(w=-E,v=0,m=l,b=p,R=M,I=g),n==this._pSegmentsW?(s[d]=s[P],s[d+1]=s[P+1],s[d+2]=s[P+2],r[d]=E,r[d+1]=g,r[d+2]=M,a[d]=M,a[d+1]=w,a[d+2]=v):(s[d]=h,s[d+1]=m,s[d+2]=b,r[d]=E,r[d+1]=R,r[d+2]=I,a[d]=-M,a[d+1]=w,a[d+2]=v),d+=3,n>0&&o>0&&(T=D,A=D-1,S=A-this._pSegmentsW-1,O=T-this._pSegmentsW-1,i[u++]=T,i[u++]=A,i[u++]=S,i[u++]=T,i[u++]=S,i[u++]=O),D++}C.updateIndices(i),C.updatePositions(s),C.updateVertexNormals(r),C.updateVertexTangents(a)}else if("lineSubGeometry"==e){var N,L,F,V=t,B=(this._pSegmentsH+1)*this._pSegmentsW+this._pSegmentsW;for(null!=V.indices&&B==V.numSegments?(N=V.startPositions,L=V.endPositions,F=V.thickness):(N=new Array(3*B),L=new Array(3*B),F=new Array(B)),d=0,u=0,o=0;o<=this._pSegmentsH;++o)for(c=this._topRadius-o/this._pSegmentsH*(this._topRadius-this._pBottomRadius),p=this._height*(o/this._pSegmentsH-.5),n=0;n<=this._pSegmentsW;++n)_=n*j,h=c*Math.cos(_),l=c*Math.sin(_),this._yUp?(m=-p,b=l):(m=l,b=p),n>0&&(L[d]=h,L[d+1]=m,L[d+2]=b,F[u++]=1,d+=3,N[d]=L[d-6*this._pSegmentsW],N[d+1]=L[d+1-6*this._pSegmentsW],N[d+2]=L[d+2-6*this._pSegmentsW],L[d]=h,L[d+1]=m,L[d+2]=b,F[u++]=1,d+=3),n<this._pSegmentsW&&(N[d]=h,N[d+1]=m,N[d+2]=b);V.updatePositions(N,L),V.updateThickness(F)}},e.prototype._pBuildUVs=function(t,e){var i,s,r,a,n,o;if("triangleSubGeometry"==e){var h=t;o=h.uvs&&this._numVertices==h.numVertices?h.uvs:new Array(2*this._numVertices);var l=2*Math.PI/this._pSegmentsW,p=0;if(this._topClosed)for(i=0;i<=this._pSegmentsW;++i)n=i*l,r=.5+.5*-Math.cos(n),a=.5+.5*Math.sin(n),o[p++]=.5*h.scaleU,o[p++]=.5*h.scaleV,o[p++]=r*h.scaleU,o[p++]=a*h.scaleV;if(this._bottomClosed)for(i=0;i<=this._pSegmentsW;++i)n=i*l,r=.5+.5*Math.cos(n),a=.5+.5*Math.sin(n),o[p++]=.5*h.scaleU,o[p++]=.5*h.scaleV,o[p++]=r*h.scaleU,o[p++]=a*h.scaleV;if(this._surfaceClosed)for(s=0;s<=this._pSegmentsH;++s)for(i=0;i<=this._pSegmentsW;++i)o[p++]=i/this._pSegmentsW*h.scaleU,o[p++]=s/this._pSegmentsH*h.scaleV;h.updateUVs(o)}},e}(s);e.exports=r},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/prefabs/PrimitivePlanePrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase"),r=function(t){function e(e,i,s,r,a,n){void 0===e&&(e=100),void 0===i&&(i=100),void 0===s&&(s=1),void 0===r&&(r=1),void 0===a&&(a=!0),void 0===n&&(n=!1),t.call(this),this._segmentsW=s,this._segmentsH=r,this._yUp=a,this._width=e,this._height=i,this._doubleSided=n}return i(e,t),Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doubleSided",{get:function(){return this._doubleSided},set:function(t){this._doubleSided=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(t,e){var i,s,r,a,n,o,h,l,p,d,u=this._segmentsW+1;if("triangleSubGeometry"==e){var c,_,y,g=t,o=(this._segmentsH+1)*u;for(this._doubleSided&&(o*=2),a=this._segmentsH*this._segmentsW*6,this._doubleSided&&(a*=2),null!=g.indices&&a==g.indices.length?i=g.indices:(i=new Array(a),this._pInvalidateUVs()),o==g.numVertices?(c=g.positions,_=g.vertexNormals,y=g.vertexTangents):(c=new Array(3*o),_=new Array(3*o),y=new Array(3*o),this._pInvalidateUVs()),l=0,h=0,d=0;d<=this._segmentsH;++d)for(p=0;p<=this._segmentsW;++p){if(s=(p/this._segmentsW-.5)*this._width,r=(d/this._segmentsH-.5)*this._height,c[h]=s,this._yUp?(c[h+1]=0,c[h+2]=r):(c[h+1]=r,c[h+2]=0),_[h]=0,this._yUp?(_[h+1]=1,_[h+2]=0):(_[h+1]=0,_[h+2]=-1),y[h]=1,y[h+1]=0,y[h+2]=0,h+=3,this._doubleSided){for(var f=h;h+3>f;++f)c[f]=c[f-3],_[f]=-_[f-3],y[f]=-y[f-3];h+=3}if(p!=this._segmentsW&&d!=this._segmentsH){n=p+d*u;var m=this._doubleSided?2:1;i[l++]=n*m,i[l++]=(n+u)*m,i[l++]=(n+u+1)*m,i[l++]=n*m,i[l++]=(n+u+1)*m,i[l++]=(n+1)*m,this._doubleSided&&(i[l++]=(n+u+1)*m+1,i[l++]=(n+u)*m+1,i[l++]=n*m+1,i[l++]=(n+1)*m+1,i[l++]=(n+u+1)*m+1,i[l++]=n*m+1)}}g.updateIndices(i),g.updatePositions(c),g.updateVertexNormals(_),g.updateVertexTangents(y)}else if("lineSubGeometry"==e){var b,w,v,x=t,P=this._segmentsH+1+u,D=this._width/2,j=this._height/2;for(null!=x.indices&&P==x.numSegments?(b=x.startPositions,w=x.endPositions,v=x.thickness):(b=new Array(3*P),w=new Array(3*P),v=new Array(P)),l=0,h=0,d=0;d<=this._segmentsH;++d)b[h]=-D,b[h+1]=0,b[h+2]=d*this._height-j,w[h]=D,w[h+1]=0,w[h+2]=d*this._height-j,v[l++]=1,h+=3;for(p=0;p<=this._segmentsW;++p)b[h]=p*this._width-D,b[h+1]=0,b[h+2]=-j,w[h]=p*this._width-D,w[h+1]=0,w[h+2]=j,v[l++]=1,h+=3;x.updatePositions(b,w),x.updateThickness(v)}},e.prototype._pBuildUVs=function(t,e){var i,s;if("triangleSubGeometry"==e){s=(this._segmentsH+1)*(this._segmentsW+1),this._doubleSided&&(s*=2);var r=t;r.uvs&&s==r.numVertices?i=r.uvs:(i=new Array(2*s),this._pInvalidateGeometry());for(var a=0,n=0;n<=this._segmentsH;++n)for(var o=0;o<=this._segmentsW;++o)i[a]=o/this._segmentsW*r.scaleU,i[a+1]=(1-n/this._segmentsH)*r.scaleV,a+=2,this._doubleSided&&(i[a]=o/this._segmentsW*r.scaleU,i[a+1]=(1-n/this._segmentsH)*r.scaleV,a+=2);r.updateUVs(i)}},e}(s);e.exports=r},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/prefabs/PrimitivePolygonPrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitiveCylinderPrefab"),r=function(t){function e(e,i,s){void 0===e&&(e=100),void 0===i&&(i=16),void 0===s&&(s=!0),t.call(this,e,0,0,i,1,!0,!1,!1,s)}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._pBottomRadius},set:function(t){this._pBottomRadius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sides",{get:function(){return this._pSegmentsW},set:function(t){this.setSegmentsW(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subdivisions",{get:function(){return this._pSegmentsH},set:function(t){this.setSegmentsH(t)},enumerable:!0,configurable:!0}),e}(s);e.exports=r},{"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/prefabs/PrimitivePrefabBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/errors/AbstractMethodError"),a=t("awayjs-display/lib/base/Geometry"),n=t("awayjs-display/lib/base/TriangleSubGeometry"),o=t("awayjs-display/lib/base/LineSubGeometry"),h=t("awayjs-display/lib/entities/Mesh"),l=t("awayjs-display/lib/prefabs/PrefabBase"),p=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i="triangleSubGeometry"),t.call(this),this._geomDirty=!0,this._uvDirty=!0,this._geometryTypeDirty=!0,this._geometry=new a,this._material=e,this._geometryType=i}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.PRIMITIVE_PREFAB},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geometryType",{get:function(){return this._geometryType},set:function(t){this._geometryType!=t&&(this._geometryType=t,this.invalidateGeometryType())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._iValidate(),this._geometry},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._material},set:function(t){if(t!=this._material){this._material=t;for(var e=this._pObjects.length,i=0;e>i;i++)this._pObjects[i].material=this._material}},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(){throw new r},e.prototype._pBuildUVs=function(){throw new r},e.prototype.invalidateGeometryType=function(){this._geometryTypeDirty=!0,this._geomDirty=!0,this._uvDirty=!0},e.prototype._pInvalidateGeometry=function(){this._geomDirty=!0},e.prototype._pInvalidateUVs=function(){this._uvDirty=!0},e.prototype.updateGeometryType=function(){if(this._subGeometry&&this._geometry.removeSubGeometry(this._subGeometry),"triangleSubGeometry"==this._geometryType){var t=new n(!0);t.autoDeriveNormals=!1,t.autoDeriveTangents=!1,t.autoDeriveUVs=!1,this._geometry.addSubGeometry(t),this._subGeometry=t}else"lineSubGeometry"==this._geometryType&&this._geometry.addSubGeometry(this._subGeometry=new o);this._geometryTypeDirty=!1},e.prototype.updateGeometry=function(){this._pBuildGeometry(this._subGeometry,this._geometryType),this._geomDirty=!1},e.prototype.updateUVs=function(){this._pBuildUVs(this._subGeometry,this._geometryType),this._uvDirty=!1},e.prototype._iValidate=function(){this._geometryTypeDirty&&this.updateGeometryType(),this._geomDirty&&this.updateGeometry(),this._uvDirty&&this.updateUVs()},e.prototype._pCreateObject=function(){var t=new h(this._geometry,this._material);return t._iSourcePrefab=this,t},e}(l);e.exports=p},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-display/lib/base/Geometry":void 0,"awayjs-display/lib/base/LineSubGeometry":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-display/lib/entities/Mesh":void 0,"awayjs-display/lib/prefabs/PrefabBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/prefabs/PrimitiveSpherePrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase"),r=function(t){function e(e,i,s,r){void 0===e&&(e=50),void 0===i&&(i=16),void 0===s&&(s=12),void 0===r&&(r=!0),t.call(this),this._radius=e,this._segmentsW=i,this._segmentsH=s,this._yUp=r}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsW",{get:function(){return this._segmentsW},set:function(t){this._segmentsW=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsH",{get:function(){return this._segmentsH},set:function(t){this._segmentsH=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(t,e){var i,s,r,a,n,o,h,l,p,d,u;if("triangleSubGeometry"==e){var c=t;u=(this._segmentsH+1)*(this._segmentsW+1),u==c.numVertices&&null!=c.indices?(i=c.indices,s=c.positions,r=c.vertexNormals,a=c.vertexTangents):(i=new Array((this._segmentsH-1)*this._segmentsW*6),s=new Array(3*u),r=new Array(3*u),a=new Array(3*u),this._pInvalidateUVs()),h=0,l=0;var _,y,g;for(o=0;o<=this._segmentsH;++o){_=h;var f=Math.PI*o/this._segmentsH,m=-this._radius*Math.cos(f),b=this._radius*Math.sin(f);for(n=0;n<=this._segmentsW;++n){var w=2*Math.PI*n/this._segmentsW,v=b*Math.cos(w),x=b*Math.sin(w),P=1/Math.sqrt(v*v+x*x+m*m),D=Math.sqrt(x*x+v*v);if(this._yUp?(y=0,g=D>.007?v/D:0,p=-m,d=x):(y=D>.007?v/D:0,g=0,p=x,d=m),n==this._segmentsW?(s[h]=s[_],s[h+1]=s[_+1],s[h+2]=s[_+2],r[h]=r[_]+v*P*.5,r[h+1]=r[_+1]+p*P*.5,r[h+2]=r[_+2]+d*P*.5,a[h]=D>.007?-x/D:1,a[h+1]=y,a[h+2]=g):(s[h]=v,s[h+1]=p,s[h+2]=d,r[h]=v*P,r[h+1]=p*P,r[h+2]=d*P,a[h]=D>.007?-x/D:1,a[h+1]=y,a[h+2]=g),n>0&&o>0){var j=(this._segmentsW+1)*o+n,C=(this._segmentsW+1)*o+n-1,T=(this._segmentsW+1)*(o-1)+n-1,A=(this._segmentsW+1)*(o-1)+n;o==this._segmentsH?(s[h]=s[_],s[h+1]=s[_+1],s[h+2]=s[_+2],i[l++]=j,i[l++]=T,i[l++]=A):1==o?(i[l++]=j,i[l++]=C,i[l++]=T):(i[l++]=j,i[l++]=C,i[l++]=T,i[l++]=j,i[l++]=T,i[l++]=A)}h+=3}}c.updateIndices(i),c.updatePositions(s),c.updateVertexNormals(r),c.updateVertexTangents(a)}else if("lineSubGeometry"==e){var S,O,E,M=t,R=(this._segmentsH-1)*this._segmentsW*2;for(null!=M.indices&&R==M.numSegments?(S=M.startPositions,O=M.endPositions,E=M.thickness):(S=new Array(3*R),O=new Array(3*R),E=new Array(R)),h=0,l=0,o=0;o<=this._segmentsH;++o){var f=Math.PI*o/this._segmentsH,m=-this._radius*Math.cos(f),b=this._radius*Math.sin(f);for(n=0;n<=this._segmentsW;++n){var w=2*Math.PI*n/this._segmentsW,v=b*Math.cos(w),x=b*Math.sin(w);this._yUp?(p=-m,d=x):(p=x,d=m),n>0&&o>0&&(o<this._segmentsH&&(O[h]=v,O[h+1]=p,O[h+2]=d,E[l++]=1,h+=3),S[h]=O[h-6*this._segmentsW],S[h+1]=O[h+1-6*this._segmentsW],S[h+2]=O[h+2-6*this._segmentsW],O[h]=v,O[h+1]=p,O[h+2]=d,E[l++]=1,h+=3),n<this._segmentsW&&o>0&&o<this._segmentsH&&(S[h]=v,S[h+1]=p,S[h+2]=d)}}M.updatePositions(S,O),M.updateThickness(E)}},e.prototype._pBuildUVs=function(t,e){var i,s,r,a=(this._segmentsH+1)*(this._segmentsW+1);if("triangleSubGeometry"==e){a=(this._segmentsH+1)*(this._segmentsW+1);var n=t;r=a==n.numVertices&&null!=n.uvs?n.uvs:new Array(2*a);var o=0;for(s=0;s<=this._segmentsH;++s)for(i=0;i<=this._segmentsW;++i)r[o++]=i/this._segmentsW*n.scaleU,r[o++]=s/this._segmentsH*n.scaleV;n.updateUVs(r)}},e}(s);e.exports=r},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/prefabs/PrimitiveTorusPrefab":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/prefabs/PrimitivePrefabBase"),r=function(t){function e(e,i,s,r,a){void 0===e&&(e=50),void 0===i&&(i=50),void 0===s&&(s=16),void 0===r&&(r=8),void 0===a&&(a=!0),t.call(this),this._numVertices=0,this._radius=e,this._tubeRadius=i,this._segmentsR=s,this._segmentsT=r,this._yUp=a}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tubeRadius",{get:function(){return this._tubeRadius},set:function(t){this._tubeRadius=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsR",{get:function(){return this._segmentsR},set:function(t){this._segmentsR=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentsT",{get:function(){return this._segmentsT},set:function(t){this._segmentsT=t,this._pInvalidateGeometry(),this._pInvalidateUVs()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yUp",{get:function(){return this._yUp},set:function(t){this._yUp=t,this._pInvalidateGeometry()},enumerable:!0,configurable:!0}),e.prototype._pBuildGeometry=function(t,e){var i,s,r,a,n,o,h,l,p,d,u,c,_,y,g,f,m=0;if("triangleSubGeometry"==e){var b=t;this._numVertices=(this._segmentsT+1)*(this._segmentsR+1),m=this._segmentsT*this._segmentsR*6,this._numVertices==b.numVertices?(i=b.indices,s=b.positions,r=b.vertexNormals,a=b.vertexTangents):(i=new Array(m),s=new Array(3*this._numVertices),r=new Array(3*this._numVertices),a=new Array(3*this._numVertices),this._pInvalidateUVs()),g=0,f=0;var w,v,x,P,D,j,C,T,A,S,O,E=2*Math.PI/this._segmentsR,M=2*Math.PI/this._segmentsT,R=0,I=0;for(o=0;o<=this._segmentsT;++o)for(R=3*I,n=0;n<=this._segmentsR;++n)_=n*E,y=o*M,O=Math.cos(y),d=O*Math.cos(_),u=O*Math.sin(_),c=Math.sin(y),h=this._radius*Math.cos(_)+this._tubeRadius*d,l=this._radius*Math.sin(_)+this._tubeRadius*u,p=o==this._segmentsT?0:this._tubeRadius*c,this._yUp?(D=-c,j=u,x=0,P=O?d/O:h/this._radius,w=-p,v=l):(D=u,j=c,x=O?d/O:h/this._radius,P=0,w=l,v=p),n==this._segmentsR?(s[g]=h,s[g+1]=s[R+1],s[g+2]=s[R+2]):(s[g]=h,s[g+1]=w,s[g+2]=v),r[g]=d,r[g+1]=D,r[g+2]=j,a[g]=-(O?u/O:l/this._radius),a[g+1]=x,a[g+2]=P,g+=3,n>0&&o>0&&(C=I,T=I-1,A=T-this._segmentsR-1,S=C-this._segmentsR-1,i[f++]=C,i[f++]=T,i[f++]=A,i[f++]=C,i[f++]=A,i[f++]=S),I++;b.updateIndices(i),b.updatePositions(s),b.updateVertexNormals(r),b.updateVertexTangents(a)}},e.prototype._pBuildUVs=function(t,e){var i,s,r;if("triangleSubGeometry"==e){var a=t;r=a.uvs&&this._numVertices==a.numVertices?a.uvs:new Array(2*this._numVertices);var n=0;for(s=0;s<=this._segmentsT;++s)for(i=0;i<=this._segmentsR;++i)r[n++]=i/this._segmentsR*a.scaleU,r[n++]=s/this._segmentsT*a.scaleV;a.updateUVs(r)}},e}(s);e.exports=r},{"awayjs-display/lib/prefabs/PrimitivePrefabBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/render/CSSDefaultRenderer":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),r=t("awayjs-core/lib/projections/CoordinateSystem"),a=t("awayjs-display/lib/render/CSSRendererBase"),n=t("awayjs-display/lib/traverse/CSSEntityCollector"),o=function(t){function e(){t.call(this),this._contextMatrix=new s,this._skyboxProjection=new s,this._transform=new s,this._container=document.createElement("div"),this._container.style.overflow="hidden",this._container.style.position="absolute",document.body.appendChild(this._container),this._context=document.createElement("div"),this._contextStyle=this._context.style,this._contextStyle.position="absolute",this._contextStyle.transformStyle=this._contextStyle["-webkit-transform-style"]=this._contextStyle["-moz-transform-style"]=this._contextStyle["-o-transform-style"]=this._contextStyle["-ms-transform-style"]="preserve-3d",this._contextStyle.transformOrigin=this._contextStyle["-webkit-transform-origin"]=this._contextStyle["-moz-transform-origin"]=this._contextStyle["-o-transform-origin"]=this._contextStyle["-ms-transform-origin"]="0% 0%",this._container.appendChild(this._context)}return i(e,t),e.prototype.render=function(e){t.prototype.render.call(this,e),this._pBackBufferInvalid&&this.pUpdateBackBuffer(),this._iRender(e),this._pBackBufferInvalid=!1},e.prototype.pDraw=function(t){for(var e=document.styleSheets[document.styleSheets.length-1],i=0;i<e.cssRules.length;i++){var s=e.cssRules[i].style;s.transform=s["-webkit-transform"]=s["-moz-transform"]=s["-o-transform"]=s["-ms-transform"]=t.camera.projection.coordinateSystem==r.RIGHT_HANDED?"":"scale3d(1, -1, 1) translateY(-"+s.height+")"}this.drawRenderables(this._renderableHead,t),this._activeMaterial=null},e.prototype.pUpdateBackBuffer=function(){this._container.style.width=this._width+"px",this._container.style.height=this._height+"px",this._container.style.clip="rect(0px, "+this._width+"px, "+this._height+"px, 0px)",this._contextMatrix.rawData[0]=this._width/2,this._contextMatrix.rawData[5]=-this._height/2,this._contextMatrix.rawData[10]=-1,this._contextMatrix.rawData[12]=this._width/2,this._contextMatrix.rawData[13]=this._height/2,this._contextStyle.transform=this._contextStyle["-webkit-transform"]=this._contextStyle["-moz-transform"]=this._contextStyle["-o-transform"]=this._contextStyle["-ms-transform"]=this._contextMatrix.toString(),this._pBackBufferInvalid=!1},e.prototype.drawSkybox=function(){},e.prototype.drawRenderables=function(t,e){for(var i=e.camera.viewProjection.clone();t;){this._activeMaterial=t.materialOwner.material,this._transform.copyRawDataFrom(t.renderSceneTransform.rawData),this._transform.append(i);var s=t.htmlElement.style;s.transform=s["-webkit-transform"]=s["-moz-transform"]=s["-o-transform"]=s["-ms-transform"]=this._transform.toString(),s.transformStyle=s["-webkit-transform-style"]=s["-moz-transform-style"]=s["-o-transform-style"]=s["-ms-transform-style"]="preserve-3d",this._context.contains(t.htmlElement)||this._context.appendChild(t.htmlElement),t=t.next}},e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype._iCreateEntityCollector=function(){return new n},e}(a);e.exports=o},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/projections/CoordinateSystem":void 0,"awayjs-display/lib/render/CSSRendererBase":void 0,"awayjs-display/lib/traverse/CSSEntityCollector":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/render/CSSRendererBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Point"),r=t("awayjs-core/lib/geom/Rectangle"),a=t("awayjs-core/lib/errors/AbstractMethodError"),n=t("awayjs-core/lib/events/EventDispatcher"),o=t("awayjs-display/lib/pool/CSSBillboardRenderable"),h=t("awayjs-display/lib/pool/CSSLineSegmentRenderable"),l=t("awayjs-display/lib/pool/RenderablePool"),p=t("awayjs-display/lib/events/RendererEvent"),d=function(t){function e(e,i,a){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===a&&(a="baseline"),t.call(this),this._backgroundR=0,this._backgroundG=0,this._backgroundB=0,this._backgroundAlpha=1,this._shareContext=!1,this._pBackBufferInvalid=!0,this._depthTextureInvalid=!0,this._viewPort=new r,this._scissorRect=new r,this._localPos=new s,this._globalPos=new s,this._billboardRenderablePool=l.getPool(o),this._lineSegmentRenderablePool=l.getPool(h),this._viewPort=new r,0==this._width&&(this.width=window.innerWidth),0==this._height&&(this.height=window.innerHeight)}return i(e,t),Object.defineProperty(e.prototype,"viewPort",{get:function(){return this._viewPort},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scissorRect",{get:function(){return this._scissorRect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._localPos.x
},set:function(t){this.x!=t&&this.updateGlobalPos()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._localPos.y},set:function(t){this.y!=t&&(this._globalPos.y=this._localPos.y=t,this.updateGlobalPos())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width!=t&&(this._width=t,this._scissorRect.width=t,this._viewPort.width=t,this._pBackBufferInvalid=!0,this._depthTextureInvalid=!0,this.notifyViewportUpdate(),this.notifyScissorUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height!=t&&(this._height=t,this._scissorRect.height=t,this._viewPort.height=t,this._pBackBufferInvalid=!0,this._depthTextureInvalid=!0,this.notifyViewportUpdate(),this.notifyScissorUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_iBackgroundR",{get:function(){return this._backgroundR},set:function(t){this._backgroundR!=t&&(this._backgroundR=t,this._pBackBufferInvalid=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_iBackgroundG",{get:function(){return this._backgroundG},set:function(t){this._backgroundG!=t&&(this._backgroundG=t,this._pBackBufferInvalid=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_iBackgroundB",{get:function(){return this._backgroundB},set:function(t){this._backgroundB!=t&&(this._backgroundB=t,this._pBackBufferInvalid=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shareContext",{get:function(){return this._shareContext},set:function(t){this._shareContext!=t&&(this._shareContext=t,this.updateGlobalPos())},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){},e.prototype.render=function(){this._viewportDirty=!1,this._scissorDirty=!1},e.prototype._iRender=function(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=0),t.entityHead&&this.pExecuteRender(t,i)},e.prototype._iRenderCascades=function(){},e.prototype.pCollectRenderables=function(t){this._renderableHead=null;var e=t.entityHead;for(this._pCamera=t.camera,this._iEntryPoint=this._pCamera.scenePosition,this._pCameraForward=this._pCamera.transform.forwardVector;e;)e.entity._iCollectRenderables(this),e=e.next},e.prototype.pExecuteRender=function(t,e){void 0===e&&(e=null),this.pCollectRenderables(t),this.pDraw(t)},e.prototype.pDraw=function(){throw new a},Object.defineProperty(e.prototype,"_iBackgroundAlpha",{get:function(){return this._backgroundAlpha},set:function(t){this._backgroundAlpha!=t&&(this._backgroundAlpha=t,this._pBackBufferInvalid=!0)},enumerable:!0,configurable:!0}),e.prototype.applyBillboard=function(t){this._applyRenderable(this._billboardRenderablePool.getItem(t))},e.prototype.applyLineSubMesh=function(){},e.prototype.applySkybox=function(){},e.prototype.applyTriangleSubMesh=function(){},e.prototype._applyRenderable=function(t){var e=t.materialOwner.material,i=t.sourceEntity,s=i.scenePosition;e&&(t.materialId=e._iMaterialId,t.cascaded=!1,s=this._iEntryPoint.subtract(s),t.zIndex=i.zOffset-s.dotProduct(this._pCameraForward),t.renderSceneTransform=t.sourceEntity.getRenderSceneTransform(this._pCamera),t.next=this._renderableHead,this._renderableHead=t)},e.prototype.notifyScissorUpdate=function(){this._scissorDirty||(this._scissorDirty=!0,this._scissorUpdated||(this._scissorUpdated=new p(p.SCISSOR_UPDATED)),this.dispatchEvent(this._scissorUpdated))},e.prototype.notifyViewportUpdate=function(){this._viewportDirty||(this._viewportDirty=!0,this._viewPortUpdated||(this._viewPortUpdated=new p(p.VIEWPORT_UPDATED)),this.dispatchEvent(this._viewPortUpdated))},e.prototype.updateGlobalPos=function(){this._viewPort.x=this._globalPos.x,this._viewPort.y=this._globalPos.y,this.notifyViewportUpdate(),this.notifyScissorUpdate()},e.prototype._iCreateEntityCollector=function(){throw new a},e}(n);e.exports=d},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-core/lib/geom/Point":void 0,"awayjs-core/lib/geom/Rectangle":void 0,"awayjs-display/lib/events/RendererEvent":void 0,"awayjs-display/lib/pool/CSSBillboardRenderable":void 0,"awayjs-display/lib/pool/CSSLineSegmentRenderable":void 0,"awayjs-display/lib/pool/RenderablePool":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/render/IRenderer":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/sort/IEntitySorter":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/sort/RenderableMergeSort":[function(t,e){var i=function(){function t(){}return t.prototype.sortBlendedRenderables=function(t){var e,i,s;if(!t||!t.next)return t;for(s=t,i=t.next;i;)i=i.next,i&&(s=s.next,i=i.next);e=s.next,s.next=null,t=this.sortBlendedRenderables(t),e=this.sortBlendedRenderables(e);var r,a,n;if(!t)return e;if(!e)return t;for(;t&&e;)t.zIndex<e.zIndex?(n=t,t=t.next):(n=e,e=e.next),r?a.next=n:r=n,a=n;return t?a.next=t:e&&(a.next=e),r},t.prototype.sortOpaqueRenderables=function(t){var e,i,s;if(!t||!t.next)return t;for(s=t,i=t.next;i;)i=i.next,i&&(s=s.next,i=i.next);e=s.next,s.next=null,t=this.sortOpaqueRenderables(t),e=this.sortOpaqueRenderables(e);var r,a,n,o=0;if(!t)return e;if(!e)return t;for(;t&&e&&null!=t&&null!=e;){var h=t.renderOrderId,l=e.renderOrderId;if(h==l){var p=t.materialId,d=e.materialId;o=p==d?t.zIndex<e.zIndex?1:-1:p>d?1:-1}else o=h>l?1:-1;0>o?(n=t,t=t.next):(n=e,e=e.next),r?(a.next=n,a=n):(r=n,a=n)}return t?a.next=t:e&&(a.next=e),r},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/text/AntiAliasType":[function(t,e){var i=function(){function t(){}return t.ADVANCED="advanced",t.NORMAL="normal",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/text/GridFitType":[function(t,e){var i=function(){function t(){}return t.NONE="none",t.PIXEL="pixel",t.SUBPIXEL="subpixel",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/text/TextFieldAutoSize":[function(t,e){var i=function(){function t(){}return t.CENTER="center",t.LEFT="left",t.NONE="none",t.RIGHT="right",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/text/TextFieldType":[function(t,e){var i=function(){function t(){}return t.DYNAMIC="dynamic",t.INPUT="input",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/text/TextFormatAlign":[function(t,e){var i=function(){function t(){this.CENTER="center",this.JUSTIFY="justify",this.LEFT="left",this.RIGHT="right"}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/text/TextFormat":[function(t,e){var i=function(){function t(t,e,i,s,r,a,n,o,h,l,p,d,u){void 0===t&&(t="Times New Roman"),void 0===e&&(e=12),void 0===i&&(i=0),void 0===s&&(s=!1),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===n&&(n=""),void 0===o&&(o=""),void 0===h&&(h="left"),void 0===l&&(l=0),void 0===p&&(p=0),void 0===d&&(d=0),void 0===u&&(u=0),this.tabStops=new Array,this.font=t,this.size=e,this.bold=s,this.italic=r,this.underline=a,this.url=n,this.target=o,this.align=h,this.leftMargin=l,this.rightMargin=p,this.indent=d,this.leading=u}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/text/TextInteractionMode":[function(t,e){var i=function(){function t(){}return t.NORMAL="normal",t.SELECTION="selection",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/text/TextLineMetrics":[function(t,e){var i=function(){function t(t,e,i,s,r,a){void 0===t&&(t=0/0),void 0===e&&(e=0/0),void 0===i&&(i=0/0),void 0===s&&(s=0/0),void 0===r&&(r=0/0),void 0===a&&(a=0/0)}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-display/lib/traverse/CSSEntityCollector":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/traverse/CollectorBase"),r=function(t){function e(){t.call(this)}return i(e,t),e}(s);e.exports=r},{"awayjs-display/lib/traverse/CollectorBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/traverse/CollectorBase":[function(t,e){var i=t("awayjs-display/lib/pool/EntityListItemPool"),s=function(){function t(){this._numCullPlanes=0,this._pNumEntities=0,this._pNumInteractiveEntities=0,this._pEntityListItemPool=new i}return Object.defineProperty(t.prototype,"camera",{get:function(){return this._pCamera},set:function(t){this._pCamera=t,this._cullPlanes=this._pCamera.frustumPlanes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cullPlanes",{get:function(){return this._customCullPlanes},set:function(t){this._customCullPlanes=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entityHead",{get:function(){return this._pEntityHead},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numEntities",{get:function(){return this._pNumEntities},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numInteractiveEntities",{get:function(){return this._pNumInteractiveEntities},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._pNumEntities=this._pNumInteractiveEntities=0,this._cullPlanes=this._customCullPlanes?this._customCullPlanes:this._pCamera?this._pCamera.frustumPlanes:null,this._numCullPlanes=this._cullPlanes?this._cullPlanes.length:0,this._pEntityHead=null,this._pEntityListItemPool.freeAll()},t.prototype.enterNode=function(t){var e=this.scene._iCollectionMark!=t._iCollectionMark&&t.isInFrustum(this._cullPlanes,this._numCullPlanes);return t._iCollectionMark=this.scene._iCollectionMark,e},t.prototype.applyDirectionalLight=function(){},t.prototype.applyEntity=function(t){this._pNumEntities++,t._iIsMouseEnabled()&&this._pNumInteractiveEntities++;var e=this._pEntityListItemPool.getItem();e.entity=t,e.next=this._pEntityHead,this._pEntityHead=e},t.prototype.applyLightProbe=function(){},t.prototype.applyPointLight=function(){},t.prototype.applySkybox=function(){},t}();e.exports=s},{"awayjs-display/lib/pool/EntityListItemPool":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/traverse/EntityCollector":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/traverse/CollectorBase"),r=function(t){function e(){t.call(this),this._pNumLights=0,this._numDirectionalLights=0,this._numPointLights=0,this._numLightProbes=0,this._pLights=new Array,this._directionalLights=new Array,this._pointLights=new Array,this._lightProbes=new Array}return i(e,t),Object.defineProperty(e.prototype,"directionalLights",{get:function(){return this._directionalLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightProbes",{get:function(){return this._lightProbes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lights",{get:function(){return this._pLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointLights",{get:function(){return this._pointLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skyBox",{get:function(){return this._pSkybox},enumerable:!0,configurable:!0}),e.prototype.applyDirectionalLight=function(t){this._directionalLights[this._numDirectionalLights++]=t},e.prototype.applyLightProbe=function(t){this._lightProbes[this._numLightProbes++]=t},e.prototype.applyPointLight=function(t){this._pointLights[this._numPointLights++]=t},e.prototype.applySkybox=function(t){this._pSkybox=t},e.prototype.clear=function(){t.prototype.clear.call(this),this._pSkybox=null,this._pNumLights>0&&(this._pLights.length=this._pNumLights=0),this._numDirectionalLights>0&&(this._directionalLights.length=this._numDirectionalLights=0),this._numPointLights>0&&(this._pointLights.length=this._numPointLights=0),this._numLightProbes>0&&(this._lightProbes.length=this._numLightProbes=0)},e}(s);e.exports=r},{"awayjs-display/lib/traverse/CollectorBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/traverse/ICollector":[function(){},{}],"awayjs-dist/node_modules/awayjs-display/lib/traverse/RaycastCollector":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-display/lib/traverse/CollectorBase"),a=function(t){function e(){t.call(this),this._rayPosition=new s,this._rayDirection=new s,this._iCollectionMark=0}return i(e,t),Object.defineProperty(e.prototype,"rayPosition",{get:function(){return this._rayPosition},set:function(t){this._rayPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rayDirection",{get:function(){return this._rayDirection},set:function(t){this._rayDirection=t},enumerable:!0,configurable:!0}),e.prototype.enterNode=function(t){return t.isIntersectingRay(this._rayPosition,this._rayDirection)},e}(r);e.exports=a},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/traverse/CollectorBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/traverse/ShadowCasterCollector":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/traverse/CollectorBase"),r=function(t){function e(){t.call(this)}return i(e,t),e.prototype.enterNode=function(e){var i=this.scene._iCollectionMark!=e._iCollectionMark&&e.isCastingShadow();return i?t.prototype.enterNode.call(this,e):(e._iCollectionMark=this.scene._iCollectionMark,!1)},e}(s);e.exports=r},{"awayjs-display/lib/traverse/CollectorBase":void 0}],"awayjs-dist/node_modules/awayjs-display/lib/utils/Cast":[function(t,e){var i=t("awayjs-core/lib/base/BitmapData"),s=t("awayjs-core/lib/utils/ByteArray"),r=t("awayjs-display/lib/errors/CastError"),a=t("awayjs-core/lib/textures/BitmapTexture"),n=t("awayjs-core/lib/textures/ImageTexture"),o=function(){function t(){}return t.string=function(t){return"function"==typeof t&&(t=new t),"string"==typeof t?t:t},t.byteArray=function(t){return"function"==typeof t&&(t=new t),t instanceof s?t:t},t.isHex=function(t){for(var e=t.length,i=0;e>i;++i)if(-1==this._hexChars.indexOf(t.charAt(i)))return!1;return!0},t.tryColor=function(t){if("number"==typeof t)return Math.floor(t);if("string"==typeof t){if("random"==t)return Math.floor(16777216*Math.random());if(null==this._colorNames&&(this._colorNames=new Object,this._colorNames.steelblue=4620980,this._colorNames.royalblue=267920,this._colorNames.cornflowerblue=6591981,this._colorNames.lightsteelblue=11584734,this._colorNames.mediumslateblue=8087790,this._colorNames.slateblue=6970061,this._colorNames.darkslateblue=4734347,this._colorNames.midnightblue=1644912,this._colorNames.navy=128,this._colorNames.darkblue=139,this._colorNames.mediumblue=205,this._colorNames.blue=255,this._colorNames.dodgerblue=2003199,this._colorNames.deepskyblue=49151,this._colorNames.lightskyblue=8900346,this._colorNames.skyblue=8900331,this._colorNames.lightblue=11393254,this._colorNames.powderblue=11591910,this._colorNames.azure=15794175,this._colorNames.lightcyan=14745599,this._colorNames.paleturquoise=11529966,this._colorNames.mediumturquoise=4772300,this._colorNames.lightseagreen=2142890,this._colorNames.darkcyan=35723,this._colorNames.teal=32896,this._colorNames.cadetblue=6266528,this._colorNames.darkturquoise=52945,this._colorNames.aqua=65535,this._colorNames.cyan=65535,this._colorNames.turquoise=4251856,this._colorNames.aquamarine=8388564,this._colorNames.mediumaquamarine=6737322,this._colorNames.darkseagreen=9419919,this._colorNames.mediumseagreen=3978097,this._colorNames.seagreen=3050327,this._colorNames.darkgreen=25600,this._colorNames.green=32768,this._colorNames.forestgreen=2263842,this._colorNames.limegreen=3329330,this._colorNames.lime=65280,this._colorNames.chartreuse=8388352,this._colorNames.lawngreen=8190976,this._colorNames.greenyellow=11403055,this._colorNames.yellowgreen=10145074,this._colorNames.palegreen=10025880,this._colorNames.lightgreen=9498256,this._colorNames.springgreen=65407,this._colorNames.mediumspringgreen=64154,this._colorNames.darkolivegreen=5597999,this._colorNames.olivedrab=7048739,this._colorNames.olive=8421376,this._colorNames.darkkhaki=12433259,this._colorNames.darkgoldenrod=12092939,this._colorNames.goldenrod=14329120,this._colorNames.gold=16766720,this._colorNames.yellow=16776960,this._colorNames.khaki=15787660,this._colorNames.palegoldenrod=15657130,this._colorNames.blanchedalmond=16772045,this._colorNames.moccasin=16770229,this._colorNames.wheat=16113331,this._colorNames.navajowhite=16768685,this._colorNames.burlywood=14596231,this._colorNames.tan=13808780,this._colorNames.rosybrown=12357519,this._colorNames.sienna=10506797,this._colorNames.saddlebrown=9127187,this._colorNames.chocolate=13789470,this._colorNames.peru=13468991,this._colorNames.sandybrown=16032864,this._colorNames.darkred=9109504,this._colorNames.maroon=8388608,this._colorNames.brown=10824234,this._colorNames.firebrick=11674146,this._colorNames.indianred=13458524,this._colorNames.lightcoral=15761536,this._colorNames.salmon=16416882,this._colorNames.darksalmon=15308410,this._colorNames.lightsalmon=16752762,this._colorNames.coral=16744272,this._colorNames.tomato=16737095,this._colorNames.darkorange=16747520,this._colorNames.orange=16753920,this._colorNames.orangered=16729344,this._colorNames.crimson=14423100,this._colorNames.red=16711680,this._colorNames.deeppink=16716947,this._colorNames.fuchsia=16711935,this._colorNames.magenta=16711935,this._colorNames.hotpink=16738740,this._colorNames.lightpink=16758465,this._colorNames.pink=16761035,this._colorNames.palevioletred=14381203,this._colorNames.mediumvioletred=13047173,this._colorNames.purple=8388736,this._colorNames.darkmagenta=9109643,this._colorNames.mediumpurple=9662683,this._colorNames.blueviolet=9055202,this._colorNames.indigo=4915330,this._colorNames.darkviolet=9699539,this._colorNames.darkorchid=10040012,this._colorNames.mediumorchid=12211667,this._colorNames.orchid=14315734,this._colorNames.violet=15631086,this._colorNames.plum=14524637,this._colorNames.thistle=14204888,this._colorNames.lavender=15132410,this._colorNames.ghostwhite=16316671,this._colorNames.aliceblue=15792383,this._colorNames.mintcream=16121850,this._colorNames.honeydew=15794160,this._colorNames.lightgoldenrodyellow=16448210,this._colorNames.lemonchiffon=16775885,this._colorNames.cornsilk=16775388,this._colorNames.lightyellow=16777184,this._colorNames.ivory=16777200,this._colorNames.floralwhite=16775920,this._colorNames.linen=16445670,this._colorNames.oldlace=16643558,this._colorNames.antiquewhite=16444375,this._colorNames.bisque=16770244,this._colorNames.peachpuff=16767673,this._colorNames.papayawhip=16773077,this._colorNames.beige=16119260,this._colorNames.seashell=16774638,this._colorNames.lavenderblush=16773365,this._colorNames.mistyrose=16770273,this._colorNames.snow=16775930,this._colorNames.white=16777215,this._colorNames.whitesmoke=16119285,this._colorNames.gainsboro=14474460,this._colorNames.lightgrey=13882323,this._colorNames.silver=12632256,this._colorNames.darkgrey=11119017,this._colorNames.grey=8421504,this._colorNames.lightslategrey=7833753,this._colorNames.slategrey=7372944,this._colorNames.dimgrey=6908265,this._colorNames.darkslategrey=3100495,this._colorNames.black=0,this._colorNames.transparent=4278190080),null!=this._colorNames[t])return this._colorNames[t];if(6==t.length&&this.isHex(t))return parseInt("0x"+t)}return null},t.color=function(t){var e=this.tryColor(t);if(null==e)throw new r("Can't cast to color: "+t);return e},t.tryClass=function(t){if(this._notClasses[t])return t;var e=this._classes[t];if(null!=e)return e;try{return e=window[t],this._classes[t]=e,e}catch(i){}return this._notClasses[t]=!0,t},t.bitmapData=function(t){if(null==t)return null;if("string"==typeof t&&(t=this.tryClass(t)),"function"==typeof t)try{t=new t}catch(e){t=new t(0,0)}if(t instanceof i)return t;if(t instanceof n&&(t=t.htmlImageElement),t instanceof HTMLImageElement){var s=t,a=new i(s.width,s.height,!0,0);return a.draw(s),a}throw new r("Can't cast to BitmapData: "+t)},t.bitmapTexture=function(e){if(null==e)return null;if("string"==typeof e&&(e=this.tryClass(e)),"function"==typeof e)try{e=new e}catch(i){e=new e(0,0)}if(e instanceof a)return e;try{var s=t.bitmapData(e);return new a(s)}catch(i){}throw new r("Can't cast to BitmapTexture: "+e)},t._hexChars="0123456789abcdefABCDEF",t._notClasses=new Object,t._classes=new Object,t}();e.exports=o},{"awayjs-core/lib/base/BitmapData":void 0,"awayjs-core/lib/textures/BitmapTexture":void 0,"awayjs-core/lib/textures/ImageTexture":void 0,"awayjs-core/lib/utils/ByteArray":void 0,"awayjs-display/lib/errors/CastError":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/ParticleAnimationSet":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/animators/AnimationSetBase"),r=t("awayjs-stagegl/lib/animators/data/AnimationRegisterCache"),a=t("awayjs-renderergl/lib/animators/data/AnimationSubGeometry"),n=t("awayjs-renderergl/lib/animators/data/ParticleAnimationData"),o=t("awayjs-renderergl/lib/animators/data/ParticleProperties"),h=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),l=t("awayjs-renderergl/lib/animators/nodes/ParticleTimeNode"),p=function(t){function e(e,i,s){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===s&&(s=!1),t.call(this),this._animationSubGeometries=new Object,this._particleNodes=new Array,this._localDynamicNodes=new Array,this._localStaticNodes=new Array,this._totalLenOfOneVertex=0,this.addAnimation(this._timeNode=new l(e,i,s))}return i(e,t),Object.defineProperty(e.prototype,"particleNodes",{get:function(){return this._particleNodes},enumerable:!0,configurable:!0}),e.prototype.addAnimation=function(e){var i,s=e;for(s._iProcessAnimationSetting(this),s.mode==h.LOCAL_STATIC?(s._iDataOffset=this._totalLenOfOneVertex,this._totalLenOfOneVertex+=s.dataLength,this._localStaticNodes.push(s)):s.mode==h.LOCAL_DYNAMIC&&this._localDynamicNodes.push(s),i=this._particleNodes.length-1;i>=0&&!(this._particleNodes[i].priority<=s.priority);i--);this._particleNodes.splice(i+1,0,s),t.prototype.addAnimation.call(this,e)},e.prototype.activate=function(){},e.prototype.deactivate=function(){},e.prototype.getAGALVertexCode=function(t){this._iAnimationRegisterCache=t.animationRegisterCache,null==this._iAnimationRegisterCache&&(this._iAnimationRegisterCache=t.animationRegisterCache=new r(t.profile)),this._iAnimationRegisterCache.vertexConstantOffset=t.numUsedVertexConstants,this._iAnimationRegisterCache.vertexAttributesOffset=t.numUsedStreams,this._iAnimationRegisterCache.varyingsOffset=t.numUsedVaryings,this._iAnimationRegisterCache.fragmentConstantOffset=t.numUsedFragmentConstants,this._iAnimationRegisterCache.hasUVNode=this.hasUVNode,this._iAnimationRegisterCache.needVelocity=this.needVelocity,this._iAnimationRegisterCache.hasBillboard=this.hasBillboard,this._iAnimationRegisterCache.sourceRegisters=t.animatableAttributes,this._iAnimationRegisterCache.targetRegisters=t.animationTargetRegisters,this._iAnimationRegisterCache.needFragmentAnimation=t.usesFragmentAnimation,this._iAnimationRegisterCache.needUVAnimation=!t.usesUVTransform,this._iAnimationRegisterCache.hasColorAddNode=this.hasColorAddNode,this._iAnimationRegisterCache.hasColorMulNode=this.hasColorMulNode,this._iAnimationRegisterCache.reset();var i="";i+=this._iAnimationRegisterCache.getInitCode();var s,a;for(a=0;a<this._particleNodes.length;a++)s=this._particleNodes[a],s.priority<e.POST_PRIORITY&&(i+=s.getAGALVertexCode(t,this._iAnimationRegisterCache));for(i+=this._iAnimationRegisterCache.getCombinationCode(),a=0;a<this._particleNodes.length;a++)s=this._particleNodes[a],s.priority>=e.POST_PRIORITY&&s.priority<e.COLOR_PRIORITY&&(i+=s.getAGALVertexCode(t,this._iAnimationRegisterCache));for(i+=this._iAnimationRegisterCache.initColorRegisters(),a=0;a<this._particleNodes.length;a++)s=this._particleNodes[a],s.priority>=e.COLOR_PRIORITY&&(i+=s.getAGALVertexCode(t,this._iAnimationRegisterCache));return i+=this._iAnimationRegisterCache.getColorPassCode()},e.prototype.getAGALUVCode=function(t){var e="";if(this.hasUVNode){this._iAnimationRegisterCache.setUVSourceAndTarget(t.uvSource,t.uvTarget),e+="mov "+this._iAnimationRegisterCache.uvTarget+".xy,"+this._iAnimationRegisterCache.uvAttribute.toString()+"\n";for(var i,s=0;s<this._particleNodes.length;s++)i=this._particleNodes[s];e+=i.getAGALUVCode(t,this._iAnimationRegisterCache),e+="mov "+this._iAnimationRegisterCache.uvVar.toString()+","+this._iAnimationRegisterCache.uvTarget+".xy\n"}else e+="mov "+t.uvTarget+","+t.uvSource+"\n";return e},e.prototype.getAGALFragmentCode=function(t,e){return this._iAnimationRegisterCache.getColorCombinationCode(e)},e.prototype.doneAGALCode=function(){this._iAnimationRegisterCache.setDataLength(),this._iAnimationRegisterCache.setVertexConst(this._iAnimationRegisterCache.vertexZeroConst.index,0,1,2,0)},Object.defineProperty(e.prototype,"usesCPU",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.cancelGPUCompatibility=function(){},e.prototype.dispose=function(){for(var e in this._animationSubGeometries)this._animationSubGeometries[e].dispose();t.prototype.dispose.call(this)},e.prototype.getAnimationSubGeometry=function(t){var e=t.parentMesh,i=e.shareAnimationGeometry?this._animationSubGeometries[t.subGeometry.id]:this._animationSubGeometries[t.id];return i?i:(this._iGenerateAnimationSubGeometries(e),e.shareAnimationGeometry?this._animationSubGeometries[t.subGeometry.id]:this._animationSubGeometries[t.id])},e.prototype._iGenerateAnimationSubGeometries=function(t){if(null==this.initParticleFunc)throw new Error("no initParticleFunc set");var e=t.geometry;if(!e)throw new Error("Particle animation can only be performed on a ParticleGeometry object");var i,s,r,h,l,p,d,u=!1;for(i=0;i<t.subMeshes.length;i++)p=t.subMeshes[i],l=p.subGeometry,t.shareAnimationGeometry&&(h=this._animationSubGeometries[l.id])||(h=new a,t.shareAnimationGeometry?this._animationSubGeometries[l.id]=h:this._animationSubGeometries[p.id]=h,u=!0,h.createVertexData(l.numVertices,this._totalLenOfOneVertex));if(u){var c,_,y,g,f,m,b,w,v,x,P,D=e.particles,j=D.length,C=e.numParticles,T=new o;for(T.total=C,T.startTime=0,T.duration=1e3,T.delay=.1,i=0,s=0;C>i;){for(T.index=i,this.initParticleFunc.call(this.initParticleScope,T),r=0;r<this._localStaticNodes.length;r++)this._localStaticNodes[r]._iGeneratePropertyOfOneParticle(T);for(;j>s&&(c=D[s]).particleIndex==i;){for(r=0;r<t.subMeshes.length;r++)if(p=t.subMeshes[r],p.subGeometry==c.subGeometry){h=t.shareAnimationGeometry?this._animationSubGeometries[p.subGeometry.id]:this._animationSubGeometries[p.id];break}for(b=c.numVertices,w=h.vertexData,v=b*this._totalLenOfOneVertex,x=h.numProcessedVertices*this._totalLenOfOneVertex,r=0;r<this._localStaticNodes.length;r++)for(d=this._localStaticNodes[r],m=d.oneData,_=d.dataLength,y=x+d._iDataOffset,g=0;v>g;g+=this._totalLenOfOneVertex)for(P=y+g,f=0;_>f;f++)w[P+f]=m[f];this._localDynamicNodes.length&&h.animationParticles.push(new n(i,T.startTime,T.duration,T.delay,c)),h.numProcessedVertices+=b,s++}i++}}},e.POST_PRIORITY=9,e.COLOR_PRIORITY=18,e}(s);e.exports=p},{"awayjs-renderergl/lib/animators/data/AnimationSubGeometry":void 0,"awayjs-renderergl/lib/animators/data/ParticleAnimationData":void 0,"awayjs-renderergl/lib/animators/data/ParticleProperties":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleTimeNode":void 0,"awayjs-stagegl/lib/animators/AnimationSetBase":void 0,"awayjs-stagegl/lib/animators/data/AnimationRegisterCache":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/ParticleAnimator":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/animators/AnimatorBase"),r=t("awayjs-stagegl/lib/base/ContextGLProgramType"),a=t("awayjs-renderergl/lib/animators/data/AnimationSubGeometry"),n=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),o=function(t){function e(e){t.call(this,e),this._animationParticleStates=new Array,this._animatorParticleStates=new Array,this._timeParticleStates=new Array,this._totalLenOfOneVertex=0,this._animatorSubGeometries=new Object,this._particleAnimationSet=e;for(var i,s,r=0;r<this._particleAnimationSet.particleNodes.length;r++)s=this._particleAnimationSet.particleNodes[r],i=this.getAnimationState(s),s.mode==n.LOCAL_DYNAMIC?(this._animatorParticleStates.push(i),s._iDataOffset=this._totalLenOfOneVertex,this._totalLenOfOneVertex+=s.dataLength):this._animationParticleStates.push(i),i.needUpdateTime&&this._timeParticleStates.push(i)}return i(e,t),e.prototype.clone=function(){return new e(this._particleAnimationSet)},e.prototype.setRenderState=function(t,e,i,s){var a,n=this._particleAnimationSet._iAnimationRegisterCache,o=e.subMesh;if(!o)throw new Error("Must be subMesh");var h=this._particleAnimationSet.getAnimationSubGeometry(o);for(a=0;a<this._animationParticleStates.length;a++)this._animationParticleStates[a].setRenderState(i,e,h,n,s);var l=this.getAnimatorSubGeometry(o);for(a=0;a<this._animatorParticleStates.length;a++)this._animatorParticleStates[a].setRenderState(i,e,l,n,s);i.context.setProgramConstantsFromArray(r.VERTEX,n.vertexConstantOffset,n.vertexConstantData,n.numVertexConstant),n.numFragmentConstant>0&&i.context.setProgramConstantsFromArray(r.FRAGMENT,n.fragmentConstantOffset,n.fragmentConstantData,n.numFragmentConstant)},e.prototype.testGPUCompatibility=function(){},e.prototype.start=function(){t.prototype.start.call(this);for(var e=0;e<this._timeParticleStates.length;e++)this._timeParticleStates[e].offset(this._pAbsoluteTime)},e.prototype._pUpdateDeltaTime=function(t){this._pAbsoluteTime+=t;for(var e=0;e<this._timeParticleStates.length;e++)this._timeParticleStates[e].update(this._pAbsoluteTime)},e.prototype.resetTime=function(t){void 0===t&&(t=0);for(var e=0;e<this._timeParticleStates.length;e++)this._timeParticleStates[e].offset(this._pAbsoluteTime+t);this.update(this.time)},e.prototype.dispose=function(){for(var t in this._animatorSubGeometries)this._animatorSubGeometries[t].dispose()},e.prototype.getAnimatorSubGeometry=function(t){if(this._animatorParticleStates.length){var e=t.subGeometry,i=this._animatorSubGeometries[e.id]=new a;i.createVertexData(e.numVertices,this._totalLenOfOneVertex),i.animationParticles=this._particleAnimationSet.getAnimationSubGeometry(t).animationParticles}},e}(s);e.exports=o},{"awayjs-renderergl/lib/animators/data/AnimationSubGeometry":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-stagegl/lib/animators/AnimatorBase":void 0,"awayjs-stagegl/lib/base/ContextGLProgramType":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/SkeletonAnimationSet":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/animators/AnimationSetBase"),r=function(t){function e(e){void 0===e&&(e=4),t.call(this),this._jointsPerVertex=e}return i(e,t),Object.defineProperty(e.prototype,"jointsPerVertex",{get:function(){return this._jointsPerVertex},enumerable:!0,configurable:!0}),e.prototype.getAGALVertexCode=function(t){for(var e=t.animatableAttributes.length,i=t.numUsedVertexConstants,s=i+1,r=i+2,a="va"+t.numUsedStreams,n="va"+(t.numUsedStreams+1),o=[a+".x",a+".y",a+".z",a+".w"],h=[n+".x",n+".y",n+".z",n+".w"],l=this._pFindTempReg(t.animationTargetRegisters),p=this._pFindTempReg(t.animationTargetRegisters,l),d="dp4",u="",c=0;e>c;++c){for(var _=t.animatableAttributes[c],y=0;y<this._jointsPerVertex;++y)u+=d+" "+l+".x, "+_+", vc["+o[y]+"+"+i+"]\n"+d+" "+l+".y, "+_+", vc["+o[y]+"+"+s+"]\n"+d+" "+l+".z, "+_+", vc["+o[y]+"+"+r+"]\nmov "+l+".w, "+_+".w\nmul "+l+", "+l+", "+h[y]+"\n",u+=0==y?"mov "+p+", "+l+"\n":"add "+p+", "+p+", "+l+"\n";
d="dp3",u+="mov "+t.animationTargetRegisters[c]+", "+p+"\n"}return u},e.prototype.activate=function(){},e.prototype.deactivate=function(){},e.prototype.getAGALFragmentCode=function(){return""},e.prototype.getAGALUVCode=function(t){return"mov "+t.uvTarget+","+t.uvSource+"\n"},e.prototype.doneAGALCode=function(){},e}(s);e.exports=r},{"awayjs-stagegl/lib/animators/AnimationSetBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/SkeletonAnimator":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/base/TriangleSubGeometry"),r=t("awayjs-display/lib/events/SubGeometryEvent"),a=t("awayjs-stagegl/lib/animators/AnimatorBase"),n=t("awayjs-stagegl/lib/base/ContextGLProgramType"),o=t("awayjs-renderergl/lib/animators/data/JointPose"),h=t("awayjs-renderergl/lib/animators/data/SkeletonPose"),l=t("awayjs-renderergl/lib/events/AnimationStateEvent"),p=function(t){function e(e,i,s){var r=this;void 0===s&&(s=!1),t.call(this,e),this._globalPose=new h,this._morphedSubGeometry=new Object,this._morphedSubGeometryDirty=new Object,this._skeleton=i,this._forceCPU=s,this._jointsPerVertex=e.jointsPerVertex,this._numJoints=this._skeleton.numJoints,this._globalMatrices=new Array(12*this._numJoints);for(var a=0,n=0;n<this._numJoints;++n)this._globalMatrices[a++]=1,this._globalMatrices[a++]=0,this._globalMatrices[a++]=0,this._globalMatrices[a++]=0,this._globalMatrices[a++]=0,this._globalMatrices[a++]=1,this._globalMatrices[a++]=0,this._globalMatrices[a++]=0,this._globalMatrices[a++]=0,this._globalMatrices[a++]=0,this._globalMatrices[a++]=1,this._globalMatrices[a++]=0;this._onTransitionCompleteDelegate=function(t){return r.onTransitionComplete(t)},this._onIndicesUpdateDelegate=function(t){return r.onIndicesUpdate(t)},this._onVerticesUpdateDelegate=function(t){return r.onVerticesUpdate(t)}}return i(e,t),Object.defineProperty(e.prototype,"globalMatrices",{get:function(){return this._globalPropertiesDirty&&this.updateGlobalProperties(),this._globalMatrices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalPose",{get:function(){return this._globalPropertiesDirty&&this.updateGlobalProperties(),this._globalPose},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skeleton",{get:function(){return this._skeleton},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceCPU",{get:function(){return this._forceCPU},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useCondensedIndices",{get:function(){return this._useCondensedIndices},set:function(t){this._useCondensedIndices=t},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this._pAnimationSet,this._skeleton,this._forceCPU)},e.prototype.play=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=0/0),this._pActiveAnimationName!=t){if(this._pActiveAnimationName=t,!this._pAnimationSet.hasAnimation(t))throw new Error("Animation root node "+t+" not found!");e&&this._pActiveNode?(this._pActiveNode=e.getAnimationNode(this,this._pActiveNode,this._pAnimationSet.getAnimation(t),this._pAbsoluteTime),this._pActiveNode.addEventListener(l.TRANSITION_COMPLETE,this._onTransitionCompleteDelegate)):this._pActiveNode=this._pAnimationSet.getAnimation(t),this._pActiveState=this.getAnimationState(this._pActiveNode),this.updatePosition&&(this._pActiveState.update(this._pAbsoluteTime),this._pActiveState.positionDelta),this._activeSkeletonState=this._pActiveState,this.start(),isNaN(i)||this.reset(t,i)}},e.prototype.setRenderState=function(t,e,i,r,a,o){this._globalPropertiesDirty&&this.updateGlobalProperties();var h=e.subMesh.subGeometry;if(h.useCondensedIndices=this._useCondensedIndices,this._useCondensedIndices)this.updateCondensedMatrices(h.condensedIndexLookUp,h.numCondensedJoints),i.context.setProgramConstantsFromArray(n.VERTEX,a,this._condensedMatrices,3*h.numCondensedJoints);else{if(this._pAnimationSet.usesCPU)return void(this._morphedSubGeometryDirty[h.id]&&this.morphSubGeometry(e,h));i.context.setProgramConstantsFromArray(n.VERTEX,a,this._globalMatrices,3*this._numJoints)}i.context.activateBuffer(o,e.getVertexData(s.JOINT_INDEX_DATA),e.getVertexOffset(s.JOINT_INDEX_DATA),e.JOINT_INDEX_FORMAT),i.context.activateBuffer(o+1,e.getVertexData(s.JOINT_WEIGHT_DATA),e.getVertexOffset(s.JOINT_WEIGHT_DATA),e.JOINT_WEIGHT_FORMAT)},e.prototype.testGPUCompatibility=function(t){!this._useCondensedIndices&&(this._forceCPU||this._jointsPerVertex>4||t.numUsedVertexConstants+3*this._numJoints>128)&&this._pAnimationSet.cancelGPUCompatibility()},e.prototype._pUpdateDeltaTime=function(e){if(t.prototype._pUpdateDeltaTime.call(this,e),this._globalPropertiesDirty=!0,this._pAnimationSet.usesCPU)for(var i in this._morphedSubGeometryDirty)this._morphedSubGeometryDirty[i]=!0},e.prototype.updateCondensedMatrices=function(t,e){var i,s,r=0,a=0;this._condensedMatrices=new Array;do for(s=4*t[r],i=s+12;i>s;)this._condensedMatrices[a++]=this._globalMatrices[s++];while(++r<e)},e.prototype.updateGlobalProperties=function(){this._globalPropertiesDirty=!1,this.localToGlobalPose(this._activeSkeletonState.getSkeletonPose(this._skeleton),this._globalPose,this._skeleton);for(var t,e,i,s,r,a,n,o,h,l,p,d,u,c,_,y,g,f,m,b,w,v,x,P,D,j,C,T,A,S,O,E,M,R,I,N,L=0,F=this._globalPose.jointPoses,V=this._skeleton.joints,B=0;B<this._numJoints;++B)M=F[B],R=M.orientation,I=M.translation,e=R.x,i=R.y,s=R.z,r=R.w,a=(N=2*e)*i,n=N*s,o=N*r,h=(N=2*i)*s,l=N*r,p=2*s*r,h=2*i*s,l=2*i*r,p=2*s*r,e*=e,i*=i,s*=s,r*=r,d=(N=e-i)-s+r,u=a-p,c=n+l,_=a+p,y=-N-s+r,g=h-o,f=n-l,m=h+o,b=-e-i+s+r,t=V[B].inverseBindPose,w=t[0],v=t[4],x=t[8],P=t[12],D=t[1],j=t[5],C=t[9],T=t[13],A=t[2],S=t[6],O=t[10],E=t[14],this._globalMatrices[L]=d*w+u*D+c*A,this._globalMatrices[L+1]=d*v+u*j+c*S,this._globalMatrices[L+2]=d*x+u*C+c*O,this._globalMatrices[L+3]=d*P+u*T+c*E+I.x,this._globalMatrices[L+4]=_*w+y*D+g*A,this._globalMatrices[L+5]=_*v+y*j+g*S,this._globalMatrices[L+6]=_*x+y*C+g*O,this._globalMatrices[L+7]=_*P+y*T+g*E+I.y,this._globalMatrices[L+8]=f*w+m*D+b*A,this._globalMatrices[L+9]=f*v+m*j+b*S,this._globalMatrices[L+10]=f*x+m*C+b*O,this._globalMatrices[L+11]=f*P+m*T+b*E+I.z,L+=12},e.prototype.getRenderableSubGeometry=function(t,e){if(this._morphedSubGeometryDirty[e.id]=!0,!this._pAnimationSet.usesCPU)return e;var i;return(i=this._morphedSubGeometry[e.id])||(i=this._morphedSubGeometry[e.id]=e.clone(),i.autoDeriveNormals=!1,i.autoDeriveTangents=!1,i.autoDeriveUVs=!1,e.addEventListener(r.INDICES_UPDATED,this._onIndicesUpdateDelegate),e.addEventListener(r.VERTICES_UPDATED,this._onVerticesUpdateDelegate)),i},e.prototype.morphSubGeometry=function(t,e){this._morphedSubGeometryDirty[e.id]=!1;for(var i,s,r,a,n,o,h,l,p,d,u,c,_,y,g,f,m,b,w,v,x,P,D,j,C,T,A,S,O,E,M,R,I=e.positions,N=e.vertexNormals,L=e.vertexTangents,F=e.jointIndices,V=e.jointWeights,B=this._morphedSubGeometry[e.id],U=B.positions,z=B.vertexNormals,k=B.vertexTangents,G=0,H=0,X=I.length;X>G;){for(c=I[G],_=I[G+1],y=I[G+2],g=N[G],f=N[G+1],m=N[G+2],b=L[G],w=L[G+1],v=L[G+2],s=0,r=0,a=0,n=0,o=0,h=0,l=0,p=0,d=0,i=0;i<this._jointsPerVertex;)if(u=V[H],u>0){var W=F[H++]<<2;x=this._globalMatrices[W],P=this._globalMatrices[W+1],D=this._globalMatrices[W+2],j=this._globalMatrices[W+3],C=this._globalMatrices[W+4],T=this._globalMatrices[W+5],A=this._globalMatrices[W+6],S=this._globalMatrices[W+7],O=this._globalMatrices[W+8],E=this._globalMatrices[W+9],M=this._globalMatrices[W+10],R=this._globalMatrices[W+11],s+=u*(x*c+P*_+D*y+j),r+=u*(C*c+T*_+A*y+S),a+=u*(O*c+E*_+M*y+R),n+=u*(x*g+P*f+D*m),o+=u*(C*g+T*f+A*m),h+=u*(O*g+E*f+M*m),l+=u*(x*b+P*w+D*v),p+=u*(C*b+T*w+A*v),d+=u*(O*b+E*w+M*v),++i}else H+=this._jointsPerVertex-i,i=this._jointsPerVertex;U[G]=s,U[G+1]=r,U[G+2]=a,z[G]=n,z[G+1]=o,z[G+2]=h,k[G]=l,k[G+1]=p,k[G+2]=d,G+=3}B.updatePositions(U),B.updateVertexNormals(z),B.updateVertexTangents(k)},e.prototype.localToGlobalPose=function(t,e,i){var s,r,a,n,h,l,p,d,u,c,_,y,g,f,m,b,w,v,x,P,D=e.jointPoses,j=i.joints,C=t.numJointPoses,T=t.jointPoses;D.length!=C&&(D.length=C);for(var A=0;C>A;++A)s=D[A],null==s&&(s=D[A]=new o),a=j[A],r=a.parentIndex,h=T[A],u=s.orientation,d=s.translation,0>r?(p=h.translation,l=h.orientation,u.x=l.x,u.y=l.y,u.z=l.z,u.w=l.w,d.x=p.x,d.y=p.y,d.z=p.z):(n=D[r],l=n.orientation,p=h.translation,f=l.x,m=l.y,b=l.z,w=l.w,v=p.x,x=p.y,P=p.z,g=-f*v-m*x-b*P,c=w*v+m*P-b*x,_=w*x-f*P+b*v,y=w*P+f*x-m*v,p=n.translation,d.x=-g*f+c*w-_*b+y*m+p.x,d.y=-g*m+c*b+_*w-y*f+p.y,d.z=-g*b-c*m+_*f+y*w+p.z,c=l.x,_=l.y,y=l.z,g=l.w,l=h.orientation,f=l.x,m=l.y,b=l.z,w=l.w,u.w=g*w-c*f-_*m-y*b,u.x=g*f+c*w+_*b-y*m,u.y=g*m-c*b+_*w+y*f,u.z=g*b+c*m-_*f+y*w)},e.prototype.onTransitionComplete=function(t){t.type==l.TRANSITION_COMPLETE&&(t.animationNode.removeEventListener(l.TRANSITION_COMPLETE,this._onTransitionCompleteDelegate),this._pActiveState==t.animationState&&(this._pActiveNode=this._pAnimationSet.getAnimation(this._pActiveAnimationName),this._pActiveState=this.getAnimationState(this._pActiveNode),this._activeSkeletonState=this._pActiveState))},e.prototype.onIndicesUpdate=function(t){var e=t.target;this._morphedSubGeometry[e.id].updateIndices(e.indices)},e.prototype.onVerticesUpdate=function(t){var e=t.target,i=this._morphedSubGeometry[e.id];switch(t.dataType){case s.UV_DATA:i.updateUVs(e.uvs);case s.SECONDARY_UV_DATA:i.updateUVs(e.secondaryUVs)}},e}(a);e.exports=p},{"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-display/lib/events/SubGeometryEvent":void 0,"awayjs-renderergl/lib/animators/data/JointPose":void 0,"awayjs-renderergl/lib/animators/data/SkeletonPose":void 0,"awayjs-renderergl/lib/events/AnimationStateEvent":void 0,"awayjs-stagegl/lib/animators/AnimatorBase":void 0,"awayjs-stagegl/lib/base/ContextGLProgramType":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/VertexAnimationSet":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/animators/AnimationSetBase"),r=t("awayjs-renderergl/lib/animators/data/VertexAnimationMode"),a=function(t){function e(e,i){void 0===e&&(e=2),void 0===i&&(i="absolute"),t.call(this),this._numPoses=e,this._blendMode=i}return i(e,t),Object.defineProperty(e.prototype,"numPoses",{get:function(){return this._numPoses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},enumerable:!0,configurable:!0}),e.prototype.getAGALVertexCode=function(t){return this._blendMode==r.ABSOLUTE?this.getAbsoluteAGALCode(t):this.getAdditiveAGALCode(t)},e.prototype.activate=function(){},e.prototype.deactivate=function(){},e.prototype.getAGALFragmentCode=function(){return""},e.prototype.getAGALUVCode=function(t){return"mov "+t.uvTarget+","+t.uvSource+"\n"},e.prototype.doneAGALCode=function(){},e.prototype.getAbsoluteAGALCode=function(t){var e="",i=this._pFindTempReg(t.animationTargetRegisters),s=this._pFindTempReg(t.animationTargetRegisters,i),r=new Array("x","y","z","w"),a=t.animatableAttributes.length,n="vc"+t.numUsedVertexConstants;a>2&&(a=2);for(var o=t.numUsedStreams,h=0;a>h;++h){e+="mul "+i+", "+t.animatableAttributes[h]+", "+n+"."+r[0]+"\n";for(var l=1;l<this._numPoses;++l)e+="mul "+s+", va"+o+", "+n+"."+r[l]+"\n",l<this._numPoses-1&&(e+="add "+i+", "+i+", "+s+"\n"),++o;e+="add "+t.animationTargetRegisters[h]+", "+i+", "+s+"\n"}return(t.tangentDependencies>0||t.outputsNormals)&&(e+="dp3 "+i+".x, "+t.animatableAttributes[2]+", "+t.animationTargetRegisters[1]+"\nmul "+i+", "+t.animationTargetRegisters[1]+", "+i+".x\nsub "+t.animationTargetRegisters[2]+", "+t.animationTargetRegisters[2]+", "+i+"\n"),e},e.prototype.getAdditiveAGALCode=function(t){var e,i="",s=t.animatableAttributes.length,r=["x","y","z","w"],a=this._pFindTempReg(t.animationTargetRegisters),n=t.numUsedStreams;s>2&&(s=2),i+="mov  "+t.animationTargetRegisters[0]+", "+t.animatableAttributes[0]+"\n",t.normalDependencies>0&&(i+="mov "+t.animationTargetRegisters[1]+", "+t.animatableAttributes[1]+"\n");for(var o=0;s>o;++o)for(var h=0;h<this._numPoses;++h)i+="mul "+a+", va"+(n+e)+", vc"+t.numUsedVertexConstants+"."+r[h]+"\nadd "+t.animationTargetRegisters[o]+", "+t.animationTargetRegisters[o]+", "+a+"\n",e++;return(t.tangentDependencies>0||t.outputsNormals)&&(i+="dp3 "+a+".x, "+t.animatableAttributes[2]+", "+t.animationTargetRegisters[1]+"\nmul "+a+", "+t.animationTargetRegisters[1]+", "+a+".x\nsub "+t.animationTargetRegisters[2]+", "+t.animatableAttributes[2]+", "+a+"\n"),i},e}(s);e.exports=a},{"awayjs-renderergl/lib/animators/data/VertexAnimationMode":void 0,"awayjs-stagegl/lib/animators/AnimationSetBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/VertexAnimator":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/base/TriangleSubGeometry"),r=t("awayjs-stagegl/lib/animators/AnimatorBase"),a=t("awayjs-stagegl/lib/pool/VertexDataPool"),n=t("awayjs-stagegl/lib/base/ContextGLProgramType"),o=t("awayjs-renderergl/lib/animators/data/VertexAnimationMode"),h=function(t){function e(e){t.call(this,e),this._poses=new Array,this._weights=Array(1,0,0,0),this._vertexAnimationSet=e,this._numPoses=e.numPoses,this._blendMode=e.blendMode}return i(e,t),e.prototype.clone=function(){return new e(this._vertexAnimationSet)},e.prototype.play=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=0/0),this._pActiveAnimationName!=t){if(this._pActiveAnimationName=t,!this._pAnimationSet.hasAnimation(t))throw new Error("Animation root node "+t+" not found!");this._pActiveNode=this._pAnimationSet.getAnimation(t),this._pActiveState=this.getAnimationState(this._pActiveNode),this.updatePosition&&(this._pActiveState.update(this._pAbsoluteTime),this._pActiveState.positionDelta),this._activeVertexState=this._pActiveState,this.start(),isNaN(i)||this.reset(t,i)}},e.prototype._pUpdateDeltaTime=function(e){t.prototype._pUpdateDeltaTime.call(this,e);var i=!1;if(this._poses[0]!=this._activeVertexState.currentGeometry&&(this._poses[0]=this._activeVertexState.currentGeometry,i=!0),this._poses[1]!=this._activeVertexState.nextGeometry&&(this._poses[1]=this._activeVertexState.nextGeometry,i=!0),this._weights[0]=1-(this._weights[1]=this._activeVertexState.blendWeight),i)for(var s,r=this._pOwners.length,a=0;r>a;a++)s=this._pOwners[a],s._iInvalidateRenderableGeometries()},e.prototype.setRenderState=function(t,e,i,r,h,l){if(!this._poses.length)return void this.setNullPose(t,e,i,h,l);var p,d,u=e.subMesh,c=this._numPoses;for(i.context.setProgramConstantsFromArray(n.VERTEX,h,this._weights,1),d=this._blendMode==o.ABSOLUTE?1:0;c>d;++d)p=this._poses[d].subGeometries[u._iIndex]||u.subGeometry,i.context.activateBuffer(l++,a.getItem(p,e.getIndexData(),s.POSITION_DATA),p.getOffset(s.POSITION_DATA),s.POSITION_FORMAT),t.normalDependencies>0&&i.context.activateBuffer(l++,a.getItem(p,e.getIndexData(),s.NORMAL_DATA),p.getOffset(s.NORMAL_DATA),s.NORMAL_FORMAT)},e.prototype.setNullPose=function(t,e,i,r,a){if(i.context.setProgramConstantsFromArray(n.VERTEX,r,this._weights,1),this._blendMode==o.ABSOLUTE)for(var h=this._numPoses,l=1;h>l;++l)i.context.activateBuffer(a++,e.getVertexData(s.POSITION_DATA),e.getVertexOffset(s.POSITION_DATA),s.POSITION_FORMAT),t.normalDependencies>0&&i.context.activateBuffer(a++,e.getVertexData(s.NORMAL_DATA),e.getVertexOffset(s.NORMAL_DATA),s.NORMAL_FORMAT)},e.prototype.testGPUCompatibility=function(){},e.prototype.getRenderableSubGeometry=function(t,e){return this._blendMode==o.ABSOLUTE&&this._poses.length?this._poses[0].subGeometries[t.subMesh._iIndex]||e:e},e}(r);e.exports=h},{"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-renderergl/lib/animators/data/VertexAnimationMode":void 0,"awayjs-stagegl/lib/animators/AnimatorBase":void 0,"awayjs-stagegl/lib/base/ContextGLProgramType":void 0,"awayjs-stagegl/lib/pool/VertexDataPool":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/data/AnimationSubGeometry":[function(t,e){var i=function(){function t(){this._pVertexBuffer=new Array(8),this._pBufferContext=new Array(8),this._pBufferDirty=new Array(8),this.numProcessedVertices=0,this.previousTime=Number.NEGATIVE_INFINITY,this.animationParticles=new Array;for(var e=0;8>e;e++)this._pBufferDirty[e]=!0;this._iUniqueId=t.SUBGEOM_ID_COUNT++}return t.prototype.createVertexData=function(t,e){this._numVertices=t,this._totalLenOfOneVertex=e,this._pVertexData=new Array(t*e)},t.prototype.activateVertexBuffer=function(t,e,i,s){var r=i.stageIndex,a=i.context,n=this._pVertexBuffer[r];n&&this._pBufferContext[r]==a||(n=this._pVertexBuffer[r]=a.createVertexBuffer(this._numVertices,this._totalLenOfOneVertex),this._pBufferContext[r]=a,this._pBufferDirty[r]=!0),this._pBufferDirty[r]&&(n.uploadFromArray(this._pVertexData,0,this._numVertices),this._pBufferDirty[r]=!1),a.setVertexBufferAt(t,n,e,s)},t.prototype.dispose=function(){for(;this._pVertexBuffer.length;){var t=this._pVertexBuffer.pop();t&&t.dispose()}},t.prototype.invalidateBuffer=function(){for(var t=0;8>t;t++)this._pBufferDirty[t]=!0},Object.defineProperty(t.prototype,"vertexData",{get:function(){return this._pVertexData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numVertices",{get:function(){return this._numVertices},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalLenOfOneVertex",{get:function(){return this._totalLenOfOneVertex},enumerable:!0,configurable:!0}),t.SUBGEOM_ID_COUNT=0,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/data/ColorSegmentPoint":[function(t,e){var i=function(){function t(t,e){if(0>=t||t>=1)throw new Error("life exceeds range (0,1)");this._life=t,this._color=e}return Object.defineProperty(t.prototype,"color",{get:function(){return this._color},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"life",{get:function(){return this._life},enumerable:!0,configurable:!0}),t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/data/JointPose":[function(t,e){var i=t("awayjs-core/lib/geom/Matrix3D"),s=t("awayjs-core/lib/geom/Quaternion"),r=t("awayjs-core/lib/geom/Vector3D"),a=function(){function t(){this.orientation=new s,this.translation=new r}return t.prototype.toMatrix3D=function(t){return void 0===t&&(t=null),null==t&&(t=new i),this.orientation.toMatrix3D(t),t.appendTranslation(this.translation.x,this.translation.y,this.translation.z),t},t.prototype.copyFrom=function(t){var e=t.orientation,i=t.translation;this.orientation.x=e.x,this.orientation.y=e.y,this.orientation.z=e.z,this.orientation.w=e.w,this.translation.x=i.x,this.translation.y=i.y,this.translation.z=i.z},t}();e.exports=a},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Quaternion":void 0,"awayjs-core/lib/geom/Vector3D":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/data/ParticleAnimationData":[function(t,e){var i=function(){function t(t,e,i,s,r){this.index=t,this.startTime=e,this.totalTime=i+s,this.duration=i,this.delay=s,this.startVertexIndex=r.startVertexIndex,this.numVertices=r.numVertices}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/data/ParticleData":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":[function(t,e){var i=function(){function t(){}return t.GLOBAL=0,t.LOCAL_STATIC=1,t.LOCAL_DYNAMIC=2,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/data/ParticleProperties":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/data/SkeletonJoint":[function(t,e){var i=function(){function t(){this.parentIndex=-1}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/data/SkeletonPose":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/library/NamedAssetBase"),a=t("awayjs-renderergl/lib/animators/data/JointPose"),n=function(t){function e(){t.call(this),this.jointPoses=new Array}return i(e,t),Object.defineProperty(e.prototype,"numJointPoses",{get:function(){return this.jointPoses.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.SKELETON_POSE},enumerable:!0,configurable:!0}),e.prototype.jointPoseFromName=function(t){var e=this.jointPoseIndexFromName(t);return-1!=e?this.jointPoses[e]:null},e.prototype.jointPoseIndexFromName=function(t){for(var e,i,s;s<this.jointPoses.length;s++){if(i=this.jointPoses[s],i.name==t)return e;e++}return-1},e.prototype.clone=function(){for(var t=new e,i=this.jointPoses.length,s=0;i>s;s++){var r=new a,n=this.jointPoses[s];r.name=n.name,r.copyFrom(n),t.jointPoses[s]=r}return t},e.prototype.dispose=function(){this.jointPoses.length=0},e}(r);e.exports=n},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0,"awayjs-renderergl/lib/animators/data/JointPose":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/data/Skeleton":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/library/NamedAssetBase"),a=function(t){function e(){t.call(this),this.joints=new Array}return i(e,t),Object.defineProperty(e.prototype,"numJoints",{get:function(){return this.joints.length},enumerable:!0,configurable:!0}),e.prototype.jointFromName=function(t){var e=this.jointIndexFromName(t);return-1!=e?this.joints[e]:null},e.prototype.jointIndexFromName=function(t){for(var e,i,s;s<this.joints.length;s++){if(i=this.joints[s],i.name==t)return e;e++}return-1},e.prototype.dispose=function(){this.joints.length=0},Object.defineProperty(e.prototype,"assetType",{get:function(){return s.SKELETON},enumerable:!0,configurable:!0}),e}(r);e.exports=a},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/data/VertexAnimationMode":[function(t,e){var i=function(){function t(){}return t.ADDITIVE="additive",t.ABSOLUTE="absolute",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-display/lib/animators/nodes/AnimationNodeBase"),a=function(t){function e(){t.call(this),this._pLooping=!0,this._pTotalDuration=0,this._pStitchDirty=!0,this._pStitchFinalFrame=!1,this._pNumFrames=0,this._pDurations=new Array,this._pTotalDelta=new s,this.fixedFrameRate=!0}return i(e,t),Object.defineProperty(e.prototype,"looping",{get:function(){return this._pLooping},set:function(t){this._pLooping!=t&&(this._pLooping=t,this._pStitchDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stitchFinalFrame",{get:function(){return this._pStitchFinalFrame},set:function(t){this._pStitchFinalFrame!=t&&(this._pStitchFinalFrame=t,this._pStitchDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalDuration",{get:function(){return this._pStitchDirty&&this._pUpdateStitch(),this._pTotalDuration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalDelta",{get:function(){return this._pStitchDirty&&this._pUpdateStitch(),this._pTotalDelta},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastFrame",{get:function(){return this._pStitchDirty&&this._pUpdateStitch(),this._pLastFrame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"durations",{get:function(){return this._pDurations},enumerable:!0,configurable:!0}),e.prototype._pUpdateStitch=function(){this._pStitchDirty=!1,this._pLastFrame=this._pStitchFinalFrame?this._pNumFrames:this._pNumFrames-1,this._pTotalDuration=0,this._pTotalDelta.x=0,this._pTotalDelta.y=0,this._pTotalDelta.z=0},e}(r);e.exports=a},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/animators/nodes/AnimationNodeBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleAccelerationNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),a=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),n=t("awayjs-renderergl/lib/animators/states/ParticleAccelerationState"),o=function(t){function e(e,i){void 0===i&&(i=null),t.call(this,"ParticleAcceleration",e,3),this._pStateClass=n,this._acceleration=i||new s}return i(e,t),e.prototype.pGetAGALVertexCode=function(t,e){var i=this._pMode==r.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute();e.setRegisterIndex(this,n.ACCELERATION_INDEX,i.index);var s=e.getFreeVertexVectorTemp();e.addVertexTempUsages(s,1);var a="mul "+s+","+e.vertexTime+","+i+"\n";if(e.needVelocity){var o=e.getFreeVertexVectorTemp();a+="mul "+o+","+s+","+e.vertexTwoConst+"\n",a+="add "+e.velocityTarget+".xyz,"+o+".xyz,"+e.velocityTarget+".xyz\n"}return e.removeVertexTempUsage(s),a+="mul "+s+","+s+","+e.vertexTime+"\n",a+="add "+e.positionTarget+".xyz,"+s+","+e.positionTarget+".xyz\n"},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iGeneratePropertyOfOneParticle=function(t){var i=t[e.ACCELERATION_VECTOR3D];if(!i)throw new Error("there is no "+e.ACCELERATION_VECTOR3D+" in param!");this._pOneData[0]=i.x/2,this._pOneData[1]=i.y/2,this._pOneData[2]=i.z/2},e.ACCELERATION_VECTOR3D="AccelerationVector3D",e}(a);e.exports=o},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleAccelerationState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleBezierCurveNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),o=t("awayjs-renderergl/lib/animators/states/ParticleBezierCurveState"),h=function(t){function e(e,i,r){void 0===i&&(i=null),void 0===r&&(r=null),t.call(this,"ParticleBezierCurve",e,6),this._pStateClass=o,this._iControlPoint=i||new s,this._iEndPoint=r||new s}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i=this._pMode==a.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute();e.setRegisterIndex(this,o.BEZIER_CONTROL_INDEX,i.index);var s=this._pMode==a.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute();e.setRegisterIndex(this,o.BEZIER_END_INDEX,s.index);var n=e.getFreeVertexVectorTemp(),h=new r(n.regName,n.index,0),l=new r(n.regName,n.index,1),p=new r(n.regName,n.index,2);e.addVertexTempUsages(n,1);var d=e.getFreeVertexVectorTemp(),u=new r(d.regName,d.index);e.removeVertexTempUsage(n);var c="";return c+="sub "+h+","+e.vertexOneConst+","+e.vertexLife+"\n",c+="mul "+l+","+e.vertexLife+","+e.vertexLife+"\n",c+="mul "+p+","+e.vertexLife+","+h+"\n",c+="mul "+p+","+p+","+e.vertexTwoConst+"\n",c+="mul "+u+".xyz,"+p+","+i+"\n",c+="add "+e.positionTarget+".xyz,"+u+".xyz,"+e.positionTarget+".xyz\n",c+="mul "+u+".xyz,"+l+","+s+"\n",c+="add "+e.positionTarget+".xyz,"+u+".xyz,"+e.positionTarget+".xyz\n",e.needVelocity&&(c+="mul "+l+","+e.vertexLife+","+e.vertexTwoConst+"\n",c+="sub "+p+","+e.vertexOneConst+","+l+"\n",c+="mul "+p+","+e.vertexTwoConst+","+p+"\n",c+="mul "+u+".xyz,"+i+","+p+"\n",c+="add "+e.velocityTarget+".xyz,"+u+".xyz,"+e.velocityTarget+".xyz\n",c+="mul "+u+".xyz,"+s+","+l+"\n",c+="add "+e.velocityTarget+".xyz,"+u+".xyz,"+e.velocityTarget+".xyz\n"),c},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iGeneratePropertyOfOneParticle=function(t){var i=t[e.BEZIER_CONTROL_VECTOR3D];if(!i)throw new Error("there is no "+e.BEZIER_CONTROL_VECTOR3D+" in param!");var s=t[e.BEZIER_END_VECTOR3D];if(!s)throw new Error("there is no "+e.BEZIER_END_VECTOR3D+" in param!");this._pOneData[0]=i.x,this._pOneData[1]=i.y,this._pOneData[2]=i.z,this._pOneData[3]=s.x,this._pOneData[4]=s.y,this._pOneData[5]=s.z},e.BEZIER_CONTROL_VECTOR3D="BezierControlVector3D",e.BEZIER_END_VECTOR3D="BezierEndVector3D",e}(n);e.exports=h},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleBezierCurveState":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleBillboardNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),r=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),a=t("awayjs-renderergl/lib/animators/states/ParticleBillboardState"),n=function(t){function e(e){void 0===e&&(e=null),t.call(this,"ParticleBillboard",s.GLOBAL,0,4),this._pStateClass=a,this._iBillboardAxis=e}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i=e.getFreeVertexConstant();e.setRegisterIndex(this,a.MATRIX_INDEX,i.index),e.getFreeVertexConstant(),e.getFreeVertexConstant(),e.getFreeVertexConstant();for(var s,r=e.getFreeVertexVectorTemp(),n="m33 "+r+".xyz,"+e.scaleAndRotateTarget+","+i+"\nmov "+e.scaleAndRotateTarget+".xyz,"+r+"\n",o=0;o<e.rotationRegisters.length;o++)s=e.rotationRegisters[o],n+="m33 "+r+".xyz,"+s+","+i+"\nmov "+s+".xyz,"+s+"\n";return n},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iProcessAnimationSetting=function(t){t.hasBillboard=!0},e}(r);e.exports=n},{"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleBillboardState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleColorNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/ColorTransform"),r=t("awayjs-renderergl/lib/animators/ParticleAnimationSet"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),o=t("awayjs-renderergl/lib/animators/states/ParticleColorState"),h=function(t){function e(e,i,a,n,h,l,p,d,u){void 0===i&&(i=!0),void 0===a&&(a=!0),void 0===n&&(n=!1),void 0===h&&(h=!1),void 0===l&&(l=null),void 0===p&&(p=null),void 0===d&&(d=1),void 0===u&&(u=0),t.call(this,"ParticleColor",e,i&&a?16:8,r.COLOR_PRIORITY),this._pStateClass=o,this._iUsesMultiplier=i,this._iUsesOffset=a,this._iUsesCycle=n,this._iUsesPhase=h,this._iStartColor=l||new s,this._iEndColor=p||new s,this._iCycleDuration=d,this._iCyclePhase=u}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i="";
if(e.needFragmentAnimation){var s=e.getFreeVertexVectorTemp();if(this._iUsesCycle){var r=e.getFreeVertexConstant();e.setRegisterIndex(this,o.CYCLE_INDEX,r.index),e.addVertexTempUsages(s,1);var n=e.getFreeVertexSingleTemp();e.removeVertexTempUsage(s),i+="mul "+n+","+e.vertexTime+","+r+".x\n",this._iUsesPhase&&(i+="add "+n+","+n+","+r+".y\n"),i+="sin "+n+","+n+"\n"}if(this._iUsesMultiplier){var h=this._pMode==a.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute(),l=this._pMode==a.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute();e.setRegisterIndex(this,o.START_MULTIPLIER_INDEX,h.index),e.setRegisterIndex(this,o.DELTA_MULTIPLIER_INDEX,l.index),i+="mul "+s+","+l+","+(this._iUsesCycle?n:e.vertexLife)+"\n",i+="add "+s+","+s+","+h+"\n",i+="mul "+e.colorMulTarget+","+s+","+e.colorMulTarget+"\n"}if(this._iUsesOffset){var p=this._pMode==a.LOCAL_STATIC?e.getFreeVertexAttribute():e.getFreeVertexConstant(),d=this._pMode==a.LOCAL_STATIC?e.getFreeVertexAttribute():e.getFreeVertexConstant();e.setRegisterIndex(this,o.START_OFFSET_INDEX,p.index),e.setRegisterIndex(this,o.DELTA_OFFSET_INDEX,d.index),i+="mul "+s+","+d+","+(this._iUsesCycle?n:e.vertexLife)+"\n",i+="add "+s+","+s+","+p+"\n",i+="add "+e.colorAddTarget+","+s+","+e.colorAddTarget+"\n"}}return i},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iProcessAnimationSetting=function(t){this._iUsesMultiplier&&(t.hasColorMulNode=!0),this._iUsesOffset&&(t.hasColorAddNode=!0)},e.prototype._iGeneratePropertyOfOneParticle=function(t){var i=t[e.COLOR_START_COLORTRANSFORM];if(!i)throw new Error("there is no "+e.COLOR_START_COLORTRANSFORM+" in param!");var s=t[e.COLOR_END_COLORTRANSFORM];if(!s)throw new Error("there is no "+e.COLOR_END_COLORTRANSFORM+" in param!");var r=0;this._iUsesCycle?(this._iUsesMultiplier&&(this._pOneData[r++]=(i.redMultiplier+s.redMultiplier)/2,this._pOneData[r++]=(i.greenMultiplier+s.greenMultiplier)/2,this._pOneData[r++]=(i.blueMultiplier+s.blueMultiplier)/2,this._pOneData[r++]=(i.alphaMultiplier+s.alphaMultiplier)/2,this._pOneData[r++]=(i.redMultiplier-s.redMultiplier)/2,this._pOneData[r++]=(i.greenMultiplier-s.greenMultiplier)/2,this._pOneData[r++]=(i.blueMultiplier-s.blueMultiplier)/2,this._pOneData[r++]=(i.alphaMultiplier-s.alphaMultiplier)/2),this._iUsesOffset&&(this._pOneData[r++]=(i.redOffset+s.redOffset)/510,this._pOneData[r++]=(i.greenOffset+s.greenOffset)/510,this._pOneData[r++]=(i.blueOffset+s.blueOffset)/510,this._pOneData[r++]=(i.alphaOffset+s.alphaOffset)/510,this._pOneData[r++]=(i.redOffset-s.redOffset)/510,this._pOneData[r++]=(i.greenOffset-s.greenOffset)/510,this._pOneData[r++]=(i.blueOffset-s.blueOffset)/510,this._pOneData[r++]=(i.alphaOffset-s.alphaOffset)/510)):(this._iUsesMultiplier&&(this._pOneData[r++]=i.redMultiplier,this._pOneData[r++]=i.greenMultiplier,this._pOneData[r++]=i.blueMultiplier,this._pOneData[r++]=i.alphaMultiplier,this._pOneData[r++]=s.redMultiplier-i.redMultiplier,this._pOneData[r++]=s.greenMultiplier-i.greenMultiplier,this._pOneData[r++]=s.blueMultiplier-i.blueMultiplier,this._pOneData[r++]=s.alphaMultiplier-i.alphaMultiplier),this._iUsesOffset&&(this._pOneData[r++]=i.redOffset/255,this._pOneData[r++]=i.greenOffset/255,this._pOneData[r++]=i.blueOffset/255,this._pOneData[r++]=i.alphaOffset/255,this._pOneData[r++]=(s.redOffset-i.redOffset)/255,this._pOneData[r++]=(s.greenOffset-i.greenOffset)/255,this._pOneData[r++]=(s.blueOffset-i.blueOffset)/255,this._pOneData[r++]=(s.alphaOffset-i.alphaOffset)/255))},e.COLOR_START_COLORTRANSFORM="ColorStartColorTransform",e.COLOR_END_COLORTRANSFORM="ColorEndColorTransform",e}(n);e.exports=h},{"awayjs-core/lib/geom/ColorTransform":void 0,"awayjs-renderergl/lib/animators/ParticleAnimationSet":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleColorState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleFollowNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/ParticleAnimationSet"),r=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),a=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),n=t("awayjs-renderergl/lib/animators/states/ParticleFollowState"),o=function(t){function e(e,i,a){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===a&&(a=!1),t.call(this,"ParticleFollow",r.LOCAL_DYNAMIC,e&&i?6:3,s.POST_PRIORITY),this._pStateClass=n,this._iUsesPosition=e,this._iUsesRotation=i,this._iSmooth=a}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i="";if(this._iUsesRotation){var s=e.getFreeVertexAttribute();e.setRegisterIndex(this,n.FOLLOW_ROTATION_INDEX,s.index);var r=e.getFreeVertexVectorTemp();e.addVertexTempUsages(r,1);var a=e.getFreeVertexVectorTemp();e.addVertexTempUsages(a,1);var o,h=e.getFreeVertexVectorTemp();e.hasBillboard&&(e.addVertexTempUsages(h,1),o=e.getFreeVertexVectorTemp()),e.removeVertexTempUsage(r),e.removeVertexTempUsage(a),e.hasBillboard&&e.removeVertexTempUsage(h);var l,p=e.rotationRegisters.length;if(i+="mov "+r+","+e.vertexZeroConst+"\n",i+="mov "+r+".x,"+e.vertexOneConst+"\n",i+="mov "+h+","+e.vertexZeroConst+"\n",i+="sin "+h+".y,"+s+".x\n",i+="cos "+h+".z,"+s+".x\n",i+="mov "+a+".x,"+e.vertexZeroConst+"\n",i+="mov "+a+".y,"+h+".z\n",i+="neg "+a+".z,"+h+".y\n",e.hasBillboard)i+="m33 "+o+".xyz,"+e.positionTarget+".xyz,"+r+"\n";else for(i+="m33 "+e.scaleAndRotateTarget+".xyz,"+e.scaleAndRotateTarget+".xyz,"+r+"\n",l=0;p>l;l++)i+="m33 "+e.rotationRegisters[l]+".xyz,"+e.rotationRegisters[l]+","+r+"\n";if(i+="mov "+r+","+e.vertexZeroConst+"\n",i+="cos "+r+".x,"+s+".y\n",i+="sin "+r+".z,"+s+".y\n",i+="mov "+a+","+e.vertexZeroConst+"\n",i+="mov "+a+".y,"+e.vertexOneConst+"\n",i+="mov "+h+","+e.vertexZeroConst+"\n",i+="neg "+h+".x,"+r+".z\n",i+="mov "+h+".z,"+r+".x\n",e.hasBillboard)i+="m33 "+o+".xyz,"+o+".xyz,"+r+"\n";else for(i+="m33 "+e.scaleAndRotateTarget+".xyz,"+e.scaleAndRotateTarget+".xyz,"+r+"\n",l=0;p>l;l++)i+="m33 "+e.rotationRegisters[l]+".xyz,"+e.rotationRegisters[l]+","+r+"\n";if(i+="mov "+a+","+e.vertexZeroConst+"\n",i+="sin "+a+".x,"+s+".z\n",i+="cos "+a+".y,"+s+".z\n",i+="mov "+r+","+e.vertexZeroConst+"\n",i+="mov "+r+".x,"+a+".y\n",i+="neg "+r+".y,"+a+".x\n",i+="mov "+h+","+e.vertexZeroConst+"\n",i+="mov "+h+".z,"+e.vertexOneConst+"\n",e.hasBillboard)i+="m33 "+o+".xyz,"+o+".xyz,"+r+"\n",i+="sub "+o+".xyz,"+o+".xyz,"+e.positionTarget+".xyz\n",i+="add "+e.scaleAndRotateTarget+".xyz,"+o+".xyz,"+e.scaleAndRotateTarget+".xyz\n";else for(i+="m33 "+e.scaleAndRotateTarget+".xyz,"+e.scaleAndRotateTarget+".xyz,"+r+"\n",l=0;p>l;l++)i+="m33 "+e.rotationRegisters[l]+".xyz,"+e.rotationRegisters[l]+","+r+"\n"}if(this._iUsesPosition){var d=e.getFreeVertexAttribute();e.setRegisterIndex(this,n.FOLLOW_POSITION_INDEX,d.index),i+="add "+e.scaleAndRotateTarget+".xyz,"+d+","+e.scaleAndRotateTarget+".xyz\n"}return i},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e}(a);e.exports=o},{"awayjs-renderergl/lib/animators/ParticleAnimationSet":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleFollowState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleInitialColorNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/ColorTransform"),r=t("awayjs-renderergl/lib/animators/ParticleAnimationSet"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),o=t("awayjs-renderergl/lib/animators/states/ParticleInitialColorState"),h=function(t){function e(e,i,a,n){void 0===i&&(i=!0),void 0===a&&(a=!1),void 0===n&&(n=null),t.call(this,"ParticleInitialColor",e,i&&a?8:4,r.COLOR_PRIORITY),this._pStateClass=o,this._iUsesMultiplier=i,this._iUsesOffset=a,this._iInitialColor=n||new s}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i="";if(e.needFragmentAnimation){if(this._iUsesMultiplier){var s=this._pMode==a.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute();e.setRegisterIndex(this,o.MULTIPLIER_INDEX,s.index),i+="mul "+e.colorMulTarget+","+s+","+e.colorMulTarget+"\n"}if(this._iUsesOffset){var r=this._pMode==a.LOCAL_STATIC?e.getFreeVertexAttribute():e.getFreeVertexConstant();e.setRegisterIndex(this,o.OFFSET_INDEX,r.index),i+="add "+e.colorAddTarget+","+r+","+e.colorAddTarget+"\n"}}return i},e.prototype._iProcessAnimationSetting=function(t){this._iUsesMultiplier&&(t.hasColorMulNode=!0),this._iUsesOffset&&(t.hasColorAddNode=!0)},e.prototype._iGeneratePropertyOfOneParticle=function(t){var i=t[e.COLOR_INITIAL_COLORTRANSFORM];if(!i)throw new Error("there is no "+e.COLOR_INITIAL_COLORTRANSFORM+" in param!");var s=0;this._iUsesMultiplier&&(this._pOneData[s++]=i.redMultiplier,this._pOneData[s++]=i.greenMultiplier,this._pOneData[s++]=i.blueMultiplier,this._pOneData[s++]=i.alphaMultiplier),this._iUsesOffset&&(this._pOneData[s++]=i.redOffset/255,this._pOneData[s++]=i.greenOffset/255,this._pOneData[s++]=i.blueOffset/255,this._pOneData[s++]=i.alphaOffset/255)},e.COLOR_INITIAL_COLORTRANSFORM="ColorInitialColorTransform",e}(n);e.exports=h},{"awayjs-core/lib/geom/ColorTransform":void 0,"awayjs-renderergl/lib/animators/ParticleAnimationSet":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleInitialColorState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/animators/nodes/AnimationNodeBase"),r=function(t){function e(i,s,r,a){void 0===a&&(a=1),t.call(this),this._pDataLength=3,i+=e.MODES[s],this.name=i,this._pMode=s,this._priority=a,this._pDataLength=r,this._pOneData=new Array(this._pDataLength)}return i(e,t),Object.defineProperty(e.prototype,"mode",{get:function(){return this._pMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataLength",{get:function(){return this._pDataLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oneData",{get:function(){return this._pOneData},enumerable:!0,configurable:!0}),e.prototype.getAGALVertexCode=function(){return""},e.prototype.getAGALFragmentCode=function(){return""},e.prototype.getAGALUVCode=function(){return""},e.prototype._iGeneratePropertyOfOneParticle=function(){},e.prototype._iProcessAnimationSetting=function(){},e.GLOBAL="Global",e.LOCAL_STATIC="LocalStatic",e.LOCAL_DYNAMIC="LocalDynamic",e.MODES={0:e.GLOBAL,1:e.LOCAL_STATIC,2:e.LOCAL_DYNAMIC},e}(s);e.exports=r},{"awayjs-display/lib/animators/nodes/AnimationNodeBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleOrbitNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),o=t("awayjs-renderergl/lib/animators/states/ParticleOrbitState"),h=function(t){function e(e,i,r,a,n,h,l,p){void 0===i&&(i=!0),void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===n&&(n=100),void 0===h&&(h=1),void 0===l&&(l=0),void 0===p&&(p=null);var d=3;a&&d++,t.call(this,"ParticleOrbit",e,d),this._pStateClass=o,this._iUsesEulers=i,this._iUsesCycle=r,this._iUsesPhase=a,this._iRadius=n,this._iCycleDuration=h,this._iCyclePhase=l,this._iEulers=p||new s}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i=this._pMode==a.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute();e.setRegisterIndex(this,o.ORBIT_INDEX,i.index);var s=e.getFreeVertexConstant();e.setRegisterIndex(this,o.EULERS_INDEX,s.index),e.getFreeVertexConstant(),e.getFreeVertexConstant(),e.getFreeVertexConstant();var n=e.getFreeVertexVectorTemp();e.addVertexTempUsages(n,1);var h=new r(n.regName,n.index),l=e.getFreeVertexVectorTemp(),p=new r(l.regName,l.index,0),d=new r(l.regName,l.index,1),u=new r(l.regName,l.index,2);e.removeVertexTempUsage(n);var c="";return this._iUsesCycle?(c+="mul "+u+","+e.vertexTime+","+i+".y\n",this._iUsesPhase&&(c+="add "+u+","+u+","+i+".w\n")):c+="mul "+u+","+e.vertexLife+","+i+".y\n",c+="cos "+p+","+u+"\n",c+="sin "+d+","+u+"\n",c+="mul "+h+".x,"+p+","+i+".x\n",c+="mul "+h+".y,"+d+","+i+".x\n",c+="mov "+h+".wz"+e.vertexZeroConst+"\n",this._iUsesEulers&&(c+="m44 "+h+","+h+","+s+"\n"),c+="add "+e.positionTarget+".xyz,"+h+".xyz,"+e.positionTarget+".xyz\n",e.needVelocity&&(c+="neg "+h+".x,"+d+"\n",c+="mov "+h+".y,"+p+"\n",c+="mov "+h+".zw,"+e.vertexZeroConst+"\n",this._iUsesEulers&&(c+="m44 "+h+","+h+","+s+"\n"),c+="mul "+h+","+h+","+i+".z\n",c+="div "+h+","+h+","+i+".y\n",this._iUsesCycle||(c+="div "+h+","+h+","+e.vertexLife+"\n"),c+="add "+e.velocityTarget+".xyz,"+e.velocityTarget+".xyz,"+h+".xyz\n"),c},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iGeneratePropertyOfOneParticle=function(t){var i=t[e.ORBIT_VECTOR3D];if(!i)throw new Error("there is no "+e.ORBIT_VECTOR3D+" in param!");if(this._pOneData[0]=i.x,this._iUsesCycle&&i.y<=0)throw new Error("the cycle duration must be greater than zero");this._pOneData[1]=2*Math.PI/(this._iUsesCycle?i.y:1),this._pOneData[2]=i.x*Math.PI*2,this._iUsesPhase&&(this._pOneData[3]=i.z*Math.PI/180)},e.ORBIT_VECTOR3D="OrbitVector3D",e}(n);e.exports=h},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleOrbitState":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleOscillatorNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),o=t("awayjs-renderergl/lib/animators/states/ParticleOscillatorState"),h=function(t){function e(e,i){void 0===i&&(i=null),t.call(this,"ParticleOscillator",e,4),this._pStateClass=o,this._iOscillator=i||new s}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i=this._pMode==a.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute();e.setRegisterIndex(this,o.OSCILLATOR_INDEX,i.index);var s=e.getFreeVertexVectorTemp(),n=new r(s.regName,s.index,0),h=new r(s.regName,s.index,1),l=new r(s.regName,s.index,2);e.addVertexTempUsages(s,1);var p=e.getFreeVertexVectorTemp(),d=new r(p.regName,p.index);e.removeVertexTempUsage(s);var u="";return u+="mul "+n+","+e.vertexTime+","+i+".w\n",u+="sin "+h+","+n+"\n",u+="mul "+d+".xyz,"+h+","+i+".xyz\n",u+="add "+e.positionTarget+".xyz,"+d+".xyz,"+e.positionTarget+".xyz\n",e.needVelocity&&(u+="cos "+l+","+n+"\n",u+="mul "+d+".xyz,"+l+","+i+".xyz\n",u+="add "+e.velocityTarget+".xyz,"+d+".xyz,"+e.velocityTarget+".xyz\n"),u},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iGeneratePropertyOfOneParticle=function(t){var i=t[e.OSCILLATOR_VECTOR3D];if(!i)throw new Error("there is no "+e.OSCILLATOR_VECTOR3D+" in param!");if(this._pOneData[0]=i.x,this._pOneData[1]=i.y,this._pOneData[2]=i.z,i.w<=0)throw new Error("the cycle duration must greater than zero");this._pOneData[3]=2*Math.PI/i.w},e.OSCILLATOR_VECTOR3D="OscillatorVector3D",e}(n);e.exports=h},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleOscillatorState":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticlePositionNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),a=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),n=t("awayjs-renderergl/lib/animators/states/ParticlePositionState"),o=function(t){function e(e,i){void 0===i&&(i=null),t.call(this,"ParticlePosition",e,3),this._pStateClass=n,this._iPosition=i||new s}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i=this._pMode==r.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute();return e.setRegisterIndex(this,n.POSITION_INDEX,i.index),"add "+e.positionTarget+".xyz,"+i+".xyz,"+e.positionTarget+".xyz\n"},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iGeneratePropertyOfOneParticle=function(t){var i=t[e.POSITION_VECTOR3D];if(!i)throw new Error("there is no "+e.POSITION_VECTOR3D+" in param!");this._pOneData[0]=i.x,this._pOneData[1]=i.y,this._pOneData[2]=i.z},e.POSITION_VECTOR3D="PositionVector3D",e}(a);e.exports=o},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticlePositionState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleRotateToHeadingNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement"),r=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),a=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),n=t("awayjs-renderergl/lib/animators/states/ParticleRotateToHeadingState"),o=function(t){function e(){t.call(this,"ParticleRotateToHeading",r.GLOBAL,0,3),this._pStateClass=n}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i,r="",a=e.rotationRegisters.length;if(e.hasBillboard){var o=e.getFreeVertexVectorTemp();e.addVertexTempUsages(o,1);var h=e.getFreeVertexVectorTemp();e.addVertexTempUsages(h,1);var l=e.getFreeVertexVectorTemp(),p=e.getFreeVertexConstant();for(e.setRegisterIndex(this,n.MATRIX_INDEX,p.index),e.getFreeVertexConstant(),e.getFreeVertexConstant(),e.getFreeVertexConstant(),e.removeVertexTempUsage(o),e.removeVertexTempUsage(h),r+="m33 "+o+".xyz,"+e.velocityTarget+".xyz,"+p+"\n",r+="mov "+l+","+e.vertexZeroConst+"\n",r+="mov "+l+".xy,"+o+".xy\n",r+="nrm "+l+".xyz,"+l+".xyz\n",r+="mov "+h+","+e.vertexZeroConst+"\n",r+="mov "+h+".x,"+l+".y\n",r+="mov "+h+".y,"+l+".x\n",r+="mov "+o+","+e.vertexZeroConst+"\n",r+="mov "+o+".x,"+l+".x\n",r+="neg "+o+".y,"+l+".y\n",r+="mov "+l+","+e.vertexZeroConst+"\n",r+="mov "+l+".z,"+e.vertexOneConst+"\n",r+="m33 "+e.scaleAndRotateTarget+".xyz,"+e.scaleAndRotateTarget+".xyz,"+o+"\n",i=0;a>i;i++)r+="m33 "+e.rotationRegisters[i]+".xyz,"+e.rotationRegisters[i]+","+o+"\n"}else{var d=e.getFreeVertexVectorTemp();e.addVertexTempUsages(d,1);var u=e.getFreeVertexVectorTemp();e.addVertexTempUsages(u,1);var c=e.getFreeVertexVectorTemp();e.addVertexTempUsages(c,1);var _=e.getFreeVertexVectorTemp(),y=new s(c.regName,c.index,3),g=new s(_.regName,_.index,3),f=new s(d.regName,d.index,3),m=g;for(e.removeVertexTempUsage(d),e.removeVertexTempUsage(u),e.removeVertexTempUsage(c),r+="mov "+u+".x,"+e.vertexOneConst+"\n",r+="mov "+u+".yz,"+e.vertexZeroConst+"\n",r+="nrm "+d+".xyz,"+e.velocityTarget+".xyz\n",r+="dp3 "+f+","+d+".xyz,"+u+".xyz\n",r+="crs "+d+".xyz,"+u+".xyz,"+d+".xyz\n",r+="nrm "+d+".xyz,"+d+".xyz\n",r+="dp3 "+c+".x,"+d+".xyz,"+d+".xyz\n",r+="sge "+c+".x,"+e.vertexZeroConst+","+c+".x\n",r+="add "+d+".z,"+c+".x,"+d+".z\n",r+="add "+m+","+f+","+e.vertexOneConst+"\n",r+="div "+m+","+m+","+e.vertexTwoConst+"\n",r+="sqt "+y+","+m+"\n",r+="sub "+m+","+e.vertexOneConst+","+f+"\n",r+="div "+m+","+m+","+e.vertexTwoConst+"\n",r+="sqt "+g+","+m+"\n",r+="mul "+c+".xyz,"+g+","+d+".xyz\n",r+="mul "+_+".xyz,"+g+","+d+".xyz\n",r+="neg "+_+".xyz,"+_+".xyz\n",r+="crs "+d+".xyz,"+c+".xyz,"+e.scaleAndRotateTarget+".xyz\n",r+="mul "+u+".xyz,"+y+","+e.scaleAndRotateTarget+".xyz\n",r+="add "+d+".xyz,"+d+".xyz,"+u+".xyz\n",r+="dp3 "+u+".w,"+c+".xyz,"+e.scaleAndRotateTarget+".xyz\n",r+="neg "+d+".w,"+u+".w\n",r+="crs "+c+".xyz,"+d+".xyz,"+_+".xyz\n",r+="mul "+u+".xyzw,"+d+".xyzw,"+y+"\n",r+="add "+c+".xyz,"+c+".xyz,"+u+".xyz\n",r+="mul "+u+".xyz,"+d+".w,"+_+".xyz\n",r+="add "+e.scaleAndRotateTarget+".xyz,"+c+".xyz,"+u+".xyz\n",i=0;a>i;i++)r+="mov "+u+".x,"+e.vertexOneConst+"\n",r+="mov "+u+".yz,"+e.vertexZeroConst+"\n",r+="nrm "+d+".xyz,"+e.velocityTarget+".xyz\n",r+="dp3 "+f+","+d+".xyz,"+u+".xyz\n",r+="crs "+d+".xyz,"+u+".xyz,"+d+".xyz\n",r+="nrm "+d+".xyz,"+d+".xyz\n",r+="dp3 "+c+".x,"+d+".xyz,"+d+".xyz\n",r+="sge "+c+".x,"+e.vertexZeroConst+","+c+".x\n",r+="add "+d+".z,"+c+".x,"+d+".z\n",r+="add "+m+","+f+","+e.vertexOneConst+"\n",r+="div "+m+","+m+","+e.vertexTwoConst+"\n",r+="sqt "+y+","+m+"\n",r+="sub "+m+","+e.vertexOneConst+","+f+"\n",r+="div "+m+","+m+","+e.vertexTwoConst+"\n",r+="sqt "+g+","+m+"\n",r+="mul "+c+".xyz,"+g+","+d+".xyz\n",r+="mul "+_+".xyz,"+g+","+d+".xyz\n",r+="neg "+_+".xyz,"+_+".xyz\n",r+="crs "+d+".xyz,"+c+".xyz,"+e.rotationRegisters[i]+".xyz\n",r+="mul "+u+".xyz,"+y+","+e.rotationRegisters[i]+".xyz\n",r+="add "+d+".xyz,"+d+".xyz,"+u+".xyz\n",r+="dp3 "+u+".w,"+c+".xyz,"+e.rotationRegisters[i]+".xyz\n",r+="neg "+d+".w,"+u+".w\n",r+="crs "+c+".xyz,"+d+".xyz,"+_+".xyz\n",r+="mul "+u+".xyzw,"+d+".xyzw,"+y+"\n",r+="add "+c+".xyz,"+c+".xyz,"+u+".xyz\n",r+="mul "+u+".xyz,"+d+".w,"+_+".xyz\n",r+="add "+e.rotationRegisters[i]+".xyz,"+c+".xyz,"+u+".xyz\n"}return r},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iProcessAnimationSetting=function(t){t.needVelocity=!0},e}(a);e.exports=o},{"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleRotateToHeadingState":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleRotateToPositionNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),o=t("awayjs-renderergl/lib/animators/states/ParticleRotateToPositionState"),h=function(t){function e(e,i){void 0===i&&(i=null),t.call(this,"ParticleRotateToPosition",e,3,3),this._pStateClass=o,this._iPosition=i||new s}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i=this._pMode==a.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute();e.setRegisterIndex(this,o.POSITION_INDEX,i.index);var s,n="",h=e.rotationRegisters.length;if(e.hasBillboard){var l=e.getFreeVertexVectorTemp();e.addVertexTempUsages(l,1);var p=e.getFreeVertexVectorTemp();e.addVertexTempUsages(p,1);var d=e.getFreeVertexVectorTemp(),u=e.getFreeVertexConstant();for(e.setRegisterIndex(this,o.MATRIX_INDEX,u.index),e.getFreeVertexConstant(),e.getFreeVertexConstant(),e.getFreeVertexConstant(),e.removeVertexTempUsage(l),e.removeVertexTempUsage(p),n+="sub "+l+".xyz,"+i+".xyz,"+e.positionTarget+".xyz\n",n+="m33 "+l+".xyz,"+l+".xyz,"+u+"\n",n+="mov "+d+","+e.vertexZeroConst+"\n",n+="mov "+d+".xy,"+l+".xy\n",n+="nrm "+d+".xyz,"+d+".xyz\n",n+="mov "+p+","+e.vertexZeroConst+"\n",n+="mov "+p+".x,"+d+".y\n",n+="mov "+p+".y,"+d+".x\n",n+="mov "+l+","+e.vertexZeroConst+"\n",n+="mov "+l+".x,"+d+".x\n",n+="neg "+l+".y,"+d+".y\n",n+="mov "+d+","+e.vertexZeroConst+"\n",n+="mov "+d+".z,"+e.vertexOneConst+"\n",n+="m33 "+e.scaleAndRotateTarget+".xyz,"+e.scaleAndRotateTarget+".xyz,"+l+"\n",s=0;h>s;s++)n+="m33 "+e.rotationRegisters[s]+".xyz,"+e.rotationRegisters[s]+","+l+"\n"}else{var c=e.getFreeVertexVectorTemp();e.addVertexTempUsages(c,1);var _=e.getFreeVertexVectorTemp();e.addVertexTempUsages(_,1);var y=new r(_.regName,_.index,0),g=new r(_.regName,_.index,1),f=new r(_.regName,_.index,2),m=new r(_.regName,_.index,3),b=e.getFreeVertexVectorTemp();for(e.addVertexTempUsages(b,1),e.removeVertexTempUsage(c),e.removeVertexTempUsage(_),e.removeVertexTempUsage(b),n+="sub "+c+".xyz,"+i+".xyz,"+e.positionTarget+".xyz\n",n+="nrm "+c+".xyz,"+c+".xyz\n",n+="mov "+g+","+c+".y\n",n+="mul "+y+","+g+","+g+"\n",n+="sub "+y+","+e.vertexOneConst+","+y+"\n",n+="sqt "+y+","+y+"\n",n+="mul "+b+".x,"+y+","+e.scaleAndRotateTarget+".y\n",n+="mul "+b+".y,"+g+","+e.scaleAndRotateTarget+".z\n",n+="mul "+b+".z,"+g+","+e.scaleAndRotateTarget+".y\n",n+="mul "+b+".w,"+y+","+e.scaleAndRotateTarget+".z\n",n+="sub "+e.scaleAndRotateTarget+".y,"+b+".x,"+b+".y\n",n+="add "+e.scaleAndRotateTarget+".z,"+b+".z,"+b+".w\n",n+="abs "+b+".y,"+c+".y\n",n+="sge "+b+".z,"+b+".y,"+e.vertexOneConst+"\n",n+="mul "+b+".x,"+b+".y,"+c+".y\n",n+="mov "+c+".y,"+e.vertexZeroConst+"\n",n+="dp3 "+g+","+c+".xyz,"+c+".xyz\n",n+="sge "+m+","+e.vertexZeroConst+","+g+"\n",n+="mov "+c+".y,"+e.vertexZeroConst+"\n",n+="nrm "+c+".xyz,"+c+".xyz\n",n+="sub "+g+","+e.vertexOneConst+","+m+"\n",n+="mul "+g+","+g+","+c+".x\n",n+="mov "+y+","+c+".z\n",n+="neg "+y+","+y+"\n",n+="sub "+f+","+e.vertexOneConst+","+y+"\n",n+="mul "+f+","+b+".x,"+m+"\n",n+="add "+y+","+y+","+f+"\n",n+="mul "+b+".x,"+y+","+e.scaleAndRotateTarget+".x\n",n+="mul "+b+".y,"+g+","+e.scaleAndRotateTarget+".z\n",n+="mul "+b+".z,"+g+","+e.scaleAndRotateTarget+".x\n",n+="mul "+b+".w,"+y+","+e.scaleAndRotateTarget+".z\n",n+="sub "+e.scaleAndRotateTarget+".x,"+b+".x,"+b+".y\n",n+="add "+e.scaleAndRotateTarget+".z,"+b+".z,"+b+".w\n",s=0;h>s;s++)n+="sub "+c+".xyz,"+i+".xyz,"+e.positionTarget+".xyz\n",n+="nrm "+c+".xyz,"+c+".xyz\n",n+="mov "+g+","+c+".y\n",n+="mul "+y+","+g+","+g+"\n",n+="sub "+y+","+e.vertexOneConst+","+y+"\n",n+="sqt "+y+","+y+"\n",n+="mul "+b+".x,"+y+","+e.rotationRegisters[s]+".y\n",n+="mul "+b+".y,"+g+","+e.rotationRegisters[s]+".z\n",n+="mul "+b+".z,"+g+","+e.rotationRegisters[s]+".y\n",n+="mul "+b+".w,"+y+","+e.rotationRegisters[s]+".z\n",n+="sub "+e.rotationRegisters[s]+".y,"+b+".x,"+b+".y\n",n+="add "+e.rotationRegisters[s]+".z,"+b+".z,"+b+".w\n",n+="abs "+b+".y,"+c+".y\n",n+="sge "+b+".z,"+b+".y,"+e.vertexOneConst+"\n",n+="mul "+b+".x,"+b+".y,"+c+".y\n",n+="mov "+c+".y,"+e.vertexZeroConst+"\n",n+="dp3 "+g+","+c+".xyz,"+c+".xyz\n",n+="sge "+m+","+e.vertexZeroConst+","+g+"\n",n+="mov "+c+".y,"+e.vertexZeroConst+"\n",n+="nrm "+c+".xyz,"+c+".xyz\n",n+="sub "+g+","+e.vertexOneConst+","+m+"\n",n+="mul "+g+","+g+","+c+".x\n",n+="mov "+y+","+c+".z\n",n+="neg "+y+","+y+"\n",n+="sub "+f+","+e.vertexOneConst+","+y+"\n",n+="mul "+f+","+b+".x,"+m+"\n",n+="add "+y+","+y+","+f+"\n",n+="mul "+b+".x,"+y+","+e.rotationRegisters[s]+".x\n",n+="mul "+b+".y,"+g+","+e.rotationRegisters[s]+".z\n",n+="mul "+b+".z,"+g+","+e.rotationRegisters[s]+".x\n",n+="mul "+b+".w,"+y+","+e.rotationRegisters[s]+".z\n",n+="sub "+e.rotationRegisters[s]+".x,"+b+".x,"+b+".y\n",n+="add "+e.rotationRegisters[s]+".z,"+b+".z,"+b+".w\n"}return n},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iGeneratePropertyOfOneParticle=function(t){var i=t[e.POSITION_VECTOR3D];if(!i)throw new Error("there is no "+e.POSITION_VECTOR3D+" in param!");this._pOneData[0]=i.x,this._pOneData[1]=i.y,this._pOneData[2]=i.z},e.POSITION_VECTOR3D="RotateToPositionVector3D",e}(n);e.exports=h},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleRotateToPositionState":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleRotationalVelocityNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),o=t("awayjs-renderergl/lib/animators/states/ParticleRotationalVelocityState"),h=function(t){function e(e,i){void 0===i&&(i=null),t.call(this,"ParticleRotationalVelocity",e,4),this._pStateClass=o,this._iRotationalVelocity=i||new s}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i=this._pMode==a.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute();e.setRegisterIndex(this,o.ROTATIONALVELOCITY_INDEX,i.index);var s=e.getFreeVertexVectorTemp();e.addVertexTempUsages(s,1);var n=e.getFreeVertexVectorTemp();e.addVertexTempUsages(n,1);var h=e.getFreeVertexVectorTemp();e.addVertexTempUsages(h,1);var l=new r(h.regName,h.index),p=e.getFreeVertexVectorTemp();p=new r(p.regName,p.index);var d=new r(l.regName,l.index,3),u=new r(p.regName,p.index,3);e.removeVertexTempUsage(s),e.removeVertexTempUsage(n),e.removeVertexTempUsage(h);var c="";c+="mov "+s+".xyz,"+i+".xyz\n",c+="mov "+s+".w,"+e.vertexZeroConst+"\n",c+="mul "+d+","+e.vertexTime+","+i+".w\n",c+="sin "+u+","+d+"\n",c+="cos "+d+","+d+"\n",c+="mul "+l+".xyz,"+u+","+s+".xyz\n",c+="mul "+p+".xyz,"+u+","+s+".xyz\n",c+="neg "+p+".xyz,"+p+".xyz\n",c+="crs "+s+".xyz,"+l+".xyz,"+e.scaleAndRotateTarget+".xyz\n",c+="mul "+n+".xyz,"+d+","+e.scaleAndRotateTarget+".xyz\n",c+="add "+s+".xyz,"+s+".xyz,"+n+".xyz\n",c+="dp3 "+n+".w,"+l+".xyz,"+e.scaleAndRotateTarget+".xyz\n",c+="neg "+s+".w,"+n+".w\n",c+="crs "+l+".xyz,"+s+".xyz,"+p+".xyz\n",c+="mul "+n+".xyzw,"+s+".xyzw,"+d+"\n",c+="add "+l+".xyz,"+l+".xyz,"+n+".xyz\n",c+="mul "+n+".xyz,"+s+".w,"+p+".xyz\n",c+="add "+e.scaleAndRotateTarget+".xyz,"+l+".xyz,"+n+".xyz\n";for(var _=e.rotationRegisters.length,y=0;_>y;y++)c+="mov "+s+".xyz,"+i+".xyz\n",c+="mov "+s+".w,"+e.vertexZeroConst+"\n",c+="mul "+d+","+e.vertexTime+","+i+".w\n",c+="sin "+u+","+d+"\n",c+="cos "+d+","+d+"\n",c+="mul "+l+".xyz,"+u+","+s+".xyz\n",c+="mul "+p+".xyz,"+u+","+s+".xyz\n",c+="neg "+p+".xyz,"+p+".xyz\n",c+="crs "+s+".xyz,"+l+".xyz,"+e.rotationRegisters[y]+".xyz\n",c+="mul "+n+".xyz,"+d+","+e.rotationRegisters[y]+"\n",c+="add "+s+".xyz,"+s+".xyz,"+n+".xyz\n",c+="dp3 "+n+".w,"+l+".xyz,"+e.rotationRegisters[y]+"\n",c+="neg "+s+".w,"+n+".w\n",c+="crs "+l+".xyz,"+s+".xyz,"+p+".xyz\n",c+="mul "+n+".xyzw,"+s+".xyzw,"+d+"\n",c+="add "+l+".xyz,"+l+".xyz,"+n+".xyz\n",c+="mul "+n+".xyz,"+s+".w,"+p+".xyz\n",c+="add "+e.rotationRegisters[y]+","+l+".xyz,"+n+".xyz\n";return c},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iGeneratePropertyOfOneParticle=function(t){var i=t[e.ROTATIONALVELOCITY_VECTOR3D];
if(!i)throw new Error("there is no "+e.ROTATIONALVELOCITY_VECTOR3D+" in param!");if(i.length<=0?i.z=1:i.normalize(),this._pOneData[0]=i.x,this._pOneData[1]=i.y,this._pOneData[2]=i.z,i.w<=0)throw new Error("the cycle duration must greater than zero");this._pOneData[3]=Math.PI/i.w},e.ROTATIONALVELOCITY_VECTOR3D="RotationalVelocityVector3D",e}(n);e.exports=h},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleRotationalVelocityState":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleScaleNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),r=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),a=t("awayjs-renderergl/lib/animators/states/ParticleScaleState"),n=function(t){function e(e,i,s,r,n,o,h){void 0===r&&(r=1),void 0===n&&(n=1),void 0===o&&(o=1),void 0===h&&(h=0),t.call(this,"ParticleScale",e,i&&s?4:i||s?3:2,3),this._pStateClass=a,this._iUsesCycle=i,this._iUsesPhase=s,this._iMinScale=r,this._iMaxScale=n,this._iCycleDuration=o,this._iCyclePhase=h}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i="",r=e.getFreeVertexSingleTemp(),n=this._pMode==s.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute();return e.setRegisterIndex(this,a.SCALE_INDEX,n.index),this._iUsesCycle&&(i+="mul "+r+","+e.vertexTime+","+n+".z\n",this._iUsesPhase&&(i+="add "+r+","+r+","+n+".w\n"),i+="sin "+r+","+r+"\n"),i+="mul "+r+","+n+".y,"+(this._iUsesCycle?r:e.vertexLife)+"\n",i+="add "+r+","+n+".x,"+r+"\n",i+="mul "+e.scaleAndRotateTarget+".xyz,"+e.scaleAndRotateTarget+".xyz,"+r+"\n"},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iGeneratePropertyOfOneParticle=function(t){var i=t[e.SCALE_VECTOR3D];if(!i)throw new Error("there is no "+e.SCALE_VECTOR3D+" in param!");if(this._iUsesCycle){if(this._pOneData[0]=(i.x+i.y)/2,this._pOneData[1]=Math.abs(i.x-i.y)/2,i.z<=0)throw new Error("the cycle duration must be greater than zero");this._pOneData[2]=2*Math.PI/i.z,this._iUsesPhase&&(this._pOneData[3]=i.w*Math.PI/180)}else this._pOneData[0]=i.x,this._pOneData[1]=i.y-i.x},e.SCALE_VECTOR3D="ScaleVector3D",e}(r);e.exports=n},{"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleScaleState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleSegmentedColorNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement"),r=t("awayjs-renderergl/lib/animators/ParticleAnimationSet"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),o=t("awayjs-renderergl/lib/animators/states/ParticleSegmentedColorState"),h=function(t){function e(e,i,s,n,h,l){if(t.call(this,"ParticleSegmentedColor",a.GLOBAL,0,r.COLOR_PRIORITY),this._pStateClass=o,s>4)throw new Error("the numSegmentPoint must be less or equal 4");this._iUsesMultiplier=e,this._iUsesOffset=i,this._iNumSegmentPoint=s,this._iStartColor=n,this._iEndColor=h,this._iSegmentPoints=l}return i(e,t),e.prototype._iProcessAnimationSetting=function(t){this._iUsesMultiplier&&(t.hasColorMulNode=!0),this._iUsesOffset&&(t.hasColorAddNode=!0)},e.prototype.getAGALVertexCode=function(t,e){var i="";if(e.needFragmentAnimation){var r;this._iUsesMultiplier&&(r=e.getFreeVertexVectorTemp(),e.addVertexTempUsages(r,1));var a=e.getFreeVertexVectorTemp();e.addVertexTempUsages(a,1);var n=e.getFreeVertexVectorTemp(),h=new s(n.regName,n.index,0),l=new s(n.regName,n.index,1);this._iUsesMultiplier&&e.removeVertexTempUsage(r),e.removeVertexTempUsage(a);var p=e.getFreeVertexConstant();e.setRegisterIndex(this,o.TIME_DATA_INDEX,p.index);var d,u,c;if(this._iUsesMultiplier)for(u=e.getFreeVertexConstant(),e.setRegisterIndex(this,o.START_MULTIPLIER_INDEX,u.index),c=new Array,d=0;d<this._iNumSegmentPoint+1;d++)c.push(e.getFreeVertexConstant());var _,y;if(this._iUsesOffset)for(_=e.getFreeVertexConstant(),e.setRegisterIndex(this,o.START_OFFSET_INDEX,_.index),y=new Array,d=0;d<this._iNumSegmentPoint+1;d++)y.push(e.getFreeVertexConstant());for(this._iUsesMultiplier&&(i+="mov "+r+","+u+"\n"),this._iUsesOffset&&(i+="add "+e.colorAddTarget+","+e.colorAddTarget+","+_+"\n"),d=0;d<this._iNumSegmentPoint;d++){switch(d){case 0:i+="min "+l+","+e.vertexLife+","+p+".x\n";break;case 1:i+="sub "+h+","+e.vertexLife+","+p+".x\n",i+="max "+l+","+h+","+e.vertexZeroConst+"\n",i+="min "+l+","+l+","+p+".y\n";break;case 2:i+="sub "+h+","+h+","+p+".y\n",i+="max "+l+","+h+","+e.vertexZeroConst+"\n",i+="min "+l+","+l+","+p+".z\n";break;case 3:i+="sub "+h+","+h+","+p+".z\n",i+="max "+l+","+h+","+e.vertexZeroConst+"\n",i+="min "+l+","+l+","+p+".w\n"}this._iUsesMultiplier&&(i+="mul "+a+","+l+","+c[d]+"\n",i+="add "+r+","+r+","+a+"\n"),this._iUsesOffset&&(i+="mul "+a+","+l+","+y[d]+"\n",i+="add "+e.colorAddTarget+","+e.colorAddTarget+","+a+"\n")}if(0==this._iNumSegmentPoint)l=e.vertexLife;else{switch(this._iNumSegmentPoint){case 1:i+="sub "+h+","+e.vertexLife+","+p+".x\n";break;case 2:i+="sub "+h+","+h+","+p+".y\n";break;case 3:i+="sub "+h+","+h+","+p+".z\n";break;case 4:i+="sub "+h+","+h+","+p+".w\n"}i+="max "+l+","+h+","+e.vertexZeroConst+"\n"}this._iUsesMultiplier&&(i+="mul "+a+","+l+","+c[this._iNumSegmentPoint]+"\n",i+="add "+r+","+r+","+a+"\n",i+="mul "+e.colorMulTarget+","+e.colorMulTarget+","+r+"\n"),this._iUsesOffset&&(i+="mul "+a+","+l+","+y[this._iNumSegmentPoint]+"\n",i+="add "+e.colorAddTarget+","+e.colorAddTarget+","+a+"\n")}return i},e}(n);e.exports=h},{"awayjs-renderergl/lib/animators/ParticleAnimationSet":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleSegmentedColorState":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleSpriteSheetNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement"),r=t("awayjs-renderergl/lib/animators/ParticleAnimationSet"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),o=t("awayjs-renderergl/lib/animators/states/ParticleSpriteSheetState"),h=function(t){function e(e,i,s,a,n,h,l,p){void 0===a&&(a=1),void 0===n&&(n=1),void 0===h&&(h=1),void 0===l&&(l=0),void 0===p&&(p=Number.MAX_VALUE),t.call(this,"ParticleSpriteSheet",e,i?s?3:2:1,r.POST_PRIORITY+1),this._pStateClass=o,this._iUsesCycle=i,this._iUsesPhase=s,this._iNumColumns=a,this._iNumRows=n,this._iCyclePhase=l,this._iCycleDuration=h,this._iTotalFrames=Math.min(p,a*n)}return i(e,t),Object.defineProperty(e.prototype,"numColumns",{get:function(){return this._iNumColumns},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numRows",{get:function(){return this._iNumRows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._iTotalFrames},enumerable:!0,configurable:!0}),e.prototype.getAGALUVCode=function(t,e){var i=e.getFreeVertexConstant(),r=this._pMode==a.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute();e.setRegisterIndex(this,o.UV_INDEX_0,i.index),e.setRegisterIndex(this,o.UV_INDEX_1,r.index);var n=new s(i.regName,i.index,0),h=new s(i.regName,i.index,1),l=new s(i.regName,i.index,2),p=new s(r.regName,r.index,0),d=new s(r.regName,r.index,1),u=new s(r.regName,r.index,2),c=e.getFreeVertexVectorTemp(),_=new s(c.regName,c.index,0),y=new s(c.regName,c.index,1);c=new s(c.regName,c.index,2);var g=new s(c.regName,c.index,3),f=new s(e.uvTarget.regName,e.uvTarget.index,0),m=new s(e.uvTarget.regName,e.uvTarget.index,1),b="";return b+="mul "+f+","+f+","+h+"\n",this._iNumRows>1&&(b+="mul "+m+","+m+","+l+"\n"),this._iUsesCycle?(b+=this._iUsesPhase?"add "+_+","+e.vertexTime+","+u+"\n":"mov "+_+","+e.vertexTime+"\n",b+="div "+_+","+_+","+d+"\n",b+="frc "+_+","+_+"\n",b+="mul "+_+","+_+","+d+"\n",b+="mul "+c+","+_+","+p+"\n"):b+="mul "+c.toString()+","+e.vertexLife+","+n+"\n",this._iNumRows>1&&(b+="frc "+g+","+c+"\n",b+="sub "+y+","+c+","+g+"\n",b+="mul "+y+","+y+","+l+"\n",b+="add "+m+","+m+","+y+"\n"),b+="div "+g+","+c+","+h+"\n",b+="frc "+c+","+g+"\n",b+="sub "+g+","+g+","+c+"\n",b+="mul "+c+","+g+","+h+"\n",this._iNumRows>1&&(b+="frc "+c+","+c+"\n"),b+="add "+f+","+f+","+c+"\n"},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iProcessAnimationSetting=function(t){t.hasUVNode=!0},e.prototype._iGeneratePropertyOfOneParticle=function(t){if(this._iUsesCycle){var i=t[e.UV_VECTOR3D];if(!i)throw new Error("there is no "+e.UV_VECTOR3D+" in param!");if(i.x<=0)throw new Error("the cycle duration must be greater than zero");var s=this._iTotalFrames/this._iNumColumns;this._pOneData[0]=s/i.x,this._pOneData[1]=i.x,this._iUsesPhase&&(this._pOneData[2]=i.y)}},e.UV_VECTOR3D="UVVector3D",e}(n);e.exports=h},{"awayjs-renderergl/lib/animators/ParticleAnimationSet":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleSpriteSheetState":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleTimeNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),r=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),a=t("awayjs-renderergl/lib/animators/states/ParticleTimeState"),n=function(t){function e(e,i,r){void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===r&&(r=!1),this._pStateClass=a,this._iUsesDuration=e,this._iUsesLooping=i,this._iUsesDelay=r,t.call(this,"ParticleTime",s.LOCAL_STATIC,4,0)}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i=e.getFreeVertexAttribute();e.setRegisterIndex(this,a.TIME_STREAM_INDEX,i.index);var s=e.getFreeVertexConstant();e.setRegisterIndex(this,a.TIME_CONSTANT_INDEX,s.index);var r="";r+="sub "+e.vertexTime+","+s+","+i+".x\n";var n=e.getFreeVertexSingleTemp();if(r+="sge "+n+","+e.vertexTime+","+e.vertexZeroConst+"\n",r+="mul "+e.scaleAndRotateTarget+".xyz,"+e.scaleAndRotateTarget+".xyz,"+n+"\n",this._iUsesDuration)if(this._iUsesLooping){var o=e.getFreeVertexSingleTemp();this._iUsesDelay?(r+="div "+o+","+e.vertexTime+","+i+".z\n",r+="frc "+o+","+o+"\n",r+="mul "+e.vertexTime+","+o+","+i+".z\n",r+="slt "+o+","+e.vertexTime+","+i+".y\n",r+="mul "+e.scaleAndRotateTarget+".xyz,"+e.scaleAndRotateTarget+".xyz,"+o+"\n"):(r+="mul "+o+","+e.vertexTime+","+i+".w\n",r+="frc "+o+","+o+"\n",r+="mul "+e.vertexTime+","+o+","+i+".y\n")}else{var h=e.getFreeVertexSingleTemp();r+="sge "+h+","+i+".y,"+e.vertexTime+"\n",r+="mul "+e.scaleAndRotateTarget+".xyz,"+e.scaleAndRotateTarget+".xyz,"+h+"\n"}return r+="mul "+e.vertexLife+","+e.vertexTime+","+i+".w\n"},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iGeneratePropertyOfOneParticle=function(t){this._pOneData[0]=t.startTime,this._pOneData[1]=t.duration,this._pOneData[2]=t.delay+t.duration,this._pOneData[3]=1/t.duration},e}(r);e.exports=n},{"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleTimeState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleUVNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement"),a=t("awayjs-renderergl/lib/animators/ParticleAnimationSet"),n=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),o=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),h=t("awayjs-renderergl/lib/animators/states/ParticleUVState"),l=function(t){function e(e,i,s,r){void 0===i&&(i=1),void 0===s&&(s=1),void 0===r&&(r="x"),t.call(this,"ParticleUV",n.GLOBAL,4,a.POST_PRIORITY+1),this._pStateClass=h,this._cycle=i,this._scale=s,this._axis=r,this.updateUVData()}return i(e,t),Object.defineProperty(e.prototype,"cycle",{get:function(){return this._cycle},set:function(t){this._cycle=t,this.updateUVData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t,this.updateUVData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axis",{get:function(){return this._axis},set:function(t){this._axis=t},enumerable:!0,configurable:!0}),e.prototype.getAGALUVCode=function(t,e){var i="",s=e.getFreeVertexConstant();e.setRegisterIndex(this,h.UV_INDEX,s.index);var a="x"==this._axis?0:"y"==this._axis?1:2,n=new r(e.uvTarget.regName,e.uvTarget.index,a),o=e.getFreeVertexSingleTemp();return 1!=this._scale&&(i+="mul "+n+","+n+","+s+".y\n"),i+="mul "+o+","+e.vertexTime+","+s+".x\n",i+="sin "+o+","+o+"\n",i+="add "+n+","+n+","+o+"\n"},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype.updateUVData=function(){this._iUvData=new s(2*Math.PI/this._cycle,this._scale,0,0)},e.prototype._iProcessAnimationSetting=function(t){t.hasUVNode=!0},e.U_AXIS="x",e.V_AXIS="y",e}(o);e.exports=l},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/ParticleAnimationSet":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleUVState":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/ParticleVelocityNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),a=t("awayjs-renderergl/lib/animators/nodes/ParticleNodeBase"),n=t("awayjs-renderergl/lib/animators/states/ParticleVelocityState"),o=function(t){function e(e,i){void 0===i&&(i=null),t.call(this,"ParticleVelocity",e,3),this._pStateClass=n,this._iVelocity=i||new s}return i(e,t),e.prototype.getAGALVertexCode=function(t,e){var i=this._pMode==r.GLOBAL?e.getFreeVertexConstant():e.getFreeVertexAttribute();e.setRegisterIndex(this,n.VELOCITY_INDEX,i.index);var s=e.getFreeVertexVectorTemp(),a="";return a+="mul "+s+","+e.vertexTime+","+i+"\n",a+="add "+e.positionTarget+".xyz,"+s+","+e.positionTarget+".xyz\n",e.needVelocity&&(a+="add "+e.velocityTarget+".xyz,"+i+".xyz,"+e.velocityTarget+".xyz\n"),a},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._iGeneratePropertyOfOneParticle=function(t){var i=t[e.VELOCITY_VECTOR3D];if(!i)throw new Error("there is no "+e.VELOCITY_VECTOR3D+" in param!");this._pOneData[0]=i.x,this._pOneData[1]=i.y,this._pOneData[2]=i.z},e.VELOCITY_VECTOR3D="VelocityVector3D",e}(a);e.exports=o},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/nodes/ParticleNodeBase":void 0,"awayjs-renderergl/lib/animators/states/ParticleVelocityState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/SkeletonBinaryLERPNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/animators/nodes/AnimationNodeBase"),r=t("awayjs-renderergl/lib/animators/states/SkeletonBinaryLERPState"),a=function(t){function e(){t.call(this),this._pStateClass=r}return i(e,t),e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e}(s);e.exports=a},{"awayjs-display/lib/animators/nodes/AnimationNodeBase":void 0,"awayjs-renderergl/lib/animators/states/SkeletonBinaryLERPState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/SkeletonClipNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase"),r=t("awayjs-renderergl/lib/animators/states/SkeletonClipState"),a=function(t){function e(){t.call(this),this._frames=new Array,this.highQuality=!1,this._pStateClass=r}return i(e,t),Object.defineProperty(e.prototype,"frames",{get:function(){return this._frames},enumerable:!0,configurable:!0}),e.prototype.addFrame=function(t,e){this._frames.push(t),this._pDurations.push(e),this._pNumFrames=this._pDurations.length,this._pStitchDirty=!0},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e.prototype._pUpdateStitch=function(){t.prototype._pUpdateStitch.call(this);for(var e,i,s,r=this._pNumFrames-1;r--;)this._pTotalDuration+=this._pDurations[r],e=this._frames[r].jointPoses[0].translation,i=this._frames[r+1].jointPoses[0].translation,s=i.subtract(e),this._pTotalDelta.x+=s.x,this._pTotalDelta.y+=s.y,this._pTotalDelta.z+=s.z;(this._pStitchFinalFrame||!this._pLooping)&&(this._pTotalDuration+=this._pDurations[this._pNumFrames-1],e=this._frames[0].jointPoses[0].translation,i=this._frames[1].jointPoses[0].translation,s=i.subtract(e),this._pTotalDelta.x+=s.x,this._pTotalDelta.y+=s.y,this._pTotalDelta.z+=s.z)},e}(s);e.exports=a},{"awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase":void 0,"awayjs-renderergl/lib/animators/states/SkeletonClipState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/SkeletonDifferenceNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/animators/nodes/AnimationNodeBase"),r=t("awayjs-renderergl/lib/animators/states/SkeletonDifferenceState"),a=function(t){function e(){t.call(this),this._pStateClass=r}return i(e,t),e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e}(s);e.exports=a},{"awayjs-display/lib/animators/nodes/AnimationNodeBase":void 0,"awayjs-renderergl/lib/animators/states/SkeletonDifferenceState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/SkeletonDirectionalNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/animators/nodes/AnimationNodeBase"),r=t("awayjs-renderergl/lib/animators/states/SkeletonDirectionalState"),a=function(t){function e(){t.call(this),this._pStateClass=r}return i(e,t),e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e}(s);e.exports=a},{"awayjs-display/lib/animators/nodes/AnimationNodeBase":void 0,"awayjs-renderergl/lib/animators/states/SkeletonDirectionalState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/SkeletonNaryLERPNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/animators/nodes/AnimationNodeBase"),r=t("awayjs-renderergl/lib/animators/states/SkeletonNaryLERPState"),a=function(t){function e(){t.call(this),this._iInputs=new Array,this._pStateClass=r}return i(e,t),Object.defineProperty(e.prototype,"numInputs",{get:function(){return this._numInputs},enumerable:!0,configurable:!0}),e.prototype.getInputIndex=function(t){return this._iInputs.indexOf(t)},e.prototype.getInputAt=function(t){return this._iInputs[t]},e.prototype.addInput=function(t){this._iInputs[this._numInputs++]=t},e.prototype.getAnimationState=function(t){return t.getAnimationState(this)},e}(s);e.exports=a},{"awayjs-display/lib/animators/nodes/AnimationNodeBase":void 0,"awayjs-renderergl/lib/animators/states/SkeletonNaryLERPState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/nodes/VertexClipNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase"),a=t("awayjs-renderergl/lib/animators/states/VertexClipState"),n=function(t){function e(){t.call(this),this._frames=new Array,this._translations=new Array,this._pStateClass=a}return i(e,t),Object.defineProperty(e.prototype,"frames",{get:function(){return this._frames},enumerable:!0,configurable:!0}),e.prototype.addFrame=function(t,e,i){void 0===i&&(i=null),this._frames.push(t),this._pDurations.push(e),this._translations.push(i||new s),this._pNumFrames=this._pDurations.length,this._pStitchDirty=!0},e.prototype._pUpdateStitch=function(){t.prototype._pUpdateStitch.call(this);for(var e,i,s,r=this._pNumFrames-1;r--;)this._pTotalDuration+=this._pDurations[r],e=this._translations[r],i=this._translations[r+1],s=i.subtract(e),this._pTotalDelta.x+=s.x,this._pTotalDelta.y+=s.y,this._pTotalDelta.z+=s.z;this._pNumFrames>1&&(this._pStitchFinalFrame||!this._pLooping)&&(this._pTotalDuration+=this._pDurations[this._pNumFrames-1],e=this._translations[0],i=this._translations[1],s=i.subtract(e),this._pTotalDelta.x+=s.x,this._pTotalDelta.y+=s.y,this._pTotalDelta.z+=s.z)},e}(r);e.exports=n},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/nodes/AnimationClipNodeBase":void 0,"awayjs-renderergl/lib/animators/states/VertexClipState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/AnimationClipState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/states/AnimationStateBase"),r=t("awayjs-renderergl/lib/events/AnimationStateEvent"),a=function(t){function e(e,i){t.call(this,e,i),this._pFramesDirty=!0,this._animationClipNode=i}return i(e,t),Object.defineProperty(e.prototype,"blendWeight",{get:function(){return this._pFramesDirty&&this._pUpdateFrames(),this._pBlendWeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){return this._pFramesDirty&&this._pUpdateFrames(),this._pCurrentFrame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextFrame",{get:function(){return this._pFramesDirty&&this._pUpdateFrames(),this._pNextFrame},enumerable:!0,configurable:!0}),e.prototype.update=function(t){this._animationClipNode.looping||(t>this._pStartTime+this._animationClipNode.totalDuration?t=this._pStartTime+this._animationClipNode.totalDuration:t<this._pStartTime&&(t=this._pStartTime)),this._pTime!=t-this._pStartTime&&this._pUpdateTime(t)},e.prototype.phase=function(t){var e=t*this._animationClipNode.totalDuration+this._pStartTime;this._pTime!=e-this._pStartTime&&this._pUpdateTime(e)},e.prototype._pUpdateTime=function(e){this._pFramesDirty=!0,this._pTimeDir=e-this._pStartTime>this._pTime?1:-1,t.prototype._pUpdateTime.call(this,e)},e.prototype._pUpdateFrames=function(){this._pFramesDirty=!1;var t=this._animationClipNode.looping,e=this._animationClipNode.totalDuration,i=this._animationClipNode.lastFrame,s=this._pTime;if(t&&(s>=e||0>s)&&(s%=e,0>s&&(s+=e)),!t&&s>=e)this.notifyPlaybackComplete(),this._pCurrentFrame=i,this._pNextFrame=i,this._pBlendWeight=0;else if(!t&&0>=s)this._pCurrentFrame=0,this._pNextFrame=0,this._pBlendWeight=0;else if(this._animationClipNode.fixedFrameRate){var r=s/e*i;this._pCurrentFrame=Math.floor(r),this._pBlendWeight=r-this._pCurrentFrame,this._pNextFrame=this._pCurrentFrame+1}else{this._pCurrentFrame=0,this._pNextFrame=0;var a,n=0,o=this._animationClipNode.durations;do a=n,n+=o[this._pNextFrame],this._pCurrentFrame=this._pNextFrame++;while(s>n);this._pCurrentFrame==i&&(this._pCurrentFrame=0,this._pNextFrame=1),this._pBlendWeight=(s-a)/o[this._pCurrentFrame]}},e.prototype.notifyPlaybackComplete=function(){null==this._animationStatePlaybackComplete&&(this._animationStatePlaybackComplete=new r(r.PLAYBACK_COMPLETE,this._pAnimator,this,this._animationClipNode)),this._animationClipNode.dispatchEvent(this._animationStatePlaybackComplete)},e}(s);e.exports=a},{"awayjs-renderergl/lib/animators/states/AnimationStateBase":void 0,"awayjs-renderergl/lib/events/AnimationStateEvent":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/AnimationStateBase":[function(t,e){var i=t("awayjs-core/lib/geom/Vector3D"),s=function(){function t(t,e){this._pRootDelta=new i,this._pPositionDeltaDirty=!0,this._pStartTime=0,this._pAnimator=t,this._pAnimationNode=e}return Object.defineProperty(t.prototype,"positionDelta",{get:function(){return this._pPositionDeltaDirty&&this._pUpdatePositionDelta(),this._pRootDelta},enumerable:!0,configurable:!0}),t.prototype.offset=function(t){this._pStartTime=t,this._pPositionDeltaDirty=!0},t.prototype.update=function(t){this._pTime!=t-this._pStartTime&&this._pUpdateTime(t)},t.prototype.phase=function(){},t.prototype._pUpdateTime=function(t){this._pTime=t-this._pStartTime,this._pPositionDeltaDirty=!0},t.prototype._pUpdatePositionDelta=function(){},t}();e.exports=s},{"awayjs-core/lib/geom/Vector3D":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ISkeletonAnimationState":[function(){},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/IVertexAnimationState":[function(){},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleAccelerationState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),o=function(t){function e(e,i){t.call(this,e,i),this._particleAccelerationNode=i,this._acceleration=this._particleAccelerationNode._acceleration,this.updateAccelerationData()}return i(e,t),Object.defineProperty(e.prototype,"acceleration",{get:function(){return this._acceleration},set:function(t){this._acceleration.x=t.x,this._acceleration.y=t.y,this._acceleration.z=t.z,this.updateAccelerationData()},enumerable:!0,configurable:!0}),e.prototype.setRenderState=function(t,i,s,n){var o=n.getRegisterIndex(this._pAnimationNode,e.ACCELERATION_INDEX);this._particleAccelerationNode.mode==a.LOCAL_STATIC?s.activateVertexBuffer(o,this._particleAccelerationNode._iDataOffset,t,r.FLOAT_3):n.setVertexConst(o,this._halfAcceleration.x,this._halfAcceleration.y,this._halfAcceleration.z)},e.prototype.updateAccelerationData=function(){this._particleAccelerationNode.mode==a.GLOBAL&&(this._halfAcceleration=new s(this._acceleration.x/2,this._acceleration.y/2,this._acceleration.z/2))},e.ACCELERATION_INDEX=0,e}(n);e.exports=o},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleBezierCurveState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),r=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),a=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),n=function(t){function e(e,i){t.call(this,e,i),this._particleBezierCurveNode=i,this._controlPoint=this._particleBezierCurveNode._iControlPoint,this._endPoint=this._particleBezierCurveNode._iEndPoint}return i(e,t),Object.defineProperty(e.prototype,"controlPoint",{get:function(){return this._controlPoint},set:function(t){this._controlPoint=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPoint",{get:function(){return this._endPoint},set:function(t){this._endPoint=t},enumerable:!0,configurable:!0}),e.prototype.setRenderState=function(t,i,a,n){var o=n.getRegisterIndex(this._pAnimationNode,e.BEZIER_CONTROL_INDEX),h=n.getRegisterIndex(this._pAnimationNode,e.BEZIER_END_INDEX);this._particleBezierCurveNode.mode==r.LOCAL_STATIC?(a.activateVertexBuffer(o,this._particleBezierCurveNode._iDataOffset,t,s.FLOAT_3),a.activateVertexBuffer(h,this._particleBezierCurveNode._iDataOffset+3,t,s.FLOAT_3)):(n.setVertexConst(o,this._controlPoint.x,this._controlPoint.y,this._controlPoint.z),n.setVertexConst(h,this._endPoint.x,this._endPoint.y,this._endPoint.z))},e.BEZIER_CONTROL_INDEX=0,e.BEZIER_END_INDEX=1,e}(a);e.exports=n},{"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleBillboardState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/MathConsts"),r=t("awayjs-core/lib/geom/Matrix3D"),a=t("awayjs-core/lib/geom/Orientation3D"),n=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),o=function(t){function e(e,i){t.call(this,e,i),this._matrix=new r,this._billboardAxis=i._iBillboardAxis}return i(e,t),e.prototype.setRenderState=function(t,i,r,n,o){var h;if(this._billboardAxis){var l=i.sourceEntity.sceneTransform.position,p=o.sceneTransform.position.subtract(l),d=p.crossProduct(this._billboardAxis);d.normalize(),p=this.billboardAxis.crossProduct(d),p.normalize(),this._matrix.copyFrom(i.sourceEntity.sceneTransform),h=this._matrix.decompose(a.AXIS_ANGLE),this._matrix.copyColumnFrom(0,d),this._matrix.copyColumnFrom(1,this.billboardAxis),this._matrix.copyColumnFrom(2,p),this._matrix.copyColumnFrom(3,l),this._matrix.appendRotation(-h[1].w*s.RADIANS_TO_DEGREES,h[1])}else this._matrix.copyFrom(i.sourceEntity.sceneTransform),this._matrix.append(o.inverseSceneTransform),h=this._matrix.decompose(a.AXIS_ANGLE),this._matrix.identity(),this._matrix.appendRotation(-h[1].w*s.RADIANS_TO_DEGREES,h[1]);n.setVertexConstFromMatrix(n.getRegisterIndex(this._pAnimationNode,e.MATRIX_INDEX),this._matrix)},Object.defineProperty(e.prototype,"billboardAxis",{get:function(){return this.billboardAxis},set:function(t){this.billboardAxis=t?t.clone():null,this.billboardAxis&&this.billboardAxis.normalize()},enumerable:!0,configurable:!0}),e.MATRIX_INDEX=0,e}(n);e.exports=o},{"awayjs-core/lib/geom/MathConsts":void 0,"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Orientation3D":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleColorState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t
}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),o=function(t){function e(e,i){t.call(this,e,i),this._particleColorNode=i,this._usesMultiplier=this._particleColorNode._iUsesMultiplier,this._usesOffset=this._particleColorNode._iUsesOffset,this._usesCycle=this._particleColorNode._iUsesCycle,this._usesPhase=this._particleColorNode._iUsesPhase,this._startColor=this._particleColorNode._iStartColor,this._endColor=this._particleColorNode._iEndColor,this._cycleDuration=this._particleColorNode._iCycleDuration,this._cyclePhase=this._particleColorNode._iCyclePhase,this.updateColorData()}return i(e,t),Object.defineProperty(e.prototype,"startColor",{get:function(){return this._startColor},set:function(t){this._startColor=t,this.updateColorData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endColor",{get:function(){return this._endColor},set:function(t){this._endColor=t,this.updateColorData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cycleDuration",{get:function(){return this._cycleDuration},set:function(t){this._cycleDuration=t,this.updateColorData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cyclePhase",{get:function(){return this._cyclePhase},set:function(t){this._cyclePhase=t,this.updateColorData()},enumerable:!0,configurable:!0}),e.prototype.setRenderState=function(t,i,s,n){if(n.needFragmentAnimation){var o=this._particleColorNode._iDataOffset;this._usesCycle&&n.setVertexConst(n.getRegisterIndex(this._pAnimationNode,e.CYCLE_INDEX),this._cycleData.x,this._cycleData.y,this._cycleData.z,this._cycleData.w),this._usesMultiplier&&(this._particleColorNode.mode==a.LOCAL_STATIC?(s.activateVertexBuffer(n.getRegisterIndex(this._pAnimationNode,e.START_MULTIPLIER_INDEX),o,t,r.FLOAT_4),o+=4,s.activateVertexBuffer(n.getRegisterIndex(this._pAnimationNode,e.DELTA_MULTIPLIER_INDEX),o,t,r.FLOAT_4),o+=4):(n.setVertexConst(n.getRegisterIndex(this._pAnimationNode,e.START_MULTIPLIER_INDEX),this._startMultiplierData.x,this._startMultiplierData.y,this._startMultiplierData.z,this._startMultiplierData.w),n.setVertexConst(n.getRegisterIndex(this._pAnimationNode,e.DELTA_MULTIPLIER_INDEX),this._deltaMultiplierData.x,this._deltaMultiplierData.y,this._deltaMultiplierData.z,this._deltaMultiplierData.w))),this._usesOffset&&(this._particleColorNode.mode==a.LOCAL_STATIC?(s.activateVertexBuffer(n.getRegisterIndex(this._pAnimationNode,e.START_OFFSET_INDEX),o,t,r.FLOAT_4),o+=4,s.activateVertexBuffer(n.getRegisterIndex(this._pAnimationNode,e.DELTA_OFFSET_INDEX),o,t,r.FLOAT_4),o+=4):(n.setVertexConst(n.getRegisterIndex(this._pAnimationNode,e.START_OFFSET_INDEX),this._startOffsetData.x,this._startOffsetData.y,this._startOffsetData.z,this._startOffsetData.w),n.setVertexConst(n.getRegisterIndex(this._pAnimationNode,e.DELTA_OFFSET_INDEX),this._deltaOffsetData.x,this._deltaOffsetData.y,this._deltaOffsetData.z,this._deltaOffsetData.w)))}},e.prototype.updateColorData=function(){if(this._usesCycle){if(this._cycleDuration<=0)throw new Error("the cycle duration must be greater than zero");this._cycleData=new s(2*Math.PI/this._cycleDuration,this._cyclePhase*Math.PI/180,0,0)}this._particleColorNode.mode==a.GLOBAL&&(this._usesCycle?(this._usesMultiplier&&(this._startMultiplierData=new s((this._startColor.redMultiplier+this._endColor.redMultiplier)/2,(this._startColor.greenMultiplier+this._endColor.greenMultiplier)/2,(this._startColor.blueMultiplier+this._endColor.blueMultiplier)/2,(this._startColor.alphaMultiplier+this._endColor.alphaMultiplier)/2),this._deltaMultiplierData=new s((this._endColor.redMultiplier-this._startColor.redMultiplier)/2,(this._endColor.greenMultiplier-this._startColor.greenMultiplier)/2,(this._endColor.blueMultiplier-this._startColor.blueMultiplier)/2,(this._endColor.alphaMultiplier-this._startColor.alphaMultiplier)/2)),this._usesOffset&&(this._startOffsetData=new s((this._startColor.redOffset+this._endColor.redOffset)/510,(this._startColor.greenOffset+this._endColor.greenOffset)/510,(this._startColor.blueOffset+this._endColor.blueOffset)/510,(this._startColor.alphaOffset+this._endColor.alphaOffset)/510),this._deltaOffsetData=new s((this._endColor.redOffset-this._startColor.redOffset)/510,(this._endColor.greenOffset-this._startColor.greenOffset)/510,(this._endColor.blueOffset-this._startColor.blueOffset)/510,(this._endColor.alphaOffset-this._startColor.alphaOffset)/510))):(this._usesMultiplier&&(this._startMultiplierData=new s(this._startColor.redMultiplier,this._startColor.greenMultiplier,this._startColor.blueMultiplier,this._startColor.alphaMultiplier),this._deltaMultiplierData=new s(this._endColor.redMultiplier-this._startColor.redMultiplier,this._endColor.greenMultiplier-this._startColor.greenMultiplier,this._endColor.blueMultiplier-this._startColor.blueMultiplier,this._endColor.alphaMultiplier-this._startColor.alphaMultiplier)),this._usesOffset&&(this._startOffsetData=new s(this._startColor.redOffset/255,this._startColor.greenOffset/255,this._startColor.blueOffset/255,this._startColor.alphaOffset/255),this._deltaOffsetData=new s((this._endColor.redOffset-this._startColor.redOffset)/255,(this._endColor.greenOffset-this._startColor.greenOffset)/255,(this._endColor.blueOffset-this._startColor.blueOffset)/255,(this._endColor.alphaOffset-this._startColor.alphaOffset)/255))))},e.START_MULTIPLIER_INDEX=0,e.DELTA_MULTIPLIER_INDEX=1,e.START_OFFSET_INDEX=2,e.DELTA_OFFSET_INDEX=3,e.CYCLE_INDEX=4,e}(n);e.exports=o},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleFollowState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/MathConsts"),r=t("awayjs-core/lib/geom/Vector3D"),a=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),n=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),o=function(t){function e(e,i){t.call(this,e,i,!0),this._targetPos=new r,this._targetEuler=new r,this._temp=new r,this._particleFollowNode=i,this._smooth=i._iSmooth}return i(e,t),Object.defineProperty(e.prototype,"followTarget",{get:function(){return this._followTarget},set:function(t){this._followTarget=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smooth",{get:function(){return this._smooth},set:function(t){this._smooth=t},enumerable:!0,configurable:!0}),e.prototype.setRenderState=function(t,i,r,n){this._followTarget&&(this._particleFollowNode._iUsesPosition&&(this._targetPos.x=this._followTarget.transform.position.x/i.sourceEntity.scaleX,this._targetPos.y=this._followTarget.transform.position.y/i.sourceEntity.scaleY,this._targetPos.z=this._followTarget.transform.position.z/i.sourceEntity.scaleZ),this._particleFollowNode._iUsesRotation&&(this._targetEuler.x=this._followTarget.rotationX,this._targetEuler.y=this._followTarget.rotationY,this._targetEuler.z=this._followTarget.rotationZ,this._targetEuler.scaleBy(s.DEGREES_TO_RADIANS))),this._prePos||(this._prePos=this._targetPos.clone()),this._preEuler||(this._preEuler=this._targetEuler.clone());var o=this._pTime/1e3,h=r.previousTime,l=o-h,p=h!=o;this._particleFollowNode._iUsesPosition&&this._particleFollowNode._iUsesRotation?(p&&this.processPositionAndRotation(o,l,r),r.activateVertexBuffer(n.getRegisterIndex(this._pAnimationNode,e.FOLLOW_POSITION_INDEX),this._particleFollowNode._iDataOffset,t,a.FLOAT_3),r.activateVertexBuffer(n.getRegisterIndex(this._pAnimationNode,e.FOLLOW_ROTATION_INDEX),this._particleFollowNode._iDataOffset+3,t,a.FLOAT_3)):this._particleFollowNode._iUsesPosition?(p&&this.processPosition(o,l,r),r.activateVertexBuffer(n.getRegisterIndex(this._pAnimationNode,e.FOLLOW_POSITION_INDEX),this._particleFollowNode._iDataOffset,t,a.FLOAT_3)):this._particleFollowNode._iUsesRotation&&(p&&this.precessRotation(o,l,r),r.activateVertexBuffer(n.getRegisterIndex(this._pAnimationNode,e.FOLLOW_ROTATION_INDEX),this._particleFollowNode._iDataOffset,t,a.FLOAT_3)),this._prePos.copyFrom(this._targetPos),this._targetEuler.copyFrom(this._targetEuler),r.previousTime=o},e.prototype.processPosition=function(t,e,i){var s,r,a=i.animationParticles,n=i.vertexData,o=!1,h=a.length;this._smooth?(r=this._prePos.subtract(this._targetPos),r.scaleBy(1/e)):s=this._targetPos;for(var l=0;h>l;l++){var p=(t-a[l].startTime)/a[l].totalTime,d=(p-Math.floor(p))*a[l].totalTime;if(0>=d-e){var u=a[l].startVertexIndex*i.totalLenOfOneVertex+this._particleFollowNode._iDataOffset;if(this._smooth&&(this._temp.copyFrom(r),this._temp.scaleBy(d),s=this._targetPos.add(this._temp)),n[u]!=s.x||n[u+1]!=s.y||n[u+2]!=s.z){o=!0;for(var c=0;c<a[l].numVertices;c++)n[u++]=s.x,n[u++]=s.y,n[u++]=s.z}}}o&&i.invalidateBuffer()},e.prototype.precessRotation=function(t,e,i){var s,r,a=i.animationParticles,n=i.vertexData,o=!1,h=a.length;this._smooth?(r=this._preEuler.subtract(this._targetEuler),r.scaleBy(1/e)):s=this._targetEuler;for(var l=0;h>l;l++){var p=(t-a[l].startTime)/a[l].totalTime,d=(p-Math.floor(p))*a[l].totalTime;if(0>=d-e){var u=a[l].startVertexIndex*i.totalLenOfOneVertex+this._particleFollowNode._iDataOffset;if(this._smooth&&(this._temp.copyFrom(r),this._temp.scaleBy(d),s=this._targetEuler.add(this._temp)),n[u]!=s.x||n[u+1]!=s.y||n[u+2]!=s.z){o=!0;for(var c=0;c<a[l].numVertices;c++)n[u++]=s.x,n[u++]=s.y,n[u++]=s.z}}}o&&i.invalidateBuffer()},e.prototype.processPositionAndRotation=function(t,e,i){var s,r,a,n,o=i.animationParticles,h=i.vertexData,l=!1,p=o.length;this._smooth?(a=this._prePos.subtract(this._targetPos),a.scaleBy(1/e),n=this._preEuler.subtract(this._targetEuler),n.scaleBy(1/e)):(s=this._targetPos,r=this._targetEuler);for(var d=0;p>d;d++){var u=(t-o[d].startTime)/o[d].totalTime,c=(u-Math.floor(u))*o[d].totalTime;if(0>=c-e){var _=o[d].startVertexIndex*i.totalLenOfOneVertex+this._particleFollowNode._iDataOffset;if(this._smooth&&(this._temp.copyFrom(a),this._temp.scaleBy(c),s=this._targetPos.add(this._temp),this._temp.copyFrom(n),this._temp.scaleBy(c),r=this._targetEuler.add(this._temp)),h[_]!=s.x||h[_+1]!=s.y||h[_+2]!=s.z||h[_+3]!=r.x||h[_+4]!=r.y||h[_+5]!=r.z){l=!0;for(var y=0;y<o[d].numVertices;y++)h[_++]=s.x,h[_++]=s.y,h[_++]=s.z,h[_++]=r.x,h[_++]=r.y,h[_++]=r.z}}}l&&i.invalidateBuffer()},e.FOLLOW_POSITION_INDEX=0,e.FOLLOW_ROTATION_INDEX=1,e}(n);e.exports=o},{"awayjs-core/lib/geom/MathConsts":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleInitialColorState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),o=function(t){function e(e,i){t.call(this,e,i),this._particleInitialColorNode=i,this._usesMultiplier=i._iUsesMultiplier,this._usesOffset=i._iUsesOffset,this._initialColor=i._iInitialColor,this.updateColorData()}return i(e,t),Object.defineProperty(e.prototype,"initialColor",{get:function(){return this._initialColor},set:function(t){this._initialColor=t},enumerable:!0,configurable:!0}),e.prototype.setRenderState=function(t,i,s,n,o){if(i=i,o=o,n.needFragmentAnimation)if(this._particleInitialColorNode.mode==a.LOCAL_STATIC){var h=this._particleInitialColorNode._iDataOffset;this._usesMultiplier&&(s.activateVertexBuffer(n.getRegisterIndex(this._pAnimationNode,e.MULTIPLIER_INDEX),h,t,r.FLOAT_4),h+=4),this._usesOffset&&s.activateVertexBuffer(n.getRegisterIndex(this._pAnimationNode,e.OFFSET_INDEX),h,t,r.FLOAT_4)}else this._usesMultiplier&&n.setVertexConst(n.getRegisterIndex(this._pAnimationNode,e.MULTIPLIER_INDEX),this._multiplierData.x,this._multiplierData.y,this._multiplierData.z,this._multiplierData.w),this._usesOffset&&n.setVertexConst(n.getRegisterIndex(this._pAnimationNode,e.OFFSET_INDEX),this._offsetData.x,this._offsetData.y,this._offsetData.z,this._offsetData.w)},e.prototype.updateColorData=function(){this._particleInitialColorNode.mode==a.GLOBAL&&(this._usesMultiplier&&(this._multiplierData=new s(this._initialColor.redMultiplier,this._initialColor.greenMultiplier,this._initialColor.blueMultiplier,this._initialColor.alphaMultiplier)),this._usesOffset&&(this._offsetData=new s(this._initialColor.redOffset/255,this._initialColor.greenOffset/255,this._initialColor.blueOffset/255,this._initialColor.alphaOffset/255)))},e.MULTIPLIER_INDEX=0,e.OFFSET_INDEX=1,e}(n);e.exports=o},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleOrbitState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),r=t("awayjs-core/lib/geom/Vector3D"),a=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),n=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),o=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),h=function(t){function e(e,i){t.call(this,e,i),this._particleOrbitNode=i,this._usesEulers=this._particleOrbitNode._iUsesEulers,this._usesCycle=this._particleOrbitNode._iUsesCycle,this._usesPhase=this._particleOrbitNode._iUsesPhase,this._eulers=this._particleOrbitNode._iEulers,this._radius=this._particleOrbitNode._iRadius,this._cycleDuration=this._particleOrbitNode._iCycleDuration,this._cyclePhase=this._particleOrbitNode._iCyclePhase,this.updateOrbitData()}return i(e,t),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this.updateOrbitData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cycleDuration",{get:function(){return this._cycleDuration},set:function(t){this._cycleDuration=t,this.updateOrbitData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cyclePhase",{get:function(){return this._cyclePhase},set:function(t){this._cyclePhase=t,this.updateOrbitData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eulers",{get:function(){return this._eulers},set:function(t){this._eulers=t,this.updateOrbitData()},enumerable:!0,configurable:!0}),e.prototype.setRenderState=function(t,i,s,r){var o=r.getRegisterIndex(this._pAnimationNode,e.ORBIT_INDEX);this._particleOrbitNode.mode==n.LOCAL_STATIC?this._usesPhase?s.activateVertexBuffer(o,this._particleOrbitNode._iDataOffset,t,a.FLOAT_4):s.activateVertexBuffer(o,this._particleOrbitNode._iDataOffset,t,a.FLOAT_3):r.setVertexConst(o,this._orbitData.x,this._orbitData.y,this._orbitData.z,this._orbitData.w),this._usesEulers&&r.setVertexConstFromMatrix(r.getRegisterIndex(this._pAnimationNode,e.EULERS_INDEX),this._eulersMatrix)},e.prototype.updateOrbitData=function(){if(this._usesEulers&&(this._eulersMatrix=new s,this._eulersMatrix.appendRotation(this._eulers.x,r.X_AXIS),this._eulersMatrix.appendRotation(this._eulers.y,r.Y_AXIS),this._eulersMatrix.appendRotation(this._eulers.z,r.Z_AXIS)),this._particleOrbitNode.mode==n.GLOBAL)if(this._orbitData=new r(this._radius,0,this._radius*Math.PI*2,this._cyclePhase*Math.PI/180),this._usesCycle){if(this._cycleDuration<=0)throw new Error("the cycle duration must be greater than zero");this._orbitData.y=2*Math.PI/this._cycleDuration}else this._orbitData.y=2*Math.PI},e.ORBIT_INDEX=0,e.EULERS_INDEX=1,e}(o);e.exports=h},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleOscillatorState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),o=function(t){function e(e,i){t.call(this,e,i),this._particleOscillatorNode=i,this._oscillator=this._particleOscillatorNode._iOscillator,this.updateOscillatorData()}return i(e,t),Object.defineProperty(e.prototype,"oscillator",{get:function(){return this._oscillator},set:function(t){this._oscillator=t,this.updateOscillatorData()},enumerable:!0,configurable:!0}),e.prototype.setRenderState=function(t,i,s,n){var o=n.getRegisterIndex(this._pAnimationNode,e.OSCILLATOR_INDEX);this._particleOscillatorNode.mode==a.LOCAL_STATIC?s.activateVertexBuffer(o,this._particleOscillatorNode._iDataOffset,t,r.FLOAT_4):n.setVertexConst(o,this._oscillatorData.x,this._oscillatorData.y,this._oscillatorData.z,this._oscillatorData.w)},e.prototype.updateOscillatorData=function(){if(this._particleOscillatorNode.mode==a.GLOBAL){if(this._oscillator.w<=0)throw new Error("the cycle duration must greater than zero");null==this._oscillatorData&&(this._oscillatorData=new s),this._oscillatorData.x=this._oscillator.x,this._oscillatorData.y=this._oscillator.y,this._oscillatorData.z=this._oscillator.z,this._oscillatorData.w=2*Math.PI/this._oscillator.w}},e.OSCILLATOR_INDEX=0,e}(n);e.exports=o},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticlePositionState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),r=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),a=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),n=function(t){function e(e,i){t.call(this,e,i),this._particlePositionNode=i,this._position=this._particlePositionNode._iPosition}return i(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),e.prototype.getPositions=function(){return this._pDynamicProperties},e.prototype.setPositions=function(t){this._pDynamicProperties=t,this._pDynamicPropertiesDirty=new Object},e.prototype.setRenderState=function(t,i,a,n){this._particlePositionNode.mode!=r.LOCAL_DYNAMIC||this._pDynamicPropertiesDirty[a._iUniqueId]||this._pUpdateDynamicProperties(a);var o=n.getRegisterIndex(this._pAnimationNode,e.POSITION_INDEX);this._particlePositionNode.mode==r.GLOBAL?n.setVertexConst(o,this._position.x,this._position.y,this._position.z):a.activateVertexBuffer(o,this._particlePositionNode._iDataOffset,t,s.FLOAT_3)},e.POSITION_INDEX=0,e}(a);e.exports=n},{"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleRotateToHeadingState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),r=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),a=function(t){function e(e,i){t.call(this,e,i),this._matrix=new s}return i(e,t),e.prototype.setRenderState=function(t,i,s,r,a){r.hasBillboard&&(this._matrix.copyFrom(i.sourceEntity.sceneTransform),this._matrix.append(a.inverseSceneTransform),r.setVertexConstFromMatrix(r.getRegisterIndex(this._pAnimationNode,e.MATRIX_INDEX),this._matrix))},e.MATRIX_INDEX=0,e}(r);e.exports=a},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleRotateToPositionState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),r=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),o=function(t){function e(e,i){t.call(this,e,i),this._matrix=new s,this._particleRotateToPositionNode=i,this._position=this._particleRotateToPositionNode._iPosition}return i(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),e.prototype.setRenderState=function(t,i,s,n,o){var h=n.getRegisterIndex(this._pAnimationNode,e.POSITION_INDEX);n.hasBillboard&&(this._matrix.copyFrom(i.sourceEntity.sceneTransform),this._matrix.append(o.inverseSceneTransform),n.setVertexConstFromMatrix(n.getRegisterIndex(this._pAnimationNode,e.MATRIX_INDEX),this._matrix)),this._particleRotateToPositionNode.mode==a.GLOBAL?(this._offset=i.sourceEntity.inverseSceneTransform.transformVector(this._position),n.setVertexConst(h,this._offset.x,this._offset.y,this._offset.z)):s.activateVertexBuffer(h,this._particleRotateToPositionNode._iDataOffset,t,r.FLOAT_3)},e.MATRIX_INDEX=0,e.POSITION_INDEX=1,e}(n);e.exports=o},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleRotationalVelocityState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),o=function(t){function e(e,i){t.call(this,e,i),this._particleRotationalVelocityNode=i,this._rotationalVelocity=this._particleRotationalVelocityNode._iRotationalVelocity,this.updateRotationalVelocityData()}return i(e,t),Object.defineProperty(e.prototype,"rotationalVelocity",{get:function(){return this._rotationalVelocity},set:function(t){this._rotationalVelocity=t,this.updateRotationalVelocityData()},enumerable:!0,configurable:!0}),e.prototype.getRotationalVelocities=function(){return this._pDynamicProperties},e.prototype.setRotationalVelocities=function(t){this._pDynamicProperties=t,this._pDynamicPropertiesDirty=new Object},e.prototype.setRenderState=function(t,i,s,n){this._particleRotationalVelocityNode.mode!=a.LOCAL_DYNAMIC||this._pDynamicPropertiesDirty[s._iUniqueId]||this._pUpdateDynamicProperties(s);var o=n.getRegisterIndex(this._pAnimationNode,e.ROTATIONALVELOCITY_INDEX);this._particleRotationalVelocityNode.mode==a.GLOBAL?n.setVertexConst(o,this._rotationalVelocityData.x,this._rotationalVelocityData.y,this._rotationalVelocityData.z,this._rotationalVelocityData.w):s.activateVertexBuffer(o,this._particleRotationalVelocityNode._iDataOffset,t,r.FLOAT_4)},e.prototype.updateRotationalVelocityData=function(){if(this._particleRotationalVelocityNode.mode==a.GLOBAL){if(this._rotationalVelocity.w<=0)throw new Error("the cycle duration must greater than zero");var t=this._rotationalVelocity.clone();t.length<=0?t.z=1:t.normalize(),this._rotationalVelocityData=new s(t.x,t.y,t.z,Math.PI/t.w)}},e.ROTATIONALVELOCITY_INDEX=0,e}(n);e.exports=o},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleScaleState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),a=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),n=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),o=function(t){function e(e,i){t.call(this,e,i),this._particleScaleNode=i,this._usesCycle=this._particleScaleNode._iUsesCycle,this._usesPhase=this._particleScaleNode._iUsesPhase,this._minScale=this._particleScaleNode._iMinScale,this._maxScale=this._particleScaleNode._iMaxScale,this._cycleDuration=this._particleScaleNode._iCycleDuration,this._cyclePhase=this._particleScaleNode._iCyclePhase,this.updateScaleData()}return i(e,t),Object.defineProperty(e.prototype,"minScale",{get:function(){return this._minScale},set:function(t){this._minScale=t,this.updateScaleData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxScale",{get:function(){return this._maxScale},set:function(t){this._maxScale=t,this.updateScaleData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cycleDuration",{get:function(){return this._cycleDuration},set:function(t){this._cycleDuration=t,this.updateScaleData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cyclePhase",{get:function(){return this._cyclePhase},set:function(t){this._cyclePhase=t,this.updateScaleData()},enumerable:!0,configurable:!0}),e.prototype.setRenderState=function(t,i,s,n){var o=n.getRegisterIndex(this._pAnimationNode,e.SCALE_INDEX);this._particleScaleNode.mode==a.LOCAL_STATIC?this._usesCycle?this._usesPhase?s.activateVertexBuffer(o,this._particleScaleNode._iDataOffset,t,r.FLOAT_4):s.activateVertexBuffer(o,this._particleScaleNode._iDataOffset,t,r.FLOAT_3):s.activateVertexBuffer(o,this._particleScaleNode._iDataOffset,t,r.FLOAT_2):n.setVertexConst(o,this._scaleData.x,this._scaleData.y,this._scaleData.z,this._scaleData.w)},e.prototype.updateScaleData=function(){if(this._particleScaleNode.mode==a.GLOBAL)if(this._usesCycle){if(this._cycleDuration<=0)throw new Error("the cycle duration must be greater than zero");this._scaleData=new s((this._minScale+this._maxScale)/2,Math.abs(this._minScale-this._maxScale)/2,2*Math.PI/this._cycleDuration,this._cyclePhase*Math.PI/180)}else this._scaleData=new s(this._minScale,this._maxScale-this._minScale,0,0)},e.SCALE_INDEX=0,e}(n);e.exports=o},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleSegmentedColorState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),r=function(t){function e(e,i){t.call(this,e,i),this._usesMultiplier=i._iUsesMultiplier,this._usesOffset=i._iUsesOffset,this._startColor=i._iStartColor,this._endColor=i._iEndColor,this._segmentPoints=i._iSegmentPoints,this._numSegmentPoint=i._iNumSegmentPoint,this.updateColorData()}return i(e,t),Object.defineProperty(e.prototype,"startColor",{get:function(){return this._startColor},set:function(t){this._startColor=t,this.updateColorData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endColor",{get:function(){return this._endColor},set:function(t){this._endColor=t,this.updateColorData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numSegmentPoint",{get:function(){return this._numSegmentPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"segmentPoints",{get:function(){return this._segmentPoints},set:function(t){this._segmentPoints=t,this.updateColorData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usesMultiplier",{get:function(){return this._usesMultiplier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usesOffset",{get:function(){return this._usesOffset},enumerable:!0,configurable:!0}),e.prototype.setRenderState=function(t,i,s,r){r.needFragmentAnimation&&(this._numSegmentPoint>0&&r.setVertexConst(r.getRegisterIndex(this._pAnimationNode,e.TIME_DATA_INDEX),this._timeLifeData[0],this._timeLifeData[1],this._timeLifeData[2],this._timeLifeData[3]),this._usesMultiplier&&r.setVertexConstFromArray(r.getRegisterIndex(this._pAnimationNode,e.START_MULTIPLIER_INDEX),this._multiplierData),this._usesOffset&&r.setVertexConstFromArray(r.getRegisterIndex(this._pAnimationNode,e.START_OFFSET_INDEX),this._offsetData))},e.prototype.updateColorData=function(){this._timeLifeData=new Array,this._multiplierData=new Array,this._offsetData=new Array;var t;for(t=0;t<this._numSegmentPoint;t++)this._timeLifeData.push(0==t?this._segmentPoints[t].life:this._segmentPoints[t].life-this._segmentPoints[t-1].life);if(this._timeLifeData.push(0==this._numSegmentPoint?1:1-this._segmentPoints[t-1].life),this._usesMultiplier){for(this._multiplierData.push(this._startColor.redMultiplier,this._startColor.greenMultiplier,this._startColor.blueMultiplier,this._startColor.alphaMultiplier),t=0;t<this._numSegmentPoint;t++)0==t?this._multiplierData.push((this._segmentPoints[t].color.redMultiplier-this._startColor.redMultiplier)/this._timeLifeData[t],(this._segmentPoints[t].color.greenMultiplier-this._startColor.greenMultiplier)/this._timeLifeData[t],(this._segmentPoints[t].color.blueMultiplier-this._startColor.blueMultiplier)/this._timeLifeData[t],(this._segmentPoints[t].color.alphaMultiplier-this._startColor.alphaMultiplier)/this._timeLifeData[t]):this._multiplierData.push((this._segmentPoints[t].color.redMultiplier-this._segmentPoints[t-1].color.redMultiplier)/this._timeLifeData[t],(this._segmentPoints[t].color.greenMultiplier-this._segmentPoints[t-1].color.greenMultiplier)/this._timeLifeData[t],(this._segmentPoints[t].color.blueMultiplier-this._segmentPoints[t-1].color.blueMultiplier)/this._timeLifeData[t],(this._segmentPoints[t].color.alphaMultiplier-this._segmentPoints[t-1].color.alphaMultiplier)/this._timeLifeData[t]);0==this._numSegmentPoint?this._multiplierData.push(this._endColor.redMultiplier-this._startColor.redMultiplier,this._endColor.greenMultiplier-this._startColor.greenMultiplier,this._endColor.blueMultiplier-this._startColor.blueMultiplier,this._endColor.alphaMultiplier-this._startColor.alphaMultiplier):this._multiplierData.push((this._endColor.redMultiplier-this._segmentPoints[t-1].color.redMultiplier)/this._timeLifeData[t],(this._endColor.greenMultiplier-this._segmentPoints[t-1].color.greenMultiplier)/this._timeLifeData[t],(this._endColor.blueMultiplier-this._segmentPoints[t-1].color.blueMultiplier)/this._timeLifeData[t],(this._endColor.alphaMultiplier-this._segmentPoints[t-1].color.alphaMultiplier)/this._timeLifeData[t])
}if(this._usesOffset){for(this._offsetData.push(this._startColor.redOffset/255,this._startColor.greenOffset/255,this._startColor.blueOffset/255,this._startColor.alphaOffset/255),t=0;t<this._numSegmentPoint;t++)0==t?this._offsetData.push((this._segmentPoints[t].color.redOffset-this._startColor.redOffset)/this._timeLifeData[t]/255,(this._segmentPoints[t].color.greenOffset-this._startColor.greenOffset)/this._timeLifeData[t]/255,(this._segmentPoints[t].color.blueOffset-this._startColor.blueOffset)/this._timeLifeData[t]/255,(this._segmentPoints[t].color.alphaOffset-this._startColor.alphaOffset)/this._timeLifeData[t]/255):this._offsetData.push((this._segmentPoints[t].color.redOffset-this._segmentPoints[t-1].color.redOffset)/this._timeLifeData[t]/255,(this._segmentPoints[t].color.greenOffset-this._segmentPoints[t-1].color.greenOffset)/this._timeLifeData[t]/255,(this._segmentPoints[t].color.blueOffset-this._segmentPoints[t-1].color.blueOffset)/this._timeLifeData[t]/255,(this._segmentPoints[t].color.alphaOffset-this._segmentPoints[t-1].color.alphaOffset)/this._timeLifeData[t]/255);0==this._numSegmentPoint?this._offsetData.push((this._endColor.redOffset-this._startColor.redOffset)/255,(this._endColor.greenOffset-this._startColor.greenOffset)/255,(this._endColor.blueOffset-this._startColor.blueOffset)/255,(this._endColor.alphaOffset-this._startColor.alphaOffset)/255):this._offsetData.push((this._endColor.redOffset-this._segmentPoints[t-1].color.redOffset)/this._timeLifeData[t]/255,(this._endColor.greenOffset-this._segmentPoints[t-1].color.greenOffset)/this._timeLifeData[t]/255,(this._endColor.blueOffset-this._segmentPoints[t-1].color.blueOffset)/this._timeLifeData[t]/255,(this._endColor.alphaOffset-this._segmentPoints[t-1].color.alphaOffset)/this._timeLifeData[t]/255)}this._timeLifeData.length=4},e.START_MULTIPLIER_INDEX=0,e.START_OFFSET_INDEX=1,e.TIME_DATA_INDEX=2,e}(s);e.exports=r},{"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleSpriteSheetState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),r=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),a=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),n=function(t){function e(e,i){t.call(this,e,i),this._particleSpriteSheetNode=i,this._usesCycle=this._particleSpriteSheetNode._iUsesCycle,this._usesPhase=this._particleSpriteSheetNode._iUsesCycle,this._totalFrames=this._particleSpriteSheetNode._iTotalFrames,this._numColumns=this._particleSpriteSheetNode._iNumColumns,this._numRows=this._particleSpriteSheetNode._iNumRows,this._cycleDuration=this._particleSpriteSheetNode._iCycleDuration,this._cyclePhase=this._particleSpriteSheetNode._iCyclePhase,this.updateSpriteSheetData()}return i(e,t),Object.defineProperty(e.prototype,"cyclePhase",{get:function(){return this._cyclePhase},set:function(t){this._cyclePhase=t,this.updateSpriteSheetData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cycleDuration",{get:function(){return this._cycleDuration},set:function(t){this._cycleDuration=t,this.updateSpriteSheetData()},enumerable:!0,configurable:!0}),e.prototype.setRenderState=function(t,i,a,n){if(n.needUVAnimation&&(n.setVertexConst(n.getRegisterIndex(this._pAnimationNode,e.UV_INDEX_0),this._spriteSheetData[0],this._spriteSheetData[1],this._spriteSheetData[2],this._spriteSheetData[3]),this._usesCycle)){var o=n.getRegisterIndex(this._pAnimationNode,e.UV_INDEX_1);this._particleSpriteSheetNode.mode==r.LOCAL_STATIC?this._usesPhase?a.activateVertexBuffer(o,this._particleSpriteSheetNode._iDataOffset,t,s.FLOAT_3):a.activateVertexBuffer(o,this._particleSpriteSheetNode._iDataOffset,t,s.FLOAT_2):n.setVertexConst(o,this._spriteSheetData[4],this._spriteSheetData[5])}},e.prototype.updateSpriteSheetData=function(){this._spriteSheetData=new Array(8);var t=this._totalFrames/this._numColumns;if(this._spriteSheetData[0]=t,this._spriteSheetData[1]=1/this._numColumns,this._spriteSheetData[2]=1/this._numRows,this._usesCycle){if(this._cycleDuration<=0)throw new Error("the cycle duration must be greater than zero");this._spriteSheetData[4]=t/this._cycleDuration,this._spriteSheetData[5]=this._cycleDuration,this._usesPhase&&(this._spriteSheetData[6]=this._cyclePhase)}},e.UV_INDEX_0=0,e.UV_INDEX_1=1,e}(a);e.exports=n},{"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleStateBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/states/AnimationStateBase"),r=function(t){function e(e,i,s){void 0===s&&(s=!1),t.call(this,e,i),this._pDynamicProperties=new Array,this._pDynamicPropertiesDirty=new Object,this._particleNode=i,this._pNeedUpdateTime=s}return i(e,t),Object.defineProperty(e.prototype,"needUpdateTime",{get:function(){return this._pNeedUpdateTime},enumerable:!0,configurable:!0}),e.prototype.setRenderState=function(){},e.prototype._pUpdateDynamicProperties=function(t){this._pDynamicPropertiesDirty[t._iUniqueId]=!0;for(var e,i,s,r,a,n=t.animationParticles,o=t.vertexData,h=t.totalLenOfOneVertex,l=this._particleNode.dataLength,p=this._particleNode._iDataOffset,d=this._pDynamicProperties.length,u=0,c=0,_=0;d>u;){for(;d>c&&(a=n[c]).index==u;){for(r=this._pDynamicProperties[u],e=a.numVertices*h,i=a.startVertexIndex*h+p,_=0;e>_;_+=h)for(s=i+_,_=0;e>_;_+=h)s=i+_,o[s++]=r.x,o[s++]=r.y,o[s++]=r.z,4==l&&(o[s++]=r.w);c++}u++}t.invalidateBuffer()},e}(s);e.exports=r},{"awayjs-renderergl/lib/animators/states/AnimationStateBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleTimeState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),r=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),a=function(t){function e(e,i){t.call(this,e,i,!0),this._particleTimeNode=i}return i(e,t),e.prototype.setRenderState=function(t,i,r,a){r.activateVertexBuffer(a.getRegisterIndex(this._pAnimationNode,e.TIME_STREAM_INDEX),this._particleTimeNode._iDataOffset,t,s.FLOAT_4);var n=this._pTime/1e3;a.setVertexConst(a.getRegisterIndex(this._pAnimationNode,e.TIME_CONSTANT_INDEX),n,n,n,n)},e.TIME_STREAM_INDEX=0,e.TIME_CONSTANT_INDEX=1,e}(r);e.exports=a},{"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleUVState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),r=function(t){function e(e,i){t.call(this,e,i),this._particleUVNode=i}return i(e,t),e.prototype.setRenderState=function(t,i,s,r){if(r.needUVAnimation){var a=r.getRegisterIndex(this._pAnimationNode,e.UV_INDEX),n=this._particleUVNode._iUvData;r.setVertexConst(a,n.x,n.y)}},e.UV_INDEX=0,e}(s);e.exports=r},{"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/ParticleVelocityState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),r=t("awayjs-renderergl/lib/animators/data/ParticlePropertiesMode"),a=t("awayjs-renderergl/lib/animators/states/ParticleStateBase"),n=function(t){function e(e,i){t.call(this,e,i),this._particleVelocityNode=i,this._velocity=this._particleVelocityNode._iVelocity}return i(e,t),Object.defineProperty(e.prototype,"velocity",{get:function(){return this._velocity},set:function(t){this._velocity=t},enumerable:!0,configurable:!0}),e.prototype.getVelocities=function(){return this._pDynamicProperties},e.prototype.setVelocities=function(t){this._pDynamicProperties=t,this._pDynamicPropertiesDirty=new Object},e.prototype.setRenderState=function(t,i,a,n){this._particleVelocityNode.mode!=r.LOCAL_DYNAMIC||this._pDynamicPropertiesDirty[a._iUniqueId]||this._pUpdateDynamicProperties(a);var o=n.getRegisterIndex(this._pAnimationNode,e.VELOCITY_INDEX);this._particleVelocityNode.mode==r.GLOBAL?n.setVertexConst(o,this._velocity.x,this._velocity.y,this._velocity.z):a.activateVertexBuffer(o,this._particleVelocityNode._iDataOffset,t,s.FLOAT_3)},e.VELOCITY_INDEX=0,e}(a);e.exports=n},{"awayjs-renderergl/lib/animators/data/ParticlePropertiesMode":void 0,"awayjs-renderergl/lib/animators/states/ParticleStateBase":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/SkeletonBinaryLERPState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/data/JointPose"),r=t("awayjs-renderergl/lib/animators/data/SkeletonPose"),a=t("awayjs-renderergl/lib/animators/states/AnimationStateBase"),n=function(t){function e(e,i){t.call(this,e,i),this._blendWeight=0,this._skeletonPose=new r,this._skeletonPoseDirty=!0,this._skeletonAnimationNode=i,this._inputA=e.getAnimationState(this._skeletonAnimationNode.inputA),this._inputB=e.getAnimationState(this._skeletonAnimationNode.inputB)}return i(e,t),Object.defineProperty(e.prototype,"blendWeight",{get:function(){return this._blendWeight},set:function(t){this._blendWeight=t,this._pPositionDeltaDirty=!0,this._skeletonPoseDirty=!0},enumerable:!0,configurable:!0}),e.prototype.phase=function(t){this._skeletonPoseDirty=!0,this._pPositionDeltaDirty=!0,this._inputA.phase(t),this._inputB.phase(t)},e.prototype._pUpdateTime=function(e){this._skeletonPoseDirty=!0,this._inputA.update(e),this._inputB.update(e),t.prototype._pUpdateTime.call(this,e)},e.prototype.getSkeletonPose=function(t){return this._skeletonPoseDirty&&this.updateSkeletonPose(t),this._skeletonPose},e.prototype._pUpdatePositionDelta=function(){this._pPositionDeltaDirty=!1;var t=this._inputA.positionDelta,e=this._inputB.positionDelta;this._pRootDelta.x=t.x+this._blendWeight*(e.x-t.x),this._pRootDelta.y=t.y+this._blendWeight*(e.y-t.y),this._pRootDelta.z=t.z+this._blendWeight*(e.z-t.z)},e.prototype.updateSkeletonPose=function(t){this._skeletonPoseDirty=!1;var e,i,r,a,n,o,h=this._skeletonPose.jointPoses,l=this._inputA.getSkeletonPose(t).jointPoses,p=this._inputB.getSkeletonPose(t).jointPoses,d=t.numJoints;h.length!=d&&(h.length=d);for(var u=0;d>u;++u)e=h[u],null==e&&(e=h[u]=new s),i=l[u],r=p[u],a=i.translation,n=r.translation,e.orientation.lerp(i.orientation,r.orientation,this._blendWeight),o=e.translation,o.x=a.x+this._blendWeight*(n.x-a.x),o.y=a.y+this._blendWeight*(n.y-a.y),o.z=a.z+this._blendWeight*(n.z-a.z)},e}(a);e.exports=n},{"awayjs-renderergl/lib/animators/data/JointPose":void 0,"awayjs-renderergl/lib/animators/data/SkeletonPose":void 0,"awayjs-renderergl/lib/animators/states/AnimationStateBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/SkeletonClipState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-renderergl/lib/animators/data/JointPose"),a=t("awayjs-renderergl/lib/animators/data/SkeletonPose"),n=t("awayjs-renderergl/lib/animators/states/AnimationClipState"),o=function(t){function e(e,i){t.call(this,e,i),this._rootPos=new s,this._skeletonPose=new a,this._skeletonPoseDirty=!0,this._skeletonClipNode=i,this._frames=this._skeletonClipNode.frames}return i(e,t),Object.defineProperty(e.prototype,"currentPose",{get:function(){return this._pFramesDirty&&this._pUpdateFrames(),this._currentPose},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextPose",{get:function(){return this._pFramesDirty&&this._pUpdateFrames(),this._nextPose},enumerable:!0,configurable:!0}),e.prototype.getSkeletonPose=function(t){return this._skeletonPoseDirty&&this.updateSkeletonPose(t),this._skeletonPose},e.prototype._pUpdateTime=function(e){this._skeletonPoseDirty=!0,t.prototype._pUpdateTime.call(this,e)},e.prototype._pUpdateFrames=function(){t.prototype._pUpdateFrames.call(this),this._currentPose=this._frames[this._pCurrentFrame],this._skeletonClipNode.looping&&this._pNextFrame>=this._skeletonClipNode.lastFrame?(this._nextPose=this._frames[0],this._pAnimator.dispatchCycleEvent()):this._nextPose=this._frames[this._pNextFrame]},e.prototype.updateSkeletonPose=function(t){if(this._skeletonPoseDirty=!1,this._skeletonClipNode.totalDuration){this._pFramesDirty&&this._pUpdateFrames();var e,i,s,a,n,o,h=this._currentPose.jointPoses,l=this._nextPose.jointPoses,p=t.numJoints,d=this._skeletonPose.jointPoses;if(d.length!=p&&(d.length=p),p!=h.length||p!=l.length)throw new Error("joint counts don't match!");for(var u=0;p>u;++u)n=d[u],null==n&&(n=d[u]=new r),s=h[u],a=l[u],e=s.translation,i=a.translation,this._skeletonClipNode.highQuality?n.orientation.slerp(s.orientation,a.orientation,this._pBlendWeight):n.orientation.lerp(s.orientation,a.orientation,this._pBlendWeight),u>0&&(o=n.translation,o.x=e.x+this._pBlendWeight*(i.x-e.x),o.y=e.y+this._pBlendWeight*(i.y-e.y),o.z=e.z+this._pBlendWeight*(i.z-e.z))}},e.prototype._pUpdatePositionDelta=function(){this._pPositionDeltaDirty=!1,this._pFramesDirty&&this._pUpdateFrames();var t,e,i,s=this._skeletonClipNode.totalDelta;(this._pTimeDir>0&&this._pNextFrame<this._pOldFrame||this._pTimeDir<0&&this._pNextFrame>this._pOldFrame)&&(this._rootPos.x-=s.x*this._pTimeDir,this._rootPos.y-=s.y*this._pTimeDir,this._rootPos.z-=s.z*this._pTimeDir);var r=this._rootPos.x,a=this._rootPos.y,n=this._rootPos.z;this._skeletonClipNode.stitchFinalFrame&&this._pNextFrame==this._skeletonClipNode.lastFrame?(t=this._frames[0].jointPoses[0].translation,e=this._frames[1].jointPoses[0].translation,i=this._currentPose.jointPoses[0].translation,this._rootPos.x=i.x+t.x+this._pBlendWeight*(e.x-t.x),this._rootPos.y=i.y+t.y+this._pBlendWeight*(e.y-t.y),this._rootPos.z=i.z+t.z+this._pBlendWeight*(e.z-t.z)):(t=this._currentPose.jointPoses[0].translation,e=this._frames[this._pNextFrame].jointPoses[0].translation,this._rootPos.x=t.x+this._pBlendWeight*(e.x-t.x),this._rootPos.y=t.y+this._pBlendWeight*(e.y-t.y),this._rootPos.z=t.z+this._pBlendWeight*(e.z-t.z)),this._pRootDelta.x=this._rootPos.x-r,this._pRootDelta.y=this._rootPos.y-a,this._pRootDelta.z=this._rootPos.z-n,this._pOldFrame=this._pNextFrame},e}(n);e.exports=o},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-renderergl/lib/animators/data/JointPose":void 0,"awayjs-renderergl/lib/animators/data/SkeletonPose":void 0,"awayjs-renderergl/lib/animators/states/AnimationClipState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/SkeletonDifferenceState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Quaternion"),r=t("awayjs-renderergl/lib/animators/data/JointPose"),a=t("awayjs-renderergl/lib/animators/data/SkeletonPose"),n=t("awayjs-renderergl/lib/animators/states/AnimationStateBase"),o=function(t){function e(e,i){t.call(this,e,i),this._blendWeight=0,this._skeletonPose=new a,this._skeletonPoseDirty=!0,this._skeletonAnimationNode=i,this._baseInput=e.getAnimationState(this._skeletonAnimationNode.baseInput),this._differenceInput=e.getAnimationState(this._skeletonAnimationNode.differenceInput)}return i(e,t),Object.defineProperty(e.prototype,"blendWeight",{get:function(){return this._blendWeight},set:function(t){this._blendWeight=t,this._pPositionDeltaDirty=!0,this._skeletonPoseDirty=!0},enumerable:!0,configurable:!0}),e.prototype.phase=function(t){this._skeletonPoseDirty=!0,this._pPositionDeltaDirty=!0,this._baseInput.phase(t),this._baseInput.phase(t)},e.prototype._pUpdateTime=function(e){this._skeletonPoseDirty=!0,this._baseInput.update(e),this._differenceInput.update(e),t.prototype._pUpdateTime.call(this,e)},e.prototype.getSkeletonPose=function(t){return this._skeletonPoseDirty&&this.updateSkeletonPose(t),this._skeletonPose},e.prototype._pUpdatePositionDelta=function(){this._pPositionDeltaDirty=!1;var t=this._baseInput.positionDelta,e=this._differenceInput.positionDelta;this.positionDelta.x=t.x+this._blendWeight*e.x,this.positionDelta.y=t.y+this._blendWeight*e.y,this.positionDelta.z=t.z+this._blendWeight*e.z},e.prototype.updateSkeletonPose=function(t){this._skeletonPoseDirty=!1;var i,s,a,n,o,h,l=this._skeletonPose.jointPoses,p=this._baseInput.getSkeletonPose(t).jointPoses,d=this._differenceInput.getSkeletonPose(t).jointPoses,u=t.numJoints;l.length!=u&&(l.length=u);for(var c=0;u>c;++c)i=l[c],null==i&&(i=l[c]=new r),s=p[c],a=d[c],n=s.translation,o=a.translation,e._tempQuat.multiply(a.orientation,s.orientation),i.orientation.lerp(s.orientation,e._tempQuat,this._blendWeight),h=i.translation,h.x=n.x+this._blendWeight*o.x,h.y=n.y+this._blendWeight*o.y,h.z=n.z+this._blendWeight*o.z},e._tempQuat=new s,e}(n);e.exports=o},{"awayjs-core/lib/geom/Quaternion":void 0,"awayjs-renderergl/lib/animators/data/JointPose":void 0,"awayjs-renderergl/lib/animators/data/SkeletonPose":void 0,"awayjs-renderergl/lib/animators/states/AnimationStateBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/SkeletonDirectionalState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/data/JointPose"),r=t("awayjs-renderergl/lib/animators/data/SkeletonPose"),a=t("awayjs-renderergl/lib/animators/states/AnimationStateBase"),n=function(t){function e(e,i){t.call(this,e,i),this._skeletonPose=new r,this._skeletonPoseDirty=!0,this._blendWeight=0,this._direction=0,this._blendDirty=!0,this._skeletonAnimationNode=i,this._forward=e.getAnimationState(this._skeletonAnimationNode.forward),this._backward=e.getAnimationState(this._skeletonAnimationNode.backward),this._left=e.getAnimationState(this._skeletonAnimationNode.left),this._right=e.getAnimationState(this._skeletonAnimationNode.right)}return i(e,t),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction!=t&&(this._direction=t,this._blendDirty=!0,this._skeletonPoseDirty=!0,this._pPositionDeltaDirty=!0)},enumerable:!0,configurable:!0}),e.prototype.phase=function(t){this._blendDirty&&this.updateBlend(),this._skeletonPoseDirty=!0,this._pPositionDeltaDirty=!0,this._inputA.phase(t),this._inputB.phase(t)},e.prototype._pUdateTime=function(e){this._blendDirty&&this.updateBlend(),this._skeletonPoseDirty=!0,this._inputA.update(e),this._inputB.update(e),t.prototype._pUpdateTime.call(this,e)},e.prototype.getSkeletonPose=function(t){return this._skeletonPoseDirty&&this.updateSkeletonPose(t),this._skeletonPose},e.prototype._pUpdatePositionDelta=function(){this._pPositionDeltaDirty=!1,this._blendDirty&&this.updateBlend();var t=this._inputA.positionDelta,e=this._inputB.positionDelta;this.positionDelta.x=t.x+this._blendWeight*(e.x-t.x),this.positionDelta.y=t.y+this._blendWeight*(e.y-t.y),this.positionDelta.z=t.z+this._blendWeight*(e.z-t.z)},e.prototype.updateSkeletonPose=function(t){this._skeletonPoseDirty=!1,this._blendDirty&&this.updateBlend();var e,i,r,a,n,o,h=this._skeletonPose.jointPoses,l=this._inputA.getSkeletonPose(t).jointPoses,p=this._inputB.getSkeletonPose(t).jointPoses,d=t.numJoints;h.length!=d&&(h.length=d);for(var u=0;d>u;++u)e=h[u],null==e&&(e=h[u]=new s),i=l[u],r=p[u],a=i.translation,n=r.translation,e.orientation.lerp(i.orientation,r.orientation,this._blendWeight),o=e.translation,o.x=a.x+this._blendWeight*(n.x-a.x),o.y=a.y+this._blendWeight*(n.y-a.y),o.z=a.z+this._blendWeight*(n.z-a.z)},e.prototype.updateBlend=function(){this._blendDirty=!1,(this._direction<0||this._direction>360)&&(this._direction%=360,this._direction<0&&(this._direction+=360)),this._direction<90?(this._inputA=this._forward,this._inputB=this._right,this._blendWeight=this._direction/90):this._direction<180?(this._inputA=this._right,this._inputB=this._backward,this._blendWeight=(this._direction-90)/90):this._direction<270?(this._inputA=this._backward,this._inputB=this._left,this._blendWeight=(this._direction-180)/90):(this._inputA=this._left,this._inputB=this._forward,this._blendWeight=(this._direction-270)/90)},e}(a);e.exports=n},{"awayjs-renderergl/lib/animators/data/JointPose":void 0,"awayjs-renderergl/lib/animators/data/SkeletonPose":void 0,"awayjs-renderergl/lib/animators/states/AnimationStateBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/SkeletonNaryLERPState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/data/JointPose"),r=t("awayjs-renderergl/lib/animators/data/SkeletonPose"),a=t("awayjs-renderergl/lib/animators/states/AnimationStateBase"),n=function(t){function e(e,i){t.call(this,e,i),this._skeletonPose=new r,this._skeletonPoseDirty=!0,this._blendWeights=new Array,this._inputs=new Array,this._skeletonAnimationNode=i;for(var s=this._skeletonAnimationNode.numInputs;s--;)this._inputs[s]=e.getAnimationState(this._skeletonAnimationNode._iInputs[s])}return i(e,t),e.prototype.phase=function(t){this._skeletonPoseDirty=!0,this._pPositionDeltaDirty=!0;for(var e=0;e<this._skeletonAnimationNode.numInputs;++e)this._blendWeights[e]&&this._inputs[e].update(t)},e.prototype._pUdateTime=function(e){for(var i=0;i<this._skeletonAnimationNode.numInputs;++i)this._blendWeights[i]&&this._inputs[i].update(e);t.prototype._pUpdateTime.call(this,e)},e.prototype.getSkeletonPose=function(t){return this._skeletonPoseDirty&&this.updateSkeletonPose(t),this._skeletonPose},e.prototype.getBlendWeightAt=function(t){return this._blendWeights[t]},e.prototype.setBlendWeightAt=function(t,e){this._blendWeights[t]=e,this._pPositionDeltaDirty=!0,this._skeletonPoseDirty=!0},e.prototype._pUpdatePositionDelta=function(){this._pPositionDeltaDirty=!1;var t,e;this.positionDelta.x=0,this.positionDelta.y=0,this.positionDelta.z=0;for(var i=0;i<this._skeletonAnimationNode.numInputs;++i)e=this._blendWeights[i],e&&(t=this._inputs[i].positionDelta,this.positionDelta.x+=e*t.x,this.positionDelta.y+=e*t.y,this.positionDelta.z+=e*t.z)},e.prototype.updateSkeletonPose=function(t){this._skeletonPoseDirty=!1;var e,i,r,a,n,o,h,l,p,d,u,c,_,y,g,f,m,b,w=this._skeletonPose.jointPoses,v=t.numJoints;w.length!=v&&(w.length=v);for(var x=0;x<this._skeletonAnimationNode.numInputs;++x)if(e=this._blendWeights[x])if(i=this._inputs[x].getSkeletonPose(t).jointPoses,p)for(d=0;d<t.numJoints;++d)r=w[d],a=i[d],l=p[d].orientation,c=l.x,_=l.y,y=l.z,u=l.w,l=a.orientation,o=a.translation,f=l.x,m=l.y,b=l.z,g=l.w,0>c*f+_*m+y*b+u*g&&(f=-f,m=-m,b=-b,g=-g),h=r.orientation,h.x+=e*f,h.y+=e*m,h.z+=e*b,h.w+=e*g,n=r.translation,n.x+=e*o.x,n.y+=e*o.y,n.z+=e*o.z;else for(p=i,d=0;v>d;++d)r=w[d],null==r&&(r=w[d]=new s),a=i[d],l=a.orientation,o=a.translation,h=r.orientation,h.x=e*l.x,h.y=e*l.y,h.z=e*l.z,h.w=e*l.w,n=r.translation,n.x=e*o.x,n.y=e*o.y,n.z=e*o.z;for(d=0;d<t.numJoints;++d)w[d].orientation.normalize()},e}(a);e.exports=n},{"awayjs-renderergl/lib/animators/data/JointPose":void 0,"awayjs-renderergl/lib/animators/data/SkeletonPose":void 0,"awayjs-renderergl/lib/animators/states/AnimationStateBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/states/VertexClipState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/states/AnimationClipState"),r=function(t){function e(e,i){t.call(this,e,i),this._vertexClipNode=i,this._frames=this._vertexClipNode.frames}return i(e,t),Object.defineProperty(e.prototype,"currentGeometry",{get:function(){return this._pFramesDirty&&this._pUpdateFrames(),this._currentGeometry},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextGeometry",{get:function(){return this._pFramesDirty&&this._pUpdateFrames(),this._nextGeometry},enumerable:!0,configurable:!0}),e.prototype._pUpdateFrames=function(){t.prototype._pUpdateFrames.call(this),this._currentGeometry=this._frames[this._pCurrentFrame],this._vertexClipNode.looping&&this._pNextFrame>=this._vertexClipNode.lastFrame?(this._nextGeometry=this._frames[0],this._pAnimator.dispatchCycleEvent()):this._nextGeometry=this._frames[this._pNextFrame]},e.prototype._pUpdatePositionDelta=function(){},e}(s);e.exports=r},{"awayjs-renderergl/lib/animators/states/AnimationClipState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/transitions/CrossfadeTransitionNode":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/nodes/SkeletonBinaryLERPNode"),r=t("awayjs-renderergl/lib/animators/transitions/CrossfadeTransitionState"),a=function(t){function e(){t.call(this),this._pStateClass=r}return i(e,t),e}(s);e.exports=a},{"awayjs-renderergl/lib/animators/nodes/SkeletonBinaryLERPNode":void 0,"awayjs-renderergl/lib/animators/transitions/CrossfadeTransitionState":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/transitions/CrossfadeTransitionState":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/animators/states/SkeletonBinaryLERPState"),r=t("awayjs-renderergl/lib/events/AnimationStateEvent"),a=function(t){function e(e,i){t.call(this,e,i),this._crossfadeTransitionNode=i}return i(e,t),e.prototype._pUpdateTime=function(e){this.blendWeight=Math.abs(e-this._crossfadeTransitionNode.startBlend)/(1e3*this._crossfadeTransitionNode.blendSpeed),this.blendWeight>=1&&(this.blendWeight=1,null==this._animationStateTransitionComplete&&(this._animationStateTransitionComplete=new r(r.TRANSITION_COMPLETE,this._pAnimator,this,this._crossfadeTransitionNode)),this._crossfadeTransitionNode.dispatchEvent(this._animationStateTransitionComplete)),t.prototype._pUpdateTime.call(this,e)},e}(s);e.exports=a},{"awayjs-renderergl/lib/animators/states/SkeletonBinaryLERPState":void 0,"awayjs-renderergl/lib/events/AnimationStateEvent":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/transitions/CrossfadeTransition":[function(t,e){var i=t("awayjs-renderergl/lib/animators/transitions/CrossfadeTransitionNode"),s=function(){function t(t){this.blendSpeed=.5,this.blendSpeed=t}return t.prototype.getAnimationNode=function(t,e,s,r){var a=new i;return a.inputA=e,a.inputB=s,a.blendSpeed=this.blendSpeed,a.startBlend=r,a},t}();e.exports=s},{"awayjs-renderergl/lib/animators/transitions/CrossfadeTransitionNode":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/animators/transitions/IAnimationTransition":[function(){},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/base/ParticleGeometry":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/base/Geometry"),r=function(t){function e(){t.apply(this,arguments)}return i(e,t),e}(s);e.exports=r},{"awayjs-display/lib/base/Geometry":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/events/AnimationStateEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e,i,s,r){t.call(this,e),this._animator=i,this._animationState=s,this._animationNode=r}return i(e,t),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationState",{get:function(){return this._animationState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationNode",{get:function(){return this._animationNode},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._animator,this._animationState,this._animationNode)},e.PLAYBACK_COMPLETE="playbackComplete",e.TRANSITION_COMPLETE="transitionComplete",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/AmbientEnvMapMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/AmbientBasicMethod"),r=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),a=function(t){function e(e){t.call(this),this._cubeTexture=e}return i(e,t),e.prototype.iInitVO=function(e,i){t.prototype.iInitVO.call(this,e,i),i.needsNormals=!0},Object.defineProperty(e.prototype,"envMap",{get:function(){return this._cubeTexture},set:function(t){this._cubeTexture=t},enumerable:!0,configurable:!0}),e.prototype.iActivate=function(e,i,s){t.prototype.iActivate.call(this,e,i,s),s.context.activateCubeTexture(i.texturesIndex,this._cubeTexture)},e.prototype.iGetFragmentCode=function(t,e,i,s,a){var n,o="",h=s.getFreeTextureReg();return e.texturesIndex=h.index,o+=r.getTexCubeSampleCode(i,h,this._cubeTexture,t.useSmoothTextures,t.useMipmapping,a.normalFragment),n=s.getFreeFragmentConstant(),e.fragmentConstantsIndex=n.index,o+="add "+i+".xyz, "+i+".xyz, "+n+".xyz\n"},e}(s);e.exports=a},{"awayjs-stagegl/lib/materials/methods/AmbientBasicMethod":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/DiffuseCelMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/materials/methods/DiffuseCompositeMethod"),r=function(t){function e(e,i){var s=this;void 0===e&&(e=3),void 0===i&&(i=null),t.call(this,null,i),this._smoothness=.1,this.baseMethod._iModulateMethod=function(t,e,i,r,a){return s.clampDiffuse(t,e,i,r,a)},this._levels=e}return i(e,t),e.prototype.iInitConstants=function(e,i){var s=e.fragmentConstantData,r=i.secondaryFragmentConstantsIndex;t.prototype.iInitConstants.call(this,e,i),s[r+1]=1,s[r+2]=0},Object.defineProperty(e.prototype,"levels",{get:function(){return this._levels},set:function(t){this._levels=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smoothness",{get:function(){return this._smoothness},set:function(t){this._smoothness=t},enumerable:!0,configurable:!0}),e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._dataReg=null},e.prototype.iGetFragmentPreLightingCode=function(e,i,s,r){return this._dataReg=s.getFreeFragmentConstant(),i.secondaryFragmentConstantsIndex=4*this._dataReg.index,t.prototype.iGetFragmentPreLightingCode.call(this,e,i,s,r)},e.prototype.iActivate=function(e,i,s){t.prototype.iActivate.call(this,e,i,s);
var r=e.fragmentConstantData,a=i.secondaryFragmentConstantsIndex;r[a]=this._levels,r[a+3]=this._smoothness},e.prototype.clampDiffuse=function(t,e,i){return"mul "+i+".w, "+i+".w, "+this._dataReg+".x\nfrc "+i+".z, "+i+".w\nsub "+i+".y, "+i+".w, "+i+".z\nmov "+i+".x, "+this._dataReg+".x\nsub "+i+".x, "+i+".x, "+this._dataReg+".y\nrcp "+i+".x,"+i+".x\nmul "+i+".w, "+i+".y, "+i+".x\nsub "+i+".y, "+i+".w, "+i+".x\ndiv "+i+".z, "+i+".z, "+this._dataReg+".w\nsat "+i+".z, "+i+".z\nmul "+i+".w, "+i+".w, "+i+".z\nsub "+i+".z, "+this._dataReg+".y, "+i+".z\nmul "+i+".y, "+i+".y, "+i+".z\nadd "+i+".w, "+i+".w, "+i+".y\nsat "+i+".w, "+i+".w\n"},e}(s);e.exports=r},{"awayjs-renderergl/lib/materials/methods/DiffuseCompositeMethod":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/DiffuseCompositeMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/events/ShadingMethodEvent"),r=t("awayjs-stagegl/lib/materials/methods/DiffuseBasicMethod"),a=function(t){function e(e,i){var a=this;void 0===i&&(i=null),t.call(this),this._onShaderInvalidatedDelegate=function(t){return a.onShaderInvalidated(t)},this.pBaseMethod=i||new r,this.pBaseMethod._iModulateMethod=e,this.pBaseMethod.addEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate)}return i(e,t),Object.defineProperty(e.prototype,"baseMethod",{get:function(){return this.pBaseMethod},set:function(t){this.pBaseMethod!=t&&(this.pBaseMethod.removeEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate),this.pBaseMethod=t,this.pBaseMethod.addEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate),this.iInvalidateShaderProgram())},enumerable:!0,configurable:!0}),e.prototype.iInitVO=function(t,e){this.pBaseMethod.iInitVO(t,e)},e.prototype.iInitConstants=function(t,e){this.pBaseMethod.iInitConstants(t,e)},e.prototype.dispose=function(){this.pBaseMethod.removeEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate),this.pBaseMethod.dispose()},Object.defineProperty(e.prototype,"texture",{get:function(){return this.pBaseMethod.texture},set:function(t){this.pBaseMethod.texture=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuseColor",{get:function(){return this.pBaseMethod.diffuseColor},set:function(t){this.pBaseMethod.diffuseColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ambientColor",{get:function(){return this.pBaseMethod.ambientColor},set:function(t){this.pBaseMethod.ambientColor=t},enumerable:!0,configurable:!0}),e.prototype.iGetFragmentPreLightingCode=function(t,e,i,s){return this.pBaseMethod.iGetFragmentPreLightingCode(t,e,i,s)},e.prototype.iGetFragmentCodePerLight=function(t,e,i,s,r,a){var n=this.pBaseMethod.iGetFragmentCodePerLight(t,e,i,s,r,a);return this._pTotalLightColorReg=this.pBaseMethod._pTotalLightColorReg,n},e.prototype.iGetFragmentCodePerProbe=function(t,e,i,s,r,a){var n=this.pBaseMethod.iGetFragmentCodePerProbe(t,e,i,s,r,a);return this._pTotalLightColorReg=this.pBaseMethod._pTotalLightColorReg,n},e.prototype.iActivate=function(t,e,i){this.pBaseMethod.iActivate(t,e,i)},e.prototype.iSetRenderState=function(t,e,i,s,r){this.pBaseMethod.iSetRenderState(t,e,i,s,r)},e.prototype.iDeactivate=function(t,e,i){this.pBaseMethod.iDeactivate(t,e,i)},e.prototype.iGetVertexCode=function(t,e,i,s){return this.pBaseMethod.iGetVertexCode(t,e,i,s)},e.prototype.iGetFragmentPostLightingCode=function(t,e,i,s,r){return this.pBaseMethod.iGetFragmentPostLightingCode(t,e,i,s,r)},e.prototype.iReset=function(){this.pBaseMethod.iReset()},e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this.pBaseMethod.iCleanCompilationData()},e.prototype.onShaderInvalidated=function(){this.iInvalidateShaderProgram()},e}(r);e.exports=a},{"awayjs-stagegl/lib/events/ShadingMethodEvent":void 0,"awayjs-stagegl/lib/materials/methods/DiffuseBasicMethod":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/DiffuseDepthMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/DiffuseBasicMethod"),r=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),a=function(t){function e(){t.call(this)}return i(e,t),e.prototype.iInitConstants=function(t,e){var i=t.fragmentConstantData,s=e.fragmentConstantsIndex;i[s]=1,i[s+1]=1/255,i[s+2]=1/65025,i[s+3]=1/16581375},e.prototype.iGetFragmentPostLightingCode=function(t,e,i,s,a){var n,o,h="";if(!this._pUseTexture)throw new Error("DiffuseDepthMethod requires texture!");return t.numLights>0&&(a.shadowTarget&&(h+="mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+".xyz, "+a.shadowTarget+".w\n"),h+="add "+i+".xyz, "+this._pTotalLightColorReg+".xyz, "+i+".xyz\nsat "+i+".xyz, "+i+".xyz\n",s.removeFragmentTempUsage(this._pTotalLightColorReg)),n=t.numLights>0?s.getFreeFragmentVectorTemp():i,this._pDiffuseInputRegister=s.getFreeTextureReg(),e.texturesIndex=this._pDiffuseInputRegister.index,o=s.getFreeFragmentConstant(),e.fragmentConstantsIndex=4*o.index,h+=r.getTex2DSampleCode(n,a,this._pDiffuseInputRegister,this.texture,t.useSmoothTextures,t.repeatTextures,t.useMipmapping)+"dp4 "+n+".x, "+n+", "+o+"\nmov "+n+".yz, "+n+".xx			\nmov "+n+".w, "+o+".x\nsub "+n+".xyz, "+o+".xxx, "+n+".xyz\n",0==t.numLights?h:h+="mul "+i+".xyz, "+n+".xyz, "+i+".xyz\nmov "+i+".w, "+n+".w\n"},e}(s);e.exports=a},{"awayjs-stagegl/lib/materials/methods/DiffuseBasicMethod":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/DiffuseGradientMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/DiffuseBasicMethod"),r=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),a=function(t){function e(e){t.call(this),this._gradient=e}return i(e,t),Object.defineProperty(e.prototype,"gradient",{get:function(){return this._gradient},set:function(t){(t.hasMipmaps!=this._gradient.hasMipmaps||t.format!=this._gradient.format)&&this.iInvalidateShaderProgram(),this._gradient=t},enumerable:!0,configurable:!0}),e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._gradientTextureRegister=null},e.prototype.iGetFragmentPreLightingCode=function(e,i,s,r){var a=t.prototype.iGetFragmentPreLightingCode.call(this,e,i,s,r);return this._pIsFirstLight=!0,e.numLights>0&&(this._gradientTextureRegister=s.getFreeTextureReg(),i.secondaryTexturesIndex=this._gradientTextureRegister.index),a},e.prototype.iGetFragmentCodePerLight=function(t,e,i,s,a,n){var o,h="";return this._pIsFirstLight?o=this._pTotalLightColorReg:(o=a.getFreeFragmentVectorTemp(),a.addFragmentTempUsages(o,1)),h+="dp3 "+o+".w, "+i+".xyz, "+n.normalFragment+".xyz\nmul "+o+".w, "+o+".w, "+n.commons+".x\nadd "+o+".w, "+o+".w, "+n.commons+".x\nmul "+o+".xyz, "+o+".w, "+i+".w\n",null!=this._iModulateMethod&&(h+=this._iModulateMethod(t,e,o,a,n)),h+=r.getTex2DSampleCode(o,n,this._gradientTextureRegister,this._gradient,t.useSmoothTextures,t.repeatTextures,t.useMipmapping,o,"clamp")+"mul "+o+".xyz, "+o+".xyz, "+s+".xyz\n",this._pIsFirstLight||(h+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+".xyz, "+o+".xyz\n",a.removeFragmentTempUsage(o)),this._pIsFirstLight=!1,h},e.prototype.pApplyShadow=function(t,e,i,s){var a=i.getFreeFragmentVectorTemp();return"mov "+a+", "+s.shadowTarget+".wwww\n"+r.getTex2DSampleCode(a,s,this._gradientTextureRegister,this._gradient,t.useSmoothTextures,t.repeatTextures,t.useMipmapping,a,"clamp")+"mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+a+"\n"},e.prototype.iActivate=function(e,i,s){t.prototype.iActivate.call(this,e,i,s),s.context.activateTexture(i.secondaryTexturesIndex,this._gradient)},e}(s);e.exports=a},{"awayjs-stagegl/lib/materials/methods/DiffuseBasicMethod":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/DiffuseLightMapMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),r=t("awayjs-renderergl/lib/materials/methods/DiffuseCompositeMethod"),a=function(t){function e(e,i,s,r){void 0===i&&(i="multiply"),void 0===s&&(s=!1),void 0===r&&(r=null),t.call(this,null,r),this._useSecondaryUV=s,this._lightMapTexture=e,this.blendMode=i}return i(e,t),e.prototype.iInitVO=function(t,e){e.needsSecondaryUV=this._useSecondaryUV,e.needsUV=!this._useSecondaryUV},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){if(t!=e.ADD&&t!=e.MULTIPLY)throw new Error("Unknown blendmode!");this._blendMode!=t&&(this._blendMode=t,this.iInvalidateShaderProgram())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightMapTexture",{get:function(){return this._lightMapTexture},set:function(t){this._lightMapTexture=t},enumerable:!0,configurable:!0}),e.prototype.iActivate=function(e,i,s){s.context.activateTexture(i.secondaryTexturesIndex,this._lightMapTexture),t.prototype.iActivate.call(this,e,i,s)},e.prototype.iGetFragmentPostLightingCode=function(i,r,a,n,o){var h,l=n.getFreeTextureReg(),p=n.getFreeFragmentVectorTemp();switch(r.secondaryTexturesIndex=l.index,h=s.getTex2DSampleCode(p,o,l,this._lightMapTexture,i.useSmoothTextures,i.repeatTextures,i.useMipmapping,o.secondaryUVVarying),this._blendMode){case e.MULTIPLY:h+="mul "+this._pTotalLightColorReg+", "+this._pTotalLightColorReg+", "+p+"\n";break;case e.ADD:h+="add "+this._pTotalLightColorReg+", "+this._pTotalLightColorReg+", "+p+"\n"}return h+=t.prototype.iGetFragmentPostLightingCode.call(this,i,r,a,n,o)},e.MULTIPLY="multiply",e.ADD="add",e}(r);e.exports=a},{"awayjs-renderergl/lib/materials/methods/DiffuseCompositeMethod":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/DiffuseSubSurfaceMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/materials/methods/DiffuseCompositeMethod"),r=t("awayjs-renderergl/lib/materials/passes/SingleObjectDepthPass"),a=function(t){function e(e,i,s){var a=this;void 0===e&&(e=512),void 0===i&&(i=15),void 0===s&&(s=null),t.call(this,null,s),this._translucency=1,this._scatterColor=16777215,this._scatterR=1,this._scatterG=1,this._scatterB=1,this.pBaseMethod._iModulateMethod=function(t,e,i,s,r){return a.scatterLight(t,e,i,s,r)},this._passes=new Array,this._depthPass=new r,this._depthPass.textureSize=e,this._depthPass.polyOffset=i,this._passes.push(this._depthPass),this._scattering=.2,this._translucency=1}return i(e,t),e.prototype.iInitConstants=function(e,i){t.prototype.iInitConstants.call(this,e,i);var s=e.vertexConstantData,r=i.secondaryVertexConstantsIndex;s[r]=.5,s[r+1]=-.5,s[r+2]=0,s[r+3]=1,s=e.fragmentConstantData,r=i.secondaryFragmentConstantsIndex,s[r+3]=1,s[r+4]=1,s[r+5]=1/255,s[r+6]=1/65025,s[r+7]=1/16581375,s[r+10]=.5,s[r+11]=-.1},e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._lightProjVarying=null,this._propReg=null,this._lightColorReg=null,this._colorReg=null,this._decReg=null,this._targetReg=null},Object.defineProperty(e.prototype,"scattering",{get:function(){return this._scattering},set:function(t){this._scattering=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"translucency",{get:function(){return this._translucency},set:function(t){this._translucency=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scatterColor",{get:function(){return this._scatterColor},set:function(t){this._scatterColor=t,this._scatterR=(t>>16&255)/255,this._scatterG=(t>>8&255)/255,this._scatterB=(255&t)/255},enumerable:!0,configurable:!0}),e.prototype.iGetVertexCode=function(e,i,s,r){var a,n,o=t.prototype.iGetVertexCode.call(this,e,i,s,r),h=s.getFreeVertexVectorTemp();return n=s.getFreeVertexConstant(),i.secondaryVertexConstantsIndex=4*n.index,this._lightProjVarying=s.getFreeVarying(),a=s.getFreeVertexConstant(),s.getFreeVertexConstant(),s.getFreeVertexConstant(),s.getFreeVertexConstant(),o+="m44 "+h+", vt0, "+a+"\ndiv "+h+".xyz, "+h+".xyz, "+h+".w\nmul "+h+".xy, "+h+".xy, "+n+".xy\nadd "+h+".xy, "+h+".xy, "+n+".xx\nmov "+this._lightProjVarying+".xyz, "+h+".xyz\nmov "+this._lightProjVarying+".w, va0.w\n"},e.prototype.iGetFragmentPreLightingCode=function(e,i,s,r){return this._colorReg=s.getFreeFragmentConstant(),this._decReg=s.getFreeFragmentConstant(),this._propReg=s.getFreeFragmentConstant(),i.secondaryFragmentConstantsIndex=4*this._colorReg.index,t.prototype.iGetFragmentPreLightingCode.call(this,e,i,s,r)},e.prototype.iGetFragmentCodePerLight=function(e,i,s,r,a,n){return this._pIsFirstLight=!0,this._lightColorReg=r,t.prototype.iGetFragmentCodePerLight.call(this,e,i,s,r,a,n)},e.prototype.iGetFragmentPostLightingCode=function(e,i,s,r,a){var n=t.prototype.iGetFragmentPostLightingCode.call(this,e,i,s,r,a),o=r.getFreeFragmentVectorTemp();return n+="mul "+o+".xyz, "+this._lightColorReg+".xyz, "+this._targetReg+".w\nmul "+o+".xyz, "+o+".xyz, "+this._colorReg+".xyz\nadd "+s+".xyz, "+s+".xyz, "+o+".xyz\n",this._targetReg!=a.viewDirFragment&&r.removeFragmentTempUsage(s),n},e.prototype.iActivate=function(e,i,s){t.prototype.iActivate.call(this,e,i,s);var r=i.secondaryFragmentConstantsIndex,a=e.fragmentConstantData;a[r]=this._scatterR,a[r+1]=this._scatterG,a[r+2]=this._scatterB,a[r+8]=this._scattering,a[r+9]=this._translucency},e.prototype.iSetRenderState=function(t,e,i,s){s.context.activateTexture(e.secondaryTexturesIndex,this._depthPass._iGetDepthMap(i)),this._depthPass._iGetProjection(i).copyRawDataTo(t.vertexConstantData,e.secondaryVertexConstantsIndex+4,!0)},e.prototype.scatterLight=function(t,e,i,s,r){if(!this._pIsFirstLight)return"";this._pIsFirstLight=!1;var a="",n=s.getFreeTextureReg();r.viewDirFragment?this._targetReg=r.viewDirFragment:(this._targetReg=s.getFreeFragmentVectorTemp(),s.addFragmentTempUsages(this._targetReg,1)),e.secondaryTexturesIndex=n.index;var o=s.getFreeFragmentVectorTemp();return a+="tex "+o+", "+this._lightProjVarying+", "+n+" <2d,nearest,clamp>\ndp4 "+i+".z, "+o+", "+this._decReg+"\n",a+="sub "+i+".z, "+this._lightProjVarying+".z, "+i+".z\nsub "+i+".z, "+this._propReg+".x, "+i+".z\nmul "+i+".z, "+this._propReg+".y, "+i+".z\nsat "+i+".z, "+i+".z\nneg "+i+".y, "+i+".x\nmul "+i+".y, "+i+".y, "+this._propReg+".z\nadd "+i+".y, "+i+".y, "+this._propReg+".z\nmul "+this._targetReg+".w, "+i+".z, "+i+".y\nsub "+i+".y, "+this._colorReg+".w, "+this._targetReg+".w\nmul "+i+".w, "+i+".w, "+i+".y\n"},e}(s);e.exports=a},{"awayjs-renderergl/lib/materials/methods/DiffuseCompositeMethod":void 0,"awayjs-renderergl/lib/materials/passes/SingleObjectDepthPass":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/DiffuseWrapMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/DiffuseBasicMethod"),r=function(t){function e(e){void 0===e&&(e=.5),t.call(this),this.wrapFactor=e}return i(e,t),e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._wrapDataRegister=null},Object.defineProperty(e.prototype,"wrapFactor",{get:function(){return this._wrapFactor},set:function(t){this._wrapFactor=t,this._wrapFactor=1/(t+1)},enumerable:!0,configurable:!0}),e.prototype.iGetFragmentPreLightingCode=function(e,i,s,r){var a=t.prototype.iGetFragmentPreLightingCode.call(this,e,i,s,r);return this._pIsFirstLight=!0,this._wrapDataRegister=s.getFreeFragmentConstant(),i.secondaryFragmentConstantsIndex=4*this._wrapDataRegister.index,a},e.prototype.iGetFragmentCodePerLight=function(t,e,i,s,r,a){var n,o="";return this._pIsFirstLight?n=this._pTotalLightColorReg:(n=r.getFreeFragmentVectorTemp(),r.addFragmentTempUsages(n,1)),o+="dp3 "+n+".x, "+i+".xyz, "+a.normalFragment+".xyz\nadd "+n+".y, "+n+".x, "+this._wrapDataRegister+".x\nmul "+n+".y, "+n+".y, "+this._wrapDataRegister+".y\nsat "+n+".w, "+n+".y\nmul "+n+".xz, "+n+".w, "+i+".wz\n",null!=this._iModulateMethod&&(o+=this._iModulateMethod(t,e,i,r,a)),o+="mul "+n+", "+n+".x, "+s+"\n",this._pIsFirstLight||(o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+".xyz, "+n+".xyz\n",r.removeFragmentTempUsage(n)),this._pIsFirstLight=!1,o},e.prototype.iActivate=function(e,i,s){t.prototype.iActivate.call(this,e,i,s);var r=i.secondaryFragmentConstantsIndex,a=e.fragmentConstantData;a[r]=this._wrapFactor,a[r+1]=1/(this._wrapFactor+1)},e}(s);e.exports=r},{"awayjs-stagegl/lib/materials/methods/DiffuseBasicMethod":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/EffectAlphaMaskMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/EffectMethodBase"),r=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),a=function(t){function e(e,i){void 0===i&&(i=!1),t.call(this),this._texture=e,this._useSecondaryUV=i}return i(e,t),e.prototype.iInitVO=function(t,e){e.needsSecondaryUV=this._useSecondaryUV,e.needsUV=!this._useSecondaryUV},Object.defineProperty(e.prototype,"useSecondaryUV",{get:function(){return this._useSecondaryUV},set:function(t){this._useSecondaryUV!=t&&(this._useSecondaryUV=t,this.iInvalidateShaderProgram())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t},enumerable:!0,configurable:!0}),e.prototype.iActivate=function(t,e,i){i.context.activateTexture(e.texturesIndex,this._texture)},e.prototype.iGetFragmentCode=function(t,e,i,s,a){var n=s.getFreeTextureReg(),o=s.getFreeFragmentVectorTemp(),h=this._useSecondaryUV?a.secondaryUVVarying:a.uvVarying;return e.texturesIndex=n.index,r.getTex2DSampleCode(o,a,n,this._texture,t.useSmoothTextures,t.repeatTextures,t.useMipmapping,h)+"mul "+i+", "+i+", "+o+".x\n"},e}(s);e.exports=a},{"awayjs-stagegl/lib/materials/methods/EffectMethodBase":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/EffectColorMatrixMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/EffectMethodBase"),r=function(t){function e(e){if(t.call(this),20!=e.length)throw new Error("Matrix length must be 20!");this._matrix=e}return i(e,t),Object.defineProperty(e.prototype,"colorMatrix",{get:function(){return this._matrix},set:function(t){this._matrix=t},enumerable:!0,configurable:!0}),e.prototype.iGetFragmentCode=function(t,e,i,s){var r="",a=s.getFreeFragmentConstant();s.getFreeFragmentConstant(),s.getFreeFragmentConstant(),s.getFreeFragmentConstant();var n=s.getFreeFragmentConstant();e.fragmentConstantsIndex=4*a.index;var o=s.getFreeFragmentVectorTemp();return r+="m44 "+o+", "+i+", "+a+"\nadd "+i+", "+o+", "+n+"\n"},e.prototype.iActivate=function(t,e){var i=this._matrix,s=e.fragmentConstantsIndex,r=t.fragmentConstantData;r[s]=i[0],r[s+1]=i[1],r[s+2]=i[2],r[s+3]=i[3],r[s+4]=i[5],r[s+5]=i[6],r[s+6]=i[7],r[s+7]=i[8],r[s+8]=i[10],r[s+9]=i[11],r[s+10]=i[12],r[s+11]=i[13],r[s+12]=i[15],r[s+13]=i[16],r[s+14]=i[17],r[s+15]=i[18],r[s+16]=i[4],r[s+17]=i[9],r[s+18]=i[14],r[s+19]=i[19]},e}(s);e.exports=r},{"awayjs-stagegl/lib/materials/methods/EffectMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/EffectEnvMapMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/EffectMethodBase"),r=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),a=function(t){function e(e,i){void 0===i&&(i=1),t.call(this),this._cubeTexture=e,this._alpha=i}return i(e,t),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){(t!=this._mask||t&&this._mask&&(t.hasMipmaps!=this._mask.hasMipmaps||t.format!=this._mask.format))&&this.iInvalidateShaderProgram(),this._mask=t},enumerable:!0,configurable:!0}),e.prototype.iInitVO=function(t,e){e.needsNormals=!0,e.needsView=!0,e.needsUV=null!=this._mask},Object.defineProperty(e.prototype,"envMap",{get:function(){return this._cubeTexture},set:function(t){this._cubeTexture=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){},Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=t},enumerable:!0,configurable:!0}),e.prototype.iActivate=function(t,e,i){t.fragmentConstantData[e.fragmentConstantsIndex]=this._alpha,i.context.activateCubeTexture(e.texturesIndex,this._cubeTexture),this._mask&&i.context.activateTexture(e.texturesIndex+1,this._mask)},e.prototype.iGetFragmentCode=function(t,e,i,s,a){var n=s.getFreeFragmentConstant(),o=s.getFreeFragmentVectorTemp(),h="",l=s.getFreeTextureReg();e.texturesIndex=l.index,e.fragmentConstantsIndex=4*n.index,s.addFragmentTempUsages(o,1);var p=s.getFreeFragmentVectorTemp();return h+="dp3 "+o+".w, "+a.viewDirFragment+".xyz, "+a.normalFragment+".xyz\nadd "+o+".w, "+o+".w, "+o+".w\nmul "+o+".xyz, "+a.normalFragment+".xyz, "+o+".w\nsub "+o+".xyz, "+o+".xyz, "+a.viewDirFragment+".xyz\n"+r.getTexCubeSampleCode(o,l,this._cubeTexture,t.useSmoothTextures,t.useMipmapping,o)+"sub "+p+".w, "+o+".w, fc0.x\nkil "+p+".w\nsub "+o+", "+o+", "+i+"\n",this._mask&&(h+=r.getTex2DSampleCode(p,a,s.getFreeTextureReg(),this._mask,t.useSmoothTextures,t.repeatTextures,t.useMipmapping)+"mul "+o+", "+p+", "+o+"\n"),h+="mul "+o+", "+o+", "+n+".x\nadd "+i+", "+i+", "+o+"\n",s.removeFragmentTempUsage(o),h},e}(s);e.exports=a},{"awayjs-stagegl/lib/materials/methods/EffectMethodBase":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/EffectFogMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/EffectMethodBase"),r=function(t){function e(e,i,s){void 0===s&&(s=8421504),t.call(this),this._minDistance=0,this._maxDistance=1e3,this.minDistance=e,this.maxDistance=i,this.fogColor=s}return i(e,t),e.prototype.iInitVO=function(t,e){e.needsProjection=!0},e.prototype.iInitConstants=function(t,e){var i=t.fragmentConstantData,s=e.fragmentConstantsIndex;i[s+3]=1,i[s+6]=0,i[s+7]=0},Object.defineProperty(e.prototype,"minDistance",{get:function(){return this._minDistance},set:function(t){this._minDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDistance",{get:function(){return this._maxDistance},set:function(t){this._maxDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fogColor",{get:function(){return this._fogColor},set:function(t){this._fogColor=t,this._fogR=(t>>16&255)/255,this._fogG=(t>>8&255)/255,this._fogB=(255&t)/255},enumerable:!0,configurable:!0}),e.prototype.iActivate=function(t,e){var i=t.fragmentConstantData,s=e.fragmentConstantsIndex;i[s]=this._fogR,i[s+1]=this._fogG,i[s+2]=this._fogB,i[s+4]=this._minDistance,i[s+5]=1/(this._maxDistance-this._minDistance)},e.prototype.iGetFragmentCode=function(t,e,i,s,r){var a=s.getFreeFragmentConstant(),n=s.getFreeFragmentConstant(),o=s.getFreeFragmentVectorTemp();s.addFragmentTempUsages(o,1);var h=s.getFreeFragmentVectorTemp(),l="";return e.fragmentConstantsIndex=4*a.index,l+="sub "+h+".w, "+r.projectionFragment+".z, "+n+".x\nmul "+h+".w, "+h+".w, "+n+".y\nsat "+h+".w, "+h+".w\nsub "+o+", "+a+", "+i+"\nmul "+o+", "+o+", "+h+".w\nadd "+i+", "+i+", "+o+"\n",s.removeFragmentTempUsage(o),l},e}(s);e.exports=r},{"awayjs-stagegl/lib/materials/methods/EffectMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/EffectFresnelEnvMapMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/EffectMethodBase"),r=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),a=function(t){function e(e,i){void 0===i&&(i=1),t.call(this),this._fresnelPower=5,this._normalReflectance=0,this._cubeTexture=e,this._alpha=i}return i(e,t),e.prototype.iInitVO=function(t,e){e.needsNormals=!0,e.needsView=!0,e.needsUV=null!=this._mask},e.prototype.iInitConstants=function(t,e){t.fragmentConstantData[e.fragmentConstantsIndex+3]=1},Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){(Boolean(t)!=Boolean(this._mask)||t&&this._mask&&(t.hasMipmaps!=this._mask.hasMipmaps||t.format!=this._mask.format))&&this.iInvalidateShaderProgram(),this._mask=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fresnelPower",{get:function(){return this._fresnelPower},set:function(t){this._fresnelPower=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"envMap",{get:function(){return this._cubeTexture},set:function(t){this._cubeTexture=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalReflectance",{get:function(){return this._normalReflectance},set:function(t){this._normalReflectance=t},enumerable:!0,configurable:!0}),e.prototype.iActivate=function(t,e,i){var s=t.fragmentConstantData,r=e.fragmentConstantsIndex;s[r]=this._alpha,s[r+1]=this._normalReflectance,s[r+2]=this._fresnelPower,i.context.activateCubeTexture(e.texturesIndex,this._cubeTexture),this._mask&&i.context.activateTexture(e.texturesIndex+1,this._mask)},e.prototype.iGetFragmentCode=function(t,e,i,s,a){var n=s.getFreeFragmentConstant(),o=s.getFreeFragmentVectorTemp(),h="",l=s.getFreeTextureReg(),p=a.viewDirFragment,d=a.normalFragment;e.texturesIndex=l.index,e.fragmentConstantsIndex=4*n.index,s.addFragmentTempUsages(o,1);var u=s.getFreeFragmentVectorTemp();if(h+="dp3 "+o+".w, "+p+".xyz, "+d+".xyz\nadd "+o+".w, "+o+".w, "+o+".w\nmul "+o+".xyz, "+d+".xyz, "+o+".w\nsub "+o+".xyz, "+o+".xyz, "+p+".xyz\n"+r.getTexCubeSampleCode(o,l,this._cubeTexture,t.useSmoothTextures,t.useMipmapping,o)+"sub "+u+".w, "+o+".w, fc0.x\nkil "+u+".w\nsub "+o+", "+o+", "+i+"\n",h+="dp3 "+p+".w, "+p+".xyz, "+d+".xyz\nsub "+p+".w, "+n+".w, "+p+".w\npow "+p+".w, "+p+".w, "+n+".z\nsub "+d+".w, "+n+".w, "+p+".w\nmul "+d+".w, "+n+".y, "+d+".w\nadd "+p+".w, "+p+".w, "+d+".w\nmul "+p+".w, "+n+".x, "+p+".w\n",this._mask){var c=s.getFreeTextureReg();h+=r.getTex2DSampleCode(u,a,c,this._mask,t.useSmoothTextures,t.repeatTextures,t.useMipmapping)+"mul "+p+".w, "+u+".x, "+p+".w\n"}return h+="mul "+o+", "+o+", "+p+".w\nadd "+i+", "+i+", "+o+"\n",s.removeFragmentTempUsage(o),h},e}(s);e.exports=a},{"awayjs-stagegl/lib/materials/methods/EffectMethodBase":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/EffectLightMapMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/EffectMethodBase"),r=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),a=function(t){function e(e,i,s){void 0===i&&(i="multiply"),void 0===s&&(s=!1),t.call(this),this._useSecondaryUV=s,this._texture=e,this.blendMode=i}return i(e,t),e.prototype.iInitVO=function(t,e){e.needsUV=!this._useSecondaryUV,e.needsSecondaryUV=this._useSecondaryUV},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){if(t!=e.ADD&&t!=e.MULTIPLY)throw new Error("Unknown blendmode!");this._blendMode!=t&&(this._blendMode=t,this.iInvalidateShaderProgram())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){(t.hasMipmaps!=this._texture.hasMipmaps||t.format!=this._texture.format)&&this.iInvalidateShaderProgram(),this._texture=t},enumerable:!0,configurable:!0}),e.prototype.iActivate=function(e,i,s){s.context.activateTexture(i.texturesIndex,this._texture),t.prototype.iActivate.call(this,e,i,s)},e.prototype.iGetFragmentCode=function(t,i,s,a,n){var o,h=a.getFreeTextureReg(),l=a.getFreeFragmentVectorTemp();switch(i.texturesIndex=h.index,o=r.getTex2DSampleCode(l,n,h,this._texture,t.useSmoothTextures,t.repeatTextures,t.useMipmapping,this._useSecondaryUV?n.secondaryUVVarying:n.uvVarying),this._blendMode){case e.MULTIPLY:o+="mul "+s+", "+s+", "+l+"\n";break;case e.ADD:o+="add "+s+", "+s+", "+l+"\n"}return o},e.MULTIPLY="multiply",e.ADD="add",e}(s);e.exports=a},{"awayjs-stagegl/lib/materials/methods/EffectMethodBase":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/EffectRefractionEnvMapMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/EffectMethodBase"),r=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),a=function(t){function e(e,i,s,r,a){void 0===i&&(i=.1),void 0===s&&(s=0),void 0===r&&(r=0),void 0===a&&(a=0),t.call(this),this._dispersionR=0,this._dispersionG=0,this._dispersionB=0,this._alpha=1,this._envMap=e,this._dispersionR=s,this._dispersionG=r,this._dispersionB=a,this._useDispersion=!(this._dispersionR==this._dispersionB&&this._dispersionR==this._dispersionG),this._refractionIndex=i}return i(e,t),e.prototype.iInitConstants=function(t,e){var i=e.fragmentConstantsIndex,s=t.fragmentConstantData;s[i+4]=1,s[i+5]=0,s[i+7]=1},e.prototype.iInitVO=function(t,e){e.needsNormals=!0,e.needsView=!0},Object.defineProperty(e.prototype,"envMap",{get:function(){return this._envMap},set:function(t){this._envMap=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"refractionIndex",{get:function(){return this._refractionIndex},set:function(t){this._refractionIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dispersionR",{get:function(){return this._dispersionR},set:function(t){this._dispersionR=t;var e=!(this._dispersionR==this._dispersionB&&this._dispersionR==this._dispersionG);this._useDispersion!=e&&(this.iInvalidateShaderProgram(),this._useDispersion=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dispersionG",{get:function(){return this._dispersionG},set:function(t){this._dispersionG=t;var e=!(this._dispersionR==this._dispersionB&&this._dispersionR==this._dispersionG);this._useDispersion!=e&&(this.iInvalidateShaderProgram(),this._useDispersion=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dispersionB",{get:function(){return this._dispersionB},set:function(t){this._dispersionB=t;var e=!(this._dispersionR==this._dispersionB&&this._dispersionR==this._dispersionG);this._useDispersion!=e&&(this.iInvalidateShaderProgram(),this._useDispersion=e)
},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=t},enumerable:!0,configurable:!0}),e.prototype.iActivate=function(t,e,i){var s=e.fragmentConstantsIndex,r=t.fragmentConstantData;r[s]=this._dispersionR+this._refractionIndex,this._useDispersion&&(r[s+1]=this._dispersionG+this._refractionIndex,r[s+2]=this._dispersionB+this._refractionIndex),r[s+3]=this._alpha,i.context.activateCubeTexture(e.texturesIndex,this._envMap)},e.prototype.iGetFragmentCode=function(t,e,i,s,a){var n,o,h,l=s.getFreeFragmentConstant(),p=s.getFreeFragmentConstant(),d="",u=s.getFreeTextureReg();e.texturesIndex=u.index,e.fragmentConstantsIndex=4*l.index,n=s.getFreeFragmentVectorTemp(),s.addFragmentTempUsages(n,1),o=s.getFreeFragmentVectorTemp(),s.addFragmentTempUsages(o,1),h=s.getFreeFragmentVectorTemp();var c=a.viewDirFragment,_=a.normalFragment;return d+="neg "+c+".xyz, "+c+".xyz\n",d+="dp3 "+h+".x, "+c+".xyz, "+_+".xyz\nmul "+h+".w, "+h+".x, "+h+".x\nsub "+h+".w, "+p+".x, "+h+".w\nmul "+h+".w, "+l+".x, "+h+".w\nmul "+h+".w, "+l+".x, "+h+".w\nsub "+h+".w, "+p+".x, "+h+".w\nsqt "+h+".y, "+h+".w\nmul "+h+".x, "+l+".x, "+h+".x\nadd "+h+".x, "+h+".x, "+h+".y\nmul "+h+".xyz, "+h+".x, "+_+".xyz\nmul "+n+", "+l+".x, "+c+"\nsub "+n+".xyz, "+n+".xyz, "+h+".xyz\nnrm "+n+".xyz, "+n+".xyz\n",d+=r.getTexCubeSampleCode(o,u,this._envMap,t.useSmoothTextures,t.useMipmapping,n)+"sub "+o+".w, "+o+".w, fc0.x	\nkil "+o+".w\n",this._useDispersion&&(d+="dp3 "+h+".x, "+c+".xyz, "+_+".xyz\nmul "+h+".w, "+h+".x, "+h+".x\nsub "+h+".w, "+p+".x, "+h+".w\nmul "+h+".w, "+l+".y, "+h+".w\nmul "+h+".w, "+l+".y, "+h+".w\nsub "+h+".w, "+p+".x, "+h+".w\nsqt "+h+".y, "+h+".w\nmul "+h+".x, "+l+".y, "+h+".x\nadd "+h+".x, "+h+".x, "+h+".y\nmul "+h+".xyz, "+h+".x, "+_+".xyz\nmul "+n+", "+l+".y, "+c+"\nsub "+n+".xyz, "+n+".xyz, "+h+".xyz\nnrm "+n+".xyz, "+n+".xyz\n",d+=r.getTexCubeSampleCode(h,u,this._envMap,t.useSmoothTextures,t.useMipmapping,n)+"mov "+o+".y, "+h+".y\n",d+="dp3 "+h+".x, "+c+".xyz, "+_+".xyz\nmul "+h+".w, "+h+".x, "+h+".x\nsub "+h+".w, "+p+".x, "+h+".w\nmul "+h+".w, "+l+".z, "+h+".w\nmul "+h+".w, "+l+".z, "+h+".w\nsub "+h+".w, "+p+".x, "+h+".w\nsqt "+h+".y, "+h+".w\nmul "+h+".x, "+l+".z, "+h+".x\nadd "+h+".x, "+h+".x, "+h+".y\nmul "+h+".xyz, "+h+".x, "+_+".xyz\nmul "+n+", "+l+".z, "+c+"\nsub "+n+".xyz, "+n+".xyz, "+h+".xyz\nnrm "+n+".xyz, "+n+".xyz\n",d+=r.getTexCubeSampleCode(h,u,this._envMap,t.useSmoothTextures,t.useMipmapping,n)+"mov "+o+".z, "+h+".z\n"),s.removeFragmentTempUsage(n),d+="sub "+o+".xyz, "+o+".xyz, "+i+".xyz\nmul "+o+".xyz, "+o+".xyz, "+l+".w\nadd "+i+".xyz, "+i+".xyz, "+o+".xyz\n",s.removeFragmentTempUsage(o),d+="neg "+c+".xyz, "+c+".xyz\n"},e}(s);e.exports=a},{"awayjs-stagegl/lib/materials/methods/EffectMethodBase":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/EffectRimLightMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/EffectMethodBase"),r=function(t){function e(e,i,s,r){void 0===e&&(e=16777215),void 0===i&&(i=.4),void 0===s&&(s=2),void 0===r&&(r="mix"),t.call(this),this._blendMode=r,this._strength=i,this._power=s,this.color=e}return i(e,t),e.prototype.iInitConstants=function(t,e){t.fragmentConstantData[e.fragmentConstantsIndex+3]=1},e.prototype.iInitVO=function(t,e){e.needsNormals=!0,e.needsView=!0},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this._blendMode!=t&&(this._blendMode=t,this.iInvalidateShaderProgram())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this._colorR=(t>>16&255)/255,this._colorG=(t>>8&255)/255,this._colorB=(255&t)/255},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strength",{get:function(){return this._strength},set:function(t){this._strength=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){return this._power},set:function(t){this._power=t},enumerable:!0,configurable:!0}),e.prototype.iActivate=function(t,e){var i=e.fragmentConstantsIndex,s=t.fragmentConstantData;s[i]=this._colorR,s[i+1]=this._colorG,s[i+2]=this._colorB,s[i+4]=this._strength,s[i+5]=this._power},e.prototype.iGetFragmentCode=function(t,i,s,r,a){var n=r.getFreeFragmentConstant(),o=r.getFreeFragmentConstant(),h=r.getFreeFragmentVectorTemp(),l="";return i.fragmentConstantsIndex=4*n.index,l+="dp3 "+h+".x, "+a.viewDirFragment+".xyz, "+a.normalFragment+".xyz\nsat "+h+".x, "+h+".x\nsub "+h+".x, "+n+".w, "+h+".x\npow "+h+".x, "+h+".x, "+o+".y\nmul "+h+".x, "+h+".x, "+o+".x\nsub "+h+".x, "+n+".w, "+h+".x\nmul "+s+".xyz, "+s+".xyz, "+h+".x\nsub "+h+".w, "+n+".w, "+h+".x\n",l+=this._blendMode==e.ADD?"mul "+h+".xyz, "+h+".w, "+n+".xyz\nadd "+s+".xyz, "+s+".xyz, "+h+".xyz\n":this._blendMode==e.MULTIPLY?"mul "+h+".xyz, "+h+".w, "+n+".xyz\nmul "+s+".xyz, "+s+".xyz, "+h+".xyz\n":"sub "+h+".xyz, "+n+".xyz, "+s+".xyz\nmul "+h+".xyz, "+h+".xyz, "+h+".w\nadd "+s+".xyz, "+s+".xyz, "+h+".xyz\n"},e.ADD="add",e.MULTIPLY="multiply",e.MIX="mix",e}(s);e.exports=r},{"awayjs-stagegl/lib/materials/methods/EffectMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/NormalHeightMapMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/NormalBasicMethod"),r=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),a=function(t){function e(e,i,s,r){t.call(this),this.normalMap=e,this._worldXYRatio=i/s,this._worldXZRatio=r/s}return i(e,t),e.prototype.iInitConstants=function(t,e){var i=e.fragmentConstantsIndex,s=t.fragmentConstantData;s[i]=1/this.normalMap.width,s[i+1]=1/this.normalMap.height,s[i+2]=0,s[i+3]=1,s[i+4]=this._worldXYRatio,s[i+5]=this._worldXZRatio},Object.defineProperty(e.prototype,"tangentSpace",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this._worldXYRatio=e._worldXYRatio,this._worldXZRatio=e._worldXZRatio},e.prototype.iGetFragmentCode=function(t,e,i,s,a){var n=s.getFreeFragmentVectorTemp(),o=s.getFreeFragmentConstant(),h=s.getFreeFragmentConstant();return this._pNormalTextureRegister=s.getFreeTextureReg(),e.texturesIndex=this._pNormalTextureRegister.index,e.fragmentConstantsIndex=4*o.index,r.getTex2DSampleCode(i,a,this._pNormalTextureRegister,this.normalMap,t.useSmoothTextures,t.repeatTextures,t.useMipmapping,a.uvVarying,"clamp")+"add "+n+", "+a.uvVarying+", "+o+".xzzz\n"+r.getTex2DSampleCode(n,a,this._pNormalTextureRegister,this.normalMap,t.useSmoothTextures,t.repeatTextures,t.useMipmapping,n,"clamp")+"sub "+i+".x, "+i+".x, "+n+".x\nadd "+n+", "+a.uvVarying+", "+o+".zyzz\n"+r.getTex2DSampleCode(n,a,this._pNormalTextureRegister,this.normalMap,t.useSmoothTextures,t.repeatTextures,t.useMipmapping,n,"clamp")+"sub "+i+".z, "+i+".z, "+n+".x\nmov "+i+".y, "+o+".w\nmul "+i+".xz, "+i+".xz, "+h+".xy\nnrm "+i+".xyz, "+i+".xyz\n"},e}(s);e.exports=a},{"awayjs-stagegl/lib/materials/methods/NormalBasicMethod":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/NormalSimpleWaterMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/NormalBasicMethod"),r=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),a=function(t){function e(e,i){t.call(this),this._useSecondNormalMap=!1,this._water1OffsetX=0,this._water1OffsetY=0,this._water2OffsetX=0,this._water2OffsetY=0,this.normalMap=e,this.secondaryNormalMap=i}return i(e,t),e.prototype.iInitConstants=function(t,e){var i=e.fragmentConstantsIndex,s=t.fragmentConstantData;s[i]=.5,s[i+1]=0,s[i+2]=0,s[i+3]=1},e.prototype.iInitVO=function(e,i){t.prototype.iInitVO.call(this,e,i),this._useSecondNormalMap=this.normalMap!=this.secondaryNormalMap},Object.defineProperty(e.prototype,"water1OffsetX",{get:function(){return this._water1OffsetX},set:function(t){this._water1OffsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"water1OffsetY",{get:function(){return this._water1OffsetY},set:function(t){this._water1OffsetY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"water2OffsetX",{get:function(){return this._water2OffsetX},set:function(t){this._water2OffsetX=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"water2OffsetY",{get:function(){return this._water2OffsetY},set:function(t){this._water2OffsetY=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondaryNormalMap",{get:function(){return this._texture2},set:function(t){this._texture2=t},enumerable:!0,configurable:!0}),e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._normalTextureRegister2=null},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._texture2=null},e.prototype.iActivate=function(e,i,s){t.prototype.iActivate.call(this,e,i,s);var r=e.fragmentConstantData,a=i.fragmentConstantsIndex;r[a+4]=this._water1OffsetX,r[a+5]=this._water1OffsetY,r[a+6]=this._water2OffsetX,r[a+7]=this._water2OffsetY,this._useSecondNormalMap&&s.context.activateTexture(i.texturesIndex+1,this._texture2)},e.prototype.iGetFragmentCode=function(t,e,i,s,a){var n=s.getFreeFragmentVectorTemp(),o=s.getFreeFragmentConstant(),h=s.getFreeFragmentConstant();return this._pNormalTextureRegister=s.getFreeTextureReg(),this._normalTextureRegister2=this._useSecondNormalMap?s.getFreeTextureReg():this._pNormalTextureRegister,e.texturesIndex=this._pNormalTextureRegister.index,e.fragmentConstantsIndex=4*o.index,"add "+n+", "+a.uvVarying+", "+h+".xyxy\n"+r.getTex2DSampleCode(i,a,this._pNormalTextureRegister,this.normalMap,t.useSmoothTextures,t.repeatTextures,t.useMipmapping,n)+"add "+n+", "+a.uvVarying+", "+h+".zwzw\n"+r.getTex2DSampleCode(n,a,this._normalTextureRegister2,this._texture2,t.useSmoothTextures,t.repeatTextures,t.useMipmapping,n)+"add "+i+", "+i+", "+n+"		\nmul "+i+", "+i+", "+o+".x	\nsub "+i+".xyz, "+i+".xyz, "+a.commons+".xxx	\nnrm "+i+".xyz, "+i+".xyz							\n"},e}(s);e.exports=a},{"awayjs-stagegl/lib/materials/methods/NormalBasicMethod":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/ShadowCascadeMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=t("awayjs-display/lib/entities/DirectionalLight"),a=t("awayjs-stagegl/lib/events/ShadingMethodEvent"),n=t("awayjs-stagegl/lib/materials/compilation/MethodVO"),o=t("awayjs-stagegl/lib/materials/methods/ShadowMapMethodBase"),h=function(t){function e(e){var i=this;if(t.call(this,e.castingLight),this._baseMethod=e,!(this._pCastingLight instanceof r))throw new Error("ShadowCascadeMethod is only compatible with DirectionalLight");if(this._cascadeShadowMapper=this._pCastingLight.shadowMapper,!this._cascadeShadowMapper)throw new Error("ShadowCascadeMethod requires a light that has a CascadeShadowMapper instance assigned to shadowMapper.");this._cascadeShadowMapper.addEventListener(s.CHANGE,function(t){return i.onCascadeChange(t)}),this._baseMethod.addEventListener(a.SHADER_INVALIDATED,function(t){return i.onShaderInvalidated(t)})}return i(e,t),Object.defineProperty(e.prototype,"baseMethod",{get:function(){return this._baseMethod},set:function(t){var e=this;this._baseMethod!=t&&(this._baseMethod.removeEventListener(a.SHADER_INVALIDATED,function(t){return e.onShaderInvalidated(t)}),this._baseMethod=t,this._baseMethod.addEventListener(a.SHADER_INVALIDATED,function(t){return e.onShaderInvalidated(t)}),this.iInvalidateShaderProgram())},enumerable:!0,configurable:!0}),e.prototype.iInitVO=function(t,e){var i=new n(this._baseMethod);this._baseMethod.iInitVO(t,i),e.needsGlobalVertexPos=!0,e.needsProjection=!0},e.prototype.iInitConstants=function(t,e){var i=t.fragmentConstantData,s=t.vertexConstantData,r=e.fragmentConstantsIndex;i[r]=1,i[r+1]=1/255,i[r+2]=1/65025,i[r+3]=1/16581375,i[r+6]=.5,i[r+7]=-.5,r=e.vertexConstantsIndex,s[r]=.5,s[r+1]=-.5,s[r+2]=0},e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._cascadeProjections=null,this._depthMapCoordVaryings=null},e.prototype.iGetVertexCode=function(t,e,i,s){var r="",a=i.getFreeVertexConstant();this.initProjectionsRegs(i),e.vertexConstantsIndex=4*a.index;for(var n=i.getFreeVertexVectorTemp(),o=0;o<this._cascadeShadowMapper.numCascades;++o)r+="m44 "+n+", "+s.globalPositionVertex+", "+this._cascadeProjections[o]+"\nadd "+this._depthMapCoordVaryings[o]+", "+n+", "+a+".zzwz\n";return r},e.prototype.initProjectionsRegs=function(t){this._cascadeProjections=new Array(this._cascadeShadowMapper.numCascades),this._depthMapCoordVaryings=new Array(this._cascadeShadowMapper.numCascades);for(var e=0;e<this._cascadeShadowMapper.numCascades;++e)this._depthMapCoordVaryings[e]=t.getFreeVarying(),this._cascadeProjections[e]=t.getFreeVertexConstant(),t.getFreeVertexConstant(),t.getFreeVertexConstant(),t.getFreeVertexConstant()},e.prototype.iGetFragmentCode=function(t,e,i,s,r){var a,n=this._cascadeShadowMapper.numCascades,o=s.getFreeTextureReg(),h=s.getFreeFragmentConstant(),l=s.getFreeFragmentConstant(),p=s.getFreeFragmentConstant(),d=Array(p+".x",p+".y",p+".z",p+".w");e.fragmentConstantsIndex=4*h.index,e.texturesIndex=o.index;var u=s.getFreeFragmentVectorTemp();s.addFragmentTempUsages(u,1);var c=s.getFreeFragmentVectorTemp();s.addFragmentTempUsages(c,1),a="mov "+c+", "+this._depthMapCoordVaryings[n-1]+"\n";for(var _=n-2;_>=0;--_){var y=this._depthMapCoordVaryings[_];a+="slt "+u+".z, "+r.projectionFragment+".z, "+d[_]+"\n";var g=s.getFreeFragmentVectorTemp();a+="sub "+g+", "+y+", "+c+"\nmul "+g+", "+g+", "+u+".z\nadd "+c+", "+c+", "+g+"\n"}return s.removeFragmentTempUsage(u),a+="div "+c+", "+c+", "+c+".w\nmul "+c+".xy, "+c+".xy, "+l+".zw\nadd "+c+".xy, "+c+".xy, "+l+".zz\n",a+=this._baseMethod._iGetCascadeFragmentCode(t,e,h,o,c,i,s,r)+"add "+i+".w, "+i+".w, "+l+".y\n",s.removeFragmentTempUsage(c),a},e.prototype.iActivate=function(t,e,i){i.context.activateTexture(e.texturesIndex,this._pCastingLight.shadowMapper.depthMap);var s=t.vertexConstantData,r=e.vertexConstantsIndex;t.vertexConstantData[e.vertexConstantsIndex+3]=-1/(this._cascadeShadowMapper.depth*this._pEpsilon);var a=this._cascadeShadowMapper.numCascades;r+=4;for(var n=0;a>n;++n)this._cascadeShadowMapper.getDepthProjections(n).copyRawDataTo(s,r,!0),r+=16;var o=t.fragmentConstantData,h=e.fragmentConstantsIndex;o[h+5]=1-this._pAlpha;var l=this._cascadeShadowMapper._iNearPlaneDistances;h+=8;for(var p=0;a>p;++p)o[h+p]=l[p];this._baseMethod.iActivateForCascade(t,e,i)},e.prototype.iSetRenderState=function(){},e.prototype.onCascadeChange=function(){this.iInvalidateShaderProgram()},e.prototype.onShaderInvalidated=function(){this.iInvalidateShaderProgram()},e}(o);e.exports=h},{"awayjs-core/lib/events/Event":void 0,"awayjs-display/lib/entities/DirectionalLight":void 0,"awayjs-stagegl/lib/events/ShadingMethodEvent":void 0,"awayjs-stagegl/lib/materials/compilation/MethodVO":void 0,"awayjs-stagegl/lib/materials/methods/ShadowMapMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/ShadowDitheredMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/base/BitmapData"),r=t("awayjs-core/lib/textures/BitmapTexture"),a=t("awayjs-stagegl/lib/materials/methods/ShadowMethodBase"),n=function(t){function e(i,s,r){void 0===s&&(s=4),void 0===r&&(r=1),t.call(this,i),this._depthMapSize=this._pCastingLight.shadowMapper.depthMapSize,this.numSamples=s,this.range=r,++e._grainUsages,e._grainTexture||this.initGrainTexture()}return i(e,t),Object.defineProperty(e.prototype,"numSamples",{get:function(){return this._numSamples},set:function(t){this._numSamples=t,this._numSamples<1?this._numSamples=1:this._numSamples>24&&(this._numSamples=24),this.iInvalidateShaderProgram()},enumerable:!0,configurable:!0}),e.prototype.iInitVO=function(e,i){t.prototype.iInitVO.call(this,e,i),i.needsProjection=!0},e.prototype.iInitConstants=function(e,i){t.prototype.iInitConstants.call(this,e,i);var s=e.fragmentConstantData,r=i.fragmentConstantsIndex;s[r+8]=1/this._numSamples},Object.defineProperty(e.prototype,"range",{get:function(){return 2*this._range},set:function(t){this._range=t/2},enumerable:!0,configurable:!0}),e.prototype.initGrainTexture=function(){e._grainBitmapData=new s(64,64,!1);for(var t,i,a=new Array,n=4096,o=1/(this._depthMapSize*this._range),h=0;n>h;++h)t=2*(Math.random()-.5),i=2*(Math.random()-.5),0>t?t-=o:t+=o,0>i?i-=o:i+=o,t>1?t=1:-1>t&&(t=-1),i>1?i=1:-1>i&&(i=-1),a[h]=Math.floor(255*(.5*t+.5))<<16|Math.floor(255*(.5*i+.5))<<8;e._grainBitmapData.setVector(e._grainBitmapData.rect,a),e._grainTexture=new r(e._grainBitmapData)},e.prototype.dispose=function(){0==--e._grainUsages&&(e._grainTexture.dispose(),e._grainBitmapData.dispose(),e._grainTexture=null)},e.prototype.iActivate=function(i,s,r){t.prototype.iActivate.call(this,i,s,r);var a=i.fragmentConstantData,n=s.fragmentConstantsIndex;a[n+9]=(r.width-1)/63,a[n+10]=(r.height-1)/63,a[n+11]=2*this._range/this._depthMapSize,r.context.activateTexture(s.texturesIndex+1,e._grainTexture)},e.prototype._pGetPlanarFragmentCode=function(t,e,i,s){var r=i.getFreeTextureReg(),a=i.getFreeFragmentConstant(),n=(i.getFreeFragmentConstant(),i.getFreeFragmentConstant());return t.fragmentConstantsIndex=4*a.index,t.texturesIndex=r.index,this.getSampleCode(n,r,a,e,i,s)},e.prototype.getSampleCode=function(t,e,i,s,r,a){var n="",o=r.getFreeTextureReg(),h=r.getFreeFragmentVectorTemp(),l=this._numSamples;r.addFragmentTempUsages(h,1);var p=r.getFreeFragmentVectorTemp(),d=a.projectionFragment;for(n+="div "+h+", "+d+", "+d+".w\nmul "+h+".xy, "+h+".xy, "+t+".yz\n";l>0;)n+=l==this._numSamples?"tex "+h+", "+h+", "+o+" <2d,nearest,repeat,mipnone>\n":"tex "+h+", "+h+".zwxy, "+o+" <2d,nearest,repeat,mipnone>\n",n+="sub "+h+".zw, "+h+".xy, fc0.xx\nmul "+h+".zw, "+h+".zw, "+t+".w\n",n+=l==this._numSamples?"add "+h+".xy, "+h+".zw, "+this._pDepthMapCoordReg+".xy\ntex "+p+", "+h+", "+e+" <2d,nearest,clamp,mipnone>\ndp4 "+p+".z, "+p+", "+i+"\nslt "+s+".w, "+this._pDepthMapCoordReg+".z, "+p+".z\n":this.addSample(h,e,i,s,r),l>4&&(n+="add "+h+".xy, "+h+".xy, "+h+".zw\n"+this.addSample(h,e,i,s,r)),l>1&&(n+="sub "+h+".xy, "+this._pDepthMapCoordReg+".xy, "+h+".zw\n"+this.addSample(h,e,i,s,r)),l>5&&(n+="sub "+h+".xy, "+h+".xy, "+h+".zw\n"+this.addSample(h,e,i,s,r)),l>2&&(n+="neg "+h+".w, "+h+".w\n",n+="add "+h+".xy, "+h+".wz, "+this._pDepthMapCoordReg+".xy\n"+this.addSample(h,e,i,s,r)),l>6&&(n+="add "+h+".xy, "+h+".xy, "+h+".wz\n"+this.addSample(h,e,i,s,r)),l>3&&(n+="sub "+h+".xy, "+this._pDepthMapCoordReg+".xy, "+h+".wz\n"+this.addSample(h,e,i,s,r)),l>7&&(n+="sub "+h+".xy, "+h+".xy, "+h+".wz\n"+this.addSample(h,e,i,s,r)),l-=8;return r.removeFragmentTempUsage(h),n+="mul "+s+".w, "+s+".w, "+t+".x\n"},e.prototype.addSample=function(t,e,i,s,r){var a=r.getFreeFragmentVectorTemp();return"tex "+a+", "+t+", "+e+" <2d,nearest,clamp,mipnone>\ndp4 "+a+".z, "+a+", "+i+"\nslt "+a+".z, "+this._pDepthMapCoordReg+".z, "+a+".z\nadd "+s+".w, "+s+".w, "+a+".z\n"},e.prototype.iActivateForCascade=function(t,i,s){var r=t.fragmentConstantData,a=i.secondaryFragmentConstantsIndex;r[a]=1/this._numSamples,r[a+1]=(s.width-1)/63,r[a+2]=(s.height-1)/63,r[a+3]=2*this._range/this._depthMapSize,s.context.activateTexture(i.texturesIndex+1,e._grainTexture)},e.prototype._iGetCascadeFragmentCode=function(t,e,i,s,r,a,n,o){this._pDepthMapCoordReg=r;var h=n.getFreeFragmentConstant();return e.secondaryFragmentConstantsIndex=4*h.index,this.getSampleCode(h,s,i,a,n,o)},e}(a);e.exports=n},{"awayjs-core/lib/base/BitmapData":void 0,"awayjs-core/lib/textures/BitmapTexture":void 0,"awayjs-stagegl/lib/materials/methods/ShadowMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/ShadowFilteredMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/ShadowMethodBase"),r=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype.iInitConstants=function(e,i){t.prototype.iInitConstants.call(this,e,i);var s=e.fragmentConstantData,r=i.fragmentConstantsIndex;s[r+8]=.5;var a=this.castingLight.shadowMapper.depthMapSize;s[r+9]=a,s[r+10]=1/a},e.prototype._pGetPlanarFragmentCode=function(t,e,i){var s=i.getFreeTextureReg(),r=i.getFreeFragmentConstant(),a=i.getFreeFragmentConstant();a=a;var n,o=i.getFreeFragmentConstant(),h=i.getFreeFragmentVectorTemp(),l="";return t.fragmentConstantsIndex=4*r.index,i.addFragmentTempUsages(h,1),n=i.getFreeFragmentVectorTemp(),i.addFragmentTempUsages(n,1),l+="mov "+n+", "+this._pDepthMapCoordReg+"\ntex "+h+", "+this._pDepthMapCoordReg+", "+s+" <2d, nearest, clamp>\ndp4 "+h+".z, "+h+", "+r+"\nslt "+n+".z, "+this._pDepthMapCoordReg+".z, "+h+".z\nadd "+n+".x, "+this._pDepthMapCoordReg+".x, "+o+".z\ntex "+h+", "+n+", "+s+" <2d, nearest, clamp>\ndp4 "+h+".z, "+h+", "+r+"\nslt "+n+".w, "+this._pDepthMapCoordReg+".z, "+h+".z\nmul "+h+".x, "+this._pDepthMapCoordReg+".x, "+o+".y\nfrc "+h+".x, "+h+".x\nsub "+n+".w, "+n+".w, "+n+".z\nmul "+n+".w, "+n+".w, "+h+".x\nadd "+e+".w, "+n+".z, "+n+".w\nmov "+n+".x, "+this._pDepthMapCoordReg+".x\nadd "+n+".y, "+this._pDepthMapCoordReg+".y, "+o+".z\ntex "+h+", "+n+", "+s+" <2d, nearest, clamp>\ndp4 "+h+".z, "+h+", "+r+"\nslt "+n+".z, "+this._pDepthMapCoordReg+".z, "+h+".z\nadd "+n+".x, "+this._pDepthMapCoordReg+".x, "+o+".z\ntex "+h+", "+n+", "+s+" <2d, nearest, clamp>\ndp4 "+h+".z, "+h+", "+r+"\nslt "+n+".w, "+this._pDepthMapCoordReg+".z, "+h+".z\nmul "+h+".x, "+this._pDepthMapCoordReg+".x, "+o+".y\nfrc "+h+".x, "+h+".x\nsub "+n+".w, "+n+".w, "+n+".z\nmul "+n+".w, "+n+".w, "+h+".x\nadd "+n+".w, "+n+".z, "+n+".w\nmul "+h+".x, "+this._pDepthMapCoordReg+".y, "+o+".y\nfrc "+h+".x, "+h+".x\nsub "+n+".w, "+n+".w, "+e+".w\nmul "+n+".w, "+n+".w, "+h+".x\nadd "+e+".w, "+e+".w, "+n+".w\n",i.removeFragmentTempUsage(h),i.removeFragmentTempUsage(n),t.texturesIndex=s.index,l},e.prototype.iActivateForCascade=function(t,e){var i=this.castingLight.shadowMapper.depthMapSize,s=e.secondaryFragmentConstantsIndex,r=t.fragmentConstantData;r[s]=i,r[s+1]=1/i},e.prototype._iGetCascadeFragmentCode=function(t,e,i,s,r,a,n){var o,h=n.getFreeFragmentConstant();e.secondaryFragmentConstantsIndex=4*h.index;var l=n.getFreeFragmentVectorTemp();n.addFragmentTempUsages(l,1);var p=n.getFreeFragmentVectorTemp();return n.addFragmentTempUsages(p,1),o="tex "+l+", "+r+", "+s+" <2d, nearest, clamp>\ndp4 "+l+".z, "+l+", "+i+"\nslt "+p+".x, "+r+".z, "+l+".z\nadd "+r+".x, "+r+".x, "+h+".y\ntex "+l+", "+r+", "+s+" <2d, nearest, clamp>\ndp4 "+l+".z, "+l+", "+i+"\nslt "+p+".z, "+r+".z, "+l+".z\nadd "+r+".y, "+r+".y, "+h+".y\ntex "+l+", "+r+", "+s+" <2d, nearest, clamp>\ndp4 "+l+".z, "+l+", "+i+"\nslt "+p+".w, "+r+".z, "+l+".z\nsub "+r+".x, "+r+".x, "+h+".y\ntex "+l+", "+r+", "+s+" <2d, nearest, clamp>\ndp4 "+l+".z, "+l+", "+i+"\nslt "+p+".y, "+r+".z, "+l+".z\nmul "+l+".xy, "+r+".xy, "+h+".x\nfrc "+l+".xy, "+l+".xy\nsub "+r+", "+p+".xyzw, "+p+".zwxy\nmul "+r+", "+r+", "+l+".x\nadd "+p+".xy, "+p+".xy, "+r+".zw\nsub "+p+".y, "+p+".y, "+p+".x\nmul "+p+".y, "+p+".y, "+l+".y\nadd "+a+".w, "+p+".x, "+p+".y\n",n.removeFragmentTempUsage(l),n.removeFragmentTempUsage(p),o},e}(s);e.exports=r},{"awayjs-stagegl/lib/materials/methods/ShadowMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/ShadowNearMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/events/ShadingMethodEvent"),r=t("awayjs-stagegl/lib/materials/methods/ShadowMethodBase"),a=function(t){function e(e,i){var r=this;if(void 0===i&&(i=.1),t.call(this,e.castingLight),this._onShaderInvalidatedDelegate=function(t){return r.onShaderInvalidated(t)},this._baseMethod=e,this._fadeRatio=i,this._nearShadowMapper=this._pCastingLight.shadowMapper,!this._nearShadowMapper)throw new Error("ShadowNearMethod requires a light that has a NearDirectionalShadowMapper instance assigned to shadowMapper.");this._baseMethod.addEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate)}return i(e,t),Object.defineProperty(e.prototype,"baseMethod",{get:function(){return this._baseMethod},set:function(t){this._baseMethod!=t&&(this._baseMethod.removeEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate),this._baseMethod=t,this._baseMethod.addEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate),this.iInvalidateShaderProgram())},enumerable:!0,configurable:!0}),e.prototype.iInitConstants=function(e,i){t.prototype.iInitConstants.call(this,e,i),this._baseMethod.iInitConstants(e,i);var s=e.fragmentConstantData,r=i.secondaryFragmentConstantsIndex;s[r+2]=0,s[r+3]=1},e.prototype.iInitVO=function(t,e){this._baseMethod.iInitVO(t,e),e.needsProjection=!0},e.prototype.dispose=function(){this._baseMethod.removeEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate)},Object.defineProperty(e.prototype,"alpha",{get:function(){return this._baseMethod.alpha},set:function(t){this._baseMethod.alpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"epsilon",{get:function(){return this._baseMethod.epsilon},set:function(t){this._baseMethod.epsilon=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeRatio",{get:function(){return this._fadeRatio},set:function(t){this._fadeRatio=t},enumerable:!0,configurable:!0}),e.prototype.iGetFragmentCode=function(t,e,i,s,r){var a=this._baseMethod.iGetFragmentCode(t,e,i,s,r),n=s.getFreeFragmentConstant(),o=s.getFreeFragmentSingleTemp();return e.secondaryFragmentConstantsIndex=4*n.index,a+="abs "+o+", "+r.projectionFragment+".w\nsub "+o+", "+o+", "+n+".x\nmul "+o+", "+o+", "+n+".y\nsat "+o+", "+o+"\nsub "+o+", "+n+".w,"+o+"\nsub "+i+".w, "+n+".w,"+i+".w\nmul "+i+".w, "+i+".w, "+o+"\nsub "+i+".w, "+n+".w,"+i+".w\n"},e.prototype.iActivate=function(t,e,i){this._baseMethod.iActivate(t,e,i)},e.prototype.iDeactivate=function(t,e,i){this._baseMethod.iDeactivate(t,e,i)},e.prototype.iSetRenderState=function(t,e,i,s,r){var a=r.projection.near,n=r.projection.far-a,o=this._nearShadowMapper.coverageRatio,h=o*(1-this._fadeRatio);o=a+o*n,h=a+h*n;var l=t.fragmentConstantData,p=e.secondaryFragmentConstantsIndex;l[p]=h,l[p+1]=1/(o-h),this._baseMethod.iSetRenderState(t,e,i,s,r)},e.prototype.iGetVertexCode=function(t,e,i,s){return this._baseMethod.iGetVertexCode(t,e,i,s)},e.prototype.iReset=function(){this._baseMethod.iReset()},e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._baseMethod.iCleanCompilationData()},e.prototype.onShaderInvalidated=function(){this.iInvalidateShaderProgram()},e}(r);e.exports=a},{"awayjs-stagegl/lib/events/ShadingMethodEvent":void 0,"awayjs-stagegl/lib/materials/methods/ShadowMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/ShadowSoftMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/PoissonLookup"),r=t("awayjs-stagegl/lib/materials/methods/ShadowMethodBase"),a=function(t){function e(e,i,s){void 0===i&&(i=5),void 0===s&&(s=1),t.call(this,e),this._range=1,this.numSamples=i,this.range=s}return i(e,t),Object.defineProperty(e.prototype,"numSamples",{get:function(){return this._numSamples},set:function(t){this._numSamples=t,this._numSamples<1?this._numSamples=1:this._numSamples>32&&(this._numSamples=32),this._offsets=s.getDistribution(this._numSamples),this.iInvalidateShaderProgram()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._range},set:function(t){this._range=t},enumerable:!0,configurable:!0}),e.prototype.iInitConstants=function(e,i){t.prototype.iInitConstants.call(this,e,i),e.fragmentConstantData[i.fragmentConstantsIndex+8]=1/this._numSamples,e.fragmentConstantData[i.fragmentConstantsIndex+9]=0},e.prototype.iActivate=function(e,i,s){t.prototype.iActivate.call(this,e,i,s);for(var r=.5*this._range/this._pCastingLight.shadowMapper.depthMapSize,a=e.fragmentConstantData,n=i.fragmentConstantsIndex+10,o=this._numSamples<<1,h=0;o>h;++h)a[n+h]=this._offsets[h]*r},e.prototype._pGetPlanarFragmentCode=function(t,e,i){var s=i.getFreeTextureReg(),r=i.getFreeFragmentConstant(),a=(i.getFreeFragmentConstant(),i.getFreeFragmentConstant());return t.fragmentConstantsIndex=4*r.index,t.texturesIndex=s.index,this.getSampleCode(i,s,r,e,a)},e.prototype.addSample=function(t,e,i,s,r){var a=r.getFreeFragmentVectorTemp();return"tex "+a+", "+t+", "+e+" <2d,nearest,clamp>\ndp4 "+a+".z, "+a+", "+i+"\nslt "+t+".w, "+this._pDepthMapCoordReg+".z, "+a+".z\nadd "+s+".w, "+s+".w, "+t+".w\n"},e.prototype.iActivateForCascade=function(e,i,s){t.prototype.iActivate.call(this,e,i,s);var r=this._range/this._pCastingLight.shadowMapper.depthMapSize,a=e.fragmentConstantData,n=i.secondaryFragmentConstantsIndex,o=this._numSamples<<1;a[n]=1/this._numSamples,a[n+1]=0,n+=2;for(var h=0;o>h;++h)a[n+h]=this._offsets[h]*r;o%4==0&&(a[n+o]=0,a[n+o+1]=0)},e.prototype._iGetCascadeFragmentCode=function(t,e,i,s,r,a,n){this._pDepthMapCoordReg=r;var o=n.getFreeFragmentConstant();return e.secondaryFragmentConstantsIndex=4*o.index,this.getSampleCode(n,s,i,a,o)},e.prototype.getSampleCode=function(t,e,i,s,r){var a,n,o=new Array(r+".zw");a=t.getFreeFragmentVectorTemp(),t.addFragmentTempUsages(a,1);for(var h=t.getFreeFragmentVectorTemp(),l=this._numSamples>>1,p=0;l>p;++p){var d=t.getFreeFragmentConstant();o.push(d+".xy"),o.push(d+".zw")}for(p=0;p<this._numSamples;++p)0==p?n="add "+a+", "+this._pDepthMapCoordReg+", "+r+".zwyy\ntex "+h+", "+a+", "+e+" <2d,nearest,clamp>\ndp4 "+h+".z, "+h+", "+i+"\nslt "+s+".w, "+this._pDepthMapCoordReg+".z, "+h+".z\n":n+="add "+a+".xy, "+this._pDepthMapCoordReg+".xy, "+o[p]+"\n"+this.addSample(a,e,i,s,t);return t.removeFragmentTempUsage(a),n+="mul "+s+".w, "+s+".w, "+r+".x\n"},e}(r);e.exports=a},{"awayjs-core/lib/geom/PoissonLookup":void 0,"awayjs-stagegl/lib/materials/methods/ShadowMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/SpecularAnisotropicMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/SpecularBasicMethod"),r=function(t){function e(){t.call(this)}return i(e,t),e.prototype.iInitVO=function(t,e){e.needsTangents=!0,e.needsView=!0},e.prototype.iGetFragmentCodePerLight=function(t,e,i,s,r,a){var n,o="";return this._pIsFirstLight?n=this._pTotalLightColorReg:(n=r.getFreeFragmentVectorTemp(),r.addFragmentTempUsages(n,1)),o+="nrm "+n+".xyz, "+a.tangentVarying+".xyz\ndp3 "+n+".w, "+n+".xyz, "+i+".xyz\ndp3 "+n+".z, "+n+".xyz, "+a.viewDirFragment+".xyz\n",o+="sin "+n+".x, "+n+".w\nsin "+n+".y, "+n+".z\nmul "+n+".x, "+n+".x, "+n+".y\ncos "+n+".z, "+n+".z\ncos "+n+".w, "+n+".w\nmul "+n+".w, "+n+".w, "+n+".z\nsub "+n+".w, "+n+".x, "+n+".w\n",o+=this._pUseTexture?"mul "+this._pSpecularTexData+".w, "+this._pSpecularTexData+".y, "+this._pSpecularDataRegister+".w\npow "+n+".w, "+n+".w, "+this._pSpecularTexData+".w\n":"pow "+n+".w, "+n+".w, "+this._pSpecularDataRegister+".w\n",o+="mul "+n+".w, "+n+".w, "+i+".w\n",null!=this._iModulateMethod&&(o+=this._iModulateMethod(t,e,n,r,a)),o+="mul "+n+".xyz, "+s+".xyz, "+n+".w\n",this._pIsFirstLight||(o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+".xyz, "+n+".xyz\n",r.removeFragmentTempUsage(n)),this._pIsFirstLight=!1,o
},e}(s);e.exports=r},{"awayjs-stagegl/lib/materials/methods/SpecularBasicMethod":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/SpecularCelMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/materials/methods/SpecularCompositeMethod"),r=function(t){function e(e,i){var s=this;void 0===e&&(e=.5),void 0===i&&(i=null),t.call(this,null,i),this._smoothness=.1,this._specularCutOff=.1,this.baseMethod._iModulateMethod=function(t,e,i,r,a){return s.clampSpecular(t,e,i,r,a)},this._specularCutOff=e}return i(e,t),Object.defineProperty(e.prototype,"smoothness",{get:function(){return this._smoothness},set:function(t){this._smoothness=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specularCutOff",{get:function(){return this._specularCutOff},set:function(t){this._specularCutOff=t},enumerable:!0,configurable:!0}),e.prototype.iActivate=function(e,i,s){t.prototype.iActivate.call(this,e,i,s);var r=i.secondaryFragmentConstantsIndex,a=e.fragmentConstantData;a[r]=this._smoothness,a[r+1]=this._specularCutOff},e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._dataReg=null},e.prototype.clampSpecular=function(t,e,i){return"sub "+i+".y, "+i+".w, "+this._dataReg+".y\ndiv "+i+".y, "+i+".y, "+this._dataReg+".x\nsat "+i+".y, "+i+".y\nsge "+i+".w, "+i+".w, "+this._dataReg+".y\nmul "+i+".w, "+i+".w, "+i+".y\n"},e.prototype.iGetFragmentPreLightingCode=function(e,i,s,r){return this._dataReg=s.getFreeFragmentConstant(),i.secondaryFragmentConstantsIndex=4*this._dataReg.index,t.prototype.iGetFragmentPreLightingCode.call(this,e,i,s,r)},e}(s);e.exports=r},{"awayjs-renderergl/lib/materials/methods/SpecularCompositeMethod":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/SpecularCompositeMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/events/ShadingMethodEvent"),r=t("awayjs-stagegl/lib/materials/methods/SpecularBasicMethod"),a=function(t){function e(e,i){var a=this;void 0===i&&(i=null),t.call(this),this._onShaderInvalidatedDelegate=function(t){return a.onShaderInvalidated(t)},this._baseMethod=i||new r,this._baseMethod._iModulateMethod=e,this._baseMethod.addEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate)}return i(e,t),e.prototype.iInitVO=function(t,e){this._baseMethod.iInitVO(t,e)},e.prototype.iInitConstants=function(t,e){this._baseMethod.iInitConstants(t,e)},Object.defineProperty(e.prototype,"baseMethod",{get:function(){return this._baseMethod},set:function(t){this._baseMethod!=t&&(this._baseMethod.removeEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate),this._baseMethod=t,this._baseMethod.addEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate),this.iInvalidateShaderProgram())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gloss",{get:function(){return this._baseMethod.gloss},set:function(t){this._baseMethod.gloss=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specular",{get:function(){return this._baseMethod.specular},set:function(t){this._baseMethod.specular=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"passes",{get:function(){return this._baseMethod.passes},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._baseMethod.removeEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate),this._baseMethod.dispose()},Object.defineProperty(e.prototype,"texture",{get:function(){return this._baseMethod.texture},set:function(t){this._baseMethod.texture=t},enumerable:!0,configurable:!0}),e.prototype.iActivate=function(t,e,i){this._baseMethod.iActivate(t,e,i)},e.prototype.iSetRenderState=function(t,e,i,s,r){this._baseMethod.iSetRenderState(t,e,i,s,r)},e.prototype.iDeactivate=function(t,e,i){this._baseMethod.iDeactivate(t,e,i)},e.prototype.iGetVertexCode=function(t,e,i,s){return this._baseMethod.iGetVertexCode(t,e,i,s)},e.prototype.iGetFragmentPreLightingCode=function(t,e,i,s){return this._baseMethod.iGetFragmentPreLightingCode(t,e,i,s)},e.prototype.iGetFragmentCodePerLight=function(t,e,i,s,r,a){return this._baseMethod.iGetFragmentCodePerLight(t,e,i,s,r,a)},e.prototype.iGetFragmentCodePerProbe=function(t,e,i,s,r,a){return this._baseMethod.iGetFragmentCodePerProbe(t,e,i,s,r,a)},e.prototype.iGetFragmentPostLightingCode=function(t,e,i,s,r){return this._baseMethod.iGetFragmentPostLightingCode(t,e,i,s,r)},e.prototype.iReset=function(){this._baseMethod.iReset()},e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._baseMethod.iCleanCompilationData()},e.prototype.onShaderInvalidated=function(){this.iInvalidateShaderProgram()},e}(r);e.exports=a},{"awayjs-stagegl/lib/events/ShadingMethodEvent":void 0,"awayjs-stagegl/lib/materials/methods/SpecularBasicMethod":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/SpecularFresnelMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-renderergl/lib/materials/methods/SpecularCompositeMethod"),r=function(t){function e(e,i){var s=this;void 0===e&&(e=!0),void 0===i&&(i=null),t.call(this,null,i),this._fresnelPower=5,this._normalReflectance=.028,this.baseMethod._iModulateMethod=function(t,e,i,r,a){return s.modulateSpecular(t,e,i,r,a)},this._incidentLight=!e}return i(e,t),e.prototype.iInitConstants=function(t,e){var i=e.secondaryFragmentConstantsIndex;t.fragmentConstantData[i+2]=1,t.fragmentConstantData[i+3]=0},Object.defineProperty(e.prototype,"basedOnSurface",{get:function(){return!this._incidentLight},set:function(t){this._incidentLight==t&&(this._incidentLight=!t,this.iInvalidateShaderProgram())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fresnelPower",{get:function(){return this._fresnelPower},set:function(t){this._fresnelPower=t},enumerable:!0,configurable:!0}),e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._dataReg=null},Object.defineProperty(e.prototype,"normalReflectance",{get:function(){return this._normalReflectance},set:function(t){this._normalReflectance=t},enumerable:!0,configurable:!0}),e.prototype.iActivate=function(e,i,s){t.prototype.iActivate.call(this,e,i,s);var r=e.fragmentConstantData,a=i.secondaryFragmentConstantsIndex;r[a]=this._normalReflectance,r[a+1]=this._fresnelPower},e.prototype.iGetFragmentPreLightingCode=function(e,i,s,r){return this._dataReg=s.getFreeFragmentConstant(),console.log("SpecularFresnelMethod","iGetFragmentPreLightingCode",this._dataReg),i.secondaryFragmentConstantsIndex=4*this._dataReg.index,t.prototype.iGetFragmentPreLightingCode.call(this,e,i,s,r)},e.prototype.modulateSpecular=function(t,e,i,s,r){var a;return a="dp3 "+i+".y, "+r.viewDirFragment+".xyz, "+(this._incidentLight?i:r.normalFragment)+".xyz\nsub "+i+".y, "+this._dataReg+".z, "+i+".y\npow "+i+".x, "+i+".y, "+this._dataReg+".y\nsub "+i+".y, "+this._dataReg+".z, "+i+".y\nmul "+i+".y, "+this._dataReg+".x, "+i+".y\nadd "+i+".y, "+i+".x, "+i+".y\nmul "+i+".w, "+i+".w, "+i+".y\n",console.log("SpecularFresnelMethod","modulateSpecular",a),a},e}(s);e.exports=r},{"awayjs-renderergl/lib/materials/methods/SpecularCompositeMethod":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/methods/SpecularPhongMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/SpecularBasicMethod"),r=function(t){function e(){t.call(this)}return i(e,t),e.prototype.iGetFragmentCodePerLight=function(t,e,i,s,r,a){var n,o="";this._pIsFirstLight?n=this._pTotalLightColorReg:(n=r.getFreeFragmentVectorTemp(),r.addFragmentTempUsages(n,1));var h=a.viewDirFragment,l=a.normalFragment;return o+="dp3 "+n+".w, "+i+", "+l+"\nadd "+n+".w, "+n+".w, "+n+".w\nmul "+n+".xyz, "+l+", "+n+".w\nsub "+n+".xyz, "+n+", "+i+"\nadd "+n+".w, "+n+".w, "+a.commons+".w\nsat "+n+".w, "+n+".w\nmul "+n+".xyz, "+n+", "+n+".w\ndp3 "+n+".w, "+n+", "+h+"\nsat "+n+".w, "+n+".w\n",o+=this._pUseTexture?"mul "+this._pSpecularTexData+".w, "+this._pSpecularTexData+".y, "+this._pSpecularDataRegister+".w\npow "+n+".w, "+n+".w, "+this._pSpecularTexData+".w\n":"pow "+n+".w, "+n+".w, "+this._pSpecularDataRegister+".w\n",t.usesLightFallOff&&(o+="mul "+n+".w, "+n+".w, "+i+".w\n"),null!=this._iModulateMethod&&(o+=this._iModulateMethod(t,e,n,r,a)),o+="mul "+n+".xyz, "+s+".xyz, "+n+".w\n",this._pIsFirstLight||(o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+".xyz, "+n+".xyz\n",r.removeFragmentTempUsage(n)),this._pIsFirstLight=!1,o},e}(s);e.exports=r},{"awayjs-stagegl/lib/materials/methods/SpecularBasicMethod":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/materials/passes/SingleObjectDepthPass":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),r=t("awayjs-core/lib/textures/RenderTexture"),a=t("awayjs-display/lib/base/TriangleSubGeometry"),n=t("awayjs-stagegl/lib/base/ContextGLProgramType"),o=t("awayjs-stagegl/lib/materials/passes/MaterialPassBase"),h=function(t){function e(){t.call(this),this._textureSize=512,this._polyOffset=Array(15,0,0,0),this._projectionTexturesInvalid=!0}return i(e,t),Object.defineProperty(e.prototype,"textureSize",{get:function(){return this._textureSize},set:function(t){this._textureSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"polyOffset",{get:function(){return this._polyOffset[0]},set:function(t){this._polyOffset[0]=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(this._textures){for(var t in this._textures){var e=this._textures[t];e.dispose()}this._textures=null}},e.prototype.updateProjectionTextures=function(){if(this._textures)for(var t in this._textures){var e=this._textures[t];e.dispose()}this._textures=new Object,this._projections=new Object,this._projectionTexturesInvalid=!1},e.prototype._iGetVertexCode=function(){var t;return t="mul vt7, vt1, vc4.x	\nadd vt7, vt7, vt0\nmov vt7.w, vt0.w\n",t+="m44 vt2, vt7, vc0\nmov op, vt2\n",t+="div v0, vt2, vt2.w\n"},e.prototype._iGetFragmentCode=function(){var t="";return t+="mul ft0, fc0, v0.z\nfrc ft0, ft0\nmul ft1, ft0.yzww, fc1\nsub ft0, ft0, ft1\nmov oc, ft0\n"},e.prototype._iGetDepthMap=function(t){return this._textures[t.materialOwner.id]},e.prototype._iGetProjection=function(t){return this._projections[t.materialOwner.id]},e.prototype._iRender=function(t,e,i,o){var h,l,p,d=i.context,u=this._pLightPicker.allPickedLights,c=e.materialOwner.id;this._textures[c]||(this._textures[c]=new r(this._textureSize,this._textureSize)),this._projections[c]||(this._projections[c]=new s),l=u.length,p=u[0],h=p.iGetObjectProjectionMatrix(e.sourceEntity,o,this._projections[c]),d.setRenderTarget(this._textures[c],!0),d.clear(1,1,1),d.setProgramConstantsFromMatrix(n.VERTEX,0,h,!0),d.setProgramConstantsFromArray(n.FRAGMENT,0,this._enc,2),d.activateBuffer(0,e.getVertexData(a.POSITION_DATA),e.getVertexOffset(a.POSITION_DATA),a.POSITION_FORMAT),d.activateBuffer(1,e.getVertexData(a.NORMAL_DATA),e.getVertexOffset(a.NORMAL_DATA),a.NORMAL_FORMAT),d.drawTriangles(d.getIndexBuffer(e.getIndexData()),0,e.numTriangles)},e.prototype._iActivate=function(e,i,s){this._projectionTexturesInvalid&&this.updateProjectionTextures(),t.prototype._iActivate.call(this,e,i,s),i.context.setProgramConstantsFromArray(n.VERTEX,4,this._polyOffset,1)},e}(o);e.exports=h},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/textures/RenderTexture":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-stagegl/lib/base/ContextGLProgramType":void 0,"awayjs-stagegl/lib/materials/passes/MaterialPassBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/AWDParser":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/ColorTransform"),r=t("awayjs-core/lib/geom/Matrix3D"),a=t("awayjs-core/lib/geom/Vector3D"),n=t("awayjs-core/lib/net/URLLoaderDataFormat"),o=t("awayjs-core/lib/net/URLRequest"),h=t("awayjs-core/lib/library/AssetType"),l=t("awayjs-core/lib/parsers/ParserBase"),p=t("awayjs-core/lib/parsers/ParserUtils"),d=t("awayjs-core/lib/projections/PerspectiveProjection"),u=t("awayjs-core/lib/projections/OrthographicProjection"),c=t("awayjs-core/lib/projections/OrthographicOffCenterProjection"),_=t("awayjs-core/lib/textures/BitmapCubeTexture"),y=t("awayjs-core/lib/textures/ImageCubeTexture"),g=t("awayjs-core/lib/textures/ImageTexture"),f=t("awayjs-core/lib/utils/ByteArray"),m=t("awayjs-display/lib/containers/DisplayObjectContainer"),b=t("awayjs-display/lib/base/BlendMode"),w=t("awayjs-display/lib/base/Geometry"),v=t("awayjs-display/lib/base/TriangleSubGeometry"),x=t("awayjs-display/lib/entities/DirectionalLight"),P=t("awayjs-display/lib/entities/PointLight"),D=t("awayjs-display/lib/entities/Camera"),j=t("awayjs-display/lib/entities/Mesh"),C=t("awayjs-display/lib/entities/Skybox"),T=t("awayjs-display/lib/materials/lightpickers/StaticLightPicker"),A=t("awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper"),S=t("awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper"),O=t("awayjs-display/lib/prefabs/PrefabBase"),E=t("awayjs-display/lib/prefabs/PrimitiveCapsulePrefab"),M=t("awayjs-display/lib/prefabs/PrimitiveConePrefab"),R=t("awayjs-display/lib/prefabs/PrimitiveCubePrefab"),I=t("awayjs-display/lib/prefabs/PrimitiveCylinderPrefab"),N=t("awayjs-display/lib/prefabs/PrimitivePlanePrefab"),L=t("awayjs-display/lib/prefabs/PrimitiveSpherePrefab"),F=t("awayjs-display/lib/prefabs/PrimitiveTorusPrefab"),V=t("awayjs-stagegl/lib/materials/SkyboxMaterial"),B=t("awayjs-stagegl/lib/materials/TriangleMaterialMode"),U=t("awayjs-stagegl/lib/materials/TriangleMethodMaterial"),z=t("awayjs-stagegl/lib/materials/utils/DefaultMaterialManager"),k=t("awayjs-renderergl/lib/animators/VertexAnimationSet"),G=t("awayjs-renderergl/lib/animators/VertexAnimator"),H=t("awayjs-renderergl/lib/animators/SkeletonAnimationSet"),X=t("awayjs-renderergl/lib/animators/SkeletonAnimator"),W=t("awayjs-renderergl/lib/animators/data/JointPose"),Y=t("awayjs-renderergl/lib/animators/data/Skeleton"),Z=t("awayjs-renderergl/lib/animators/data/SkeletonPose"),q=t("awayjs-renderergl/lib/animators/data/SkeletonJoint"),K=t("awayjs-renderergl/lib/animators/nodes/SkeletonClipNode"),J=t("awayjs-renderergl/lib/animators/nodes/VertexClipNode"),Q=t("awayjs-renderergl/lib/materials/methods/AmbientEnvMapMethod"),$=t("awayjs-renderergl/lib/materials/methods/DiffuseDepthMethod"),te=t("awayjs-renderergl/lib/materials/methods/DiffuseCelMethod"),ee=t("awayjs-renderergl/lib/materials/methods/DiffuseGradientMethod"),ie=t("awayjs-renderergl/lib/materials/methods/DiffuseLightMapMethod"),se=t("awayjs-renderergl/lib/materials/methods/DiffuseWrapMethod"),re=t("awayjs-renderergl/lib/materials/methods/EffectAlphaMaskMethod"),ae=t("awayjs-renderergl/lib/materials/methods/EffectColorMatrixMethod"),ne=t("awayjs-stagegl/lib/materials/methods/EffectColorTransformMethod"),oe=t("awayjs-renderergl/lib/materials/methods/EffectEnvMapMethod"),he=t("awayjs-renderergl/lib/materials/methods/EffectFogMethod"),le=t("awayjs-renderergl/lib/materials/methods/EffectFresnelEnvMapMethod"),pe=t("awayjs-renderergl/lib/materials/methods/EffectLightMapMethod"),de=t("awayjs-renderergl/lib/materials/methods/EffectRimLightMethod"),ue=t("awayjs-renderergl/lib/materials/methods/NormalSimpleWaterMethod"),ce=t("awayjs-renderergl/lib/materials/methods/ShadowDitheredMethod"),_e=t("awayjs-renderergl/lib/materials/methods/ShadowFilteredMethod"),ye=t("awayjs-renderergl/lib/materials/methods/SpecularFresnelMethod"),ge=t("awayjs-stagegl/lib/materials/methods/ShadowHardMethod"),fe=t("awayjs-renderergl/lib/materials/methods/SpecularAnisotropicMethod"),me=t("awayjs-renderergl/lib/materials/methods/SpecularCelMethod"),be=t("awayjs-renderergl/lib/materials/methods/SpecularPhongMethod"),we=t("awayjs-renderergl/lib/materials/methods/ShadowNearMethod"),ve=t("awayjs-renderergl/lib/materials/methods/ShadowSoftMethod"),xe=t("awayjs-renderergl/lib/parsers/data/AWDBlock"),Pe=t("awayjs-renderergl/lib/parsers/data/AWDProperties"),De=t("awayjs-renderergl/lib/parsers/data/BitFlags"),je=function(t){function e(){t.call(this,n.ARRAY_BUFFER),this._debug=!1,this._startedParsing=!1,this._texture_users={},this._parsed_header=!1,this._blocks=new Array,this._blocks[0]=new xe,this._blocks[0].data=null,this.blendModeDic=new Array,this.blendModeDic.push(b.NORMAL),this.blendModeDic.push(b.ADD),this.blendModeDic.push(b.ALPHA),this.blendModeDic.push(b.DARKEN),this.blendModeDic.push(b.DIFFERENCE),this.blendModeDic.push(b.ERASE),this.blendModeDic.push(b.HARDLIGHT),this.blendModeDic.push(b.INVERT),this.blendModeDic.push(b.LAYER),this.blendModeDic.push(b.LIGHTEN),this.blendModeDic.push(b.MULTIPLY),this.blendModeDic.push(b.NORMAL),this.blendModeDic.push(b.OVERLAY),this.blendModeDic.push(b.SCREEN),this.blendModeDic.push(b.SHADER),this.blendModeDic.push(b.OVERLAY),this._depthSizeDic=new Array,this._depthSizeDic.push(256),this._depthSizeDic.push(512),this._depthSizeDic.push(2048),this._depthSizeDic.push(1024),this._version=Array()}return i(e,t),e.supportsType=function(t){return t=t.toLowerCase(),"awd"==t},e.supportsData=function(t){return"AWD"==p.toString(t,3)},e.prototype._iResolveDependency=function(t){if(1==t.assets.length){var e,i,s,r=t.id.split("#"),a=r[0];if(1==r.length&&(e=t.assets[0])){s=this._blocks[t.id],s.data=e,e.resetAssetPath(s.name,null,!0),s.name=e.name,this._pFinalizeAsset(e),this._debug&&(console.log("Successfully loaded Bitmap for texture"),console.log("Parsed texture: Name = "+s.name))}if(r.length>1){i=t.assets[0];var n=i;if(this._cubeTextures[r[1]]=n.htmlImageElement,this._texture_users[a].push(1),this._debug&&console.log("Successfully loaded Bitmap "+this._texture_users[a].length+" / 6 for Cubetexture"),this._texture_users[a].length==this._cubeTextures.length){var o=this._cubeTextures[0],h=this._cubeTextures[1],l=this._cubeTextures[2],p=this._cubeTextures[3],d=this._cubeTextures[4],u=this._cubeTextures[5];e=new y(o,h,l,p,d,u),s=this._blocks[a],s.data=e,e.resetAssetPath(s.name,null,!0),s.name=e.name,this._pFinalizeAsset(e),this._debug&&console.log("Parsed CubeTexture: Name = "+s.name)}}}},e.prototype._iResolveDependencyFailure=function(){},e.prototype._iResolveDependencyName=function(t,e){var i=e.name;if(e){var s=this._blocks[parseInt(t.id)];e.resetAssetPath(s.name,null,!0)}var r=e.name;return e.name=i,r},e.prototype._pProceedParsing=function(){if(this._startedParsing||(this._byteData=this._pGetByteData(),this._startedParsing=!0),!this._parsed_header){switch(this.parseHeader(),this._compression){case e.DEFLATE:case e.LZMA:this._pDieWithError("Compressed AWD formats not yet supported");break;case e.UNCOMPRESSED:this._body=this._byteData}this._parsed_header=!0}if(this._body){for(;this._body.getBytesAvailable()>0&&!this.parsingPaused;)this.parseNextBlock();return 0==this._body.getBytesAvailable()?(this.dispose(),l.PARSING_DONE):l.MORE_TO_PARSE}switch(this._compression){case e.DEFLATE:case e.LZMA:this._debug&&console.log("(!) AWDParser Error: Compressed AWD formats not yet supported (!)")}return l.PARSING_DONE},e.prototype._pStartParsing=function(e){t.prototype._pStartParsing.call(this,e),this._pContent=new m},e.prototype.dispose=function(){for(var t in this._blocks){var e=this._blocks[t];e.dispose()}},e.prototype.parseNextBlock=function(){var t,i,s,r,a,n=!1;this._cur_block_id=this._body.readUnsignedInt(),i=this._body.readUnsignedByte(),s=this._body.readUnsignedByte(),r=this._body.readUnsignedByte(),a=this._body.readUnsignedInt();{var o=De.test(r,De.FLAG4);De.test(r,De.FLAG5)}this._accuracyOnBlocks&&(this._accuracyMatrix=De.test(r,De.FLAG1),this._accuracyGeo=De.test(r,De.FLAG2),this._accuracyProps=De.test(r,De.FLAG3),this._geoNrType=e.FLOAT32,this._accuracyGeo&&(this._geoNrType=e.FLOAT64),this._matrixNrType=e.FLOAT32,this._accuracyMatrix&&(this._matrixNrType=e.FLOAT64),this._propsNrType=e.FLOAT32,this._accuracyProps&&(this._propsNrType=e.FLOAT64));var h=this._body.position+a;if(a>this._body.getBytesAvailable())return this._pDieWithError("AWD2 block length is bigger than the bytes that are available!"),void(this._body.position+=this._body.getBytesAvailable());this._newBlockBytes=new f,this._body.readBytes(this._newBlockBytes,0,a),o&&this._pDieWithError("Compressed AWD formats not yet supported"),this._newBlockBytes.position=0,t=new xe,t.len=this._newBlockBytes.position+a,t.id=this._cur_block_id;var l=this._newBlockBytes.position+a;if(o&&this._pDieWithError("Compressed AWD formats not yet supported"),this._debug&&console.log("AWDBlock:  ID = "+this._cur_block_id+" | TypeID = "+s+" | Compression = "+o+" | Matrix-Precision = "+this._accuracyMatrix+" | Geometry-Precision = "+this._accuracyGeo+" | Properties-Precision = "+this._accuracyProps),this._blocks[this._cur_block_id]=t,2==this._version[0]&&1==this._version[1])switch(s){case 11:this.parsePrimitves(this._cur_block_id),n=!0;break;case 31:this.parseSkyboxInstance(this._cur_block_id),n=!0;break;case 41:this.parseLight(this._cur_block_id),n=!0;break;case 42:this.parseCamera(this._cur_block_id),n=!0;break;case 51:this.parseLightPicker(this._cur_block_id),n=!0;break;case 81:this.parseMaterial_v1(this._cur_block_id),n=!0;break;case 83:this.parseCubeTexture(this._cur_block_id),n=!0;break;case 91:this.parseSharedMethodBlock(this._cur_block_id),n=!0;break;case 92:this.parseShadowMethodBlock(this._cur_block_id),n=!0;break;case 111:this.parseMeshPoseAnimation(this._cur_block_id,!0),n=!0;break;case 112:this.parseMeshPoseAnimation(this._cur_block_id),n=!0;break;case 113:this.parseVertexAnimationSet(this._cur_block_id),n=!0;break;case 122:this.parseAnimatorSet(this._cur_block_id),n=!0;break;case 253:this.parseCommand(this._cur_block_id),n=!0}if(0==n)switch(s){case 1:this.parseTriangleGeometrieBlock(this._cur_block_id);break;case 22:this.parseContainer(this._cur_block_id);break;case 23:this.parseMeshInstance(this._cur_block_id);break;case 81:this.parseMaterial(this._cur_block_id);break;case 82:this.parseTexture(this._cur_block_id);break;case 101:this.parseSkeleton(this._cur_block_id);break;case 102:this.parseSkeletonPose(this._cur_block_id);break;case 103:this.parseSkeletonAnimation(this._cur_block_id);break;case 121:case 254:this.parseNameSpace(this._cur_block_id);break;case 255:this.parseMetaData(this._cur_block_id);break;default:this._debug&&console.log("AWDBlock:   Unknown BlockType  (BlockID = "+this._cur_block_id+") - Skip "+a+" bytes"),this._newBlockBytes.position+=a}var p=0;if(this._newBlockBytes.position==l){if(this._debug&&t.errorMessages)for(;p<t.errorMessages.length;)console.log("        (!) Error: "+t.errorMessages[p]+" (!)"),p++;this._debug&&console.log("\n")}else if(this._debug&&(console.log("  (!)(!)(!) Error while reading AWDBlock ID "+this._cur_block_id+" = skip to next block"),t.errorMessages))for(;p<t.errorMessages.length;)console.log("        (!) Error: "+t.errorMessages[p]+" (!)"),p++;this._body.position=h,this._newBlockBytes=null},e.prototype.parseTriangleGeometrieBlock=function(t){for(var e=new w,i=this.parseVarStr(),s=this._newBlockBytes.readUnsignedShort(),r=this.parseProperties({1:this._geoNrType,2:this._geoNrType}),a=r.get(1,1),n=r.get(2,1),o=0;s>o;){var h,l,p,d,u;h=this._newBlockBytes.readUnsignedInt(),l=this._newBlockBytes.position+h;for(var c=this.parseProperties({1:this._geoNrType,2:this._geoNrType});this._newBlockBytes.position<l;){var _,y,g,f,m=0;y=this._newBlockBytes.readUnsignedByte(),_=this._newBlockBytes.readUnsignedByte(),g=this._newBlockBytes.readUnsignedInt(),f=this._newBlockBytes.position+g;var b,x,P;if(1==y)for(var D=new Array;this._newBlockBytes.position<f;)b=this.readNumber(this._accuracyGeo),x=this.readNumber(this._accuracyGeo),P=this.readNumber(this._accuracyGeo),D[m++]=b,D[m++]=x,D[m++]=P;else if(2==y)for(var j=new Array;this._newBlockBytes.position<f;)j[m++]=this._newBlockBytes.readUnsignedShort();else if(3==y)for(var C=new Array;this._newBlockBytes.position<f;)C[m++]=this.readNumber(this._accuracyGeo);else if(4==y)for(var T=new Array;this._newBlockBytes.position<f;)T[m++]=this.readNumber(this._accuracyGeo);else if(6==y)for(d=Array();this._newBlockBytes.position<f;)d[m++]=3*this._newBlockBytes.readUnsignedShort();else if(7==y)for(u=new Array;this._newBlockBytes.position<f;)u[m++]=this.readNumber(this._accuracyGeo);else this._newBlockBytes.position=f}this.parseUserAttributes(),p=new v(!0),u&&(p.jointsPerVertex=u.length/(D.length/3)),T&&(p.autoDeriveNormals=!1),C&&(p.autoDeriveUVs=!1),p.updateIndices(j),p.updatePositions(D),p.updateVertexNormals(T),p.updateUVs(C),p.updateVertexTangents(null),p.updateJointWeights(u),p.updateJointIndices(d);var A=c.get(1,1),S=c.get(2,1),O=!1;(a!=A||n!=S)&&(O=!0,A=a/A,S=n/S),O&&p.scaleUV(A,S),e.addSubGeometry(p),o++}(1!=a||1!=n)&&e.scaleUV(a,n),this.parseUserAttributes(),this._pFinalizeAsset(e,i),this._blocks[t].data=e,this._debug&&console.log("Parsed a TriangleGeometry: Name = "+i+"| Id = "+p.id)},e.prototype.parsePrimitves=function(t){var i,s,r,a;i=this.parseVarStr(),r=this._newBlockBytes.readUnsignedByte(),a=this.parseProperties({101:this._geoNrType,102:this._geoNrType,103:this._geoNrType,110:this._geoNrType,111:this._geoNrType,301:e.UINT16,302:e.UINT16,303:e.UINT16,701:e.BOOL,702:e.BOOL,703:e.BOOL,704:e.BOOL});var n=["Unsupported Type-ID","PrimitivePlanePrefab","PrimitiveCubePrefab","PrimitiveSpherePrefab","PrimitiveCylinderPrefab","PrimitivesConePrefab","PrimitivesCapsulePrefab","PrimitivesTorusPrefab"];switch(r){case 1:s=new N(a.get(101,100),a.get(102,100),a.get(301,1),a.get(302,1),a.get(701,!0),a.get(702,!1));break;case 2:s=new R(a.get(101,100),a.get(102,100),a.get(103,100),a.get(301,1),a.get(302,1),a.get(303,1),a.get(701,!0));break;case 3:s=new L(a.get(101,50),a.get(301,16),a.get(302,12),a.get(701,!0));break;case 4:s=new I(a.get(101,50),a.get(102,50),a.get(103,100),a.get(301,16),a.get(302,1),!0,!0,!0),a.get(701,!0)||(s.topClosed=!1),a.get(702,!0)||(s.bottomClosed=!1),a.get(703,!0)||(s.yUp=!1);break;case 5:s=new M(a.get(101,50),a.get(102,100),a.get(301,16),a.get(302,1),a.get(701,!0),a.get(702,!0));break;case 6:s=new E(a.get(101,50),a.get(102,100),a.get(301,16),a.get(302,15),a.get(701,!0));break;case 7:s=new F(a.get(101,50),a.get(102,50),a.get(301,16),a.get(302,8),a.get(701,!0));break;default:s=new O,console.log("ERROR: UNSUPPORTED PREFAB_TYPE")}1!=a.get(110,1)||1!=a.get(111,1),this.parseUserAttributes(),s.name=i,this._pFinalizeAsset(s,i),this._blocks[t].data=s,this._debug&&((0>r||r>7)&&(r=0),console.log("Parsed a Primivite: Name = "+i+"| type = "+n[r]))},e.prototype.parseContainer=function(t){var i,s,r,n;s=this._newBlockBytes.readUnsignedInt(),r=this.parseMatrix3D(),i=this.parseVarStr();var o="Root (TopLevel)";n=new m,n.transform.matrix3D=r;var l=this.getAssetByID(s,[h.CONTAINER,h.LIGHT,h.MESH]);if(l[0]){{l[1].addChild(n)}o=l[1].name}else s>0?this._blocks[t].addError("Could not find a parent for this ObjectContainer3D"):this._pContent.addChild(n);if(2==this._version[0]&&1==this._version[1]){var p=this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:e.UINT8});n.pivot=new a(p.get(1,0),p.get(2,0),p.get(3,0))}else this.parseProperties(null);n.extra=this.parseUserAttributes(),this._pFinalizeAsset(n,i),this._blocks[t].data=n,this._debug&&console.log("Parsed a Container: Name = '"+i+"' | Parent-Name = "+o)},e.prototype.parseMeshInstance=function(t){var i,s,r,n=this._newBlockBytes.readUnsignedInt(),o=this.parseMatrix3D(),l=this.parseVarStr(),p="Root (TopLevel)",d=this._newBlockBytes.readUnsignedInt(),u=this.getAssetByID(d,[h.GEOMETRY]);u[0]?r=u[1]:(this._blocks[t].addError("Could not find a Geometry for this Mesh. A empty Geometry is created!"),r=new w),this._blocks[t].geoID=d;var c=new Array;i=this._newBlockBytes.readUnsignedShort();var _=new Array;s=0;for(var y;i>s;){var g;g=this._newBlockBytes.readUnsignedInt(),y=this.getAssetByID(g,[h.MATERIAL]),!y[0]&&g>0&&this._blocks[t].addError("Could not find Material Nr "+s+" (ID = "+g+" ) for this Mesh");var f=y[1];c.push(f),_.push(f.name),s++}var m=new j(r,null);m.transform.matrix3D=o;var b=this.getAssetByID(n,[h.CONTAINER,h.LIGHT,h.MESH]);if(b[0]){var v=b[1];v.addChild(m),p=v.name}else n>0?this._blocks[t].addError("Could not find a parent for this Mesh"):this._pContent.addChild(m);if(c.length>=1&&1==m.subMeshes.length)m.material=c[0];else if(c.length>1){var x;for(x=0;x<m.subMeshes.length;x++)m.subMeshes[x].material=c[Math.min(c.length-1,x)]}if(2==this._version[0]&&1==this._version[1]){var P=this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:e.UINT8,5:e.BOOL});m.pivot=new a(P.get(1,0),P.get(2,0),P.get(3,0)),m.castsShadows=P.get(5,!0)}else this.parseProperties(null);m.extra=this.parseUserAttributes(),this._pFinalizeAsset(m,l),this._blocks[t].data=m,this._debug&&console.log("Parsed a Mesh: Name = '"+l+"' | Parent-Name = "+p+"| Geometry-Name = "+r.name+" | SubMeshes = "+m.subMeshes.length+" | Mat-Names = "+_.toString())},e.prototype.parseSkyboxInstance=function(t){var e=this.parseVarStr(),i=this._newBlockBytes.readUnsignedInt(),s=this.getAssetByID(i,[h.TEXTURE],"CubeTexture");s[0]||0==i||this._blocks[t].addError("Could not find the Cubetexture (ID = "+i+" ) for this Skybox");var r=new C(new V(s[1]));this.parseProperties(null),r.extra=this.parseUserAttributes(),this._pFinalizeAsset(r,e),this._blocks[t].data=r,this._debug&&console.log("Parsed a Skybox: Name = '"+e+"' | CubeTexture-Name = "+s[1].name)},e.prototype.parseLight=function(t){var i,s,r=this._newBlockBytes.readUnsignedInt(),a=this.parseMatrix3D(),n=this.parseVarStr(),o=this._newBlockBytes.readUnsignedByte(),l=this.parseProperties({1:this._propsNrType,2:this._propsNrType,3:e.COLOR,4:this._propsNrType,5:this._propsNrType,6:e.BOOL,7:e.COLOR,8:this._propsNrType,9:e.UINT8,10:e.UINT8,11:this._propsNrType,12:e.UINT16,21:this._matrixNrType,22:this._matrixNrType,23:this._matrixNrType}),p=l.get(9,0),d="Root (TopLevel)",u=["Unsupported LightType","PointLight","DirectionalLight"],c=["No ShadowMapper","DirectionalShadowMapper","NearDirectionalShadowMapper","CascadeShadowMapper","CubeMapShadowMapper"];if(1==o&&(i=new P,i.radius=l.get(1,9e4),i.fallOff=l.get(2,1e5),p>0&&4==p&&(s=new A),i.transform.matrix3D=a),2==o&&(i=new x(l.get(21,0),l.get(22,-1),l.get(23,1)),p>0&&1==p&&(s=new S)),i.color=l.get(3,16777215),i.specular=l.get(4,1),i.diffuse=l.get(5,1),i.ambientColor=l.get(7,16777215),i.ambient=l.get(8,0),s&&(s instanceof A?1!=l.get(10,1)&&(s.depthMapSize=this._depthSizeDic[l.get(10,1)]):2!=l.get(10,2)&&(s.depthMapSize=this._depthSizeDic[l.get(10,2)]),i.shadowMapper=s,i.castsShadows=!0),0!=r){var _=this.getAssetByID(r,[h.CONTAINER,h.LIGHT,h.MESH]);_[0]?(_[1].addChild(i),d=_[1].name):this._blocks[t].addError("Could not find a parent for this Light")}else this._pContent.addChild(i);this.parseUserAttributes(),this._pFinalizeAsset(i,n),this._blocks[t].data=i,this._debug&&console.log("Parsed a Light: Name = '"+n+"' | Type = "+u[o]+" | Parent-Name = "+d+" | ShadowMapper-Type = "+c[p])},e.prototype.parseCamera=function(t){var i,s=this._newBlockBytes.readUnsignedInt(),r=this.parseMatrix3D(),n=this.parseVarStr(),o="Root (TopLevel)";this._newBlockBytes.readUnsignedByte(),this._newBlockBytes.readShort();var l=this._newBlockBytes.readShort(),p=this.parseProperties({101:this._propsNrType,102:this._propsNrType,103:this._propsNrType,104:this._propsNrType});
switch(l){case 5001:i=new d(p.get(101,60));break;case 5002:i=new u(p.get(101,500));break;case 5003:i=new c(p.get(101,-400),p.get(102,400),p.get(103,-300),p.get(104,300));break;default:return void console.log("unsupportedLenstype")}var _=new D(i);_.transform.matrix3D=r;var y=this.getAssetByID(s,[h.CONTAINER,h.LIGHT,h.MESH]);if(y[0]){var g=y[1];g.addChild(_),o=g.name}else s>0?this._blocks[t].addError("Could not find a parent for this Camera"):this._pContent.addChild(_);_.name=n,p=this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:e.UINT8}),_.pivot=new a(p.get(1,0),p.get(2,0),p.get(3,0)),_.extra=this.parseUserAttributes(),this._pFinalizeAsset(_,n),this._blocks[t].data=_,this._debug&&console.log("Parsed a Camera: Name = '"+n+"' | Projectiontype = "+i+" | Parent-Name = "+o)},e.prototype.parseLightPicker=function(t){var e,i=this.parseVarStr(),s=this._newBlockBytes.readUnsignedShort(),r=new Array,a=0,n=0,o=new Array;for(a=0;s>a;a++)n=this._newBlockBytes.readUnsignedInt(),e=this.getAssetByID(n,[h.LIGHT]),e[0]?(r.push(e[1]),o.push(e[1].name)):this._blocks[t].addError("Could not find a Light Nr "+a+" (ID = "+n+" ) for this LightPicker");if(0==r.length)return this._blocks[t].addError("Could not create this LightPicker, cause no Light was found."),void this.parseUserAttributes();var l=new T(r);l.name=i,this.parseUserAttributes(),this._pFinalizeAsset(l,i),this._blocks[t].data=l,this._debug&&console.log("Parsed a StaticLightPicker: Name = '"+i+"' | Texture-Name = "+o.toString())},e.prototype.parseMaterial=function(t){var i,s,r,a,n,o,l,p;for(i=this.parseVarStr(),s=this._newBlockBytes.readUnsignedByte(),o=this._newBlockBytes.readUnsignedByte(),r=this.parseProperties({1:e.INT32,2:e.BADDR,10:this._propsNrType,11:e.BOOL,12:this._propsNrType,13:e.BOOL}),l=0;o>l;){var d;d=this._newBlockBytes.readUnsignedShort(),this.parseProperties(null),this.parseUserAttributes(),l+=1}var u="";if(n=this.parseUserAttributes(),1===s){u+="Parsed a ColorMaterial(SinglePass): Name = '"+i+"' | ";var c;c=r.get(1,16777215),this.materialMode<2?a=new U(c,r.get(10,1)):(a=new U(c),a.materialMode=B.MULTI_PASS)}else if(2===s){var _=r.get(2,0);p=this.getAssetByID(_,[h.TEXTURE]),!p[0]&&_>0&&this._blocks[t].addError("Could not find the DiffsueTexture (ID = "+_+" ) for this Material"),a=new U(p[1]),this.materialMode<2?(a.alphaBlending=r.get(11,!1),a.alpha=r.get(10,1),u+="Parsed a TriangleMethodMaterial(SinglePass): Name = '"+i+"' | Texture-Name = "+a.name):(a.materialMode=B.MULTI_PASS,u+="Parsed a TriangleMethodMaterial(MultiPass): Name = '"+i+"' | Texture-Name = "+a.name)}a.extra=n,a.alphaThreshold=r.get(12,0),a.repeat=r.get(13,!1),this._pFinalizeAsset(a,i),this._blocks[t].data=a,this._debug&&console.log(u)},e.prototype.parseMaterial_v1=function(t){var i,s,r,a,n=this.parseVarStr(),o=this._newBlockBytes.readUnsignedByte(),l=this._newBlockBytes.readUnsignedByte(),p=this.parseProperties({1:e.UINT32,2:e.BADDR,3:e.BADDR,4:e.UINT8,5:e.BOOL,6:e.BOOL,7:e.BOOL,8:e.BOOL,9:e.UINT8,10:this._propsNrType,11:e.BOOL,12:this._propsNrType,13:e.BOOL,15:this._propsNrType,16:e.UINT32,17:e.BADDR,18:this._propsNrType,19:this._propsNrType,20:e.UINT32,21:e.BADDR,22:e.BADDR}),d=p.get(4,0),u="";if(d>=2)return void this._blocks[t].addError("Material-spezialType '"+d+"' is not supported, can only be 0:singlePass, 1:MultiPass !");if(1==this.materialMode?d=0:2==this.materialMode&&(d=1),2>d){if(1==o){var c=p.get(1,13421772);1==d?(i=new U(c),i.materialMode=B.MULTI_PASS,u+="Parsed a ColorMaterial(MultiPass): Name = '"+n+"' | "):(i=new U(c,p.get(10,1)),i.alphaBlending=p.get(11,!1),u+="Parsed a ColorMaterial(SinglePass): Name = '"+n+"' | ")}else if(2==o){var _=p.get(2,0);a=this.getAssetByID(_,[h.TEXTURE]),!a[0]&&_>0&&this._blocks[t].addError("Could not find the AmbientTexture (ID = "+_+" ) for this TriangleMethodMaterial");var y=a[1];i=new U(y),1==d?(i.materialMode=B.MULTI_PASS,u+="Parsed a TriangleMethodMaterial(MultiPass): Name = '"+n+"' | Texture-Name = "+y.name):(i.alpha=p.get(10,1),i.alphaBlending=p.get(11,!1),u+="Parsed a TriangleMethodMaterial(SinglePass): Name = '"+n+"' | Texture-Name = "+y.name)}var g,f=p.get(17,0);a=this.getAssetByID(f,[h.TEXTURE]),a[0]||0==f||this._blocks[t].addError("Could not find the DiffuseTexture (ID = "+f+" ) for this TriangleMethodMaterial"),a[0]&&(g=a[1]),g&&(i.diffuseTexture=g,u+=" | DiffuseTexture-Name = "+g.name);var m=p.get(3,0);a=this.getAssetByID(m,[h.TEXTURE]),a[0]||0==m||this._blocks[t].addError("Could not find the NormalTexture (ID = "+m+" ) for this TriangleMethodMaterial"),a[0]&&(s=a[1],u+=" | NormalTexture-Name = "+s.name);var b=p.get(21,0);a=this.getAssetByID(b,[h.TEXTURE]),a[0]||0==b||this._blocks[t].addError("Could not find the SpecularTexture (ID = "+b+" ) for this TriangleMethodMaterial"),a[0]&&(r=a[1],u+=" | SpecularTexture-Name = "+r.name);var w=p.get(22,0);a=this.getAssetByID(w,[h.LIGHT_PICKER]),!a[0]&&w?this._blocks[t].addError("Could not find the LightPicker (ID = "+w+" ) for this TriangleMethodMaterial"):i.lightPicker=a[1],i.smooth=p.get(5,!0),i.mipmap=p.get(6,!0),i.bothSides=p.get(7,!1),i.alphaPremultiplied=p.get(8,!1),i.blendMode=this.blendModeDic[p.get(9,0)],i.repeat=p.get(13,!1),s&&(i.normalMap=s),r&&(i.specularMap=r),i.alphaThreshold=p.get(12,0),i.ambient=p.get(15,1),i.diffuseColor=p.get(16,16777215),i.specular=p.get(18,1),i.gloss=p.get(19,50),i.specularColor=p.get(20,16777215);for(var v,x=0;l>x;){var P;switch(P=this._newBlockBytes.readUnsignedShort(),p=this.parseProperties({1:e.BADDR,2:e.BADDR,3:e.BADDR,101:this._propsNrType,102:this._propsNrType,103:this._propsNrType,201:e.UINT32,202:e.UINT32,301:e.UINT16,302:e.UINT16,401:e.UINT8,402:e.UINT8,601:e.COLOR,602:e.COLOR,701:e.BOOL,702:e.BOOL,801:e.MTX4x4}),P){case 999:v=p.get(1,0),a=this.getAssetByID(v,[h.EFFECTS_METHOD]),a[0]?(i.addEffectMethod(a[1]),u+=" | EffectMethod-Name = "+a[1].name):this._blocks[t].addError("Could not find the EffectMethod (ID = "+v+" ) for this Material");break;case 998:v=p.get(1,0),a=this.getAssetByID(v,[h.SHADOW_MAP_METHOD]),a[0]?(i.shadowMethod=a[1],u+=" | ShadowMethod-Name = "+a[1].name):this._blocks[t].addError("Could not find the ShadowMethod (ID = "+v+" ) for this Material");break;case 1:v=p.get(1,0),a=this.getAssetByID(v,[h.TEXTURE],"CubeTexture"),a[0]||this._blocks[t].addError("Could not find the EnvMap (ID = "+v+" ) for this EnvMapAmbientMethodMaterial"),i.ambientMethod=new Q(a[1]),u+=" | AmbientEnvMapMethod | EnvMap-Name ="+a[1].name;break;case 51:i.diffuseMethod=new $,u+=" | DiffuseDepthMethod";break;case 52:v=p.get(1,0),a=this.getAssetByID(v,[h.TEXTURE]),a[0]||this._blocks[t].addError("Could not find the GradientDiffuseTexture (ID = "+v+" ) for this GradientDiffuseMethod"),i.diffuseMethod=new ee(a[1]),u+=" | DiffuseGradientMethod | GradientDiffuseTexture-Name ="+a[1].name;break;case 53:i.diffuseMethod=new se(p.get(101,5)),u+=" | DiffuseWrapMethod";break;case 54:v=p.get(1,0),a=this.getAssetByID(v,[h.TEXTURE]),a[0]||this._blocks[t].addError("Could not find the LightMap (ID = "+v+" ) for this LightMapDiffuseMethod"),i.diffuseMethod=new ie(a[1],this.blendModeDic[p.get(401,10)],!1,i.diffuseMethod),u+=" | DiffuseLightMapMethod | LightMapTexture-Name ="+a[1].name;break;case 55:i.diffuseMethod=new te(p.get(401,3),i.diffuseMethod),i.diffuseMethod.smoothness=p.get(101,.1),u+=" | DiffuseCelMethod";break;case 56:break;case 101:i.specularMethod=new fe,u+=" | SpecularAnisotropicMethod";break;case 102:i.specularMethod=new be,u+=" | SpecularPhongMethod";break;case 103:i.specularMethod=new me(p.get(101,.5),i.specularMethod),i.specularMethod.smoothness=p.get(102,.1),u+=" | SpecularCelMethod";break;case 104:i.specularMethod=new ye(p.get(701,!0),i.specularMethod),i.specularMethod.fresnelPower=p.get(101,5),i.specularMethod.normalReflectance=p.get(102,.1),u+=" | SpecularFresnelMethod";break;case 151:break;case 152:v=p.get(1,0),a=this.getAssetByID(v,[h.TEXTURE]),a[0]||this._blocks[t].addError("Could not find the SecoundNormalMap (ID = "+v+" ) for this SimpleWaterNormalMethod"),i.normalMap||this._blocks[t].addError("Could not find a normal Map on this Material to use with this SimpleWaterNormalMethod"),i.normalMap=a[1],i.normalMethod=new ue(i.normalMap,a[1]),u+=" | NormalSimpleWaterMethod | Second-NormalTexture-Name = "+a[1].name}this.parseUserAttributes(),x+=1}}i.extra=this.parseUserAttributes(),this._pFinalizeAsset(i,n),this._blocks[t].data=i,this._debug&&console.log(u)},e.prototype.parseTexture=function(t){var e;this._blocks[t].name=this.parseVarStr();var i,s=this._newBlockBytes.readUnsignedByte();if(this._texture_users[this._cur_block_id.toString()]=[],0==s){i=this._newBlockBytes.readUnsignedInt();var r;r=this._newBlockBytes.readUTFBytes(i),this._pAddDependency(this._cur_block_id.toString(),new o(r),!1,null,!0)}else{i=this._newBlockBytes.readUnsignedInt();var a;a=new f,this._newBlockBytes.readBytes(a,0,i),this._pAddDependency(this._cur_block_id.toString(),null,!1,p.byteArrayToImage(a),!0)}if(this.parseProperties(null),this._blocks[t].extras=this.parseUserAttributes(),this._pPauseAndRetrieveDependencies(),this._blocks[t].data=e,this._debug){var n=["external","embed"];console.log("Start parsing a "+n[s]+" Bitmap for Texture")}},e.prototype.parseCubeTexture=function(t){var e,i,s;this._cubeTextures=new Array,this._texture_users[this._cur_block_id.toString()]=[];var r=this._newBlockBytes.readUnsignedByte();for(this._blocks[t].name=this.parseVarStr(),s=0;6>s;s++)if(this._texture_users[this._cur_block_id.toString()]=[],this._cubeTextures.push(null),0==r){e=this._newBlockBytes.readUnsignedInt();var a;a=this._newBlockBytes.readUTFBytes(e),this._pAddDependency(this._cur_block_id.toString()+"#"+s,new o(a),!1,null,!0)}else{e=this._newBlockBytes.readUnsignedInt();var n;n=new f,this._newBlockBytes.readBytes(n,0,e),this._pAddDependency(this._cur_block_id.toString()+"#"+s,null,!1,p.byteArrayToImage(n),!0)}if(this.parseProperties(null),this._blocks[t].extras=this.parseUserAttributes(),this._pPauseAndRetrieveDependencies(),this._blocks[t].data=i,this._debug){var h=["external","embed"];console.log("Start parsing 6 "+h[r]+" Bitmaps for CubeTexture")}},e.prototype.parseSharedMethodBlock=function(t){var e;this._blocks[t].name=this.parseVarStr(),e=this.parseSharedMethodList(t),this.parseUserAttributes(),this._blocks[t].data=e,this._pFinalizeAsset(e,this._blocks[t].name),this._blocks[t].data=e,this._debug&&console.log("Parsed a EffectMethod: Name = "+e.name+" Type = "+e)},e.prototype.parseShadowMethodBlock=function(t){var e,i;this._blocks[t].name=this.parseVarStr(),i=this._newBlockBytes.readUnsignedInt();var s=this.getAssetByID(i,[h.LIGHT]);return s[0]?(e=this.parseShadowMethodList(s[1],t),void(e&&(this.parseUserAttributes(),this._pFinalizeAsset(e,this._blocks[t].name),this._blocks[t].data=e,this._debug&&console.log("Parsed a ShadowMapMethodMethod: Name = "+e.name+" | Type = "+e+" | Light-Name = ",s[1].name)))):void this._blocks[t].addError("Could not find the TargetLight (ID = "+i+" ) for this ShadowMethod - ShadowMethod not created")},e.prototype.parseCommand=function(t){var i,s,r=(1==this._newBlockBytes.readUnsignedByte(),this._newBlockBytes.readUnsignedInt()),n=this.parseMatrix3D(),o=this.parseVarStr(),l=this.getAssetByID(r,[h.CONTAINER,h.LIGHT,h.MESH]);l[0]&&(i=l[1]);var p=(this._newBlockBytes.readShort(),this._newBlockBytes.readShort()),d=this.parseProperties({1:e.BADDR});switch(p){case 1:var u=d.get(1,0),c=this.getAssetByID(u,[h.LIGHT,h.TEXTURE_PROJECTOR]);if(!c[0]&&0!=u)return void this._blocks[t].addError("Could not find the light (ID = "+u+" ( for this CommandBock!");s=c[1],i&&i.addChild(s),s.transform.matrix3D=n}s&&(d=this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:e.UINT8}),s.pivot=new a(d.get(1,0),d.get(2,0),d.get(3,0)),s.extra=this.parseUserAttributes()),this._blocks[t].data=s,this._debug&&console.log("Parsed a CommandBlock: Name = '"+o)},e.prototype.parseMetaData=function(){var t=this.parseProperties({1:e.UINT32,2:e.AWDSTRING,3:e.AWDSTRING,4:e.AWDSTRING,5:e.AWDSTRING});this._debug&&(console.log("Parsed a MetaDataBlock: TimeStamp         = "+t.get(1,0)),console.log("                        EncoderName       = "+t.get(2,"unknown")),console.log("                        EncoderVersion    = "+t.get(3,"unknown")),console.log("                        GeneratorName     = "+t.get(4,"unknown")),console.log("                        GeneratorVersion  = "+t.get(5,"unknown")))},e.prototype.parseNameSpace=function(){var t=this._newBlockBytes.readUnsignedByte(),e=this.parseVarStr();this._debug&&console.log("Parsed a NameSpaceBlock: ID = "+t+" | String = "+e)},e.prototype.parseShadowMethodList=function(t,i){var s,r,a,n=this._newBlockBytes.readUnsignedShort(),o=this.parseProperties({1:e.BADDR,2:e.BADDR,3:e.BADDR,101:this._propsNrType,102:this._propsNrType,103:this._propsNrType,201:e.UINT32,202:e.UINT32,301:e.UINT16,302:e.UINT16,401:e.UINT8,402:e.UINT8,601:e.COLOR,602:e.COLOR,701:e.BOOL,702:e.BOOL,801:e.MTX4x4});switch(n){case 1002:if(r=o.get(1,0),a=this.getAssetByID(r,[h.SHADOW_MAP_METHOD]),!a[0])return this._blocks[i].addError("Could not find the ShadowBaseMethod (ID = "+r+" ) for this ShadowNearMethod - ShadowMethod not created"),s;s=new we(a[1]);break;case 1101:s=new _e(t),s.alpha=o.get(101,1),s.epsilon=o.get(102,.002);break;case 1102:s=new ce(t,o.get(201,5)),s.alpha=o.get(101,1),s.epsilon=o.get(102,.002),s.range=o.get(103,1);break;case 1103:s=new ve(t,o.get(201,5)),s.alpha=o.get(101,1),s.epsilon=o.get(102,.002),s.range=o.get(103,1);break;case 1104:s=new ge(t),s.alpha=o.get(101,1),s.epsilon=o.get(102,.002)}return this.parseUserAttributes(),s},e.prototype.parseSkeleton=function(t){var e=this.parseVarStr(),i=this._newBlockBytes.readUnsignedShort(),s=new Y;this.parseProperties(null);for(var r=0;i>r;){var a,n;this._newBlockBytes.readUnsignedShort(),a=new q,a.parentIndex=this._newBlockBytes.readUnsignedShort()-1,a.name=this.parseVarStr(),n=this.parseMatrix3D(),a.inverseBindPose=n.rawData,this.parseProperties(null),this.parseUserAttributes(),s.joints.push(a),r++}this.parseUserAttributes(),this._pFinalizeAsset(s,e),this._blocks[t].data=s,this._debug&&console.log("Parsed a Skeleton: Name = "+s.name+" | Number of Joints = "+r)},e.prototype.parseSkeletonPose=function(t){var e=this.parseVarStr(),i=this._newBlockBytes.readUnsignedShort();this.parseProperties(null);for(var s=new Z,a=0;i>a;){var n,o;if(n=new W,o=this._newBlockBytes.readUnsignedByte(),1==o){var h=this.parseMatrix43RawData(),l=new r(h);n.orientation.fromMatrix(l),n.translation.copyFrom(l.position),s.jointPoses[a]=n}a++}this.parseUserAttributes(),this._pFinalizeAsset(s,e),this._blocks[t].data=s,this._debug&&console.log("Parsed a SkeletonPose: Name = "+s.name+" | Number of Joints = "+a)},e.prototype.parseSkeletonAnimation=function(t){var e,i,s=this.parseVarStr(),r=new K,a=this._newBlockBytes.readUnsignedShort();this.parseProperties(null);for(var n,o=0;a>o;)i=this._newBlockBytes.readUnsignedInt(),e=this._newBlockBytes.readUnsignedShort(),n=this.getAssetByID(i,[h.SKELETON_POSE]),n[0]?r.addFrame(this._blocks[i].data,e):this._blocks[t].addError("Could not find the SkeletonPose Frame # "+o+" (ID = "+i+" ) for this SkeletonClipNode"),o++;return 0==r.frames.length?void this._blocks[t].addError("Could not this SkeletonClipNode, because no Frames where set."):(this.parseUserAttributes(),this._pFinalizeAsset(r,s),this._blocks[t].data=r,void(this._debug&&console.log("Parsed a SkeletonClipNode: Name = "+r.name+" | Number of Frames = "+r.frames.length)))},e.prototype.parseMeshPoseAnimation=function(t,i){void 0===i&&(i=!1);var s,r,a,n,o,l,p,d,u,c,_,y,g,f,m=1,b=0,x=new J,P=0,D=0,j=new Array,C=this.parseVarStr(),T=this._newBlockBytes.readUnsignedInt(),A=this.getAssetByID(T,[h.GEOMETRY]);if(!A[0])return void this._blocks[t].addError("Could not find the target-Geometry-Object "+T+" ) for this VertexClipNode");var S=this.getUVForVertexAnimation(T);for(i||(m=this._newBlockBytes.readUnsignedShort()),s=this._newBlockBytes.readUnsignedShort(),P=this._newBlockBytes.readUnsignedShort(),D=0;P>D;)j.push(this._newBlockBytes.readUnsignedShort()),D++;for(f=this.parseProperties({1:e.BOOL,2:e.BOOL}),x.looping=f.get(1,!0),x.stitchFinalFrame=f.get(2,!1),r=0;m>r;){for(n=this._newBlockBytes.readUnsignedShort(),c=new w,a=0;s>a;)for(D=0,d=this._newBlockBytes.readUnsignedInt(),u=this._newBlockBytes.position+d;P>D;){if(1==j[D]){for(y=A[1].subGeometries[a].indices,g=new Array,b=0;this._newBlockBytes.position<u;)o=this.readNumber(this._accuracyGeo),l=this.readNumber(this._accuracyGeo),p=this.readNumber(this._accuracyGeo),g[b++]=o,g[b++]=l,g[b++]=p;_=new v(!0),_.updateIndices(y),_.updatePositions(g),_.updateUVs(S[a]),_.updateVertexNormals(null),_.updateVertexTangents(null),_.autoDeriveNormals=!1,_.autoDeriveTangents=!1,a++,c.addSubGeometry(_)}else this._newBlockBytes.position=u;D++}x.addFrame(c,n),r++}this.parseUserAttributes(),this._pFinalizeAsset(x,C),this._blocks[t].data=x,this._debug&&console.log("Parsed a VertexClipNode: Name = "+x.name+" | Target-Geometry-Name = "+A[1].name+" | Number of Frames = "+x.frames.length)},e.prototype.parseVertexAnimationSet=function(t){for(var i,s=this.parseVarStr(),r=this._newBlockBytes.readUnsignedShort(),a=this.parseProperties({1:e.UINT16}),n=0,o=new Array,l=new Array;r>n;){i=this._newBlockBytes.readUnsignedInt();var p=this.getAssetByID(i,[h.ANIMATION_NODE]);p[0]?(p[1]instanceof J&&l.push(p[1]),p[1]instanceof K&&o.push(p[1])):this._blocks[t].addError("Could not find the AnimationClipNode Nr "+n+" ( "+i+" ) for this AnimationSet"),n++}if(0==l.length&&0==o.length)return void this._blocks[t].addError("Could not create this AnimationSet, because it contains no animations");if(this.parseUserAttributes(),l.length>0){for(var d=new k,u=0;u<l.length;u++)d.addAnimation(l[u]);this._pFinalizeAsset(d,s),this._blocks[t].data=d,this._debug&&console.log("Parsed a VertexAnimationSet: Name = "+s+" | Animations = "+d.animations.length+" | Animation-Names = "+d.animationNames.toString())}else if(o.length>0){p=this.getAssetByID(i,[h.ANIMATION_NODE]);for(var c=new H(a.get(1,4)),u=0;u<o.length;u++)c.addAnimation(o[u]);this._pFinalizeAsset(c,s),this._blocks[t].data=c,this._debug&&console.log("Parsed a SkeletonAnimationSet: Name = "+s+" | Animations = "+c.animations.length+" | Animation-Names = "+c.animationNames.toString())}},e.prototype.parseAnimatorSet=function(t){var i,s,r=this.parseVarStr(),a=this._newBlockBytes.readUnsignedShort(),n=this.parseProperties({1:e.BADDR});i=this._newBlockBytes.readUnsignedInt();for(var o=this._newBlockBytes.readUnsignedShort(),l=new Array,p=0;o>p;p++)l.push(this._newBlockBytes.readUnsignedInt());this._newBlockBytes.readUnsignedShort(),1==this._newBlockBytes.readUnsignedByte();this.parseUserAttributes(),this.parseUserAttributes();var d,u=new Array;for(p=0;p<l.length;p++)d=this.getAssetByID(l[p],[h.MESH]),d[0]&&u.push(d[1]);if(d=this.getAssetByID(i,[h.ANIMATION_SET]),!d[0])return void this._blocks[t].addError("Could not find the AnimationSet ( "+i+" ) for this Animator");s=d[1];var c;if(1==a){if(d=this.getAssetByID(n.get(1,0),[h.SKELETON]),!d[0])return void this._blocks[t].addError("Could not find the Skeleton ( "+n.get(1,0)+" ) for this Animator");c=new X(s,d[1])}else 2==a&&(c=new G(s));for(this._pFinalizeAsset(c,r),this._blocks[t].data=c,p=0;p<u.length;p++)1==a&&(u[p].animator=c),2==a&&(u[p].animator=c);this._debug&&console.log("Parsed a Animator: Name = "+r)},e.prototype.parseSharedMethodList=function(t){var i,r,a,n=this._newBlockBytes.readUnsignedShort(),o=this.parseProperties({1:e.BADDR,2:e.BADDR,3:e.BADDR,101:this._propsNrType,102:this._propsNrType,103:this._propsNrType,104:this._propsNrType,105:this._propsNrType,106:this._propsNrType,107:this._propsNrType,201:e.UINT32,202:e.UINT32,301:e.UINT16,302:e.UINT16,401:e.UINT8,402:e.UINT8,601:e.COLOR,602:e.COLOR,701:e.BOOL,702:e.BOOL});switch(n){case 401:i=new ae(o.get(101,new Array(0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)));break;case 402:i=new ne;var l=o.get(601,0);i.colorTransform=new s(o.get(102,1),o.get(103,1),o.get(104,1),o.get(101,1),l>>16&255,l>>8&255,255&l,l>>24&255);break;case 403:r=o.get(1,0),console.log("ENV MAP",r),a=this.getAssetByID(r,[h.TEXTURE],"CubeTexture"),a[0]||this._blocks[t].addError("Could not find the EnvMap (ID = "+r+" ) for this EnvMapMethod"),i=new oe(a[1],o.get(101,1)),r=o.get(2,0),r>0&&(a=this.getAssetByID(r,[h.TEXTURE]),a[0]||this._blocks[t].addError("Could not find the Mask-texture (ID = "+r+" ) for this EnvMapMethod"));break;case 404:r=o.get(1,0),a=this.getAssetByID(r,[h.TEXTURE]),a[0]||this._blocks[t].addError("Could not find the LightMap (ID = "+r+" ) for this LightMapMethod"),i=new pe(a[1],this.blendModeDic[o.get(401,10)]);break;case 406:i=new de(o.get(601,16777215),o.get(101,.4),o.get(101,2));break;case 407:r=o.get(1,0),a=this.getAssetByID(r,[h.TEXTURE]),a[0]||this._blocks[t].addError("Could not find the Alpha-texture (ID = "+r+" ) for this AlphaMaskMethod"),i=new re(a[1],o.get(701,!1));break;case 410:r=o.get(1,0),a=this.getAssetByID(r,[h.TEXTURE],"CubeTexture"),a[0]||this._blocks[t].addError("Could not find the EnvMap (ID = "+r+" ) for this FresnelEnvMapMethod"),i=new le(a[1],o.get(101,1));break;case 411:i=new he(o.get(101,0),o.get(102,1e3),o.get(601,8421504))}return this.parseUserAttributes(),i},e.prototype.parseUserAttributes=function(){var t,i,s;if(i=this._newBlockBytes.readUnsignedInt(),i>0){var r;for(t={},r=this._newBlockBytes.position+i;this._newBlockBytes.position<r;){var a,n,o,h,l;if(a=this._newBlockBytes.readUnsignedByte(),n=this.parseVarStr(),o=this._newBlockBytes.readUnsignedByte(),h=this._newBlockBytes.readUnsignedInt(),this._newBlockBytes.position+h>r)return console.log("           Error in reading attribute # "+s+" = skipped to end of attribute-list"),this._newBlockBytes.position=r,t;switch(o){case e.AWDSTRING:l=this._newBlockBytes.readUTFBytes(h);break;case e.INT8:l=this._newBlockBytes.readByte();break;case e.INT16:l=this._newBlockBytes.readShort();break;case e.INT32:l=this._newBlockBytes.readInt();break;case e.BOOL:case e.UINT8:l=this._newBlockBytes.readUnsignedByte();break;case e.UINT16:l=this._newBlockBytes.readUnsignedShort();break;case e.UINT32:case e.BADDR:l=this._newBlockBytes.readUnsignedInt();break;case e.FLOAT32:l=this._newBlockBytes.readFloat();break;case e.FLOAT64:l=this._newBlockBytes.readDouble();break;default:l="unimplemented attribute type "+o,this._newBlockBytes.position+=h}this._debug&&console.log("attribute = name: "+n+"  / value = "+l),t[n]=l,s+=1}}return t},e.prototype.parseProperties=function(t){var e,i,s=0,r=new Pe;if(i=this._newBlockBytes.readUnsignedInt(),e=this._newBlockBytes.position+i,t)for(;this._newBlockBytes.position<e;){var a,n,o;if(n=this._newBlockBytes.readUnsignedShort(),a=this._newBlockBytes.readUnsignedInt(),this._newBlockBytes.position+a>e)return console.log("           Error in reading property # "+s+" = skipped to end of propertie-list"),this._newBlockBytes.position=e,r;t.hasOwnProperty(n.toString())?(o=t[n],r.set(n,this.parseAttrValue(o,a))):this._newBlockBytes.position+=a,s+=1}else this._newBlockBytes.position=e;return r},e.prototype.parseAttrValue=function(t,i){var s,r;switch(t){case e.BOOL:case e.INT8:s=1,r=this._newBlockBytes.readByte;break;case e.INT16:s=2,r=this._newBlockBytes.readShort;break;case e.INT32:s=4,r=this._newBlockBytes.readInt;break;case e.UINT8:s=1,r=this._newBlockBytes.readUnsignedByte;break;case e.UINT16:s=2,r=this._newBlockBytes.readUnsignedShort;break;case e.UINT32:case e.COLOR:case e.BADDR:s=4,r=this._newBlockBytes.readUnsignedInt;break;case e.FLOAT32:s=4,r=this._newBlockBytes.readFloat;break;case e.FLOAT64:s=8,r=this._newBlockBytes.readDouble;break;case e.AWDSTRING:return this._newBlockBytes.readUTFBytes(i);case e.VECTOR2x1:case e.VECTOR3x1:case e.VECTOR4x1:case e.MTX3x2:case e.MTX3x3:case e.MTX4x3:case e.MTX4x4:s=8,r=this._newBlockBytes.readDouble}if(i>s){for(var a=[],n=0,o=i/s;o>n;)a.push(r.apply(this._newBlockBytes)),n++;return a}var h=r.apply(this._newBlockBytes);return h},e.prototype.parseHeader=function(){var t,i;this._byteData.position=3,this._version[0]=this._byteData.readUnsignedByte(),this._version[1]=this._byteData.readUnsignedByte(),t=this._byteData.readUnsignedShort(),this._streaming=De.test(t,De.FLAG1),2==this._version[0]&&1==this._version[1]&&(this._accuracyMatrix=De.test(t,De.FLAG2),this._accuracyGeo=De.test(t,De.FLAG3),this._accuracyProps=De.test(t,De.FLAG4)),this._geoNrType=e.FLOAT32,this._accuracyGeo&&(this._geoNrType=e.FLOAT64),this._matrixNrType=e.FLOAT32,this._accuracyMatrix&&(this._matrixNrType=e.FLOAT64),this._propsNrType=e.FLOAT32,this._accuracyProps&&(this._propsNrType=e.FLOAT64),this._compression=this._byteData.readUnsignedByte(),this._debug&&(console.log("Import AWDFile of version = "+this._version[0]+" - "+this._version[1]),console.log("Global Settings = Compression = "+this._compression+" | Streaming = "+this._streaming+" | Matrix-Precision = "+this._accuracyMatrix+" | Geometry-Precision = "+this._accuracyGeo+" | Properties-Precision = "+this._accuracyProps)),i=this._byteData.readUnsignedInt(),this._streaming||i==this._byteData.getBytesAvailable()||this._pDieWithError("AWD2 body length does not match header integrity field")},e.prototype.getUVForVertexAnimation=function(t){if(this._blocks[t].data instanceof j&&(t=this._blocks[t].geoID),this._blocks[t].uvsForVertexAnimation)return this._blocks[t].uvsForVertexAnimation;var e,i,s,r,a,n,o,h=this._blocks[t].data,l=0;for(this._blocks[t].uvsForVertexAnimation=new Array;l<h.subGeometries.length;){for(n=new Array,o=h.subGeometries[l],r=o.numVertices,e=o.uvs,i=o.getStride(v.UV_DATA),s=o.getOffset(v.UV_DATA),a=0;r>a;a++)n.push(e[s+a*i+0]),n.push(e[s+a*i+1]);this._blocks[t].uvsForVertexAnimation.push(n),l++}return this._blocks[t].uvsForVertexAnimation},e.prototype.parseVarStr=function(){var t=this._newBlockBytes.readUnsignedShort();return this._newBlockBytes.readUTFBytes(t)},e.prototype.getAssetByID=function(t,e,i){void 0===i&&(i="SingleTexture");var s=new Array,r=0;if(t>0&&this._blocks[t]&&this._blocks[t].data)for(;r<e.length;){var a=this._blocks[t].data;if(a.assetType==e[r]){if(e[r]==h.TEXTURE&&"CubeTexture"==i&&this._blocks[t].data instanceof y)return s.push(!0),s.push(this._blocks[t].data),s;if(e[r]!=h.TEXTURE||"SingleTexture"!=i)return s.push(!0),s.push(this._blocks[t].data),s;if(this._blocks[t].data instanceof g)return s.push(!0),s.push(this._blocks[t].data),s}if(e[r]==h.GEOMETRY&&a.assetType==h.MESH){var n=this._blocks[t].data;return s.push(!0),s.push(n.geometry),s}r++}return s.push(!1),s.push(this.getDefaultAsset(e[0],i)),s},e.prototype.getDefaultAsset=function(t,e){switch(!0){case t==h.TEXTURE:if("CubeTexture"==e)return this.getDefaultCubeTexture();if("SingleTexture"==e)return this.getDefaultTexture();break;case t==h.MATERIAL:return this.getDefaultMaterial()}return null},e.prototype.getDefaultMaterial=function(){return this._defaultBitmapMaterial||(this._defaultBitmapMaterial=z.getDefaultMaterial()),this._defaultBitmapMaterial},e.prototype.getDefaultTexture=function(){return this._defaultTexture||(this._defaultTexture=z.getDefaultTexture()),this._defaultTexture},e.prototype.getDefaultCubeTexture=function(){if(!this._defaultCubeTexture){var t=z.createCheckeredBitmapData();this._defaultCubeTexture=new _(t,t,t,t,t,t),this._defaultCubeTexture.name="defaultCubeTexture"}return this._defaultCubeTexture},e.prototype.readNumber=function(t){return void 0===t&&(t=!1),t?this._newBlockBytes.readDouble():this._newBlockBytes.readFloat()},e.prototype.parseMatrix3D=function(){return new r(this.parseMatrix43RawData())},e.prototype.parseMatrix32RawData=function(){var t,e=new Array(6);for(t=0;6>t;t++)e[t]=this._newBlockBytes.readFloat();return e},e.prototype.parseMatrix43RawData=function(){var t=new Array(16);return t[0]=this.readNumber(this._accuracyMatrix),t[1]=this.readNumber(this._accuracyMatrix),t[2]=this.readNumber(this._accuracyMatrix),t[3]=0,t[4]=this.readNumber(this._accuracyMatrix),t[5]=this.readNumber(this._accuracyMatrix),t[6]=this.readNumber(this._accuracyMatrix),t[7]=0,t[8]=this.readNumber(this._accuracyMatrix),t[9]=this.readNumber(this._accuracyMatrix),t[10]=this.readNumber(this._accuracyMatrix),t[11]=0,t[12]=this.readNumber(this._accuracyMatrix),t[13]=this.readNumber(this._accuracyMatrix),t[14]=this.readNumber(this._accuracyMatrix),t[15]=1,isNaN(t[0])&&(t[0]=1,t[1]=0,t[2]=0,t[4]=0,t[5]=1,t[6]=0,t[8]=0,t[9]=0,t[10]=1,t[12]=0,t[13]=0,t[14]=0),t},e.COMPRESSIONMODE_LZMA="lzma",e.UNCOMPRESSED=0,e.DEFLATE=1,e.LZMA=2,e.INT8=1,e.INT16=2,e.INT32=3,e.UINT8=4,e.UINT16=5,e.UINT32=6,e.FLOAT32=7,e.FLOAT64=8,e.BOOL=21,e.COLOR=22,e.BADDR=23,e.AWDSTRING=31,e.AWDBYTEARRAY=32,e.VECTOR2x1=41,e.VECTOR3x1=42,e.VECTOR4x1=43,e.MTX3x2=44,e.MTX3x3=45,e.MTX4x3=46,e.MTX4x4=47,e}(l);e.exports=je},{"awayjs-core/lib/geom/ColorTransform":void 0,"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/net/URLLoaderDataFormat":void 0,"awayjs-core/lib/net/URLRequest":void 0,"awayjs-core/lib/parsers/ParserBase":void 0,"awayjs-core/lib/parsers/ParserUtils":void 0,"awayjs-core/lib/projections/OrthographicOffCenterProjection":void 0,"awayjs-core/lib/projections/OrthographicProjection":void 0,"awayjs-core/lib/projections/PerspectiveProjection":void 0,"awayjs-core/lib/textures/BitmapCubeTexture":void 0,"awayjs-core/lib/textures/ImageCubeTexture":void 0,"awayjs-core/lib/textures/ImageTexture":void 0,"awayjs-core/lib/utils/ByteArray":void 0,"awayjs-display/lib/base/BlendMode":void 0,"awayjs-display/lib/base/Geometry":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0,"awayjs-display/lib/entities/Camera":void 0,"awayjs-display/lib/entities/DirectionalLight":void 0,"awayjs-display/lib/entities/Mesh":void 0,"awayjs-display/lib/entities/PointLight":void 0,"awayjs-display/lib/entities/Skybox":void 0,"awayjs-display/lib/materials/lightpickers/StaticLightPicker":void 0,"awayjs-display/lib/materials/shadowmappers/CubeMapShadowMapper":void 0,"awayjs-display/lib/materials/shadowmappers/DirectionalShadowMapper":void 0,"awayjs-display/lib/prefabs/PrefabBase":void 0,"awayjs-display/lib/prefabs/PrimitiveCapsulePrefab":void 0,"awayjs-display/lib/prefabs/PrimitiveConePrefab":void 0,"awayjs-display/lib/prefabs/PrimitiveCubePrefab":void 0,"awayjs-display/lib/prefabs/PrimitiveCylinderPrefab":void 0,"awayjs-display/lib/prefabs/PrimitivePlanePrefab":void 0,"awayjs-display/lib/prefabs/PrimitiveSpherePrefab":void 0,"awayjs-display/lib/prefabs/PrimitiveTorusPrefab":void 0,"awayjs-renderergl/lib/animators/SkeletonAnimationSet":void 0,"awayjs-renderergl/lib/animators/SkeletonAnimator":void 0,"awayjs-renderergl/lib/animators/VertexAnimationSet":void 0,"awayjs-renderergl/lib/animators/VertexAnimator":void 0,"awayjs-renderergl/lib/animators/data/JointPose":void 0,"awayjs-renderergl/lib/animators/data/Skeleton":void 0,"awayjs-renderergl/lib/animators/data/SkeletonJoint":void 0,"awayjs-renderergl/lib/animators/data/SkeletonPose":void 0,"awayjs-renderergl/lib/animators/nodes/SkeletonClipNode":void 0,"awayjs-renderergl/lib/animators/nodes/VertexClipNode":void 0,"awayjs-renderergl/lib/materials/methods/AmbientEnvMapMethod":void 0,"awayjs-renderergl/lib/materials/methods/DiffuseCelMethod":void 0,"awayjs-renderergl/lib/materials/methods/DiffuseDepthMethod":void 0,"awayjs-renderergl/lib/materials/methods/DiffuseGradientMethod":void 0,"awayjs-renderergl/lib/materials/methods/DiffuseLightMapMethod":void 0,"awayjs-renderergl/lib/materials/methods/DiffuseWrapMethod":void 0,"awayjs-renderergl/lib/materials/methods/EffectAlphaMaskMethod":void 0,"awayjs-renderergl/lib/materials/methods/EffectColorMatrixMethod":void 0,"awayjs-renderergl/lib/materials/methods/EffectEnvMapMethod":void 0,"awayjs-renderergl/lib/materials/methods/EffectFogMethod":void 0,"awayjs-renderergl/lib/materials/methods/EffectFresnelEnvMapMethod":void 0,"awayjs-renderergl/lib/materials/methods/EffectLightMapMethod":void 0,"awayjs-renderergl/lib/materials/methods/EffectRimLightMethod":void 0,"awayjs-renderergl/lib/materials/methods/NormalSimpleWaterMethod":void 0,"awayjs-renderergl/lib/materials/methods/ShadowDitheredMethod":void 0,"awayjs-renderergl/lib/materials/methods/ShadowFilteredMethod":void 0,"awayjs-renderergl/lib/materials/methods/ShadowNearMethod":void 0,"awayjs-renderergl/lib/materials/methods/ShadowSoftMethod":void 0,"awayjs-renderergl/lib/materials/methods/SpecularAnisotropicMethod":void 0,"awayjs-renderergl/lib/materials/methods/SpecularCelMethod":void 0,"awayjs-renderergl/lib/materials/methods/SpecularFresnelMethod":void 0,"awayjs-renderergl/lib/materials/methods/SpecularPhongMethod":void 0,"awayjs-renderergl/lib/parsers/data/AWDBlock":void 0,"awayjs-renderergl/lib/parsers/data/AWDProperties":void 0,"awayjs-renderergl/lib/parsers/data/BitFlags":void 0,"awayjs-stagegl/lib/materials/SkyboxMaterial":void 0,"awayjs-stagegl/lib/materials/TriangleMaterialMode":void 0,"awayjs-stagegl/lib/materials/TriangleMethodMaterial":void 0,"awayjs-stagegl/lib/materials/methods/EffectColorTransformMethod":void 0,"awayjs-stagegl/lib/materials/methods/ShadowHardMethod":void 0,"awayjs-stagegl/lib/materials/utils/DefaultMaterialManager":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/MD2Parser":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t
}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/net/URLLoaderDataFormat"),r=t("awayjs-core/lib/net/URLRequest"),a=t("awayjs-core/lib/parsers/ParserBase"),n=t("awayjs-core/lib/parsers/ParserUtils"),o=t("awayjs-display/lib/containers/DisplayObjectContainer"),h=t("awayjs-display/lib/base/Geometry"),l=t("awayjs-display/lib/base/TriangleSubGeometry"),p=t("awayjs-display/lib/entities/Mesh"),d=t("awayjs-stagegl/lib/materials/utils/DefaultMaterialManager"),u=t("awayjs-stagegl/lib/materials/TriangleMethodMaterial"),c=t("awayjs-stagegl/lib/materials/TriangleMaterialMode"),_=t("awayjs-renderergl/lib/animators/nodes/VertexClipNode"),y=t("awayjs-renderergl/lib/animators/VertexAnimationSet"),g=function(t){function e(e,i){void 0===e&&(e="jpg"),void 0===i&&(i=!0),t.call(this,s.ARRAY_BUFFER),this._clipNodes=new Object,this._animationSet=new y,this.materialFinal=!1,this.geoCreated=!1,this._textureType=e,this._ignoreTexturePath=i}return i(e,t),e.supportsType=function(t){return t=t.toLowerCase(),"md2"==t},e.supportsData=function(t){return"IDP2"==n.toString(t,4)},e.prototype._iResolveDependency=function(t){if(1==t.assets.length){var e=t.assets[0];if(e){var i=new u(e);this.materialMode>=2&&(i.materialMode=c.MULTI_PASS),this._pContent.addChild(this._mesh),i.name=this._mesh.material.name,this._mesh.material=i,this._pFinalizeAsset(i),this._pFinalizeAsset(this._mesh.geometry),this._pFinalizeAsset(this._mesh)}this.materialFinal=!0}},e.prototype._iResolveDependencyFailure=function(){this.materialMode<2?this._mesh.material=d.getDefaultMaterial():(this._mesh.material=new u(d.getDefaultTexture()),this._mesh.material.materialMode=c.MULTI_PASS),this._pContent.addChild(this._mesh),this._pFinalizeAsset(this._mesh.geometry),this._pFinalizeAsset(this._mesh),this.materialFinal=!0},e.prototype._pProceedParsing=function(){for(this._startedParsing||(this._byteData=this._pGetByteData(),this._startedParsing=!0,this._byteData.position=0);this._pHasTime();)if(this._parsedHeader)if(this._parsedUV)if(this._parsedFaces)if(this._parsedFrames){if(this.geoCreated&&this.materialFinal)return a.PARSING_DONE;this.geoCreated||(this.geoCreated=!0,this._geometry.addSubGeometry(this._firstSubGeom.clone()),this._mesh.name="",this.materialFinal&&(this._pContent.addChild(this._mesh),this._pFinalizeAsset(this._mesh.geometry),this._pFinalizeAsset(this._mesh)),this._pPauseAndRetrieveDependencies())}else this.parseFrames();else this.parseFaces();else this.parseUV();else this._geometry=new h,this._mesh=new p(this._geometry,null),this.materialMode<2?this._mesh.material=d.getDefaultMaterial():(this._mesh.material=new u(d.getDefaultTexture()),this._mesh.material.materialMode=c.MULTI_PASS),this.parseHeader(),this.parseMaterialNames();return a.MORE_TO_PARSE},e.prototype._pStartParsing=function(e){t.prototype._pStartParsing.call(this,e),this._pContent=new o},e.prototype.parseHeader=function(){this._ident=this._byteData.readInt(),this._version=this._byteData.readInt(),this._skinWidth=this._byteData.readInt(),this._skinHeight=this._byteData.readInt(),this._byteData.readInt(),this._numSkins=this._byteData.readInt(),this._numVertices=this._byteData.readInt(),this._numST=this._byteData.readInt(),this._numTris=this._byteData.readInt(),this._byteData.readInt(),this._numFrames=this._byteData.readInt(),this._offsetSkins=this._byteData.readInt(),this._offsetST=this._byteData.readInt(),this._offsetTris=this._byteData.readInt(),this._offsetFrames=this._byteData.readInt(),this._byteData.readInt(),this._offsetEnd=this._byteData.readInt(),this._parsedHeader=!0},e.prototype.parseMaterialNames=function(){var t,e,i,s;this._materialNames=new Array,this._byteData.position=this._offsetSkins;for(var a=new RegExp("[^a-zA-Z0-9\\_/.]","g"),n=0;n<this._numSkins;++n)e=this._byteData.readUTFBytes(64),e=e.replace(a,""),i=e.lastIndexOf("."),this._ignoreTexturePath&&(s=e.lastIndexOf("/")),-1==e.toLowerCase().indexOf(".jpg")&&-1==e.toLowerCase().indexOf(".png")?(e=e.substring(s+1,i),t=e+"."+this._textureType):t=e,this._materialNames[n]=e,0==this.dependencies.length&&this._pAddDependency(e,new r(t));this._materialNames.length>0?this._mesh.material.name=this._materialNames[0]:this.materialFinal=!0},e.prototype.parseUV=function(){var t=0;this._uvs=new Array(2*this._numST),this._byteData.position=this._offsetST;for(var e=0;e<this._numST;e++)this._uvs[t++]=this._byteData.readShort()/this._skinWidth,this._uvs[t++]=this._byteData.readShort()/this._skinHeight;this._parsedUV=!0},e.prototype.parseFaces=function(){var t,e,i,s,r,a,n;for(this._vertIndices=new Array,this._uvIndices=new Array,this._indices=new Array,this._byteData.position=this._offsetTris,n=0;n<this._numTris;n++)t=this._byteData.readUnsignedShort(),e=this._byteData.readUnsignedShort(),i=this._byteData.readUnsignedShort(),s=this._byteData.readUnsignedShort(),r=this._byteData.readUnsignedShort(),a=this._byteData.readUnsignedShort(),this.addIndex(t,s),this.addIndex(e,r),this.addIndex(i,a);var o=this._uvIndices.length;for(this._finalUV=new Array(2*o),n=0;o>n;++n)this._finalUV[n<<1]=this._uvs[this._uvIndices[n]<<1],this._finalUV[(n<<1)+1]=this._uvs[(this._uvIndices[n]<<1)+1];this._parsedFaces=!0},e.prototype.addIndex=function(t,e){var i=this.findIndex(t,e);-1==i?(this._indices.push(this._vertIndices.length),this._vertIndices.push(t),this._uvIndices.push(e)):this._indices.push(i)},e.prototype.findIndex=function(t,e){for(var i=this._vertIndices.length,s=0;i>s;++s)if(this._vertIndices[s]==t&&this._uvIndices[s]==e)return s;return-1},e.prototype.parseFrames=function(){var t,i,s,r,a,n,o,p,d,u,c,y,g,f=this._vertIndices.length,m="",b=null;for(this._byteData.position=this._offsetFrames,c=0;c<this._numFrames;c++){for(u=new Array,d=new Array(3*f),t=this._byteData.readFloat(),i=this._byteData.readFloat(),s=this._byteData.readFloat(),r=this._byteData.readFloat(),a=this._byteData.readFloat(),n=this._byteData.readFloat(),m=this.readFrameName(),y=0;y<this._numVertices;y++,this._byteData.position++)u.push(t*this._byteData.readUnsignedByte()+r,i*this._byteData.readUnsignedByte()+a,s*this._byteData.readUnsignedByte()+n);for(g=0,y=0;f>y;y++)d[g++]=u[3*this._vertIndices[y]],d[g++]=u[3*this._vertIndices[y]+2],d[g++]=u[3*this._vertIndices[y]+1];p=new l(!0),null==this._firstSubGeom&&(this._firstSubGeom=p),o=new h,o.addSubGeometry(p),p.updateIndices(this._indices),p.updatePositions(d),p.updateUVs(this._finalUV),p.vertexNormals,p.vertexTangents,p.autoDeriveNormals=!1,p.autoDeriveTangents=!1;var w=this._clipNodes[m];w||(b&&(this._pFinalizeAsset(b),this._animationSet.addAnimation(b)),w=new _,w.name=m,w.stitchFinalFrame=!0,this._clipNodes[m]=w,b=w),w.addFrame(o,1e3/e.FPS)}b&&(this._pFinalizeAsset(b),this._animationSet.addAnimation(b)),this._pFinalizeAsset(this._animationSet),this._parsedFrames=!0},e.prototype.readFrameName=function(){for(var t="",e=0,i=0;16>i;i++){var s=this._byteData.readUnsignedByte();Math.floor(s)>57&&Math.floor(s)<=122&&0==e&&(t+=String.fromCharCode(s)),Math.floor(s)>=48&&Math.floor(s)<=57&&e++}return t},e.FPS=6,e}(a);e.exports=g},{"awayjs-core/lib/net/URLLoaderDataFormat":void 0,"awayjs-core/lib/net/URLRequest":void 0,"awayjs-core/lib/parsers/ParserBase":void 0,"awayjs-core/lib/parsers/ParserUtils":void 0,"awayjs-display/lib/base/Geometry":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0,"awayjs-display/lib/entities/Mesh":void 0,"awayjs-renderergl/lib/animators/VertexAnimationSet":void 0,"awayjs-renderergl/lib/animators/nodes/VertexClipNode":void 0,"awayjs-stagegl/lib/materials/TriangleMaterialMode":void 0,"awayjs-stagegl/lib/materials/TriangleMethodMaterial":void 0,"awayjs-stagegl/lib/materials/utils/DefaultMaterialManager":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/MD5AnimParser":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Quaternion"),r=t("awayjs-core/lib/geom/Vector3D"),a=t("awayjs-core/lib/net/URLLoaderDataFormat"),n=t("awayjs-core/lib/parsers/ParserBase"),o=t("awayjs-renderergl/lib/animators/data/JointPose"),h=t("awayjs-renderergl/lib/animators/data/SkeletonPose"),l=t("awayjs-renderergl/lib/animators/nodes/SkeletonClipNode"),p=t("awayjs-renderergl/lib/parsers/data/BaseFrameData"),d=t("awayjs-renderergl/lib/parsers/data/BoundsData"),u=t("awayjs-renderergl/lib/parsers/data/FrameData"),c=t("awayjs-renderergl/lib/parsers/data/HierarchyData"),_=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=0),t.call(this,a.TEXT),this._parseIndex=0,this._line=0,this._charLineIndex=0,this._rotationQuat=new s;var n=new s,o=new s;n.fromAxisAngle(r.X_AXIS,.5*-Math.PI),o.fromAxisAngle(r.Y_AXIS,.5*-Math.PI),this._rotationQuat.multiply(o,n),e&&(this._rotationQuat.multiply(o,n),n.fromAxisAngle(e,i),this._rotationQuat.multiply(n,this._rotationQuat))}return i(e,t),e.supportsType=function(t){return t=t.toLowerCase(),"md5anim"==t},e.supportsData=function(){return!1},e.prototype._pProceedParsing=function(){var t;for(this._startedParsing||(this._textData=this._pGetTextData(),this._startedParsing=!0);this._pHasTime();){switch(t=this.getNextToken()){case e.COMMENT_TOKEN:this.ignoreLine();break;case"":break;case e.VERSION_TOKEN:if(this._version=this.getNextInt(),10!=this._version)throw new Error("Unknown version number encountered!");break;case e.COMMAND_LINE_TOKEN:this.parseCMD();break;case e.NUM_FRAMES_TOKEN:this._numFrames=this.getNextInt(),this._bounds=new Array,this._frameData=new Array;break;case e.NUM_JOINTS_TOKEN:this._numJoints=this.getNextInt(),this._hierarchy=new Array(this._numJoints),this._baseFrameData=new Array(this._numJoints);break;case e.FRAME_RATE_TOKEN:this._frameRate=this.getNextInt();break;case e.NUM_ANIMATED_COMPONENTS_TOKEN:this._numAnimatedComponents=this.getNextInt();break;case e.HIERARCHY_TOKEN:this.parseHierarchy();break;case e.BOUNDS_TOKEN:this.parseBounds();break;case e.BASE_FRAME_TOKEN:this.parseBaseFrame();break;case e.FRAME_TOKEN:this.parseFrame();break;default:this._reachedEOF||this.sendUnknownKeywordError()}if(this._reachedEOF)return this._clip=new l,this.translateClip(),this._pFinalizeAsset(this._clip),n.PARSING_DONE}return n.MORE_TO_PARSE},e.prototype.translateClip=function(){for(var t=0;t<this._numFrames;++t)this._clip.addFrame(this.translatePose(this._frameData[t]),1e3/this._frameRate)},e.prototype.translatePose=function(t){for(var e,i,a,n,l,p=new r,d=new s,u=t.components,c=new h,_=c.jointPoses,y=0;y<this._numJoints;++y){l=0,i=new o,e=this._hierarchy[y],a=this._baseFrameData[y],n=e.flags,p.x=a.position.x,p.y=a.position.y,p.z=a.position.z,d.x=a.orientation.x,d.y=a.orientation.y,d.z=a.orientation.z,1&n&&(p.x=u[e.startIndex+l++]),2&n&&(p.y=u[e.startIndex+l++]),4&n&&(p.z=u[e.startIndex+l++]),8&n&&(d.x=u[e.startIndex+l++]),16&n&&(d.y=u[e.startIndex+l++]),32&n&&(d.z=u[e.startIndex+l++]);var g=1-d.x*d.x-d.y*d.y-d.z*d.z;d.w=0>g?0:-Math.sqrt(g),e.parentIndex<0?(i.orientation.multiply(this._rotationQuat,d),i.translation=this._rotationQuat.rotatePoint(p)):(i.orientation.copyFrom(d),i.translation.x=p.x,i.translation.y=p.y,i.translation.z=p.z),i.orientation.y=-i.orientation.y,i.orientation.z=-i.orientation.z,i.translation.x=-i.translation.x,_[y]=i}return c},e.prototype.parseHierarchy=function(){var t,i,s=this.getNextToken(),r=0;"{"!=s&&this.sendUnknownKeywordError();do this._reachedEOF&&this.sendEOFError(),i=new c,i.name=this.parseLiteralstring(),i.parentIndex=this.getNextInt(),i.flags=this.getNextInt(),i.startIndex=this.getNextInt(),this._hierarchy[r++]=i,t=this.getNextChar(),"/"==t&&(this.putBack(),t=this.getNextToken(),t==e.COMMENT_TOKEN&&this.ignoreLine(),t=this.getNextChar()),"}"!=t&&this.putBack();while("}"!=t)},e.prototype.parseBounds=function(){var t,i,s=this.getNextToken(),r=0;"{"!=s&&this.sendUnknownKeywordError();do this._reachedEOF&&this.sendEOFError(),i=new d,i.min=this.parseVector3D(),i.max=this.parseVector3D(),this._bounds[r++]=i,t=this.getNextChar(),"/"==t&&(this.putBack(),t=this.getNextToken(),t==e.COMMENT_TOKEN&&this.ignoreLine(),t=this.getNextChar()),"}"!=t&&this.putBack();while("}"!=t)},e.prototype.parseBaseFrame=function(){var t,i,s=this.getNextToken(),r=0;"{"!=s&&this.sendUnknownKeywordError();do this._reachedEOF&&this.sendEOFError(),i=new p,i.position=this.parseVector3D(),i.orientation=this.parseQuaternion(),this._baseFrameData[r++]=i,t=this.getNextChar(),"/"==t&&(this.putBack(),t=this.getNextToken(),t==e.COMMENT_TOKEN&&this.ignoreLine(),t=this.getNextChar()),"}"!=t&&this.putBack();while("}"!=t)},e.prototype.parseFrame=function(){var t,i,s,r;r=this.getNextInt(),s=this.getNextToken(),"{"!=s&&this.sendUnknownKeywordError();do{this._reachedEOF&&this.sendEOFError(),i=new u,i.components=new Array(this._numAnimatedComponents);for(var a=0;a<this._numAnimatedComponents;++a)i.components[a]=this.getNextNumber();this._frameData[r]=i,t=this.getNextChar(),"/"==t&&(this.putBack(),t=this.getNextToken(),t==e.COMMENT_TOKEN&&this.ignoreLine(),t=this.getNextChar()),"}"!=t&&this.putBack()}while("}"!=t)},e.prototype.putBack=function(){this._parseIndex--,this._charLineIndex--,this._reachedEOF=this._parseIndex>=this._textData.length},e.prototype.getNextToken=function(){for(var t,i="";!this._reachedEOF;){if(t=this.getNextChar()," "==t||"\r"==t||"\n"==t||"	"==t){if(i!=e.COMMENT_TOKEN&&this.skipWhiteSpace(),""!=i)return i}else i+=t;if(i==e.COMMENT_TOKEN)return i}return i},e.prototype.skipWhiteSpace=function(){var t;do t=this.getNextChar();while("\n"==t||" "==t||"\r"==t||"	"==t);this.putBack()},e.prototype.ignoreLine=function(){for(var t;!this._reachedEOF&&"\n"!=t;)t=this.getNextChar()},e.prototype.getNextChar=function(){var t=this._textData.charAt(this._parseIndex++);return"\n"==t?(++this._line,this._charLineIndex=0):"\r"!=t&&++this._charLineIndex,this._parseIndex==this._textData.length&&(this._reachedEOF=!0),t},e.prototype.getNextInt=function(){var t=parseInt(this.getNextToken());return isNaN(t)&&this.sendParseError("int type"),t},e.prototype.getNextNumber=function(){var t=parseFloat(this.getNextToken());return isNaN(t)&&this.sendParseError("float type"),t},e.prototype.parseVector3D=function(){var t=new r,e=this.getNextToken();return"("!=e&&this.sendParseError("("),t.x=this.getNextNumber(),t.y=this.getNextNumber(),t.z=this.getNextNumber(),")"!=this.getNextToken()&&this.sendParseError(")"),t},e.prototype.parseQuaternion=function(){var t=new s,e=this.getNextToken();"("!=e&&this.sendParseError("("),t.x=this.getNextNumber(),t.y=this.getNextNumber(),t.z=this.getNextNumber();var i=1-t.x*t.x-t.y*t.y-t.z*t.z;return t.w=0>i?0:-Math.sqrt(i),")"!=this.getNextToken()&&this.sendParseError(")"),t},e.prototype.parseCMD=function(){this.parseLiteralstring()},e.prototype.parseLiteralstring=function(){this.skipWhiteSpace();var t=this.getNextChar(),e="";'"'!=t&&this.sendParseError('"');do this._reachedEOF&&this.sendEOFError(),t=this.getNextChar(),'"'!=t&&(e+=t);while('"'!=t);return e},e.prototype.sendEOFError=function(){throw new Error("Unexpected end of file")},e.prototype.sendParseError=function(t){throw new Error("Unexpected token at line "+(this._line+1)+", character "+this._charLineIndex+". "+t+" expected, but "+this._textData.charAt(this._parseIndex-1)+" encountered")},e.prototype.sendUnknownKeywordError=function(){throw new Error("Unknown keyword at line "+(this._line+1)+", character "+this._charLineIndex+". ")},e.VERSION_TOKEN="MD5Version",e.COMMAND_LINE_TOKEN="commandline",e.NUM_FRAMES_TOKEN="numFrames",e.NUM_JOINTS_TOKEN="numJoints",e.FRAME_RATE_TOKEN="frameRate",e.NUM_ANIMATED_COMPONENTS_TOKEN="numAnimatedComponents",e.HIERARCHY_TOKEN="hierarchy",e.BOUNDS_TOKEN="bounds",e.BASE_FRAME_TOKEN="baseframe",e.FRAME_TOKEN="frame",e.COMMENT_TOKEN="//",e}(n);e.exports=_},{"awayjs-core/lib/geom/Quaternion":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-core/lib/net/URLLoaderDataFormat":void 0,"awayjs-core/lib/parsers/ParserBase":void 0,"awayjs-renderergl/lib/animators/data/JointPose":void 0,"awayjs-renderergl/lib/animators/data/SkeletonPose":void 0,"awayjs-renderergl/lib/animators/nodes/SkeletonClipNode":void 0,"awayjs-renderergl/lib/parsers/data/BaseFrameData":void 0,"awayjs-renderergl/lib/parsers/data/BoundsData":void 0,"awayjs-renderergl/lib/parsers/data/FrameData":void 0,"awayjs-renderergl/lib/parsers/data/HierarchyData":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/MD5MeshParser":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Quaternion"),r=t("awayjs-core/lib/geom/Vector3D"),a=t("awayjs-core/lib/net/URLLoaderDataFormat"),n=t("awayjs-core/lib/parsers/ParserBase"),o=t("awayjs-display/lib/containers/DisplayObjectContainer"),h=t("awayjs-display/lib/base/Geometry"),l=t("awayjs-display/lib/base/TriangleSubGeometry"),p=t("awayjs-display/lib/entities/Mesh"),d=t("awayjs-renderergl/lib/animators/SkeletonAnimationSet"),u=t("awayjs-renderergl/lib/animators/data/Skeleton"),c=t("awayjs-renderergl/lib/animators/data/SkeletonJoint"),_=function(t){function e(e,i){if(void 0===e&&(e=null),void 0===i&&(i=0),t.call(this,a.TEXT),this._parseIndex=0,this._line=0,this._charLineIndex=0,this._rotationQuat=new s,this._rotationQuat.fromAxisAngle(r.X_AXIS,.5*-Math.PI),e){var n=new s;n.fromAxisAngle(e,i),this._rotationQuat.multiply(this._rotationQuat,n)}}return i(e,t),e.supportsType=function(t){return t=t.toLowerCase(),"md5mesh"==t},e.supportsData=function(){return!1},e.prototype._pProceedParsing=function(){var t;for(this._startedParsing||(this._textData=this._pGetTextData(),this._startedParsing=!0);this._pHasTime();){switch(t=this.getNextToken()){case e.COMMENT_TOKEN:this.ignoreLine();break;case e.VERSION_TOKEN:if(this._version=this.getNextInt(),10!=this._version)throw new Error("Unknown version number encountered!");break;case e.COMMAND_LINE_TOKEN:this.parseCMD();break;case e.NUM_JOINTS_TOKEN:this._numJoints=this.getNextInt(),this._bindPoses=new Array(this._numJoints);break;case e.NUM_MESHES_TOKEN:this._numMeshes=this.getNextInt();break;case e.JOINTS_TOKEN:this.parseJoints();break;case e.MESH_TOKEN:this.parseMesh();break;default:this._reachedEOF||this.sendUnknownKeywordError()}if(this._reachedEOF){this.calculateMaxJointCount(),this._animationSet=new d(this._maxJointCount),this._mesh=new p(new h,null),this._geometry=this._mesh.geometry;for(var i=0;i<this._meshData.length;++i)this._geometry.addSubGeometry(this.translateGeom(this._meshData[i].vertexData,this._meshData[i].weightData,this._meshData[i].indices));return this._pContent.addChild(this._mesh),this._pFinalizeAsset(this._geometry),this._pFinalizeAsset(this._mesh),this._pFinalizeAsset(this._skeleton),this._pFinalizeAsset(this._animationSet),n.PARSING_DONE}}return n.MORE_TO_PARSE},e.prototype._pStartParsing=function(e){t.prototype._pStartParsing.call(this,e),this._pContent=new o},e.prototype.calculateMaxJointCount=function(){this._maxJointCount=0;for(var t=this._meshData.length,e=0;t>e;++e)for(var i=this._meshData[e],s=i.vertexData,r=s.length,a=0;r>a;++a){var n=this.countZeroWeightJoints(s[a],i.weightData),o=s[a].countWeight-n;o>this._maxJointCount&&(this._maxJointCount=o)}},e.prototype.countZeroWeightJoints=function(t,e){for(var i,s=t.startWeight,r=t.startWeight+t.countWeight,a=0,n=s;r>n;++n)i=e[n].bias,0==i&&++a;return a},e.prototype.parseJoints=function(){var t,i,s,r,a=0,n=this.getNextToken();"{"!=n&&this.sendUnknownKeywordError(),this._skeleton=new u;do{this._reachedEOF&&this.sendEOFError(),i=new c,i.name=this.parseLiteralstring(),i.parentIndex=this.getNextInt(),s=this.parseVector3D(),s=this._rotationQuat.rotatePoint(s),r=this.parseQuaternion(),this._bindPoses[a]=r.toMatrix3D(),this._bindPoses[a].appendTranslation(s.x,s.y,s.z);var o=this._bindPoses[a].clone();o.invert(),i.inverseBindPose=o.rawData,this._skeleton.joints[a++]=i,t=this.getNextChar(),"/"==t&&(this.putBack(),t=this.getNextToken(),t==e.COMMENT_TOKEN&&this.ignoreLine(),t=this.getNextChar()),"}"!=t&&this.putBack()}while("}"!=t)},e.prototype.putBack=function(){this._parseIndex--,this._charLineIndex--,this._reachedEOF=this._parseIndex>=this._textData.length},e.prototype.parseMesh=function(){var t,i,s,r,a=this.getNextToken();for("{"!=a&&this.sendUnknownKeywordError(),null==this._shaders&&(this._shaders=new Array);"}"!=t;)switch(t=this.getNextToken()){case e.COMMENT_TOKEN:this.ignoreLine();break;case e.MESH_SHADER_TOKEN:this._shaders.push(this.parseLiteralstring());break;case e.MESH_NUM_VERTS_TOKEN:i=new Array(this.getNextInt());break;case e.MESH_NUM_TRIS_TOKEN:r=new Array(3*this.getNextInt());break;case e.MESH_NUM_WEIGHTS_TOKEN:s=new Array(this.getNextInt());break;case e.MESH_VERT_TOKEN:this.parseVertex(i);break;case e.MESH_TRI_TOKEN:this.parseTri(r);break;case e.MESH_WEIGHT_TOKEN:this.parseJoint(s)}null==this._meshData&&(this._meshData=new Array);var n=this._meshData.length;this._meshData[n]=new f,this._meshData[n].vertexData=i,this._meshData[n].weightData=s,this._meshData[n].indices=r},e.prototype.translateGeom=function(t,e,i){for(var s,r,a,n,o,h,p,d,u=t.length,c=new l(!0),_=new Array(2*u),y=new Array(3*u),g=new Array(u*this._maxJointCount),f=new Array(u*this._maxJointCount),m=0,b=0;u>b;++b){n=t[b],s=3*n.index,r=s+1,a=s+2,y[s]=y[r]=y[a]=0,d=0;for(var w=0;w<n.countWeight;++w)o=e[n.startWeight+w],o.bias>0&&(h=this._bindPoses[o.joint],p=h.transformVector(o.pos),y[s]+=p.x*o.bias,y[r]+=p.y*o.bias,y[a]+=p.z*o.bias,g[m]=3*o.joint,f[m++]=o.bias,++d);for(w=d;w<this._maxJointCount;++w)g[m]=0,f[m++]=0;s=n.index<<1,_[s++]=n.s,_[s]=n.t}return c.jointsPerVertex=this._maxJointCount,c.updateIndices(i),c.updatePositions(y),c.updateUVs(_),c.updateJointIndices(g),c.updateJointWeights(f),c.vertexNormals,c.vertexTangents,c.autoDeriveTangents=!1,c.autoDeriveNormals=!1,c},e.prototype.parseTri=function(t){var e=3*this.getNextInt();t[e]=this.getNextInt(),t[e+1]=this.getNextInt(),t[e+2]=this.getNextInt()},e.prototype.parseJoint=function(t){var e=new g;e.index=this.getNextInt(),e.joint=this.getNextInt(),e.bias=this.getNextNumber(),e.pos=this.parseVector3D(),t[e.index]=e},e.prototype.parseVertex=function(t){var e=new y;e.index=this.getNextInt(),this.parseUV(e),e.startWeight=this.getNextInt(),e.countWeight=this.getNextInt(),t[e.index]=e},e.prototype.parseUV=function(t){var e=this.getNextToken();"("!=e&&this.sendParseError("("),t.s=this.getNextNumber(),t.t=this.getNextNumber(),")"!=this.getNextToken()&&this.sendParseError(")")},e.prototype.getNextToken=function(){for(var t,i="";!this._reachedEOF;){if(t=this.getNextChar()," "==t||"\r"==t||"\n"==t||"	"==t){if(i!=e.COMMENT_TOKEN&&this.skipWhiteSpace(),""!=i)return i}else i+=t;if(i==e.COMMENT_TOKEN)return i}return i},e.prototype.skipWhiteSpace=function(){var t;do t=this.getNextChar();while("\n"==t||" "==t||"\r"==t||"	"==t);this.putBack()},e.prototype.ignoreLine=function(){for(var t;!this._reachedEOF&&"\n"!=t;)t=this.getNextChar()},e.prototype.getNextChar=function(){var t=this._textData.charAt(this._parseIndex++);return"\n"==t?(++this._line,this._charLineIndex=0):"\r"!=t&&++this._charLineIndex,this._parseIndex>=this._textData.length&&(this._reachedEOF=!0),t},e.prototype.getNextInt=function(){var t=parseInt(this.getNextToken());return isNaN(t)&&this.sendParseError("int type"),t},e.prototype.getNextNumber=function(){var t=parseFloat(this.getNextToken());return isNaN(t)&&this.sendParseError("float type"),t},e.prototype.parseVector3D=function(){var t=new r,e=this.getNextToken();return"("!=e&&this.sendParseError("("),t.x=-this.getNextNumber(),t.y=this.getNextNumber(),t.z=this.getNextNumber(),")"!=this.getNextToken()&&this.sendParseError(")"),t},e.prototype.parseQuaternion=function(){var t=new s,e=this.getNextToken();"("!=e&&this.sendParseError("("),t.x=this.getNextNumber(),t.y=-this.getNextNumber(),t.z=-this.getNextNumber();var i=1-t.x*t.x-t.y*t.y-t.z*t.z;t.w=0>i?0:-Math.sqrt(i),")"!=this.getNextToken()&&this.sendParseError(")");var r=new s;return r.multiply(this._rotationQuat,t),r},e.prototype.parseCMD=function(){this.parseLiteralstring()},e.prototype.parseLiteralstring=function(){this.skipWhiteSpace();var t=this.getNextChar(),e="";'"'!=t&&this.sendParseError('"');do this._reachedEOF&&this.sendEOFError(),t=this.getNextChar(),'"'!=t&&(e+=t);while('"'!=t);return e},e.prototype.sendEOFError=function(){throw new Error("Unexpected end of file")},e.prototype.sendParseError=function(t){throw new Error("Unexpected token at line "+(this._line+1)+", character "+this._charLineIndex+". "+t+" expected, but "+this._textData.charAt(this._parseIndex-1)+" encountered")},e.prototype.sendUnknownKeywordError=function(){throw new Error("Unknown keyword at line "+(this._line+1)+", character "+this._charLineIndex+". ")},e.VERSION_TOKEN="MD5Version",e.COMMAND_LINE_TOKEN="commandline",e.NUM_JOINTS_TOKEN="numJoints",e.NUM_MESHES_TOKEN="numMeshes",e.COMMENT_TOKEN="//",e.JOINTS_TOKEN="joints",e.MESH_TOKEN="mesh",e.MESH_SHADER_TOKEN="shader",e.MESH_NUM_VERTS_TOKEN="numverts",e.MESH_VERT_TOKEN="vert",e.MESH_NUM_TRIS_TOKEN="numtris",e.MESH_TRI_TOKEN="tri",e.MESH_NUM_WEIGHTS_TOKEN="numweights",e.MESH_WEIGHT_TOKEN="weight",e}(n),y=function(){function t(){}return t}(),g=function(){function t(){}return t}(),f=function(){function t(){}return t}();e.exports=_},{"awayjs-core/lib/geom/Quaternion":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-core/lib/net/URLLoaderDataFormat":void 0,"awayjs-core/lib/parsers/ParserBase":void 0,"awayjs-display/lib/base/Geometry":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0,"awayjs-display/lib/entities/Mesh":void 0,"awayjs-renderergl/lib/animators/SkeletonAnimationSet":void 0,"awayjs-renderergl/lib/animators/data/Skeleton":void 0,"awayjs-renderergl/lib/animators/data/SkeletonJoint":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/Max3DSParser":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),r=t("awayjs-core/lib/geom/Vector3D"),a=t("awayjs-core/lib/library/AssetType"),n=t("awayjs-core/lib/net/URLLoaderDataFormat"),o=t("awayjs-core/lib/net/URLRequest"),h=t("awayjs-core/lib/parsers/ParserBase"),l=t("awayjs-core/lib/parsers/ParserUtils"),p=t("awayjs-display/lib/containers/DisplayObjectContainer"),d=t("awayjs-display/lib/base/Geometry"),u=t("awayjs-display/lib/base/TriangleSubGeometry"),c=t("awayjs-display/lib/entities/Mesh"),_=t("awayjs-stagegl/lib/materials/utils/DefaultMaterialManager"),y=t("awayjs-stagegl/lib/materials/TriangleMethodMaterial"),g=t("awayjs-stagegl/lib/materials/TriangleMaterialMode"),f=t("awayjs-renderergl/lib/parsers/data/FaceVO"),m=t("awayjs-renderergl/lib/parsers/data/MaterialVO"),b=t("awayjs-renderergl/lib/parsers/data/ObjectVO"),w=t("awayjs-renderergl/lib/parsers/data/TextureVO"),v=t("awayjs-renderergl/lib/parsers/data/VertexVO"),x=function(t){function e(e){void 0===e&&(e=!0),t.call(this,n.ARRAY_BUFFER),this._useSmoothingGroups=e}return i(e,t),e.supportsType=function(t){return t=t.toLowerCase(),"3ds"==t},e.supportsData=function(t){var e;return e=l.toByteArray(t),e&&(e.position=0,19789==e.readShort())?!0:!1},e.prototype._iResolveDependency=function(t){if(1==t.assets.length){var e;if(e=t.assets[0],e.assetType==a.TEXTURE){var i;i=this._textures[t.id],i.texture=e}}},e.prototype._iResolveDependencyFailure=function(){},e.prototype._pProceedParsing=function(){for(this._byteData||(this._byteData=this._pGetByteData(),this._byteData.position=0,this._textures={},this._materials={},this._unfinalized_objects={});this._pHasTime();)if(this._cur_mat&&this._byteData.position>=this._cur_mat_end?this.finalizeCurrentMaterial():this._cur_obj&&this._byteData.position>=this._cur_obj_end&&(this._unfinalized_objects[this._cur_obj.name]=this._cur_obj,this._cur_obj_end=Number.MAX_VALUE,this._cur_obj=null),this._byteData.getBytesAvailable()>0){var t,e,i;switch(t=this._byteData.readUnsignedShort(),e=this._byteData.readUnsignedInt(),i=this._byteData.position+(e-6),t){case 19789:case 15677:case 45056:continue;case 45055:this._cur_mat_end=i,this._cur_mat=this.parseMaterial();break;case 16384:this._cur_obj_end=i,this._cur_obj=new b,this._cur_obj.name=this.readNulTermstring(),this._cur_obj.materials=new Array,this._cur_obj.materialFaces={};break;case 16640:this._cur_obj.type=a.MESH;break;case 16656:this.parseVertexList();break;case 16672:this.parseFaceList();break;case 16704:this.parseUVList();break;case 16688:this.parseFaceMaterialList();break;case 16736:this._cur_obj.transform=this.readTransform();break;case 45058:this.parseObjectAnimation(i);break;case 16720:this.parseSmoothingGroups();break;default:this._byteData.position+=e-6}if(this.dependencies.length){this._pPauseAndRetrieveDependencies();break}}if(this._byteData.getBytesAvailable()||this._cur_obj||this._cur_mat)return h.MORE_TO_PARSE;var s;for(s in this._unfinalized_objects){var r;r=this.constructObject(this._unfinalized_objects[s]),r&&(this._pContent.addChild(r),this._pFinalizeAsset(r,s))}return h.PARSING_DONE},e.prototype._pStartParsing=function(e){t.prototype._pStartParsing.call(this,e),this._pContent=new p},e.prototype.parseMaterial=function(){var t;for(t=new m;this._byteData.position<this._cur_mat_end;){var e,i,s;switch(e=this._byteData.readUnsignedShort(),i=this._byteData.readUnsignedInt(),s=this._byteData.position+(i-6),e){case 40960:t.name=this.readNulTermstring();break;case 40976:t.ambientColor=this.readColor();break;case 40992:t.diffuseColor=this.readColor();break;case 41008:t.specularColor=this.readColor();break;case 41089:t.twoSided=!0;break;case 41472:t.colorMap=this.parseTexture(s);break;case 41476:t.specularMap=this.parseTexture(s);break;default:this._byteData.position=s}}return t},e.prototype.parseTexture=function(t){var e;for(e=new w;this._byteData.position<t;){var i,s;switch(i=this._byteData.readUnsignedShort(),s=this._byteData.readUnsignedInt(),i){case 41728:e.url=this.readNulTermstring();break;default:this._byteData.position+=s-6}}return this._textures[e.url]=e,this._pAddDependency(e.url,new o(e.url)),e},e.prototype.parseVertexList=function(){var t,e,i;for(i=this._byteData.readUnsignedShort(),this._cur_obj.verts=new Array(3*i),t=0,e=this._cur_obj.verts.length;e>t;){var s,r,a;s=this._byteData.readFloat(),r=this._byteData.readFloat(),a=this._byteData.readFloat(),this._cur_obj.verts[t++]=s,this._cur_obj.verts[t++]=a,this._cur_obj.verts[t++]=r}},e.prototype.parseFaceList=function(){var t,e,i;for(i=this._byteData.readUnsignedShort(),this._cur_obj.indices=new Array(3*i),t=0,e=this._cur_obj.indices.length;e>t;){var s,r,a;s=this._byteData.readUnsignedShort(),r=this._byteData.readUnsignedShort(),a=this._byteData.readUnsignedShort(),this._cur_obj.indices[t++]=s,this._cur_obj.indices[t++]=a,this._cur_obj.indices[t++]=r,this._byteData.position+=2}this._cur_obj.smoothingGroups=new Array(i)},e.prototype.parseSmoothingGroups=function(){for(var t=this._cur_obj.indices.length/3,e=0;t>e;)this._cur_obj.smoothingGroups[e]=this._byteData.readUnsignedInt(),e++},e.prototype.parseUVList=function(){var t,e,i;for(i=this._byteData.readUnsignedShort(),this._cur_obj.uvs=new Array(2*i),t=0,e=this._cur_obj.uvs.length;e>t;)this._cur_obj.uvs[t++]=this._byteData.readFloat(),this._cur_obj.uvs[t++]=1-this._byteData.readFloat()},e.prototype.parseFaceMaterialList=function(){var t,e,i,s;for(t=this.readNulTermstring(),e=this._byteData.readUnsignedShort(),s=new Array(e),i=0;i<s.length;)s[i++]=this._byteData.readUnsignedShort();this._cur_obj.materials.push(t),this._cur_obj.materialFaces[t]=s},e.prototype.parseObjectAnimation=function(t){var e,i,s,a,n;for(s=new r;this._byteData.position<t;){var o,h;switch(o=this._byteData.readUnsignedShort(),h=this._byteData.readUnsignedInt(),o){case 45072:a=this.readNulTermstring(),this._byteData.position+=4,n=this._byteData.readShort();break;case 45075:s.x=this._byteData.readFloat(),s.z=this._byteData.readFloat(),s.y=this._byteData.readFloat();
break;default:this._byteData.position+=h-6}}"$$$DUMMY"!=a&&this._unfinalized_objects.hasOwnProperty(a)&&(e=this._unfinalized_objects[a],i=this.constructObject(e,s),i&&(this._pContent.addChild(i),this._pFinalizeAsset(i,e.name)),delete this._unfinalized_objects[a])},e.prototype.constructObject=function(t,e){if(void 0===e&&(e=null),t.type==a.MESH){var i,r,n,o,h,l,p,_;if(t.materials.length>1&&console.log("The Away3D 3DS parser does not support multiple materials per mesh at this point."),!t.indices||0==t.indices.length)return null;for(p=new Array(t.verts.length/3),_=new Array(t.indices.length/3),this.prepareData(p,_,t),this._useSmoothingGroups&&this.applySmoothGroups(p,_),t.verts=new Array(3*p.length),i=0;i<p.length;i++)t.verts[3*i]=p[i].x,t.verts[3*i+1]=p[i].y,t.verts[3*i+2]=p[i].z;for(t.indices=new Array(3*_.length),i=0;i<_.length;i++)t.indices[3*i]=_[i].a,t.indices[3*i+1]=_[i].b,t.indices[3*i+2]=_[i].c;if(t.uvs)for(t.uvs=new Array(2*p.length),i=0;i<p.length;i++)t.uvs[2*i]=p[i].u,t.uvs[2*i+1]=p[i].v;if(n=new d,r=new u(!0),r.updateIndices(t.indices),r.updatePositions(t.verts),r.updateUVs(t.uvs),n.addSubGeometry(r),t.materials.length>0){var y;y=t.materials[0],o=this._materials[y].material}if(e){if(t.transform){var g=t.transform.concat();g[12]=0,g[13]=0,g[14]=0,l=new s(g),e=l.transformVector(e)}e.scaleBy(-1),l=new s,l.appendTranslation(e.x,e.y,e.z),n.applyTransformation(l)}return t.transform&&(l=new s(t.transform),l.invert(),n.applyTransformation(l)),this._pFinalizeAsset(n,t.name.concat("_geom")),h=new c(n,o),h.transform.matrix3D=new s(t.transform),h}return null},e.prototype.prepareData=function(t,e,i){var s,r,a,n=i.verts.length;for(s=0,r=0,a=0;n>s;){var o=new v;o.x=i.verts[s++],o.y=i.verts[s++],o.z=i.verts[s++],i.uvs&&(o.u=i.uvs[r++],o.v=i.uvs[r++]),t[a++]=o}for(n=i.indices.length,s=0,a=0;n>s;){var h=new f;h.a=i.indices[s++],h.b=i.indices[s++],h.c=i.indices[s++],h.smoothGroup=i.smoothingGroups[a]||0,e[a++]=h}},e.prototype.applySmoothGroups=function(t,e){var i,s,r,a,n,o=t.length,h=e.length,l=new Array(o);for(i=0;o>i;i++)l[i]=new Array;for(i=0;h>i;i++){var p=e[i];for(s=0;3>s;s++){var d=l[0==s?p.a:1==s?p.b:p.c],u=p.smoothGroup;for(r=d.length-1;r>=0;r--)(u&d[r])>0&&(u|=d[r],d.splice(r,1),r=d.length-1);d.push(u)}}var c=new Array(o);for(i=0;o>i;i++)if(!((n=l[i].length)<1)){var _=new Array(n);c[i]=_,_[0]=i;var y=t[i];for(s=1;n>s;s++){var g=new v;g.x=y.x,g.y=y.y,g.z=y.z,g.u=y.u,g.v=y.v,_[s]=t.length,t.push(g)}}for(o=t.length,i=0;h>i;i++)for(p=e[i],u=p.smoothGroup,s=0;3>s;s++)for(r=0==s?p.a:1==s?p.b:p.c,d=l[r],n=d.length,_=c[r],a=0;n>a;a++)if(0==u&&0==d[a]||(u&d[a])>0){var f=_[a];0==u&&(d.splice(a,1),_.splice(a,1)),0==s?p.a=f:1==s?p.b=f:p.c=f,a=n}},e.prototype.finalizeCurrentMaterial=function(){var t;t=new y(this._cur_mat.colorMap?this._cur_mat.colorMap.texture||_.getDefaultTexture():this._cur_mat.ambientColor),t.diffuseColor=this._cur_mat.diffuseColor,t.specularColor=this._cur_mat.specularColor,this.materialMode>=2&&(t.materialMode=g.MULTI_PASS),t.bothSides=this._cur_mat.twoSided,this._pFinalizeAsset(t,this._cur_mat.name),this._materials[this._cur_mat.name]=this._cur_mat,this._cur_mat.material=t,this._cur_mat=null},e.prototype.readNulTermstring=function(){for(var t,e="";(t=this._byteData.readUnsignedByte())>0;)e+=String.fromCharCode(t);return e},e.prototype.readTransform=function(){var t;return t=new Array(16),t[0]=this._byteData.readFloat(),t[2]=this._byteData.readFloat(),t[1]=this._byteData.readFloat(),t[3]=0,t[8]=this._byteData.readFloat(),t[10]=this._byteData.readFloat(),t[9]=this._byteData.readFloat(),t[11]=0,t[4]=this._byteData.readFloat(),t[6]=this._byteData.readFloat(),t[5]=this._byteData.readFloat(),t[7]=0,t[12]=this._byteData.readFloat(),t[14]=this._byteData.readFloat(),t[13]=this._byteData.readFloat(),t[15]=1,t},e.prototype.readColor=function(){var t,e,i,s,r;switch(t=this._byteData.readUnsignedShort(),e=this._byteData.readUnsignedInt(),t){case 16:i=255*this._byteData.readFloat(),s=255*this._byteData.readFloat(),r=255*this._byteData.readFloat();break;case 17:i=this._byteData.readUnsignedByte(),s=this._byteData.readUnsignedByte(),r=this._byteData.readUnsignedByte();break;default:this._byteData.position+=e-6}return i<<16|s<<8|r},e}(h);e.exports=x},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/net/URLLoaderDataFormat":void 0,"awayjs-core/lib/net/URLRequest":void 0,"awayjs-core/lib/parsers/ParserBase":void 0,"awayjs-core/lib/parsers/ParserUtils":void 0,"awayjs-display/lib/base/Geometry":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0,"awayjs-display/lib/entities/Mesh":void 0,"awayjs-renderergl/lib/parsers/data/FaceVO":void 0,"awayjs-renderergl/lib/parsers/data/MaterialVO":void 0,"awayjs-renderergl/lib/parsers/data/ObjectVO":void 0,"awayjs-renderergl/lib/parsers/data/TextureVO":void 0,"awayjs-renderergl/lib/parsers/data/VertexVO":void 0,"awayjs-stagegl/lib/materials/TriangleMaterialMode":void 0,"awayjs-stagegl/lib/materials/TriangleMethodMaterial":void 0,"awayjs-stagegl/lib/materials/utils/DefaultMaterialManager":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/OBJParser":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/net/URLLoaderDataFormat"),a=t("awayjs-core/lib/net/URLRequest"),n=t("awayjs-core/lib/parsers/ParserBase"),o=t("awayjs-core/lib/parsers/ParserUtils"),h=t("awayjs-display/lib/containers/DisplayObjectContainer"),l=t("awayjs-display/lib/base/TriangleSubGeometry"),p=t("awayjs-display/lib/base/Geometry"),d=t("awayjs-display/lib/entities/Mesh"),u=t("awayjs-stagegl/lib/materials/utils/DefaultMaterialManager"),c=t("awayjs-stagegl/lib/materials/methods/SpecularBasicMethod"),_=t("awayjs-stagegl/lib/materials/TriangleMethodMaterial"),y=t("awayjs-stagegl/lib/materials/TriangleMaterialMode"),g=function(t){function e(e){void 0===e&&(e=1),t.call(this,r.TEXT),this._mtlLibLoaded=!0,this._activeMaterialID="",this._scale=e}return i(e,t),Object.defineProperty(e.prototype,"scale",{set:function(t){this._scale=t},enumerable:!0,configurable:!0}),e.supportsType=function(t){return t=t.toLowerCase(),"obj"==t},e.supportsData=function(t){var e=o.toString(t),i=!1,s=!1;return e&&(i=-1!=e.indexOf("\nv "),s=-1!=e.indexOf("\nf ")),i&&s},e.prototype._iResolveDependency=function(t){if("mtl"==t.id){var e=o.toString(t.data);this.parseMtl(e)}else{var i;if(1!=t.assets.length)return;if(i=t.assets[0],i.assetType==s.TEXTURE){var r=new v;r.materialID=t.id,r.texture=i,this._materialLoaded.push(r),this._meshes.length>0&&this.applyMaterial(r)}}},e.prototype._iResolveDependencyFailure=function(t){if("mtl"==t.id)this._mtlLib=!1,this._mtlLibLoaded=!1;else{var e=new v;e.materialID=t.id,this._materialLoaded.push(e)}this._meshes.length>0&&this.applyMaterial(e)},e.prototype._pProceedParsing=function(){var t,e,i=String.fromCharCode(10);for(this._startedParsing||(this._textData=this._pGetTextData(),this._textData=this._textData.replace(/\\[\r\n]+\s*/gm," ")),-1==this._textData.indexOf(i)&&(i=String.fromCharCode(13)),this._startedParsing||(this._startedParsing=!0,this._vertices=new Array,this._vertexNormals=new Array,this._materialIDs=new Array,this._materialLoaded=new Array,this._meshes=new Array,this._uvs=new Array,this._stringLength=this._textData.length,this._charIndex=this._textData.indexOf(i,0),this._oldIndex=0,this._objects=new Array,this._objectIndex=0);this._charIndex<this._stringLength&&this._pHasTime();)if(this._charIndex=this._textData.indexOf(i,this._oldIndex),-1==this._charIndex&&(this._charIndex=this._stringLength),t=this._textData.substring(this._oldIndex,this._charIndex),t=t.split("\r").join(""),t=t.replace("  "," "),e=t.split(" "),this._oldIndex=this._charIndex+1,this.parseLine(e),this.parsingPaused)return n.MORE_TO_PARSE;return this._charIndex>=this._stringLength?this._mtlLib&&!this._mtlLibLoaded?n.MORE_TO_PARSE:(this.translate(),this.applyMaterials(),n.PARSING_DONE):n.MORE_TO_PARSE},e.prototype._pStartParsing=function(e){t.prototype._pStartParsing.call(this,e),this._pContent=new h},e.prototype.parseLine=function(t){switch(t[0]){case"mtllib":this._mtlLib=!0,this._mtlLibLoaded=!1,this.loadMtl(t[1]);break;case"g":this.createGroup(t);break;case"o":this.createObject(t);break;case"usemtl":this._mtlLib&&(t[1]||(t[1]="def000"),this._materialIDs.push(t[1]),this._activeMaterialID=t[1],this._currentGroup&&(this._currentGroup.materialID=this._activeMaterialID));break;case"v":this.parseVertex(t);break;case"vt":this.parseUV(t);break;case"vn":this.parseVertexNormal(t);break;case"f":this.parseFace(t)}},e.prototype.translate=function(){for(var t=0;t<this._objects.length;++t)for(var e,i,s,r,a,n,o,h=this._objects[t].groups,l=h.length,c=0;l>c;++c){for(s=new p,e=h[c].materialGroups,i=e.length,a=0;i>a;++a)this.translateMaterialGroup(e[a],s);if(0!=s.subGeometries.length){if(this._pFinalizeAsset(s),o=new _(u.getDefaultTexture()),this.materialMode>=2&&(o.materialMode=y.MULTI_PASS),r=new d(s,o),r.name=this._objects[t].name?this._objects[t].name:h[c].name?h[c].name:"",this._meshes.push(r),o.name=""!=h[c].materialID?h[c].materialID+"~"+r.name:this._lastMtlID+"~"+r.name,r.subMeshes.length>1)for(n=1;n<r.subMeshes.length;++n)r.subMeshes[n].material=o;this._pContent.addChild(r),this._pFinalizeAsset(r)}}},e.prototype.translateMaterialGroup=function(t,e){var i,s,r,a=t.faces,n=a.length,o=new Array,h=new Array,p=new Array,d=new Array;this._realIndices=[],this._vertexIndex=0;for(var u,c=0;n>c;++c)for(i=a[c],s=i.indexIds.length-1,u=1;s>u;++u)this.translateVertexData(i,u,o,h,d,p),this.translateVertexData(i,0,o,h,d,p),this.translateVertexData(i,u+1,o,h,d,p);o.length>0&&(r=new l(!0),r.autoDeriveNormals=p.length?!1:!0,r.updateIndices(d),r.updatePositions(o),r.updateVertexNormals(p),r.updateUVs(h),e.addSubGeometry(r))},e.prototype.translateVertexData=function(t,e,i,s,r,a){var n,o,h,l;if(this._realIndices[t.indexIds[e]])n=this._realIndices[t.indexIds[e]]-1;else if(n=this._vertexIndex,this._realIndices[t.indexIds[e]]=++this._vertexIndex,o=this._vertices[t.vertexIndices[e]-1],i.push(o.x*this._scale,o.y*this._scale,o.z*this._scale),t.normalIndices.length>0&&(h=this._vertexNormals[t.normalIndices[e]-1],a.push(h.x,h.y,h.z)),t.uvIndices.length>0)try{l=this._uvs[t.uvIndices[e]-1],s.push(l.u,l.v)}catch(p){switch(e){case 0:s.push(0,1);break;case 1:s.push(.5,0);break;case 2:s.push(1,1)}}r.push(n)},e.prototype.createObject=function(t){this._currentGroup=null,this._currentMaterialGroup=null,this._objects.push(this._currentObject=new f),t&&(this._currentObject.name=t[1])},e.prototype.createGroup=function(t){this._currentObject||this.createObject(null),this._currentGroup=new m,this._currentGroup.materialID=this._activeMaterialID,t&&(this._currentGroup.name=t[1]),this._currentObject.groups.push(this._currentGroup),this.createMaterialGroup(null)},e.prototype.createMaterialGroup=function(t){this._currentMaterialGroup=new b,t&&(this._currentMaterialGroup.url=t[1]),this._currentGroup.materialGroups.push(this._currentMaterialGroup)},e.prototype.parseVertex=function(t){var e,i,s;if(t.length>4){for(var r,a=[],n=1;n<t.length;++n)r=parseFloat(t[n]),isNaN(r)||a.push(r);e=a[0],i=a[1],s=-a[2],this._vertices.push(new D(e,i,s))}else e=parseFloat(t[1]),i=parseFloat(t[2]),s=-parseFloat(t[3]),this._vertices.push(new D(e,i,s))},e.prototype.parseUV=function(t){if(t.length>3){for(var e,i=[],s=1;s<t.length;++s)e=parseFloat(t[s]),isNaN(e)||i.push(e);this._uvs.push(new P(i[0],1-i[1]))}else this._uvs.push(new P(parseFloat(t[1]),1-parseFloat(t[2])))},e.prototype.parseVertexNormal=function(t){if(t.length>4){for(var e,i=[],s=1;s<t.length;++s)e=parseFloat(t[s]),isNaN(e)||i.push(e);this._vertexNormals.push(new D(i[0],i[1],-i[2]))}else this._vertexNormals.push(new D(parseFloat(t[1]),parseFloat(t[2]),-parseFloat(t[3])))},e.prototype.parseFace=function(t){var e=t.length,i=new x;this._currentGroup||this.createGroup(null);for(var s,r=1;e>r;++r)""!=t[r]&&(s=t[r].split("/"),i.vertexIndices.push(this.parseIndex(parseInt(s[0]),this._vertices.length)),s[1]&&String(s[1]).length>0&&i.uvIndices.push(this.parseIndex(parseInt(s[1]),this._uvs.length)),s[2]&&String(s[2]).length>0&&i.normalIndices.push(this.parseIndex(parseInt(s[2]),this._vertexNormals.length)),i.indexIds.push(t[r]));this._currentMaterialGroup.faces.push(i)},e.prototype.parseIndex=function(t,e){return 0>t?t+e+1:t},e.prototype.parseMtl=function(t){for(var e,i,s,r,n,o,h,l,p,d,u,g,f=t.split("newmtl"),m=0;m<f.length;++m){for(e=f[m].split("\r").join("").split("\n"),1==e.length&&(e=f[m].split(String.fromCharCode(13))),h=l=p=16777215,d=0,n=!1,o=!1,u=1,g="",s=0;s<e.length;++s)if(e[s]=e[s].replace(/\s+$/,""),"#"!=e[s].substring(0,1)&&(0==s||""!=e[s]))if(i=e[s].split(" "),(9==String(i[0]).charCodeAt(0)||32==String(i[0]).charCodeAt(0))&&(i[0]=i[0].substring(1,i[0].length)),0==s)this._lastMtlID=i.join(""),this._lastMtlID=""==this._lastMtlID?"def000":this._lastMtlID;else switch(i[0]){case"Ka":i[1]&&!isNaN(Number(i[1]))&&i[2]&&!isNaN(Number(i[2]))&&i[3]&&!isNaN(Number(i[3]))&&(l=255*i[1]<<16|255*i[2]<<8|255*i[3]);break;case"Ks":i[1]&&!isNaN(Number(i[1]))&&i[2]&&!isNaN(Number(i[2]))&&i[3]&&!isNaN(Number(i[3]))&&(p=255*i[1]<<16|255*i[2]<<8|255*i[3],n=!0);break;case"Ns":i[1]&&!isNaN(Number(i[1]))&&(d=.001*Number(i[1])),0==d&&(n=!1);break;case"Kd":i[1]&&!isNaN(Number(i[1]))&&i[2]&&!isNaN(Number(i[2]))&&i[3]&&!isNaN(Number(i[3]))&&(h=255*i[1]<<16|255*i[2]<<8|255*i[3],o=!0);break;case"tr":case"d":i[1]&&!isNaN(Number(i[1]))&&(u=Number(i[1]));break;case"map_Kd":g=this.parseMapKdString(i),g=g.replace(/\\/g,"/")}if(""!=g){if(n){r=new c,r.specularColor=p,r.specular=d;var b=new w;b.alpha=u,b.basicSpecularMethod=r,b.materialID=this._lastMtlID,this._materialSpecularData||(this._materialSpecularData=new Array),this._materialSpecularData.push(b)}this._pAddDependency(this._lastMtlID,new a(g))}else if(o&&!isNaN(l)){var x=new v;x.materialID=this._lastMtlID,0==u&&console.log("Warning: an alpha value of 0 was found in mtl color tag (Tr or d) ref:"+this._lastMtlID+", mesh(es) using it will be invisible!");var P;if(this.materialMode<2){P=new _(l);var D=P;D.alpha=u,D.diffuseColor=h,D.repeat=!0,n&&(D.specularColor=p,D.specular=d)}else{P=new _(l),P.materialMode=y.MULTI_PASS;var j=P;j.diffuseColor=h,j.repeat=!0,n&&(j.specularColor=p,j.specular=d)}x.cm=P,this._materialLoaded.push(x),this._meshes.length>0&&this.applyMaterial(x)}}this._mtlLibLoaded=!0},e.prototype.parseMapKdString=function(t){var e,i,s="";for(e=1;e<t.length;){switch(t[e]){case"-blendu":case"-blendv":case"-cc":case"-clamp":case"-texres":e+=2;break;case"-mm":e+=3;break;case"-o":case"-s":case"-t":e+=4;continue;default:i=!0}if(i)break}for(e;e<t.length;e++)s+=t[e],s+=" ";return s=s.replace(/\s+$/,"")},e.prototype.loadMtl=function(t){this._pAddDependency("mtl",new a(t),!0),this._pPauseAndRetrieveDependencies()},e.prototype.applyMaterial=function(t){for(var e,i,s,r,a,n=0;n<this._meshes.length;++n)if(i=this._meshes[n],e=i.material.name.split("~"),e[0]==t.materialID){if(t.cm)i.material&&(i.material=null),i.material=t.cm;else if(t.texture)if(this.materialMode<2){if(s=i.material,s.texture=t.texture,s.color=t.color,s.alpha=t.alpha,s.repeat=!0,t.specularMethod)s.specularMethod=null,s.specularMethod=t.specularMethod;else if(this._materialSpecularData)for(r=0;r<this._materialSpecularData.length;++r)if(a=this._materialSpecularData[r],a.materialID==t.materialID){s.specularMethod=null,s.specularMethod=a.basicSpecularMethod,s.color=a.color,s.alpha=a.alpha;break}}else if(s=i.material,s.materialMode=y.MULTI_PASS,s.texture=t.texture,s.color=t.color,s.repeat=!0,t.specularMethod)s.specularMethod=null,s.specularMethod=t.specularMethod;else if(this._materialSpecularData)for(r=0;r<this._materialSpecularData.length;++r)if(a=this._materialSpecularData[r],a.materialID==t.materialID){s.specularMethod=null,s.specularMethod=a.basicSpecularMethod,s.color=a.color;break}i.material.name=e[1]?e[1]:e[0],this._meshes.splice(n,1),--n}(t.cm||s)&&this._pFinalizeAsset(t.cm||s)},e.prototype.applyMaterials=function(){if(0!=this._materialLoaded.length)for(var t=0;t<this._materialLoaded.length;++t)this.applyMaterial(this._materialLoaded[t])},e}(n),f=function(){function t(){this.groups=new Array}return t}(),m=function(){function t(){this.materialGroups=new Array}return t}(),b=function(){function t(){this.faces=new Array}return t}(),w=function(){function t(){this.color=16777215,this.alpha=1}return t}(),v=function(){function t(){this.color=16777215,this.alpha=1}return t}(),x=function(){function t(){this.vertexIndices=new Array,this.uvIndices=new Array,this.normalIndices=new Array,this.indexIds=new Array}return t}(),P=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._u=t,this._v=e}return Object.defineProperty(t.prototype,"v",{get:function(){return this._v},set:function(t){this._v=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this._u},set:function(t){this._u=t},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this._u,this._v)},t.prototype.toString=function(){return this._u+","+this._v},t}(),D=function(){function t(t,e,i,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),this._x=t,this._y=e,this._z=i,this._index=s}return Object.defineProperty(t.prototype,"index",{get:function(){return this._index},set:function(t){this._index=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this._x,this._y,this._z)},t}();e.exports=g},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/net/URLLoaderDataFormat":void 0,"awayjs-core/lib/net/URLRequest":void 0,"awayjs-core/lib/parsers/ParserBase":void 0,"awayjs-core/lib/parsers/ParserUtils":void 0,"awayjs-display/lib/base/Geometry":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-display/lib/containers/DisplayObjectContainer":void 0,"awayjs-display/lib/entities/Mesh":void 0,"awayjs-stagegl/lib/materials/TriangleMaterialMode":void 0,"awayjs-stagegl/lib/materials/TriangleMethodMaterial":void 0,"awayjs-stagegl/lib/materials/methods/SpecularBasicMethod":void 0,"awayjs-stagegl/lib/materials/utils/DefaultMaterialManager":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/Parsers":[function(t,e){var i=t("awayjs-core/lib/library/AssetLoader"),s=t("awayjs-renderergl/lib/parsers/AWDParser"),r=t("awayjs-renderergl/lib/parsers/Max3DSParser"),a=t("awayjs-renderergl/lib/parsers/MD2Parser"),n=t("awayjs-renderergl/lib/parsers/OBJParser"),o=function(){function t(){}return t.enableAllBundled=function(){i.enableParsers(t.ALL_BUNDLED)},t.ALL_BUNDLED=Array(s,r,a,n),t}();e.exports=o},{"awayjs-core/lib/library/AssetLoader":void 0,"awayjs-renderergl/lib/parsers/AWDParser":void 0,"awayjs-renderergl/lib/parsers/MD2Parser":void 0,"awayjs-renderergl/lib/parsers/Max3DSParser":void 0,"awayjs-renderergl/lib/parsers/OBJParser":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/data/AWDBlock":[function(t,e){var i=function(){function t(){}return t.prototype.dispose=function(){this.id=null,this.bytes=null,this.errorMessages=null,this.uvsForVertexAnimation=null},t.prototype.addError=function(t){this.errorMessages||(this.errorMessages=new Array),this.errorMessages.push(t)},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/data/AWDProperties":[function(t,e){var i=function(){function t(){}return t.prototype.set=function(t,e){this[t.toString()]=e},t.prototype.get=function(t,e){return this.hasOwnProperty(t.toString())?this[t.toString()]:e},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/data/BaseFrameData":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/data/BitFlags":[function(t,e){var i=function(){function t(){}return t.test=function(t,e){return(t&e)==e},t.FLAG1=1,t.FLAG2=2,t.FLAG3=4,t.FLAG4=8,t.FLAG5=16,t.FLAG6=32,t.FLAG7=64,t.FLAG8=128,t.FLAG9=256,t.FLAG10=512,t.FLAG11=1024,t.FLAG12=2048,t.FLAG13=4096,t.FLAG14=8192,t.FLAG15=16384,t.FLAG16=32768,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/data/BoundsData":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/data/FaceVO":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/data/FrameData":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/data/HierarchyData":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/data/MaterialVO":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/data/ObjectVO":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/data/TextureVO":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/parsers/data/VertexVO":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/pick/JSPickingCollider":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-display/lib/base/TriangleSubGeometry"),a=t("awayjs-renderergl/lib/pick/PickingColliderBase"),n=function(t){function e(e){void 0===e&&(e=!1),t.call(this),this._findClosestCollision=e}return i(e,t),e.prototype._pTestRenderableCollision=function(t,e,i){for(var a,n,o,h,l,p,d,u,c,_,y,g,f,m,b,w,v,x,P,D,j,C,T,A,S,O,E,M,R,I,N,L,F,V,B,U,z,k,G,H,X,W=t.getIndexData().data,Y=-1,Z=t.materialOwner.material.bothSides,q=t.getVertexData(r.POSITION_DATA).data,K=t.getVertexData(r.POSITION_DATA).dataPerVertex,J=t.getVertexOffset(r.POSITION_DATA),Q=t.getVertexData(r.UV_DATA).data,$=t.getVertexData(r.UV_DATA).dataPerVertex,te=t.getVertexOffset(r.UV_DATA),ee=W.length,ie=0;ee>ie;ie+=3)if(n=J+W[ie]*K,o=J+W[ie+1]*K,h=J+W[ie+2]*K,x=q[n],P=q[n+1],D=q[n+2],j=q[o],C=q[o+1],T=q[o+2],A=q[h],S=q[h+1],O=q[h+2],E=j-x,M=C-P,R=T-D,I=A-x,N=S-P,L=O-D,u=M*L-R*N,c=R*I-E*L,_=E*N-M*I,F=1/Math.sqrt(u*u+c*c+_*_),u*=F,c*=F,_*=F,V=u*this.rayDirection.x+c*+this.rayDirection.y+_*this.rayDirection.z,!Z&&0>V||Z&&0!=V){if(B=-(u*x+c*P+_*D),U=-(u*this.rayPosition.x+c*this.rayPosition.y+_*this.rayPosition.z+B),a=U/V,y=this.rayPosition.x+a*this.rayDirection.x,g=this.rayPosition.y+a*this.rayDirection.y,f=this.rayPosition.z+a*this.rayDirection.z,z=E*I+M*N+R*L,k=E*E+M*M+R*R,G=I*I+N*N+L*L,l=y-x,p=g-P,d=f-D,H=l*E+p*M+d*R,X=l*I+p*N+d*L,m=1/(k*G-z*z),w=m*(G*H-z*X),v=m*(-z*H+k*X),0>w)continue;if(0>v)continue;if(b=1-w-v,!(0>b)&&a>0&&i>a&&(i=a,Y=ie/3,e.rayEntryDistance=a,e.localPosition=new s(y,g,f),e.localNormal=new s(u,c,_),e.uv=this._pGetCollisionUV(W,Q,ie,w,v,b,te,$),e.index=ie,!this._findClosestCollision))return!0}return Y>=0?!0:!1},e}(a);e.exports=n},{"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-renderergl/lib/pick/PickingColliderBase":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/pick/PickingColliderBase":[function(t,e){var i=t("awayjs-core/lib/geom/Point"),s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-core/lib/errors/AbstractMethodError"),a=t("awayjs-display/lib/pool/RenderablePool"),n=t("awayjs-stagegl/lib/pool/BillboardRenderable"),o=t("awayjs-stagegl/lib/pool/TriangleSubMeshRenderable"),h=function(){function t(){this._billboardRenderablePool=a.getPool(n),this._subMeshRenderablePool=a.getPool(o)}return t.prototype._pPetCollisionNormal=function(t,e,i){var r=new s,a=3*t[i],n=3*t[i+1],o=3*t[i+2],h=new s(e[a],e[a+1],e[a+2]),l=new s(e[n],e[n+1],e[n+2]),p=new s(e[o],e[o+1],e[o+2]),d=l.subtract(h),u=p.subtract(h);return r=d.crossProduct(u),r.normalize(),r},t.prototype._pGetCollisionUV=function(t,e,r,a,n,o,h,l){var p=new i,d=t[r]*l+h,u=new s(e[d],e[d+1]);d=t[r+1]*l+h;var c=new s(e[d],e[d+1]);d=t[r+2]*l+h;var _=new s(e[d],e[d+1]);return p.x=o*u.x+a*c.x+n*_.x,p.y=o*u.y+a*c.y+n*_.y,p},t.prototype._pTestRenderableCollision=function(){throw new r},t.prototype.setLocalRay=function(t,e){this.rayPosition=t,this.rayDirection=e},t.prototype.testBillboardCollision=function(t,e,i){return this.setLocalRay(e.localRayPosition,e.localRayDirection),e.materialOwner=null,this._pTestRenderableCollision(this._billboardRenderablePool.getItem(t),e,i)?(i=e.rayEntryDistance,e.materialOwner=t,!0):!1},t.prototype.testMeshCollision=function(t,e,i,s){this.setLocalRay(e.localRayPosition,e.localRayDirection),e.materialOwner=null;for(var r,a=t.subMeshes.length,n=0;a>n;++n)if(r=t.subMeshes[n],this._pTestRenderableCollision(this._subMeshRenderablePool.getItem(r),e,i)&&(i=e.rayEntryDistance,e.materialOwner=r,!s))return!0;return null!=e.materialOwner},t}();e.exports=h},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/geom/Point":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/pool/RenderablePool":void 0,"awayjs-stagegl/lib/pool/BillboardRenderable":void 0,"awayjs-stagegl/lib/pool/TriangleSubMeshRenderable":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/pick/ShaderPicker":[function(t,e){var i=t("awayjs-core/lib/utils/Debug"),s=t("awayjs-core/lib/base/BitmapData"),r=t("awayjs-core/lib/geom/Matrix3DUtils"),a=t("awayjs-core/lib/geom/Point"),n=t("awayjs-core/lib/geom/Rectangle"),o=t("awayjs-core/lib/geom/Vector3D"),h=t("awayjs-display/lib/base/TriangleSubGeometry"),l=t("awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler"),p=t("awayjs-stagegl/lib/base/ContextGLBlendFactor"),d=t("awayjs-stagegl/lib/base/ContextGLClearMask"),u=t("awayjs-stagegl/lib/base/ContextGLCompareMode"),c=t("awayjs-stagegl/lib/base/ContextGLProgramType"),_=t("awayjs-stagegl/lib/base/ContextGLTriangleFace"),y=function(){function t(t){void 0===t&&(t=!1),this._onlyMouseEnabled=!0,this._interactives=new Array,this._localHitPosition=new o,this._hitUV=new a,this._localHitNormal=new o,this._rayPos=new o,this._rayDir=new o,this._shaderPickingDetails=t,this._id=new Array(4),this._viewportData=new Array(4),this._boundOffsetScale=new Array(8),this._boundOffsetScale[3]=0,this._boundOffsetScale[7]=1}return Object.defineProperty(t.prototype,"onlyMouseEnabled",{get:function(){return this._onlyMouseEnabled},set:function(t){this._onlyMouseEnabled=t},enumerable:!0,configurable:!0}),t.prototype.getViewCollision=function(t,e,i){var r=i.iEntityCollector;if(this._stage=i.renderer.stage,!this._stage)return null;if(this._context=this._stage.context,this._viewportData[0]=i.width,this._viewportData[1]=i.height,this._viewportData[2]=-(this._projX=2*t/i.width-1),this._viewportData[3]=this._projY=2*e/i.height-1,this._potentialFound=!1,this._blendedRenderableHead=null,this._opaqueRenderableHead=null,this.pDraw(r,null),this._context.setVertexBufferAt(0,null),!this._context||!this._potentialFound)return null;if(this._bitmapData||(this._bitmapData=new s(1,1,!1,0)),this._context.drawToBitmapData(this._bitmapData),this._hitColor=this._bitmapData.getPixel(0,0),!this._hitColor)return this._context.present(),null;if(this._hitRenderable=this._interactives[this._hitColor-1],this._hitEntity=this._hitRenderable.sourceEntity,this._onlyMouseEnabled&&!this._hitEntity._iIsMouseEnabled())return null;var a=this._hitEntity._iPickingCollisionVO;return this._shaderPickingDetails?(this.getHitDetails(i.camera),a.localPosition=this._localHitPosition,a.localNormal=this._localHitNormal,a.uv=this._hitUV,a.index=this._faceIndex):(a.localPosition=null,a.localNormal=null,a.uv=null,a.index=0),a},t.prototype.getSceneCollision=function(){return null},t.prototype.pDraw=function(e){e.camera;this._context.clear(0,0,0,1),this._stage.scissorRect=t.MOUSE_SCISSOR_RECT,this._interactives.length=this._interactiveId=0,this._objectProgram||this.initObjectProgram(),this._context.setBlendFactors(p.ONE,p.ZERO),this._context.setDepthTest(!0,u.LESS),this._context.setProgram(this._objectProgram),this._context.setProgramConstantsFromArray(c.VERTEX,4,this._viewportData,1)},t.prototype.drawRenderables=function(t,e){for(var i=r.CALCULATION_MATRIX,s=e.viewProjection;t;)t.sourceEntity.scene&&t.sourceEntity._iIsMouseEnabled()?(this._potentialFound=!0,this._context.setCulling(t.materialOwner.material.bothSides?_.NONE:_.BACK,e.projection.coordinateSystem),this._interactives[this._interactiveId++]=t,this._id[1]=(this._interactiveId>>8)/255,this._id[2]=(255&this._interactiveId)/255,i.copyFrom(t.sourceEntity.getRenderSceneTransform(e)),i.append(s),this._context.setProgramConstantsFromMatrix(c.VERTEX,0,i,!0),this._context.setProgramConstantsFromArray(c.FRAGMENT,0,this._id,1),this._context.activateBuffer(0,t.getVertexData(h.POSITION_DATA),t.getVertexOffset(h.POSITION_DATA),h.POSITION_FORMAT),this._context.drawTriangles(this._context.getIndexBuffer(t.getIndexData()),0,t.numTriangles),t=t.next):t=t.next},t.prototype.updateRay=function(t){this._rayPos=t.scenePosition,this._rayDir=t.getRay(this._projX,this._projY,1),this._rayDir.normalize()},t.prototype.initObjectProgram=function(){var t,e;this._objectProgram=this._context.createProgram(),t="m44 vt0, va0, vc0			\nmul vt1.xy, vt0.w, vc4.zw	\nadd vt0.xy, vt0.xy, vt1.xy	\nmul vt0.xy, vt0.xy, vc4.xy	\nmov op, vt0	\n",e="mov oc, fc0",i.throwPIR("ShaderPicker","initTriangleProgram","Dependency: initObjectProgram")},t.prototype.initTriangleProgram=function(){var t,e;this._triangleProgram=this._context.createProgram(),t="add vt0, va0, vc5 			\nmul vt0, vt0, vc6 			\nmov v0, vt0				\nm44 vt0, va0, vc0			\nmul vt1.xy, vt0.w, vc4.zw	\nadd vt0.xy, vt0.xy, vt1.xy	\nmul vt0.xy, vt0.xy, vc4.xy	\nmov op, vt0	\n",e="mov oc, v0";var i=(new l).assemble("part vertex 1\n"+t+"endpart").vertex.data,s=(new l).assemble("part fragment 1\n"+e+"endpart").fragment.data;this._triangleProgram.upload(i,s)},t.prototype.getHitDetails=function(t){this.getApproximatePosition(t),this.getPreciseDetails(t)},t.prototype.getApproximatePosition=function(e){var i,s,a,n,o,l,p,u=this._hitRenderable.sourceEntity.bounds.aabb,_=r.CALCULATION_MATRIX;_.copyFrom(this._hitRenderable.sourceEntity.getRenderSceneTransform(e)),_.append(e.viewProjection),this._triangleProgram||this.initTriangleProgram(),this._boundOffsetScale[4]=1/(s=u.width),this._boundOffsetScale[5]=1/(a=u.height),this._boundOffsetScale[6]=1/(n=u.depth),this._boundOffsetScale[0]=o=-u.x,this._boundOffsetScale[1]=l=-u.y,this._boundOffsetScale[2]=p=-u.z,this._context.setProgram(this._triangleProgram),this._context.clear(0,0,0,0,1,0,d.DEPTH),this._context.setScissorRectangle(t.MOUSE_SCISSOR_RECT),this._context.setProgramConstantsFromMatrix(c.VERTEX,0,_,!0),this._context.setProgramConstantsFromArray(c.VERTEX,5,this._boundOffsetScale,2),this._context.activateBuffer(0,this._hitRenderable.getVertexData(h.POSITION_DATA),this._hitRenderable.getVertexOffset(h.POSITION_DATA),h.POSITION_FORMAT),this._context.drawTriangles(this._context.getIndexBuffer(this._hitRenderable.getIndexData()),0,this._hitRenderable.numTriangles),this._context.drawToBitmapData(this._bitmapData),i=this._bitmapData.getPixel(0,0),this._localHitPosition.x=(i>>16&255)*s/255-o,this._localHitPosition.y=(i>>8&255)*a/255-l,this._localHitPosition.z=(255&i)*n/255-p},t.prototype.getPreciseDetails=function(t){var e,i,s,r,a,n,o,l,p,d,u,c,_,y,g,f,m,b,w,v,x,P,D,j,C,T,A,S,O,E,M,R,I,N,L,F,V,B,U,z,k,G,H,X,W,Y,Z,q,K=se.length,J=0,Q=1,$=2,te=this._localHitPosition.x,ee=this._localHitPosition.y,ie=this._localHitPosition.z,se=this._hitRenderable.getIndexData().data,re=this._hitRenderable.getVertexData(h.POSITION_DATA).data,ae=this._hitRenderable.getVertexData(h.POSITION_DATA).dataPerVertex,ne=this._hitRenderable.getVertexOffset(h.POSITION_DATA),oe=this._hitRenderable.getVertexData(h.UV_DATA).data,he=this._hitRenderable.getVertexData(h.UV_DATA).dataPerVertex,le=this._hitRenderable.getVertexOffset(h.UV_DATA),pe=(this._hitRenderable.getVertexData(h.NORMAL_DATA).data,this._hitRenderable.getVertexData(h.NORMAL_DATA).dataPerVertex),de=this._hitRenderable.getVertexOffset(h.NORMAL_DATA);
for(this.updateRay(t);K>J;){if(d=ne+se[J]*ae,u=ne+se[Q]*ae,c=ne+se[$]*ae,e=re[d],i=re[d+1],s=re[d+2],r=re[u],a=re[u+1],n=re[u+2],o=re[c],l=re[c+1],p=re[c+2],!(e>te&&r>te&&o>te||i>ee&&a>ee&&l>ee||s>ie&&n>ie&&p>ie||te>e&&te>r&&te>o||ee>i&&ee>a&&ee>l||ie>s&&ie>n&&ie>p)&&(_=o-e,y=l-i,g=p-s,f=r-e,m=a-i,b=n-s,w=te-e,v=ee-i,x=ie-s,O=_*_+y*y+g*g,E=_*f+y*m+g*b,M=_*w+y*v+g*x,R=f*f+m*m+b*b,I=f*w+m*v+b*x,F=1/(O*R-E*E),N=(R*M-E*I)*F,L=(O*I-E*M)*F,N>=0&&L>=0&&1>=N+L))return P=de+se[J]*pe,D=de+se[Q]*pe,j=de+se[$]*pe,C=se[P]+se[D]+se[j],T=se[P+1]+se[D+1]+se[j+1],A=se[P+2]+se[D+2]+se[j+2],S=Math.sqrt(C*C+T*T+A*A),C/=S,T/=S,A/=S,this.getPrecisePosition(this._hitRenderable.sourceEntity.inverseSceneTransform,C,T,A,e,i,s),w=this._localHitPosition.x-e,v=this._localHitPosition.y-i,x=this._localHitPosition.z-s,G=r-e,H=a-i,X=n-s,W=o-e,Y=l-i,Z=p-s,this._localHitNormal.x=H*Z-X*Y,this._localHitNormal.y=X*W-G*Z,this._localHitNormal.z=G*Y-H*W,q=1/Math.sqrt(this._localHitNormal.x*this._localHitNormal.x+this._localHitNormal.y*this._localHitNormal.y+this._localHitNormal.z*this._localHitNormal.z),this._localHitNormal.x*=q,this._localHitNormal.y*=q,this._localHitNormal.z*=q,M=_*w+y*v+g*x,I=f*w+m*v+b*x,N=(R*M-E*I)*F,L=(O*I-E*M)*F,U=le+se[J]*he,z=le+se[Q]*he,k=le+se[$]*he,V=oe[U],B=oe[U+1],this._hitUV.x=V+L*(oe[z]-V)+N*(oe[k]-V),this._hitUV.y=B+L*(oe[z+1]-B)+N*(oe[k+1]-B),void(this._faceIndex=J);J+=3,Q+=3,$+=3}},t.prototype.getPrecisePosition=function(t,e,i,s,a,n,o){var h,l,p,d,u,c,_,y=r.RAW_DATA_CONTAINER,g=this._rayPos.x,f=this._rayPos.y,m=this._rayPos.z;d=this._rayDir.x,u=this._rayDir.y,c=this._rayDir.z,t.copyRawDataTo(y),h=y[0]*d+y[4]*u+y[8]*c,l=y[1]*d+y[5]*u+y[9]*c,p=y[2]*d+y[6]*u+y[10]*c,d=y[0]*g+y[4]*f+y[8]*m+y[12],u=y[1]*g+y[5]*f+y[9]*m+y[13],c=y[2]*g+y[6]*f+y[10]*m+y[14],_=((a-d)*e+(n-u)*i+(o-c)*s)/(h*e+l*i+p*s),this._localHitPosition.x=d+h*_,this._localHitPosition.y=u+l*_,this._localHitPosition.z=c+p*_},t.prototype.dispose=function(){this._bitmapData.dispose(),this._triangleProgram&&this._triangleProgram.dispose(),this._objectProgram&&this._objectProgram.dispose(),this._triangleProgram=null,this._objectProgram=null,this._bitmapData=null,this._hitRenderable=null,this._hitEntity=null},t.MOUSE_SCISSOR_RECT=new n(0,0,1,1),t}();e.exports=y},{"awayjs-core/lib/base/BitmapData":void 0,"awayjs-core/lib/geom/Matrix3DUtils":void 0,"awayjs-core/lib/geom/Point":void 0,"awayjs-core/lib/geom/Rectangle":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-core/lib/utils/Debug":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler":void 0,"awayjs-stagegl/lib/base/ContextGLBlendFactor":void 0,"awayjs-stagegl/lib/base/ContextGLClearMask":void 0,"awayjs-stagegl/lib/base/ContextGLCompareMode":void 0,"awayjs-stagegl/lib/base/ContextGLProgramType":void 0,"awayjs-stagegl/lib/base/ContextGLTriangleFace":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/tools/commands/Merge":[function(t,e){var i=t("awayjs-core/lib/geom/Matrix3DUtils"),s=t("awayjs-display/lib/base/Geometry"),r=t("awayjs-display/lib/base/TriangleSubGeometry"),a=t("awayjs-display/lib/entities/Mesh"),n=function(){function t(t,e,i){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===i&&(i=!1),this._keepMaterial=t,this._disposeSources=e,this._objectSpace=i}return Object.defineProperty(t.prototype,"disposeSources",{get:function(){return this._disposeSources},set:function(t){this._disposeSources=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keepMaterial",{get:function(){return this._keepMaterial},set:function(t){this._keepMaterial=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectSpace",{get:function(){return this._objectSpace},set:function(t){this._objectSpace=t},enumerable:!0,configurable:!0}),t.prototype.applyToContainer=function(t,e){this.reset(),this.parseContainer(t,e),this.collect(t,!1),this.merge(t,this._disposeSources)},t.prototype.applyToMeshes=function(t,e){if(this.reset(),e.length){for(var i=0;i<e.length;i++)e[i]!=t&&this.collect(e[i],this._disposeSources);this.collect(t,!1),this.merge(t,this._disposeSources)}},t.prototype.apply=function(t,e){this.reset(),this.collect(e,this._disposeSources),this.collect(t,!1),this.merge(t,this._disposeSources)},t.prototype.reset=function(){this._toDispose=new Array,this._geomVOs=new Array},t.prototype.merge=function(t,e){var i,a,n,o,h;for(n=t.geometry,o=t.geometry=new s,a=t.subMeshes.length,h=this._geomVOs.length>1,i=0;i<this._geomVOs.length;i++){var l,p=new r(!0);p.autoDeriveNormals=!1,p.autoDeriveTangents=!1,l=this._geomVOs[i],p.updateIndices(l.indices),p.updatePositions(l.vertices),p.updateVertexNormals(l.normals),p.updateVertexTangents(l.tangents),p.updateUVs(l.uvs),o.addSubGeometry(p),this._keepMaterial&&h&&(t.subMeshes[a].material=l.material)}if(this._keepMaterial&&!h&&this._geomVOs.length&&(t.material=this._geomVOs[0].material),e){for(var d,i,u=this._toDispose.length;u>i;i++)d=this._toDispose[i],d.geometry.dispose(),d.dispose();n.dispose()}this._toDispose=null},t.prototype.collect=function(t,e){if(t.geometry){var s,r,a=t.geometry.subGeometries;for(s=0;s<a.length;s++){var n,o,h,l,p,d,u,c,_,y,g,f,m,b,w,v,x;for(_=a[s],b=_.positions,w=_.vertexNormals,v=_.vertexTangents,x=_.uvs,y=this.getSubGeomData(t.subMeshes[s].material||t.material),g=this._objectSpace?y.vertices:new Array,f=this._objectSpace?y.normals:new Array,m=this._objectSpace?y.tangents:new Array,l=g.length,p=f.length,d=m.length,u=y.uvs.length,o=_.numVertices,n=0;o>n;n++)r=3*n,g[l++]=b[r],g[l++]=b[r+1],g[l++]=b[r+2],f[p++]=w[r],f[p++]=w[r+1],f[p++]=w[r+2],m[d++]=v[r],m[d++]=v[r+1],m[d++]=v[r+2],y.uvs[u++]=x[2*n],y.uvs[u++]=x[2*n+1];for(c=this._objectSpace?0:y.vertices.length/3,h=y.indices.length,o=_.numTriangles,n=0;o>n;n++)r=3*n,y.indices[h++]=_.indices[r]+c,y.indices[h++]=_.indices[r+1]+c,y.indices[h++]=_.indices[r+2]+c;if(!this._objectSpace)for(t.sceneTransform.transformVectors(g,g),i.deltaTransformVectors(t.sceneTransform,f,f),i.deltaTransformVectors(t.sceneTransform,m,m),l=y.vertices.length,p=y.normals.length,d=y.tangents.length,o=g.length,n=0;o>n;n++)y.vertices[l++]=g[n],y.normals[p++]=f[n],y.tangents[d++]=m[n]}e&&this._toDispose.push(t)}},t.prototype.getSubGeomData=function(t){var e;if(this._keepMaterial){var i,s;for(s=this._geomVOs.length,i=0;s>i;i++)if(this._geomVOs[i].material==t){e=this._geomVOs[i];break}}else this._geomVOs.length&&(e=this._geomVOs[0]);return e||(e=new o,e.vertices=new Array,e.normals=new Array,e.tangents=new Array,e.uvs=new Array,e.indices=new Array,e.material=t,this._geomVOs.push(e)),e},t.prototype.parseContainer=function(t,e){var i,s;for(e instanceof a&&e!=t&&this.collect(e,this._disposeSources),s=0;s<e.numChildren;++s)i=e.getChildAt(s),this.parseContainer(t,i)},t}(),o=function(){function t(){}return t}();e.exports=n},{"awayjs-core/lib/geom/Matrix3DUtils":void 0,"awayjs-display/lib/base/Geometry":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-display/lib/entities/Mesh":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/tools/data/ParticleGeometryTransform":[function(t,e){var i=function(){function t(){}return Object.defineProperty(t.prototype,"vertexTransform",{get:function(){return this._defaultVertexTransform},set:function(t){this._defaultVertexTransform=t,this._defaultInvVertexTransform=t.clone(),this._defaultInvVertexTransform.invert(),this._defaultInvVertexTransform.transpose()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"UVTransform",{get:function(){return this._defaultUVTransform},set:function(t){this._defaultUVTransform=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invVertexTransform",{get:function(){return this._defaultInvVertexTransform},enumerable:!0,configurable:!0}),t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-renderergl/lib/tools/helpers/ParticleGeometryHelper":[function(t,e){var i=t("awayjs-core/lib/geom/Point"),s=t("awayjs-core/lib/geom/Vector3D"),r=t("awayjs-display/lib/base/TriangleSubGeometry"),a=t("awayjs-renderergl/lib/animators/data/ParticleData"),n=t("awayjs-renderergl/lib/base/ParticleGeometry"),o=function(){function t(){}return t.generateGeometry=function(e,o){void 0===o&&(o=null);var h,l,p,d,u,c,_,y,g,f,m,b,w=new Array,v=new Array,x=new Array,P=new Array,D=new Array,j=new Array,C=new Array,T=new Array,A=e.length,S=new Array,O=new s,E=new s,M=new s,R=new i;for(m=0;A>m;m++){h=e[m].subGeometries,p=h.length;for(var I=0;p>I;I++){S.length<=I&&(S.push(T.length),w.push(new Array),v.push(new Array),x.push(new Array),P.push(new Array),D.push(new Array),T.push(new r(!0)),j.push(0)),l=h[I],l.numVertices+j[S[I]]>t.MAX_VERTEX&&(S[I]=T.length,w.push(new Array),v.push(new Array),x.push(new Array),P.push(new Array),D.push(new Array),T.push(new r(!0)),j.push(0)),b=S[I],d=w[b],u=v[b],c=x[b],_=P[b],y=D[b],g=j[b],f=T[b];var N=new a;N.numVertices=l.numVertices,N.startVertexIndex=g,N.particleIndex=m,N.subGeometry=f,C.push(N),j[b]+=l.numVertices;var L,F,V,B,U,z,k,G=l;if(G)if(F=G.numVertices,G.numTriangles,B=G.positions,U=G.vertexNormals,z=G.vertexTangents,k=G.uvs,o){var H=o[m],X=H.vertexTransform,W=H.invVertexTransform,Y=H.UVTransform;for(L=0;F>L;L++)V=3*L,O.x=B[V],O.y=B[V+1],O.z=B[V+2],E.x=U[V],E.y=U[V+1],E.z=U[V+2],M.x=z[V],M.y=z[V+1],M.z=z[V+2],R.x=k[2*L],R.y=k[2*L+1],X&&(O=X.transformVector(O),E=W.deltaTransformVector(E),M=W.deltaTransformVector(E)),Y&&(R=Y.transformPoint(R)),B.push(O.x,O.y,O.z),U.push(E.x,E.y,E.z),z.push(M.x,M.y,M.z),k.push(R.x,R.y)}else for(L=0;F>L;L++)V=3*L,u.push(B[V],B[V+1],B[V+2]),c.push(U[V],U[V+1],U[V+2]),_.push(z[V],z[V+1],z[V+2]),y.push(k[2*L],k[2*L+1]);var Z=l.indices;for(F=l.numTriangles,L=0;F>L;L++)V=3*L,d.push(Z[V]+g,Z[V+1]+g,Z[V+2]+g)}}var q=new n;for(q.particles=C,q.numParticles=A,A=T.length,m=0;A>m;m++)f=T[m],f.autoDeriveNormals=!1,f.autoDeriveTangents=!1,f.updateIndices(w[m]),f.updatePositions(v[m]),f.updateVertexNormals(x[m]),f.updateVertexTangents(P[m]),f.updateUVs(D[m]),q.addSubGeometry(f);return q},t.MAX_VERTEX=65535,t}();e.exports=o},{"awayjs-core/lib/geom/Point":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-renderergl/lib/animators/data/ParticleData":void 0,"awayjs-renderergl/lib/base/ParticleGeometry":void 0}],"awayjs-dist/node_modules/awayjs-renderergl/lib/utils/PerspectiveMatrix3D":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),r=function(t){function e(e){void 0===e&&(e=null),t.call(this,e)}return i(e,t),e.prototype.perspectiveFieldOfViewLH=function(t,e,i,s){var r=1/Math.tan(t/2),a=r/e;this.copyRawDataFrom([a,0,0,0,0,r,0,0,0,0,s/(s-i),1,0,0,i*s/(i-s),0])},e}(s);e.exports=r},{"awayjs-core/lib/geom/Matrix3D":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/AGALTokenizer":[function(t,e){var i=t("awayjs-stagegl/lib/aglsl/Description"),s=t("awayjs-stagegl/lib/aglsl/Header"),r=t("awayjs-stagegl/lib/aglsl/Mapping"),a=t("awayjs-stagegl/lib/aglsl/Token"),n=function(){function t(){}return t.prototype.decribeAGALByteArray=function(t){var e=new s;if(160!=t.readUnsignedByte())throw"Bad AGAL: Missing 0xa0 magic byte.";if(e.version=t.readUnsignedInt(),e.version>=16&&(t.readUnsignedByte(),e.version>>=1),161!=t.readUnsignedByte())throw"Bad AGAL: Missing 0xa1 magic byte.";switch(e.progid=t.readUnsignedByte(),e.progid){case 1:e.type="fragment";break;case 0:e.type="vertex";break;case 2:e.type="cpu";break;default:e.type=""}for(var n=new i,o=[];t.position<t.length;){var h=new a;h.opcode=t.readUnsignedInt();var l=r.agal2glsllut[h.opcode];if(!l)throw"Opcode not valid or not implemented yet: "+h.opcode;l.matrixheight&&(n.hasmatrix=!0),l.dest?(h.dest.regnum=t.readUnsignedShort(),h.dest.mask=t.readUnsignedByte(),h.dest.regtype=t.readUnsignedByte(),n.regwrite[h.dest.regtype][h.dest.regnum]|=h.dest.mask):(h.dest=null,t.readUnsignedInt()),l.a?this.readReg(h.a,1,n,t):(h.a=null,t.readUnsignedInt(),t.readUnsignedInt()),l.b?this.readReg(h.b,0|l.matrixheight,n,t):(h.b=null,t.readUnsignedInt(),t.readUnsignedInt()),o.push(h)}return n.header=e,n.tokens=o,n},t.prototype.readReg=function(t,e,i,s){if(t.regnum=s.readUnsignedShort(),t.indexoffset=s.readByte(),t.swizzle=s.readUnsignedByte(),t.regtype=s.readUnsignedByte(),i.regread[t.regtype][t.regnum]=15,5==t.regtype?(t.lodbiad=t.indexoffset,t.indexoffset=void 0,t.swizzle=void 0,t.readmode=s.readUnsignedByte(),t.dim=t.readmode>>4,t.readmode&=15,t.special=s.readUnsignedByte(),t.wrap=t.special>>4,t.special&=15,t.mipmap=s.readUnsignedByte(),t.filter=t.mipmap>>4,t.mipmap&=15,i.samplers[t.regnum]=t):(t.indexregtype=s.readUnsignedByte(),t.indexselect=s.readUnsignedByte(),t.indirectflag=s.readUnsignedByte()),t.indirectflag&&(i.hasindirect=!0),!t.indirectflag&&e)for(var r=0;e>r;r++)i.regread[t.regtype][t.regnum+r]=i.regread[t.regtype][t.regnum]},t}();e.exports=n},{"awayjs-stagegl/lib/aglsl/Description":void 0,"awayjs-stagegl/lib/aglsl/Header":void 0,"awayjs-stagegl/lib/aglsl/Mapping":void 0,"awayjs-stagegl/lib/aglsl/Token":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/AGLSLParser":[function(t,e){var i=t("awayjs-stagegl/lib/aglsl/Mapping"),s=t("awayjs-stagegl/lib/base/ContextStage3D"),r=function(){function t(){}return t.prototype.parse=function(t){var e="",r="";e+="precision highp float;\n";var a=t.header.type[0];if("vertex"==t.header.type&&(e+="uniform float yflip;\n"),t.hasindirect)e+="uniform vec4 "+a+"carrr["+s.maxvertexconstants+"];\n";else for(var n=0;n<t.regread[1].length;n++)t.regread[1][n]&&(e+="uniform vec4 "+a+"c"+n+";\n");for(var n=0;n<t.regread[2].length||n<t.regwrite[2].length;n++)(t.regread[2][n]||t.regwrite[2][n])&&(e+="vec4 "+a+"t"+n+";\n");for(var n=0;n<t.regread[0].length;n++)t.regread[0][n]&&(e+="attribute vec4 va"+n+";\n");for(var n=0;n<t.regread[4].length||n<t.regwrite[4].length;n++)(t.regread[4][n]||t.regwrite[4][n])&&(e+="varying vec4 vi"+n+";\n");for(var o=["2D","Cube","3D",""],n=0;n<t.samplers.length;n++)t.samplers[n]&&(e+="uniform sampler"+o[3&t.samplers[n].dim]+" fs"+n+";\n");"vertex"==t.header.type&&(e+="vec4 outpos;\n"),t.writedepth&&(e+="vec4 tmp_FragDepth;\n"),r+="void main() {\n";for(var n=0;n<t.tokens.length;n++){var h=i.agal2glsllut[t.tokens[n].opcode];if(!h)throw"Opcode not valid or not implemented yet: ";for(var l=h.matrixheight||1,p=0;l>p;p++){var d="  "+h.s;if(t.tokens[n].dest){if(h.matrixheight){if(1!=(t.tokens[n].dest.mask>>p&1))continue;var u=this.regtostring(t.tokens[n].dest.regtype,t.tokens[n].dest.regnum,t,a),c="float",_=["x","y","z","w"][p];u+="."+_}else{var c,_,u=this.regtostring(t.tokens[n].dest.regtype,t.tokens[n].dest.regnum,t,a);if(15!=t.tokens[n].dest.mask){var y=0;switch(_="",1&t.tokens[n].dest.mask&&(y++,_+="x"),2&t.tokens[n].dest.mask&&(y++,_+="y"),4&t.tokens[n].dest.mask&&(y++,_+="z"),8&t.tokens[n].dest.mask&&(y++,_+="w"),u+="."+_,y){case 1:c="float";break;case 2:c="vec2";break;case 3:c="vec3";break;default:throw"Unexpected destination mask"}}else c="vec4",_="xyzw"}d=d.replace("%dest",u),d=d.replace("%cast",c),d=d.replace("%dm",_)}var g=15;if(!h.ndwm&&h.dest&&t.tokens[n].dest&&(g=t.tokens[n].dest.mask),t.tokens[n].a&&(d=d.replace("%a",this.sourcetostring(t.tokens[n].a,0,g,h.scalar,t,a))),t.tokens[n].b&&(d=d.replace("%b",this.sourcetostring(t.tokens[n].b,p,g,h.scalar,t,a)),5==t.tokens[n].b.regtype)){var f=["2D","Cube","3D"][t.tokens[n].b.dim],m=["vec2","vec3","vec3"][t.tokens[n].b.dim];d=d.replace("%texdim",f),d=d.replace("%texsize",m);var b="";d=d.replace("%lod",b)}r+=d}}return"vertex"==t.header.type&&(r+="  gl_Position = vec4(outpos.x, outpos.y, outpos.z*2.0 - outpos.w, outpos.w);\n"),t.writedepth&&(r+="  gl_FragDepth = clamp(tmp_FragDepth,0.0,1.0);\n"),r+="}\n",e+r},t.prototype.regtostring=function(t,e,i,s){switch(t){case 0:return"va"+e;case 1:return i.hasindirect&&"vertex"==i.header.type?"vcarrr["+e+"]":s+"c"+e;case 2:return s+"t"+e;case 3:return"vertex"==i.header.type?"outpos":"gl_FragColor";case 4:return"vi"+e;case 5:return"fs"+e;case 6:return"tmp_FragDepth";default:throw"Unknown register type"}},t.prototype.sourcetostring=function(t,e,i,s,r,a){var n,o=["x","y","z","w"];if(t.indirectflag){n="vcarrr[int("+this.regtostring(t.indexregtype,t.regnum,r,a)+"."+o[t.indexselect]+")";var h=e+t.indexoffset;0>h&&(n+=h.toString()),h>0&&(n+="+"+h.toString()),n+="]"}else n=this.regtostring(t.regtype,t.regnum+e,r,a);return 5==t.regtype?n:s?n+"."+o[t.swizzle>>0&3]:228==t.swizzle&&15==i?n:(n+=".",1&i&&(n+=o[t.swizzle>>0&3]),2&i&&(n+=o[t.swizzle>>2&3]),4&i&&(n+=o[t.swizzle>>4&3]),8&i&&(n+=o[t.swizzle>>6&3]),n)},t}();e.exports=r},{"awayjs-stagegl/lib/aglsl/Mapping":void 0,"awayjs-stagegl/lib/base/ContextStage3D":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/Description":[function(t,e){var i=t("awayjs-stagegl/lib/aglsl/Header"),s=function(){function t(){this.regread=[[],[],[],[],[],[],[]],this.regwrite=[[],[],[],[],[],[],[]],this.hasindirect=!1,this.writedepth=!1,this.hasmatrix=!1,this.samplers=[],this.tokens=[],this.header=new i}return t}();e.exports=s},{"awayjs-stagegl/lib/aglsl/Header":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/Destination":[function(t,e){var i=function(){function t(){this.mask=0,this.regnum=0,this.regtype=0,this.dim=0}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/Header":[function(t,e){var i=function(){function t(){this.progid=0,this.version=0,this.type=""}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/Mapping":[function(t,e){var i=t("awayjs-stagegl/lib/aglsl/OpLUT"),s=function(){function t(){}return t.agal2glsllut=[new i("%dest = %cast(%a);\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(%a + %b);\n",0,!0,!0,!0,null,null,null,null,null,null),new i("%dest = %cast(%a - %b);\n",0,!0,!0,!0,null,null,null,null,null,null),new i("%dest = %cast(%a * %b);\n",0,!0,!0,!0,null,null,null,null,null,null),new i("%dest = %cast(%a / %b);\n",0,!0,!0,!0,null,null,null,null,null,null),new i("%dest = %cast(1.0) / %a;\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(min(%a,%b));\n",0,!0,!0,!0,null,null,null,null,null,null),new i("%dest = %cast(max(%a,%b));\n",0,!0,!0,!0,null,null,null,null,null,null),new i("%dest = %cast(fract(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(sqrt(abs(%a)));\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(inversesqrt(abs(%a)));\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(pow(abs(%a),%b));\n",0,!0,!0,!0,null,null,null,null,null,null),new i("%dest = %cast(log2(abs(%a)));\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(exp2(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(normalize(vec3( %a ) ));\n",0,!0,!0,!1,null,null,!0,null,null,null),new i("%dest = %cast(sin(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(cos(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(cross(vec3(%a),vec3(%b)));\n",0,!0,!0,!0,null,null,!0,null,null,null),new i("%dest = %cast(dot(vec3(%a),vec3(%b)));\n",0,!0,!0,!0,null,null,!0,null,null,null),new i("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",0,!0,!0,!0,null,null,!0,null,null,null),new i("%dest = %cast(abs(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(%a * -1.0);\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(clamp(%a,0.0,1.0));\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(dot(vec3(%a),vec3(%b)));\n",null,!0,!0,!0,3,3,!0,null,null,null),new i("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",null,!0,!0,!0,4,4,!0,null,null,null),new i("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",null,!0,!0,!0,4,3,!0,null,null,null),new i("%dest = %cast(dFdx(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(dFdx(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new i("if (float(%a)==float(%b)) {;\n",0,!1,!0,!0,null,null,null,!0,null,null),new i("if (float(%a)!=float(%b)) {;\n",0,!1,!0,!0,null,null,null,!0,null,null),new i("if (float(%a)>=float(%b)) {;\n",0,!1,!0,!0,null,null,null,!0,null,null),new i("if (float(%a)<float(%b)) {;\n",0,!1,!0,!0,null,null,null,!0,null,null),new i("} else {;\n",0,!1,!1,!1,null,null,null,null,null,null),new i("};\n",0,!1,!1,!1,null,null,null,null,null,null),new i(null,null,null,null,!1,null,null,null,null,null,null),new i(null,null,null,null,!1,null,null,null,null,null,null),new i(null,null,null,null,!1,null,null,null,null,null,null),new i(null,null,null,null,!1,null,null,null,null,null,null),new i("%dest = %cast(texture%texdimLod(%b,%texsize(%a)).%dm);\n",null,!0,!0,!0,null,null,null,null,!0,null),new i("if ( float(%a)<0.0 ) discard;\n",null,!1,!0,!1,null,null,null,!0,null,null),new i("%dest = %cast(texture%texdim(%b,%texsize(%a)%lod).%dm);\n",null,!0,!0,!0,null,null,!0,null,!0,!0),new i("%dest = %cast(greaterThanEqual(%a,%b).%dm);\n",0,!0,!0,!0,null,null,!0,null,!0,null),new i("%dest = %cast(lessThan(%a,%b).%dm);\n",0,!0,!0,!0,null,null,!0,null,!0,null),new i("%dest = %cast(sign(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new i("%dest = %cast(equal(%a,%b).%dm);\n",0,!0,!0,!0,null,null,!0,null,!0,null),new i("%dest = %cast(notEqual(%a,%b).%dm);\n",0,!0,!0,!0,null,null,!0,null,!0,null)],t}();e.exports=s},{"awayjs-stagegl/lib/aglsl/OpLUT":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/OpLUT":[function(t,e){var i=function(){function t(t,e,i,s,r,a,n,o,h,l,p){this.s=t,this.flags=e,this.dest=i,this.a=s,this.b=r,this.matrixwidth=a,this.matrixheight=n,this.ndwm=o,this.scalar=h,this.dm=l,this.lod=p}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/Sampler":[function(t,e){var i=function(){function t(){this.lodbias=0,this.dim=0,this.readmode=0,this.special=0,this.wrap=0,this.mipmap=0,this.filter=0}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/Token":[function(t,e){var i=t("awayjs-stagegl/lib/aglsl/Destination"),s=function(){function t(){this.dest=new i,this.opcode=0,this.a=new i,this.b=new i}return t}();e.exports=s},{"awayjs-stagegl/lib/aglsl/Destination":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler":[function(t,e){var i=t("awayjs-stagegl/lib/aglsl/assembler/OpcodeMap"),s=t("awayjs-stagegl/lib/aglsl/assembler/Part"),r=t("awayjs-stagegl/lib/aglsl/assembler/RegMap"),a=t("awayjs-stagegl/lib/aglsl/assembler/SamplerMap"),n=function(){function t(){this.r={},this.cur=new s}return t.prototype.assemble=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),i||(i=1),e&&this.addHeader(e,i);var s=t.replace(/[\f\n\r\v]+/g,"\n").split("\n");for(var r in s)this.processLine(s[r],r);return this.r},t.prototype.processLine=function(t,e){var s=t.search("//");if(-1!=s&&(t=t.slice(0,s)),t=t.replace(/^\s+|\s+$/g,""),t.length>0){var r=t.search(/<.*>/g),a=null;-1!=r&&(a=t.slice(r).match(/([\w\.\-\+]+)/gi),t=t.slice(0,r));var n=t.match(/([\w\.\+\[\]]+)/gi);if(!n||n.length<1)return void(t.length>=3&&console.log("Warning: bad line "+e+": "+t));switch(n[0]){case"part":this.addHeader(n[1],Number(n[2]));break;case"endpart":if(!this.cur)throw"Unexpected endpart";return this.cur.data.position=0,void(this.cur=null);default:if(!this.cur)return void console.log("Warning: bad line "+e+": "+t+" (Outside of any part definition)");if("comment"==this.cur.name)return;var o=i.map[n[0]];if(!o)throw"Bad opcode "+n[0]+" "+e+": "+t;this.emitOpcode(this.cur,o.opcode);var h=1;if(o.dest&&"none"!=o.dest){if(!this.emitDest(this.cur,n[h++],o.dest))throw"Bad destination register "+n[h-1]+" "+e+": "+t}else this.emitZeroDword(this.cur);if(o.a&&"none"!=o.a.format){if(!this.emitSource(this.cur,n[h++],o.a))throw"Bad source register "+n[h-1]+" "+e+": "+t}else this.emitZeroQword(this.cur);if(o.b&&"none"!=o.b.format){if("sampler"==o.b.format){if(!this.emitSampler(this.cur,n[h++],o.b,a))throw"Bad sampler register "+n[h-1]+" "+e+": "+t}else if(!this.emitSource(this.cur,n[h++],o.b))throw"Bad source register "+n[h-1]+" "+e+": "+t}else this.emitZeroQword(this.cur)}}},t.prototype.emitHeader=function(t){switch(t.data.writeUnsignedByte(160),t.data.writeUnsignedInt(t.version),t.version>=16&&t.data.writeUnsignedByte(0),t.data.writeUnsignedByte(161),t.name){case"fragment":t.data.writeUnsignedByte(1);break;case"vertex":t.data.writeUnsignedByte(0);break;case"cpu":t.data.writeUnsignedByte(2);break;default:t.data.writeUnsignedByte(255)}},t.prototype.emitOpcode=function(t,e){t.data.writeUnsignedInt(e)},t.prototype.emitZeroDword=function(t){t.data.writeUnsignedInt(0)},t.prototype.emitZeroQword=function(t){t.data.writeUnsignedInt(0),t.data.writeUnsignedInt(0)},t.prototype.emitDest=function(t,e){var i=e.match(/([fov]?[tpocidavs])(\d*)(\.[xyzw]{1,4})?/i);if(!r.map[i[1]])return!1;var s={num:i[2]?i[2]:0,code:r.map[i[1]].code,mask:this.stringToMask(i[3])};return t.data.writeUnsignedShort(s.num),t.data.writeUnsignedByte(s.mask),t.data.writeUnsignedByte(s.code),!0},t.prototype.stringToMask=function(t){if(!t)return 15;var e=0;return-1!=t.indexOf("x")&&(e|=1),-1!=t.indexOf("y")&&(e|=2),-1!=t.indexOf("z")&&(e|=4),-1!=t.indexOf("w")&&(e|=8),e},t.prototype.stringToSwizzle=function(t){if(!t)return 228;var e={x:0,y:1,z:2,w:3},i=0;if("."!=t.charAt(0))throw"Missing . for swizzle";return t.length>1&&(i|=e[t.charAt(1)]),i|=t.length>2?e[t.charAt(2)]<<2:(3&i)<<2,i|=t.length>3?e[t.charAt(3)]<<4:(12&i)<<2,i|=t.length>4?e[t.charAt(4)]<<6:(48&i)<<2},t.prototype.emitSampler=function(t,e,i,s){var r=e.match(/fs(\d*)/i);if(!r||!r[1])return!1;t.data.writeUnsignedShort(parseInt(r[1])),t.data.writeUnsignedByte(0),t.data.writeUnsignedByte(0);for(var n=5,o=0,h=0;h<s.length;h++){var l=a.map[s[h].toLowerCase()];l?(0!=(o>>l.shift&l.mask)&&console.log("Warning, duplicate sampler option"),o|=l.mask<<l.shift,n&=~(l.mask<<l.shift),n|=l.value<<l.shift):console.log("Warning, unknown sampler option: ",s[h])}return t.data.writeUnsignedInt(n),!0},t.prototype.emitSource=function(t,e){var i,s=e.match(/vc\[(v[tcai])(\d+)\.([xyzw])([\+\-]\d+)?\](\.[xyzw]{1,4})?/i);if(s){if(!r.map[s[1]])return!1;var a={x:0,y:1,z:2,w:3},n={num:0|s[2],code:r.map[s[1]].code,swizzle:this.stringToSwizzle(s[5]),select:a[s[3]],offset:0|s[4]};t.data.writeUnsignedShort(n.num),t.data.writeByte(n.offset),t.data.writeUnsignedByte(n.swizzle),t.data.writeUnsignedByte(1),t.data.writeUnsignedByte(n.code),t.data.writeUnsignedByte(n.select),t.data.writeUnsignedByte(128)}else{if(i=e.match(/([fov]?[tpocidavs])(\d*)(\.[xyzw]{1,4})?/i),!r.map[i[1]])return!1;var n={num:0|i[2],code:r.map[i[1]].code,swizzle:this.stringToSwizzle(i[3])};t.data.writeUnsignedShort(n.num),t.data.writeUnsignedByte(0),t.data.writeUnsignedByte(n.swizzle),t.data.writeUnsignedByte(n.code),t.data.writeUnsignedByte(0),t.data.writeUnsignedByte(0),t.data.writeUnsignedByte(0)}return!0},t.prototype.addHeader=function(t,e){if(e||(e=1),void 0==this.r[t])this.r[t]=new s(t,e),this.emitHeader(this.r[t]);else if(this.r[t].version!=e)throw"Multiple versions for part "+t;this.cur=this.r[t]},t}();e.exports=n},{"awayjs-stagegl/lib/aglsl/assembler/OpcodeMap":void 0,"awayjs-stagegl/lib/aglsl/assembler/Part":void 0,"awayjs-stagegl/lib/aglsl/assembler/RegMap":void 0,"awayjs-stagegl/lib/aglsl/assembler/SamplerMap":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/assembler/FS":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/assembler/Flags":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/assembler/OpcodeMap":[function(t,e){var i=t("awayjs-stagegl/lib/aglsl/assembler/Opcode"),s=function(){function t(){}return Object.defineProperty(t,"map",{get:function(){return t._map||(t._map=new Array,t._map.mov=new i("vector","vector",4,"none",0,0,!0,null,null,null),t._map.add=new i("vector","vector",4,"vector",4,1,!0,null,null,null),t._map.sub=new i("vector","vector",4,"vector",4,2,!0,null,null,null),t._map.mul=new i("vector","vector",4,"vector",4,3,!0,null,null,null),t._map.div=new i("vector","vector",4,"vector",4,4,!0,null,null,null),t._map.rcp=new i("vector","vector",4,"none",0,5,!0,null,null,null),t._map.min=new i("vector","vector",4,"vector",4,6,!0,null,null,null),t._map.max=new i("vector","vector",4,"vector",4,7,!0,null,null,null),t._map.frc=new i("vector","vector",4,"none",0,8,!0,null,null,null),t._map.sqt=new i("vector","vector",4,"none",0,9,!0,null,null,null),t._map.rsq=new i("vector","vector",4,"none",0,10,!0,null,null,null),t._map.pow=new i("vector","vector",4,"vector",4,11,!0,null,null,null),t._map.log=new i("vector","vector",4,"none",0,12,!0,null,null,null),t._map.exp=new i("vector","vector",4,"none",0,13,!0,null,null,null),t._map.nrm=new i("vector","vector",4,"none",0,14,!0,null,null,null),t._map.sin=new i("vector","vector",4,"none",0,15,!0,null,null,null),t._map.cos=new i("vector","vector",4,"none",0,16,!0,null,null,null),t._map.crs=new i("vector","vector",4,"vector",4,17,!0,!0,null,null),t._map.dp3=new i("vector","vector",4,"vector",4,18,!0,!0,null,null),t._map.dp4=new i("vector","vector",4,"vector",4,19,!0,!0,null,null),t._map.abs=new i("vector","vector",4,"none",0,20,!0,null,null,null),t._map.neg=new i("vector","vector",4,"none",0,21,!0,null,null,null),t._map.sat=new i("vector","vector",4,"none",0,22,!0,null,null,null),t._map.ted=new i("vector","vector",4,"sampler",1,38,!0,null,!0,null),t._map.kil=new i("none","scalar",1,"none",0,39,!0,null,!0,null),t._map.tex=new i("vector","vector",4,"sampler",1,40,!0,null,!0,null),t._map.m33=new i("vector","matrix",3,"vector",3,23,!0,null,null,!0),t._map.m44=new i("vector","matrix",4,"vector",4,24,!0,null,null,!0),t._map.m43=new i("vector","matrix",3,"vector",4,25,!0,null,null,!0),t._map.sge=new i("vector","vector",4,"vector",4,41,!0,null,null,null),t._map.slt=new i("vector","vector",4,"vector",4,42,!0,null,null,null),t._map.sgn=new i("vector","vector",4,"vector",4,43,!0,null,null,null),t._map.seq=new i("vector","vector",4,"vector",4,44,!0,null,null,null),t._map.sne=new i("vector","vector",4,"vector",4,45,!0,null,null,null)),t._map},enumerable:!0,configurable:!0}),t}();e.exports=s},{"awayjs-stagegl/lib/aglsl/assembler/Opcode":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/assembler/Opcode":[function(t,e){var i=t("awayjs-stagegl/lib/aglsl/assembler/Flags"),s=t("awayjs-stagegl/lib/aglsl/assembler/FS"),r=function(){function t(t,e,r,a,n,o,h,l,p,d){this.a=new s,this.b=new s,this.flags=new i,this.dest=t,this.a.format=e,this.a.size=r,this.b.format=a,this.b.size=n,this.opcode=o,this.flags.simple=h,this.flags.horizontal=l,this.flags.fragonly=p,this.flags.matrix=d}return t}();e.exports=r},{"awayjs-stagegl/lib/aglsl/assembler/FS":void 0,"awayjs-stagegl/lib/aglsl/assembler/Flags":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/assembler/Part":[function(t,e){var i=t("awayjs-core/lib/utils/ByteArray"),s=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.name="",this.version=0,this.name=t,this.version=e,this.data=new i}return t}();e.exports=s},{"awayjs-core/lib/utils/ByteArray":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/assembler/RegMap":[function(t,e){var i=function(){function t(t,e){this.code=t,this.desc=e}return t}(),s=function(){function t(){}return Object.defineProperty(t,"map",{get:function(){return t._map||(t._map=new Array,t._map.va=new i(0,"vertex attribute"),t._map.fc=new i(1,"fragment constant"),t._map.vc=new i(1,"vertex constant"),t._map.ft=new i(2,"fragment temporary"),t._map.vt=new i(2,"vertex temporary"),t._map.vo=new i(3,"vertex output"),t._map.op=new i(3,"vertex output"),t._map.fd=new i(3,"fragment depth output"),t._map.fo=new i(3,"fragment output"),t._map.oc=new i(3,"fragment output"),t._map.v=new i(4,"varying"),t._map.vi=new i(4,"varying output"),t._map.fi=new i(4,"varying input"),t._map.fs=new i(5,"sampler")),t._map},enumerable:!0,configurable:!0}),t}();e.exports=s},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/assembler/SamplerMap":[function(t,e){var i=t("awayjs-stagegl/lib/aglsl/assembler/Sampler"),s=function(){function t(){}return Object.defineProperty(t,"map",{get:function(){return t._map||(t._map=new Array,t._map.rgba=new i(8,15,0),t._map.rg=new i(8,15,5),t._map.r=new i(8,15,4),t._map.compressed=new i(8,15,1),t._map.compressed_alpha=new i(8,15,2),t._map.dxt1=new i(8,15,1),t._map.dxt5=new i(8,15,2),t._map["2d"]=new i(12,15,0),t._map.cube=new i(12,15,1),t._map["3d"]=new i(12,15,2),t._map.centroid=new i(16,1,1),t._map.ignoresampler=new i(16,4,4),t._map.clamp=new i(20,15,0),t._map.repeat=new i(20,15,1),t._map.wrap=new i(20,15,1),t._map.nomip=new i(24,15,0),t._map.mipnone=new i(24,15,0),t._map.mipnearest=new i(24,15,1),t._map.miplinear=new i(24,15,2),t._map.nearest=new i(28,15,0),t._map.linear=new i(28,15,1)),t._map
},enumerable:!0,configurable:!0}),t}();e.exports=s},{"awayjs-stagegl/lib/aglsl/assembler/Sampler":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/aglsl/assembler/Sampler":[function(t,e){var i=function(){function t(t,e,i){this.shift=t,this.mask=e,this.value=i}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/animators/AnimationSetBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/library/NamedAssetBase"),a=t("awayjs-core/lib/errors/AbstractMethodError"),n=t("awayjs-stagegl/lib/errors/AnimationSetError"),o=function(t){function e(){t.call(this),this._animations=new Array,this._animationNames=new Array,this._animationDictionary=new Object}return i(e,t),e.prototype._pFindTempReg=function(t,e){void 0===e&&(e=null);for(var i,s=0;;){if(i="vt"+s,-1==t.indexOf(i)&&e!=i)return i;++s}return null},Object.defineProperty(e.prototype,"usesCPU",{get:function(){return this._usesCPU},enumerable:!0,configurable:!0}),e.prototype.resetGPUCompatibility=function(){this._usesCPU=!1},e.prototype.cancelGPUCompatibility=function(){this._usesCPU=!0},e.prototype.getAGALVertexCode=function(){throw new a},e.prototype.activate=function(){throw new a},e.prototype.deactivate=function(){throw new a},e.prototype.getAGALFragmentCode=function(){throw new a},e.prototype.getAGALUVCode=function(){throw new a},e.prototype.doneAGALCode=function(){throw new a},Object.defineProperty(e.prototype,"assetType",{get:function(){return s.ANIMATION_SET},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animations",{get:function(){return this._animations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationNames",{get:function(){return this._animationNames},enumerable:!0,configurable:!0}),e.prototype.hasAnimation=function(t){return null!=this._animationDictionary[t]},e.prototype.getAnimation=function(t){return this._animationDictionary[t]},e.prototype.addAnimation=function(t){if(this._animationDictionary[t.name])throw new n("root node name '"+t.name+"' already exists in the set");this._animationDictionary[t.name]=t,this._animations.push(t),this._animationNames.push(t.name)},e.prototype.dispose=function(){},e}(r);e.exports=o},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0,"awayjs-stagegl/lib/errors/AnimationSetError":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/animators/AnimatorBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/library/NamedAssetBase"),a=t("awayjs-core/lib/errors/AbstractMethodError"),n=t("awayjs-core/lib/utils/RequestAnimationFrame"),o=t("awayjs-core/lib/utils/getTimer"),h=t("awayjs-stagegl/lib/events/AnimatorEvent"),l=function(t){function e(e){t.call(this),this._autoUpdate=!0,this._time=0,this._playbackSpeed=1,this._pOwners=new Array,this._pAbsoluteTime=0,this._animationStates=new Object,this.updatePosition=!0,this._pAnimationSet=e,this._broadcaster=new n(this.onEnterFrame,this)}return i(e,t),e.prototype.getAnimationState=function(t){var e=t.stateClass,i=t.id;return null==this._animationStates[i]&&(this._animationStates[i]=new e(this,t)),this._animationStates[i]},e.prototype.getAnimationStateByName=function(t){return this.getAnimationState(this._pAnimationSet.getAnimation(t))},Object.defineProperty(e.prototype,"absoluteTime",{get:function(){return this._pAbsoluteTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationSet",{get:function(){return this._pAnimationSet},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeState",{get:function(){return this._pActiveState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeAnimation",{get:function(){return this._pAnimationSet.getAnimation(this._pActiveAnimationName)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeAnimationName",{get:function(){return this._pActiveAnimationName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){this._autoUpdate!=t&&(this._autoUpdate=t,this._autoUpdate?this.start():this.stop())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"time",{get:function(){return this._time},set:function(t){this._time!=t&&this.update(t)},enumerable:!0,configurable:!0}),e.prototype.phase=function(t){this._pActiveState.phase(t)},Object.defineProperty(e.prototype,"playbackSpeed",{get:function(){return this._playbackSpeed},set:function(t){this._playbackSpeed=t},enumerable:!0,configurable:!0}),e.prototype.setRenderState=function(){throw new a},e.prototype.start=function(){!this._isPlaying&&this._autoUpdate&&(this._time=this._pAbsoluteTime=o(),this._isPlaying=!0,this._broadcaster.start(),this.hasEventListener(h.START)&&(null==this._startEvent&&(this._startEvent=new h(h.START,this)),this.dispatchEvent(this._startEvent)))},e.prototype.stop=function(){this._isPlaying&&(this._isPlaying=!1,this._broadcaster.stop(),this.hasEventListener(h.STOP)&&(null==this._stopEvent&&(this._stopEvent=new h(h.STOP,this)),this.dispatchEvent(this._stopEvent)))},e.prototype.update=function(t){var e=(t-this._time)*this.playbackSpeed;this._pUpdateDeltaTime(e),this._time=t},e.prototype.reset=function(t,e){void 0===e&&(e=0),this.getAnimationState(this._pAnimationSet.getAnimation(t)).offset(e+this._pAbsoluteTime)},e.prototype.addOwner=function(t){this._pOwners.push(t)},e.prototype.removeOwner=function(t){this._pOwners.splice(this._pOwners.indexOf(t),1)},e.prototype._pUpdateDeltaTime=function(t){this._pAbsoluteTime+=t,this._pActiveState.update(this._pAbsoluteTime),this.updatePosition&&this.applyPositionDelta()},e.prototype.onEnterFrame=function(t){void 0===t&&(t=null),this.update(o())},e.prototype.applyPositionDelta=function(){var t,e=this._pActiveState.positionDelta,i=e.length;if(i>0){t=this._pOwners.length;for(var s=0;t>s;++s)this._pOwners[s].translateLocal(e,i)}},e.prototype.dispatchCycleEvent=function(){this.hasEventListener(h.CYCLE_COMPLETE)&&(null==this._cycleEvent&&(this._cycleEvent=new h(h.CYCLE_COMPLETE,this)),this.dispatchEvent(this._cycleEvent))},e.prototype.clone=function(){throw new a},e.prototype.dispose=function(){},e.prototype.testGPUCompatibility=function(){throw new a},Object.defineProperty(e.prototype,"assetType",{get:function(){return s.ANIMATOR},enumerable:!0,configurable:!0}),e.prototype.getRenderableSubGeometry=function(t,e){return e},e}(r);e.exports=l},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0,"awayjs-core/lib/utils/RequestAnimationFrame":void 0,"awayjs-core/lib/utils/getTimer":void 0,"awayjs-stagegl/lib/events/AnimatorEvent":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/animators/data/AnimationRegisterCache":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterCache"),r=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement"),a=function(t){function e(e){t.call(this,e),this.indexDictionary=new Object,this.vertexConstantData=new Array,this.fragmentConstantData=new Array}return i(e,t),e.prototype.reset=function(){t.prototype.reset.call(this),this.rotationRegisters=new Array,this.positionAttribute=this.getRegisterFromString(this.sourceRegisters[0]),this.scaleAndRotateTarget=this.getRegisterFromString(this.targetRegisters[0]),this.addVertexTempUsages(this.scaleAndRotateTarget,1);for(var e=1;e<this.targetRegisters.length;e++)this.rotationRegisters.push(this.getRegisterFromString(this.targetRegisters[e])),this.addVertexTempUsages(this.rotationRegisters[e-1],1);if(this.scaleAndRotateTarget=new r(this.scaleAndRotateTarget.regName,this.scaleAndRotateTarget.index),this.vertexZeroConst=this.getFreeVertexConstant(),this.vertexZeroConst=new r(this.vertexZeroConst.regName,this.vertexZeroConst.index,0),this.vertexOneConst=new r(this.vertexZeroConst.regName,this.vertexZeroConst.index,1),this.vertexTwoConst=new r(this.vertexZeroConst.regName,this.vertexZeroConst.index,2),this.positionTarget=this.getFreeVertexVectorTemp(),this.addVertexTempUsages(this.positionTarget,1),this.positionTarget=new r(this.positionTarget.regName,this.positionTarget.index),this.needVelocity)this.velocityTarget=this.getFreeVertexVectorTemp(),this.addVertexTempUsages(this.velocityTarget,1),this.velocityTarget=new r(this.velocityTarget.regName,this.velocityTarget.index),this.vertexTime=new r(this.velocityTarget.regName,this.velocityTarget.index,3),this.vertexLife=new r(this.positionTarget.regName,this.positionTarget.index,3);else{var i=this.getFreeVertexVectorTemp();this.addVertexTempUsages(i,1),this.vertexTime=new r(i.regName,i.index,0),this.vertexLife=new r(i.regName,i.index,1)}},e.prototype.setUVSourceAndTarget=function(t,e){this.uvVar=this.getRegisterFromString(e),this.uvAttribute=this.getRegisterFromString(t),this.uvTarget=new r(this.positionTarget.regName,this.positionTarget.index)},e.prototype.setRegisterIndex=function(t,e,i){var s=this.indexDictionary[t.id];null==s&&(s=this.indexDictionary[t.id]=new Array(8)),s[e]=i},e.prototype.getRegisterIndex=function(t,e){return this.indexDictionary[t.id][e]},e.prototype.getInitCode=function(){for(var t=this.sourceRegisters.length,e="",i=0;t>i;i++)e+="mov "+this.targetRegisters[i]+","+this.sourceRegisters[i]+"\n";return e+="mov "+this.positionTarget+".xyz,"+this.vertexZeroConst.toString()+"\n",this.needVelocity&&(e+="mov "+this.velocityTarget+".xyz,"+this.vertexZeroConst.toString()+"\n"),e},e.prototype.getCombinationCode=function(){return"add "+this.scaleAndRotateTarget+".xyz,"+this.scaleAndRotateTarget+".xyz,"+this.positionTarget+".xyz\n"},e.prototype.initColorRegisters=function(){var t="";return this.hasColorMulNode&&(this.colorMulTarget=this.getFreeVertexVectorTemp(),this.addVertexTempUsages(this.colorMulTarget,1),this.colorMulVary=this.getFreeVarying(),t+="mov "+this.colorMulTarget+","+this.vertexOneConst+"\n"),this.hasColorAddNode&&(this.colorAddTarget=this.getFreeVertexVectorTemp(),this.addVertexTempUsages(this.colorAddTarget,1),this.colorAddVary=this.getFreeVarying(),t+="mov "+this.colorAddTarget+","+this.vertexZeroConst+"\n"),t},e.prototype.getColorPassCode=function(){var t="";return this.needFragmentAnimation&&(this.hasColorAddNode||this.hasColorMulNode)&&(this.hasColorMulNode&&(t+="mov "+this.colorMulVary+","+this.colorMulTarget+"\n"),this.hasColorAddNode&&(t+="mov "+this.colorAddVary+","+this.colorAddTarget+"\n")),t},e.prototype.getColorCombinationCode=function(t){var e="";if(this.needFragmentAnimation&&(this.hasColorAddNode||this.hasColorMulNode)){var i=this.getRegisterFromString(t);this.addFragmentTempUsages(i,1),this.hasColorMulNode&&(e+="mul "+i+","+i+","+this.colorMulVary+"\n"),this.hasColorAddNode&&(e+="add "+i+","+i+","+this.colorAddVary+"\n")}return e},e.prototype.getRegisterFromString=function(t){var e=t.split(/(\d+)/);return new r(e[0],parseInt(e[1]))},Object.defineProperty(e.prototype,"numVertexConstant",{get:function(){return this._numVertexConstant},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numFragmentConstant",{get:function(){return this._numFragmentConstant},enumerable:!0,configurable:!0}),e.prototype.setDataLength=function(){this._numVertexConstant=this.numUsedVertexConstants-this.vertexConstantOffset,this._numFragmentConstant=this.numUsedFragmentConstants-this.fragmentConstantOffset,this.vertexConstantData.length=4*this._numVertexConstant,this.fragmentConstantData.length=4*this._numFragmentConstant},e.prototype.setVertexConst=function(t,e,i,s,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0);var a=4*(t-this.vertexConstantOffset);this.vertexConstantData[a++]=e,this.vertexConstantData[a++]=i,this.vertexConstantData[a++]=s,this.vertexConstantData[a]=r},e.prototype.setVertexConstFromArray=function(t,e){for(var i=4*(t-this.vertexConstantOffset),s=0;s<e.length;s++)this.vertexConstantData[i++]=e[s]},e.prototype.setVertexConstFromMatrix=function(t,e){var i=e.rawData,s=4*(t-this.vertexConstantOffset);this.vertexConstantData[s++]=i[0],this.vertexConstantData[s++]=i[4],this.vertexConstantData[s++]=i[8],this.vertexConstantData[s++]=i[12],this.vertexConstantData[s++]=i[1],this.vertexConstantData[s++]=i[5],this.vertexConstantData[s++]=i[9],this.vertexConstantData[s++]=i[13],this.vertexConstantData[s++]=i[2],this.vertexConstantData[s++]=i[6],this.vertexConstantData[s++]=i[10],this.vertexConstantData[s++]=i[14],this.vertexConstantData[s++]=i[3],this.vertexConstantData[s++]=i[7],this.vertexConstantData[s++]=i[11],this.vertexConstantData[s]=i[15]},e.prototype.setFragmentConst=function(t,e,i,s,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=0);var a=4*(t-this.fragmentConstantOffset);this.fragmentConstantData[a++]=e,this.fragmentConstantData[a++]=i,this.fragmentConstantData[a++]=s,this.fragmentConstantData[a]=r},e}(s);e.exports=a},{"awayjs-stagegl/lib/materials/compilation/ShaderRegisterCache":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/animators/states/IAnimationState":[function(){},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextGLBase":[function(t,e){var i=t("awayjs-core/lib/errors/AbstractMethodError"),s=t("awayjs-core/lib/textures/RenderTexture"),r=t("awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler"),a=t("awayjs-stagegl/lib/pool/TextureDataPool"),n=t("awayjs-stagegl/lib/pool/ProgramDataPool"),o=t("awayjs-stagegl/lib/pool/MaterialDataPool"),h=t("awayjs-stagegl/lib/base/ContextGLClearMask"),l=t("awayjs-stagegl/lib/base/ContextGLTextureFormat"),p=function(){function t(t){this._programData=new Array,this._numUsedStreams=0,this._numUsedTextures=0,this._stageIndex=-1,this._antiAlias=0,this._renderTarget=null,this._renderSurfaceSelector=0,this._stageIndex=t,this._texturePool=new a(this),this._materialDataPool=new o(this),this._programDataPool=new n(this)}return Object.defineProperty(t.prototype,"container",{get:function(){return this._pContainer},enumerable:!0,configurable:!0}),t.prototype.setRenderTarget=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=0),(this._renderTarget!==t||i!=this._renderSurfaceSelector||this._enableDepthAndStencil!=e)&&(this._renderTarget=t,this._renderSurfaceSelector=i,this._enableDepthAndStencil=e,t instanceof s?this.setRenderToTexture(this.getRenderTexture(t),e,this._antiAlias,i):(this.setRenderToBackBuffer(),this.configureBackBuffer(this._width,this._height,this._antiAlias,this._enableDepthAndStencil)))},t.prototype.getRenderTexture=function(t){var e=this._texturePool.getItem(t);return e.texture||(e.texture=this.createTexture(t.width,t.height,l.BGRA,!0)),e.texture},t.prototype.getProgram=function(t){if(t.key.length)return t.programData;t.key=t.animationVertexCode+t.vertexCode+"---"+t.fragmentCode+t.animationFragmentCode+t.postAnimationFragmentCode;var e=this._programDataPool.getItem(t.key);return t.programData!=e&&(t.programData&&t.programData.dispose(),t.programData=e,e.usages++),e},t.prototype.getMaterial=function(t,e){var i=this._materialDataPool.getItem(t);if(i.invalidAnimation){i.invalidAnimation=!1;for(var s,r=i.getMaterialPasses(e),a=this.getEnabledGPUAnimation(t,r),n=0,o=1,h=r.length,l=0;h>l;l++)s=r[l],s.usesAnimation!=a&&(s.usesAnimation=a,""==s.key),""==s.key&&this.calcAnimationCode(t,s),n+=this.getProgram(s).id*o,o*=1e3;i.renderOrderId=n}return i},t.prototype.activateBuffer=function(t,e,i,s){e.contexts[this._stageIndex]||(e.contexts[this._stageIndex]=this),e.buffers[this._stageIndex]||(e.buffers[this._stageIndex]=this.createVertexBuffer(e.data.length/e.dataPerVertex,e.dataPerVertex),e.invalid[this._stageIndex]=!0),e.invalid[this._stageIndex]&&(e.buffers[this._stageIndex].uploadFromArray(e.data,0,e.data.length/e.dataPerVertex),e.invalid[this._stageIndex]=!1),this.setVertexBufferAt(t,e.buffers[this._stageIndex],i,s)},t.prototype.disposeVertexData=function(t){t.buffers[this._stageIndex].dispose(),t.buffers[this._stageIndex]=null},t.prototype.activateRenderTexture=function(t,e){this.setTextureAt(t,this.getRenderTexture(e))},t.prototype.activateMaterialPass=function(t,e,i){for(var s=t.shaderObject,a=s.numUsedStreams;a<this._numUsedStreams;a++)this.setVertexBufferAt(a,null);for(var a=s.numUsedTextures;a<this._numUsedTextures;a++)this.setTextureAt(a,null);t.usesAnimation&&t.material.animationSet.activate(s,e),s.iActivate(e,i);var n=this.getProgram(t);if(!n.program){n.program=this.createProgram();var o=(new r).assemble("part vertex 1\n"+t.animationVertexCode+t.vertexCode+"endpart").vertex.data,h=(new r).assemble("part fragment 1\n"+t.fragmentCode+t.animationFragmentCode+t.postAnimationFragmentCode+"endpart").fragment.data;n.program.upload(o,h)}this.setProgram(n.program)},t.prototype.deactivateMaterialPass=function(t,e){var i=t.shaderObject;t.usesAnimation&&t.material.animationSet.deactivate(i,e),t.shaderObject.iDeactivate(e),this._numUsedStreams=i.numUsedStreams,this._numUsedTextures=i.numUsedTextures},t.prototype.activateTexture=function(t,e){var i=this._texturePool.getItem(e);if(i.texture||(i.texture=this.createTexture(e.width,e.height,l.BGRA,!0),i.invalid=!0),i.invalid)if(i.invalid=!1,e.generateMipmaps)for(var s=e._iGetMipmapData(),r=s.length,a=0;r>a;a++)i.texture.uploadFromData(s[a],a);else i.texture.uploadFromData(e._iGetTextureData(),0);this.setTextureAt(t,i.texture)},t.prototype.activateCubeTexture=function(t,e){var i=this._texturePool.getItem(e);if(i.texture||(i.texture=this.createCubeTexture(e.size,l.BGRA,!1),i.invalid=!0),i.invalid){i.invalid=!1;for(var s=0;6>s;++s)if(e.generateMipmaps)for(var r=e._iGetMipmapData(s),a=r.length,n=0;a>n;n++)i.texture.uploadFromData(r[n],s,n);else i.texture.uploadFromData(e._iGetTextureData(s),s,0)}this.setTextureAt(t,i.texture)},t.prototype.getIndexBuffer=function(t){return t.contexts[this._stageIndex]||(t.contexts[this._stageIndex]=this),t.buffers[this._stageIndex]||(t.buffers[this._stageIndex]=this.createIndexBuffer(t.data.length),t.invalid[this._stageIndex]=!0),t.invalid[this._stageIndex]&&(t.buffers[this._stageIndex].uploadFromArray(t.data,0,t.data.length),t.invalid[this._stageIndex]=!1),t.buffers[this._stageIndex]},t.prototype.disposeIndexData=function(t){t.buffers[this._stageIndex].dispose(),t.buffers[this._stageIndex]=null},t.prototype.clear=function(t,e,i,s,r,a,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===r&&(r=1),void 0===a&&(a=0),void 0===n&&(n=h.ALL)},t.prototype.configureBackBuffer=function(t,e,i,s){void 0===s&&(s=!0),this._width=t,this._height=e},t.prototype.createIndexBuffer=function(){throw new i},t.prototype.createVertexBuffer=function(){throw new i},t.prototype.createTexture=function(t,e,s,r,a){throw void 0===a&&(a=0),new i},t.prototype.createCubeTexture=function(t,e,s,r){throw void 0===r&&(r=0),new i},t.prototype.createProgram=function(){throw new i},t.prototype.dispose=function(){},t.prototype.present=function(){},t.prototype.setRenderToTexture=function(t,e,i,s){void 0===e&&(e=!1),void 0===i&&(i=0),void 0===s&&(s=0)},t.prototype.setRenderToBackBuffer=function(){},t.prototype.setScissorRectangle=function(){},t.prototype.setTextureAt=function(){},t.prototype.setVertexBufferAt=function(t,e,i,s){void 0===i&&(i=0),void 0===s&&(s=null)},t.prototype.setProgram=function(){},t.prototype.registerProgram=function(t){for(var e=0;null!=this._programData[e];)e++;this._programData[e]=t,t.id=e},t.prototype.unRegisterProgram=function(t){this._programData[t.id]=null,t.id=-1},t.prototype.getEnabledGPUAnimation=function(t,e){if(t.animationSet){t.animationSet.resetGPUCompatibility();for(var i=t.iOwners,s=i.length,r=e.length,a=0;r>a;a++)for(var n=0;s>n;n++)i[n].animator&&i[n].animator.testGPUCompatibility(e[a].shaderObject);return!t.animationSet.usesCPU}return!1},t.prototype.calcAnimationCode=function(t,e){e.key="",e.animationVertexCode="",e.animationFragmentCode="";var i=e.shaderObject;if(e.usesAnimation){var s=t.animationSet;e.animationVertexCode+=s.getAGALVertexCode(i),i.uvDependencies>0&&!i.usesUVTransform&&(e.animationVertexCode+=s.getAGALUVCode(i)),i.usesFragmentAnimation&&(e.animationFragmentCode+=s.getAGALFragmentCode(i,e.shadedTarget)),s.doneAGALCode(i)}else{for(var r=i.animatableAttributes.length,a=0;r>a;++a)e.animationVertexCode+="mov "+i.animationTargetRegisters[a]+", "+i.animatableAttributes[a]+"\n";i.uvDependencies>0&&!i.usesUVTransform&&(e.animationVertexCode+="mov "+i.uvTarget+","+i.uvSource+"\n")}},t}();e.exports=p},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/textures/RenderTexture":void 0,"awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler":void 0,"awayjs-stagegl/lib/base/ContextGLClearMask":void 0,"awayjs-stagegl/lib/base/ContextGLTextureFormat":void 0,"awayjs-stagegl/lib/pool/MaterialDataPool":void 0,"awayjs-stagegl/lib/pool/ProgramDataPool":void 0,"awayjs-stagegl/lib/pool/TextureDataPool":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextGLBlendFactor":[function(t,e){var i=function(){function t(){}return t.DESTINATION_ALPHA="destinationAlpha",t.DESTINATION_COLOR="destinationColor",t.ONE="one",t.ONE_MINUS_DESTINATION_ALPHA="oneMinusDestinationAlpha",t.ONE_MINUS_DESTINATION_COLOR="oneMinusDestinationColor",t.ONE_MINUS_SOURCE_ALPHA="oneMinusSourceAlpha",t.ONE_MINUS_SOURCE_COLOR="oneMinusSourceColor",t.SOURCE_ALPHA="sourceAlpha",t.SOURCE_COLOR="sourceColor",t.ZERO="zero",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextGLClearMask":[function(t,e){var i=function(){function t(){}return t.COLOR=1,t.DEPTH=2,t.STENCIL=4,t.ALL=t.COLOR|t.DEPTH|t.STENCIL,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextGLCompareMode":[function(t,e){var i=function(){function t(){}return t.ALWAYS="always",t.EQUAL="equal",t.GREATER="greater",t.GREATER_EQUAL="greaterEqual",t.LESS="less",t.LESS_EQUAL="lessEqual",t.NEVER="never",t.NOT_EQUAL="notEqual",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextGLMipFilter":[function(t,e){var i=function(){function t(){}return t.MIPLINEAR="miplinear",t.MIPNEAREST="mipnearest",t.MIPNONE="mipnone",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextGLProfile":[function(t,e){var i=function(){function t(){}return t.BASELINE="baseline",t.BASELINE_CONSTRAINED="baselineConstrained",t.BASELINE_EXTENDED="baselineExtended",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextGLProgramType":[function(t,e){var i=function(){function t(){}return t.FRAGMENT="fragment",t.VERTEX="vertex",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextGLStencilAction":[function(t,e){var i=function(){function t(){}return t.DECREMENT_SATURATE="decrementSaturate",t.DECREMENT_WRAP="decrementWrap",t.INCREMENT_SATURATE="incrementSaturate",t.INCREMENT_WRAP="incrementWrap",t.INVERT="invert",t.KEEP="keep",t.SET="set",t.ZERO="zero",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextGLTextureFilter":[function(t,e){var i=function(){function t(){}return t.LINEAR="linear",t.NEAREST="nearest",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextGLTextureFormat":[function(t,e){var i=function(){function t(){}return t.BGRA="bgra",t.BGRA_PACKED="bgraPacked4444",t.BGR_PACKED="bgrPacked565",t.COMPRESSED="compressed",t.COMPRESSED_ALPHA="compressedAlpha",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextGLTriangleFace":[function(t,e){var i=function(){function t(){}return t.BACK="back",t.FRONT="front",t.FRONT_AND_BACK="frontAndBack",t.NONE="none",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":[function(t,e){var i=function(){function t(){}return t.BYTES_4="bytes4",t.FLOAT_1="float1",t.FLOAT_2="float2",t.FLOAT_3="float3",t.FLOAT_4="float4",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextGLWrapMode":[function(t,e){var i=function(){function t(){}return t.CLAMP="clamp",t.REPEAT="repeat",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextStage3D":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/swfobject"),r=t("awayjs-stagegl/lib/aglsl/Sampler"),a=t("awayjs-stagegl/lib/base/ContextGLBase"),n=t("awayjs-stagegl/lib/base/ContextGLClearMask"),o=t("awayjs-stagegl/lib/base/ContextGLProgramType"),h=t("awayjs-stagegl/lib/base/CubeTextureFlash"),l=t("awayjs-stagegl/lib/base/IndexBufferFlash"),p=t("awayjs-stagegl/lib/base/OpCodes"),d=t("awayjs-stagegl/lib/base/ProgramFlash"),u=t("awayjs-stagegl/lib/base/TextureFlash"),c=t("awayjs-stagegl/lib/base/VertexBufferFlash"),_=function(t){function e(i,r,a){function n(t){t.success&&(d._pContainer=t.ref,d._iCallback=a)}t.call(this,r),this._cmdStream="",this._resources=new Array;var o="11.0.0",h={id:i.id},l={quality:"high",bgcolor:"#ffffff",allowscriptaccess:"sameDomain",allowfullscreen:"true",wmode:"direct"};this._errorCheckingEnabled=!1,this._iDriverInfo="Unknown";var p={salign:"tl",id:i.id,name:i.name};this._oldCanvas=i.cloneNode(),this._oldParent=i.parentNode;var d=this;e.contexts[i.id]=this,s.embedSWF("libs/molehill_js_flashbridge.swf",i.id,String(i.width),String(i.height),o,"",h,l,p,n)}return i(e,t),Object.defineProperty(e.prototype,"container",{get:function(){return this._pContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"driverInfo",{get:function(){return this._iDriverInfo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorCheckingEnabled",{get:function(){return this._errorCheckingEnabled},set:function(t){this._errorCheckingEnabled!=t&&(this._errorCheckingEnabled=t,this.addStream(String.fromCharCode(p.enableErrorChecking,t?p.trueValue:p.falseValue)),this.execute())},enumerable:!0,configurable:!0}),e.prototype._iAddResource=function(t){this._resources.push(t)},e.prototype._iRemoveResource=function(t){this._resources.splice(this._resources.indexOf(t))},e.prototype.createTexture=function(t,e,i,s,r){return void 0===r&&(r=0),new u(this,t,e,i,s)},e.prototype.createCubeTexture=function(t,e,i,s){return void 0===s&&(s=0),new h(this,t,e,i)},e.prototype.setTextureAt=function(t,i){this.addStream(i?String.fromCharCode(p.setTextureAt)+t+","+i.id+",":String.fromCharCode(p.clearTextureAt)+t.toString()+","),e.debug&&this.execute()},e.prototype.setSamplerStateAt=function(){},e.prototype.setStencilActions=function(t,i,s,r,a){void 0===t&&(t="frontAndBack"),void 0===i&&(i="always"),void 0===s&&(s="keep"),void 0===r&&(r="keep"),void 0===a&&(a="keep"),this.addStream(String.fromCharCode(p.setStencilActions)+t+"$"+i+"$"+s+"$"+r+"$"+a+"$"),e.debug&&this.execute()},e.prototype.setStencilReferenceValue=function(t,i,s){void 0===i&&(i=255),void 0===s&&(s=255),this.addStream(String.fromCharCode(p.setStencilReferenceValue,t+p.intMask,i+p.intMask,s+p.intMask)),e.debug&&this.execute()},e.prototype.setCulling=function(t,i){void 0===i&&(i="leftHanded"),this.addStream(String.fromCharCode(p.setCulling)+t+"$"),e.debug&&this.execute()},e.prototype.drawTriangles=function(t,i,s){void 0===i&&(i=0),void 0===s&&(s=-1),i=i||0,(!s||0>s)&&(s=t.numIndices/3),this.addStream(String.fromCharCode(p.drawTriangles,t.id+p.intMask)+i+","+s+","),e.debug&&this.execute()},e.prototype.setProgramConstantsFromMatrix=function(t,e,i,s){void 0===s&&(s=!1);var r=i.rawData;s?(this.setProgramConstantsFromArray(t,e,[r[0],r[4],r[8],r[12]],1),this.setProgramConstantsFromArray(t,e+1,[r[1],r[5],r[9],r[13]],1),this.setProgramConstantsFromArray(t,e+2,[r[2],r[6],r[10],r[14]],1),this.setProgramConstantsFromArray(t,e+3,[r[3],r[7],r[11],r[15]],1)):(this.setProgramConstantsFromArray(t,e,[r[0],r[1],r[2],r[3]],1),this.setProgramConstantsFromArray(t,e+1,[r[4],r[5],r[6],r[7]],1),this.setProgramConstantsFromArray(t,e+2,[r[8],r[9],r[10],r[11]],1),this.setProgramConstantsFromArray(t,e+3,[r[12],r[13],r[14],r[15]],1))},e.prototype.setProgramConstantsFromArray=function(t,i,s,r){void 0===r&&(r=-1);for(var a,n=t==o.VERTEX?p.trueValue:p.falseValue,h=0;r>h;h++)a=4*h,this.addStream(String.fromCharCode(p.setProgramConstant,n,i+h+p.intMask)+s[a]+","+s[a+1]+","+s[a+2]+","+s[a+3]+","),e.debug&&this.execute()},e.prototype.setProgram=function(t){this.addStream(String.fromCharCode(p.setProgram,t.id+p.intMask)),e.debug&&this.execute()},e.prototype.present=function(){this.addStream(String.fromCharCode(p.present)),this.execute()},e.prototype.clear=function(t,i,s,r,a,o,h){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===r&&(r=1),void 0===a&&(a=1),void 0===o&&(o=0),void 0===h&&(h=n.ALL),this.addStream(String.fromCharCode(p.clear)+t+","+i+","+s+","+r+","+a+","+o+","+h+","),e.debug&&this.execute()},e.prototype.createProgram=function(){return new d(this)},e.prototype.createVertexBuffer=function(t,e){return new c(this,t,e)},e.prototype.createIndexBuffer=function(t){return new l(this,t)},e.prototype.configureBackBuffer=function(e,i,s,r){void 0===r&&(r=!0),t.prototype.configureBackBuffer.call(this,e,i,s,r),this.addStream(String.fromCharCode(p.configureBackBuffer)+e+","+i+",")},e.prototype.drawToBitmapData=function(){},e.prototype.setVertexBufferAt=function(t,i,s,r){void 0===s&&(s=0),void 0===r&&(r=null),this.addStream(i?String.fromCharCode(p.setVertexBufferAt,t+p.intMask)+i.id+","+s+","+r+"$":String.fromCharCode(p.clearVertexBufferAt,t+p.intMask)),e.debug&&this.execute()},e.prototype.setColorMask=function(t,i,s,r){this.addStream(String.fromCharCode(p.setColorMask,t?p.trueValue:p.falseValue,i?p.trueValue:p.falseValue,s?p.trueValue:p.falseValue,r?p.trueValue:p.falseValue)),e.debug&&this.execute()},e.prototype.setBlendFactors=function(t,i){this.addStream(String.fromCharCode(p.setBlendFactors)+t+"$"+i+"$"),e.debug&&this.execute()},e.prototype.setRenderToTexture=function(t,i,s,r){void 0===i&&(i=!1),void 0===s&&(s=0),void 0===r&&(r=0),this.addStream(null===t||void 0===t?String.fromCharCode(p.clearRenderToTexture):String.fromCharCode(p.setRenderToTexture,i?p.trueValue:p.falseValue)+t.id+","+(s||0)+","),e.debug&&this.execute()},e.prototype.setRenderToBackBuffer=function(){this.addStream(String.fromCharCode(p.clearRenderToTexture)),e.debug&&this.execute()},e.prototype.setScissorRectangle=function(t){this.addStream(t?String.fromCharCode(p.setScissorRect)+t.x+","+t.y+","+t.width+","+t.height+",":String.fromCharCode(p.clearScissorRect)),e.debug&&this.execute()},e.prototype.setDepthTest=function(t,i){this.addStream(String.fromCharCode(p.setDepthTest,t?p.trueValue:p.falseValue)+i+"$"),e.debug&&this.execute()},e.prototype.dispose=function(){if(null!=this._pContainer){for(console.log("Context3D dispose, releasing "+this._resources.length+" resources.");this._resources.length;)this._resources[0].dispose();this._pContainer&&(this.addStream(String.fromCharCode(p.disposeContext)),this.execute(),s.removeSWF(this._oldCanvas.id),this._oldCanvas&&this._oldParent&&(this._oldParent.appendChild(this._oldCanvas),this._oldParent=null),this._pContainer=null),this._oldCanvas=null}},e.prototype.addStream=function(t){this._cmdStream+=t},e.prototype.execute=function(){e.logStream&&console.log(this._cmdStream);var t=this._pContainer.CallFunction('<invoke name="execStage3dOpStream" returntype="javascript"><arguments><string>'+this._cmdStream+"</string></arguments></invoke>");if(Number(t)<=-3)throw"Exec stream failed";return this._cmdStream="",Number(t)},e.contexts=new Object,e.maxvertexconstants=128,e.maxfragconstants=28,e.maxtemp=8,e.maxstreams=8,e.maxtextures=8,e.defaultsampler=new r,e.debug=!1,e.logStream=!1,e
}(a);e.exports=_},{"awayjs-stagegl/lib/aglsl/Sampler":void 0,"awayjs-stagegl/lib/base/ContextGLBase":void 0,"awayjs-stagegl/lib/base/ContextGLClearMask":void 0,"awayjs-stagegl/lib/base/ContextGLProgramType":void 0,"awayjs-stagegl/lib/base/CubeTextureFlash":void 0,"awayjs-stagegl/lib/base/IndexBufferFlash":void 0,"awayjs-stagegl/lib/base/OpCodes":void 0,"awayjs-stagegl/lib/base/ProgramFlash":void 0,"awayjs-stagegl/lib/base/TextureFlash":void 0,"awayjs-stagegl/lib/base/VertexBufferFlash":void 0,"awayjs-stagegl/lib/swfobject":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ContextWebGL":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Rectangle"),r=t("awayjs-core/lib/utils/ByteArray"),a=t("awayjs-stagegl/lib/base/ContextGLBase"),n=t("awayjs-stagegl/lib/base/ContextGLBlendFactor"),o=t("awayjs-stagegl/lib/base/ContextGLClearMask"),h=t("awayjs-stagegl/lib/base/ContextGLCompareMode"),l=t("awayjs-stagegl/lib/base/ContextGLMipFilter"),p=t("awayjs-stagegl/lib/base/ContextGLProgramType"),d=t("awayjs-stagegl/lib/base/ContextGLTextureFilter"),u=t("awayjs-stagegl/lib/base/ContextGLTriangleFace"),c=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),_=t("awayjs-stagegl/lib/base/ContextGLWrapMode"),y=t("awayjs-stagegl/lib/base/CubeTextureWebGL"),g=t("awayjs-stagegl/lib/base/IndexBufferWebGL"),f=t("awayjs-stagegl/lib/base/ProgramWebGL"),m=t("awayjs-stagegl/lib/base/TextureWebGL"),b=t("awayjs-stagegl/lib/base/SamplerState"),w=t("awayjs-stagegl/lib/base/VertexBufferWebGL"),v=function(t){function e(i,s){t.call(this,s),this._blendFactorDictionary=new Object,this._depthTestDictionary=new Object,this._textureIndexDictionary=new Array(8),this._textureTypeDictionary=new Object,this._wrapDictionary=new Object,this._filterDictionary=new Object,this._mipmapFilterDictionary=new Object,this._uniformLocationNameDictionary=new Object,this._vertexBufferDimensionDictionary=new Object,this._indexBufferList=new Array,this._vertexBufferList=new Array,this._textureList=new Array,this._programList=new Array,this._samplerStates=new Array(8),this._pContainer=i;try{this._gl=i.getContext("experimental-webgl",{premultipliedAlpha:!1,alpha:!1}),this._gl||(this._gl=i.getContext("webgl",{premultipliedAlpha:!1,alpha:!1}))}catch(r){}this._gl?(this._blendFactorDictionary[n.ONE]=this._gl.ONE,this._blendFactorDictionary[n.DESTINATION_ALPHA]=this._gl.DST_ALPHA,this._blendFactorDictionary[n.DESTINATION_COLOR]=this._gl.DST_COLOR,this._blendFactorDictionary[n.ONE]=this._gl.ONE,this._blendFactorDictionary[n.ONE_MINUS_DESTINATION_ALPHA]=this._gl.ONE_MINUS_DST_ALPHA,this._blendFactorDictionary[n.ONE_MINUS_DESTINATION_COLOR]=this._gl.ONE_MINUS_DST_COLOR,this._blendFactorDictionary[n.ONE_MINUS_SOURCE_ALPHA]=this._gl.ONE_MINUS_SRC_ALPHA,this._blendFactorDictionary[n.ONE_MINUS_SOURCE_COLOR]=this._gl.ONE_MINUS_SRC_COLOR,this._blendFactorDictionary[n.SOURCE_ALPHA]=this._gl.SRC_ALPHA,this._blendFactorDictionary[n.SOURCE_COLOR]=this._gl.SRC_COLOR,this._blendFactorDictionary[n.ZERO]=this._gl.ZERO,this._depthTestDictionary[h.ALWAYS]=this._gl.ALWAYS,this._depthTestDictionary[h.EQUAL]=this._gl.EQUAL,this._depthTestDictionary[h.GREATER]=this._gl.GREATER,this._depthTestDictionary[h.GREATER_EQUAL]=this._gl.GEQUAL,this._depthTestDictionary[h.LESS]=this._gl.LESS,this._depthTestDictionary[h.LESS_EQUAL]=this._gl.LEQUAL,this._depthTestDictionary[h.NEVER]=this._gl.NEVER,this._depthTestDictionary[h.NOT_EQUAL]=this._gl.NOTEQUAL,this._textureIndexDictionary[0]=this._gl.TEXTURE0,this._textureIndexDictionary[1]=this._gl.TEXTURE1,this._textureIndexDictionary[2]=this._gl.TEXTURE2,this._textureIndexDictionary[3]=this._gl.TEXTURE3,this._textureIndexDictionary[4]=this._gl.TEXTURE4,this._textureIndexDictionary[5]=this._gl.TEXTURE5,this._textureIndexDictionary[6]=this._gl.TEXTURE6,this._textureIndexDictionary[7]=this._gl.TEXTURE7,this._textureTypeDictionary.texture2d=this._gl.TEXTURE_2D,this._textureTypeDictionary.textureCube=this._gl.TEXTURE_CUBE_MAP,this._wrapDictionary[_.REPEAT]=this._gl.REPEAT,this._wrapDictionary[_.CLAMP]=this._gl.CLAMP_TO_EDGE,this._filterDictionary[d.LINEAR]=this._gl.LINEAR,this._filterDictionary[d.NEAREST]=this._gl.NEAREST,this._mipmapFilterDictionary[d.LINEAR]=new Object,this._mipmapFilterDictionary[d.LINEAR][l.MIPNEAREST]=this._gl.LINEAR_MIPMAP_NEAREST,this._mipmapFilterDictionary[d.LINEAR][l.MIPLINEAR]=this._gl.LINEAR_MIPMAP_LINEAR,this._mipmapFilterDictionary[d.LINEAR][l.MIPNONE]=this._gl.LINEAR,this._mipmapFilterDictionary[d.NEAREST]=new Object,this._mipmapFilterDictionary[d.NEAREST][l.MIPNEAREST]=this._gl.NEAREST_MIPMAP_NEAREST,this._mipmapFilterDictionary[d.NEAREST][l.MIPLINEAR]=this._gl.NEAREST_MIPMAP_LINEAR,this._mipmapFilterDictionary[d.NEAREST][l.MIPNONE]=this._gl.NEAREST,this._uniformLocationNameDictionary[p.VERTEX]="vc",this._uniformLocationNameDictionary[p.FRAGMENT]="fc",this._vertexBufferDimensionDictionary[c.FLOAT_1]=1,this._vertexBufferDimensionDictionary[c.FLOAT_2]=2,this._vertexBufferDimensionDictionary[c.FLOAT_3]=3,this._vertexBufferDimensionDictionary[c.FLOAT_4]=4,this._vertexBufferDimensionDictionary[c.BYTES_4]=4):alert("WebGL is not available.");for(var a=0;a<e.MAX_SAMPLERS;++a)this._samplerStates[a]=new b,this._samplerStates[a].wrap=this._gl.REPEAT,this._samplerStates[a].filter=this._gl.LINEAR,this._samplerStates[a].mipfilter=this._gl.LINEAR}return i(e,t),Object.defineProperty(e.prototype,"container",{get:function(){return this._pContainer},enumerable:!0,configurable:!0}),e.prototype.gl=function(){return this._gl},e.prototype.clear=function(t,e,i,s,r,a,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===r&&(r=1),void 0===a&&(a=0),void 0===n&&(n=o.ALL),this._drawing||(this.updateBlendStatus(),this._drawing=!0);var h=0;n&o.COLOR&&(h|=this._gl.COLOR_BUFFER_BIT),n&o.STENCIL&&(h|=this._gl.STENCIL_BUFFER_BIT),n&o.DEPTH&&(h|=this._gl.DEPTH_BUFFER_BIT),this._gl.clearColor(t,e,i,s),this._gl.clearDepth(r),this._gl.clearStencil(a),this._gl.clear(h)},e.prototype.configureBackBuffer=function(e,i,s,r){void 0===r&&(r=!0),t.prototype.configureBackBuffer.call(this,e,i,s,r),r&&(this._gl.enable(this._gl.STENCIL_TEST),this._gl.enable(this._gl.DEPTH_TEST)),this._gl.viewport.width=e,this._gl.viewport.height=i,this._gl.viewport(0,0,e,i)},e.prototype.createCubeTexture=function(t,e,i,s){void 0===s&&(s=0);var r=new y(this._gl,t);return this._textureList.push(r),r},e.prototype.createIndexBuffer=function(t){var e=new g(this._gl,t);return this._indexBufferList.push(e),e},e.prototype.createProgram=function(){var t=new f(this._gl);return this._programList.push(t),t},e.prototype.createTexture=function(t,e,i,s,r){void 0===r&&(r=0);var a=new m(this._gl,t,e);return this._textureList.push(a),a},e.prototype.createVertexBuffer=function(t,e){var i=new w(this._gl,t,e);return this._vertexBufferList.push(i),i},e.prototype.dispose=function(){var t;for(t=0;t<this._indexBufferList.length;++t)this._indexBufferList[t].dispose();for(this._indexBufferList=null,t=0;t<this._vertexBufferList.length;++t)this._vertexBufferList[t].dispose();for(this._vertexBufferList=null,t=0;t<this._textureList.length;++t)this._textureList[t].dispose();for(this._textureList=null,t=0;t<this._programList.length;++t)this._programList[t].dispose();for(t=0;t<this._samplerStates.length;++t)this._samplerStates[t]=null;this._programList=null},e.prototype.drawToBitmapData=function(t){var e=new ArrayBuffer(t.width*t.height*4);this._gl.readPixels(0,0,t.width,t.height,this._gl.RGBA,this._gl.UNSIGNED_BYTE,new Uint8Array(e));var i=new r;i.setArrayBuffer(e),t.setPixels(new s(0,0,t.width,t.height),i)},e.prototype.drawTriangles=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),!this._drawing)throw"Need to clear before drawing if the buffer has not been cleared since the last present() call.";this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,t.glBuffer),this._gl.drawElements(this._gl.TRIANGLES,-1==i?t.numIndices:3*i,this._gl.UNSIGNED_SHORT,e)},e.prototype.present=function(){this._drawing=!1},e.prototype.setBlendFactors=function(t,e){this._blendEnabled=!0,this._blendSourceFactor=this._blendFactorDictionary[t],this._blendDestinationFactor=this._blendFactorDictionary[e],this.updateBlendStatus()},e.prototype.setColorMask=function(t,e,i,s){this._gl.colorMask(t,e,i,s)},e.prototype.setCulling=function(t,e){if(void 0===e&&(e="leftHanded"),t==u.NONE)this._gl.disable(this._gl.CULL_FACE);else switch(this._gl.enable(this._gl.CULL_FACE),t){case u.BACK:this._gl.cullFace("leftHanded"==e?this._gl.FRONT:this._gl.BACK);break;case u.FRONT:this._gl.cullFace("leftHanded"==e?this._gl.BACK:this._gl.FRONT);break;case u.FRONT_AND_BACK:this._gl.cullFace(this._gl.FRONT_AND_BACK);break;default:throw"Unknown ContextGLTriangleFace type."}},e.prototype.setDepthTest=function(t,e){this._gl.depthFunc(this._depthTestDictionary[e]),this._gl.depthMask(t)},e.prototype.setProgram=function(t){this._currentProgram=t,t.focusProgram()},e.prototype.setProgramConstantsFromMatrix=function(t,e,i,s){void 0===s&&(s=!1);var r=i.rawData;s?(this.setProgramConstantsFromArray(t,e,[r[0],r[4],r[8],r[12]],1),this.setProgramConstantsFromArray(t,e+1,[r[1],r[5],r[9],r[13]],1),this.setProgramConstantsFromArray(t,e+2,[r[2],r[6],r[10],r[14]],1),this.setProgramConstantsFromArray(t,e+3,[r[3],r[7],r[11],r[15]],1)):(this.setProgramConstantsFromArray(t,e,[r[0],r[1],r[2],r[3]],1),this.setProgramConstantsFromArray(t,e+1,[r[4],r[5],r[6],r[7]],1),this.setProgramConstantsFromArray(t,e+2,[r[8],r[9],r[10],r[11]],1),this.setProgramConstantsFromArray(t,e+3,[r[12],r[13],r[14],r[15]],1))},e.prototype.setProgramConstantsFromArray=function(t,e,i,s){void 0===s&&(s=-1);for(var r,a=this._uniformLocationNameDictionary[t],n=0;s>n;n++)r=4*n,this._gl.uniform4f(this._gl.getUniformLocation(this._currentProgram.glProgram,a+(e+n)),i[r],i[r+1],i[r+2],i[r+3])},e.prototype.setScissorRectangle=function(t){return t?(this._gl.enable(this._gl.SCISSOR_TEST),void this._gl.scissor(t.x,t.y,t.width,t.height)):void this._gl.disable(this._gl.SCISSOR_TEST)},e.prototype.setTextureAt=function(t,e){var i=this._samplerStates[t];if(this._activeTexture!=t&&(e||i.type)&&(this._activeTexture=t,this._gl.activeTexture(this._textureIndexDictionary[t])),!e)return void(i.type&&(this._gl.bindTexture(i.type,null),i.type=null));var s=this._textureTypeDictionary[e.textureType];i.type=s,this._gl.bindTexture(s,e.glTexture),this._gl.uniform1i(this._gl.getUniformLocation(this._currentProgram.glProgram,"fs"+t),t),this._gl.texParameteri(s,this._gl.TEXTURE_WRAP_S,i.wrap),this._gl.texParameteri(s,this._gl.TEXTURE_WRAP_T,i.wrap),this._gl.texParameteri(s,this._gl.TEXTURE_MAG_FILTER,i.filter),this._gl.texParameteri(s,this._gl.TEXTURE_MIN_FILTER,i.mipfilter)},e.prototype.setSamplerStateAt=function(t,i,s,r){if(!(t>=0&&t<e.MAX_SAMPLERS))throw"Sampler is out of bounds.";this._samplerStates[t].wrap=this._wrapDictionary[i],this._samplerStates[t].filter=this._filterDictionary[s],this._samplerStates[t].mipfilter=this._mipmapFilterDictionary[s][r]},e.prototype.setVertexBufferAt=function(t,e,i,s){void 0===i&&(i=0),void 0===s&&(s=null);var r=this._currentProgram?this._gl.getAttribLocation(this._currentProgram.glProgram,"va"+t):-1;return e?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,e.glBuffer),this._gl.enableVertexAttribArray(r),void this._gl.vertexAttribPointer(r,this._vertexBufferDimensionDictionary[s],this._gl.FLOAT,!1,4*e.data32PerVertex,4*i)):void(r>-1&&this._gl.disableVertexAttribArray(r))},e.prototype.setRenderToTexture=function(t,e,i,s){void 0===e&&(e=!1),void 0===i&&(i=0),void 0===s&&(s=0);var r=t,a=r.frameBuffer;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,a),e&&(this._gl.enable(this._gl.STENCIL_TEST),this._gl.enable(this._gl.DEPTH_TEST)),this._gl.viewport(0,0,r.width,r.height)},e.prototype.setRenderToBackBuffer=function(){this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)},e.prototype.updateBlendStatus=function(){this._blendEnabled?(this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._blendSourceFactor,this._blendDestinationFactor)):this._gl.disable(this._gl.BLEND)},e.MAX_SAMPLERS=8,e.modulo=0,e}(a);e.exports=v},{"awayjs-core/lib/geom/Rectangle":void 0,"awayjs-core/lib/utils/ByteArray":void 0,"awayjs-stagegl/lib/base/ContextGLBase":void 0,"awayjs-stagegl/lib/base/ContextGLBlendFactor":void 0,"awayjs-stagegl/lib/base/ContextGLClearMask":void 0,"awayjs-stagegl/lib/base/ContextGLCompareMode":void 0,"awayjs-stagegl/lib/base/ContextGLMipFilter":void 0,"awayjs-stagegl/lib/base/ContextGLProgramType":void 0,"awayjs-stagegl/lib/base/ContextGLTextureFilter":void 0,"awayjs-stagegl/lib/base/ContextGLTriangleFace":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0,"awayjs-stagegl/lib/base/ContextGLWrapMode":void 0,"awayjs-stagegl/lib/base/CubeTextureWebGL":void 0,"awayjs-stagegl/lib/base/IndexBufferWebGL":void 0,"awayjs-stagegl/lib/base/ProgramWebGL":void 0,"awayjs-stagegl/lib/base/SamplerState":void 0,"awayjs-stagegl/lib/base/TextureWebGL":void 0,"awayjs-stagegl/lib/base/VertexBufferWebGL":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/CubeTextureFlash":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/base/BitmapData"),r=t("awayjs-core/lib/utils/ByteArrayBase"),a=t("awayjs-stagegl/lib/base/OpCodes"),n=t("awayjs-stagegl/lib/base/ResourceBaseFlash"),o=function(t){function e(e,i,s,r,n){void 0===n&&(n=!1),t.call(this),this._context=e,this._size=i,this._context.addStream(String.fromCharCode(a.initCubeTexture,r?a.trueValue:a.falseValue)+i+","+n+","+s+"$"),this._pId=this._context.execute(),this._context._iAddResource(this)}return i(e,t),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._context.addStream(String.fromCharCode(a.disposeCubeTexture)+this._pId.toString()+","),this._context.execute(),this._context._iRemoveResource(this),this._context=null},e.prototype.uploadFromData=function(t,e,i){if(void 0===i&&(i=0),t instanceof s)t=t.imageData.data;else if(t instanceof HTMLImageElement){var n=document.createElement("canvas"),o=t.width,h=t.height;n.width=o,n.height=h;var l=n.getContext("2d");l.drawImage(t,0,0),t=l.getImageData(0,0,o,h).data}var p=0,d=r.internalGetBase64String(t.length,function(){return t[p++]},null);this._context.addStream(String.fromCharCode(a.uploadBytesCubeTexture)+this._pId+","+i+","+e+","+(this.size>>i)+","+d+"%"),this._context.execute()},e.prototype.uploadCompressedTextureFromByteArray=function(t,e,i){void 0===i&&(i=!1)},e}(n);e.exports=o},{"awayjs-core/lib/base/BitmapData":void 0,"awayjs-core/lib/utils/ByteArrayBase":void 0,"awayjs-stagegl/lib/base/OpCodes":void 0,"awayjs-stagegl/lib/base/ResourceBaseFlash":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/CubeTextureWebGL":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/base/BitmapData"),r=t("awayjs-stagegl/lib/base/TextureBaseWebGL"),a=function(t){function e(e,i){t.call(this,e),this._textureSelectorDictionary=new Array(6),this.textureType="textureCube",this._size=i,this._texture=this._gl.createTexture(),this._textureSelectorDictionary[0]=e.TEXTURE_CUBE_MAP_POSITIVE_X,this._textureSelectorDictionary[1]=e.TEXTURE_CUBE_MAP_NEGATIVE_X,this._textureSelectorDictionary[2]=e.TEXTURE_CUBE_MAP_POSITIVE_Y,this._textureSelectorDictionary[3]=e.TEXTURE_CUBE_MAP_NEGATIVE_Y,this._textureSelectorDictionary[4]=e.TEXTURE_CUBE_MAP_POSITIVE_Z,this._textureSelectorDictionary[5]=e.TEXTURE_CUBE_MAP_NEGATIVE_Z}return i(e,t),e.prototype.dispose=function(){this._gl.deleteTexture(this._texture)},e.prototype.uploadFromData=function(t,e,i){void 0===i&&(i=0),t instanceof s&&(t=t.imageData),this._gl.bindTexture(this._gl.TEXTURE_CUBE_MAP,this._texture),this._gl.texImage2D(this._textureSelectorDictionary[e],i,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,t),this._gl.bindTexture(this._gl.TEXTURE_CUBE_MAP,null)},e.prototype.uploadCompressedTextureFromByteArray=function(t,e,i){void 0===i&&(i=!1)},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glTexture",{get:function(){return this._texture},enumerable:!0,configurable:!0}),e}(r);e.exports=a},{"awayjs-core/lib/base/BitmapData":void 0,"awayjs-stagegl/lib/base/TextureBaseWebGL":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/IContextStageGL":[function(){},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ICubeTexture":[function(){},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/IIndexBuffer":[function(){},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/IProgram":[function(){},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ITextureBase":[function(){},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ITexture":[function(){},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/IVertexBuffer":[function(){},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/IndexBufferFlash":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/OpCodes"),r=t("awayjs-stagegl/lib/base/ResourceBaseFlash"),a=function(t){function e(e,i){t.call(this),this._context=e,this._numIndices=i,this._context.addStream(String.fromCharCode(s.initIndexBuffer,i+s.intMask)),this._pId=this._context.execute(),this._context._iAddResource(this)}return i(e,t),e.prototype.uploadFromArray=function(t,e,i){this._context.addStream(String.fromCharCode(s.uploadArrayIndexBuffer,this._pId+s.intMask)+t.join()+"#"+e+","+i+","),this._context.execute()},e.prototype.dispose=function(){this._context.addStream(String.fromCharCode(s.disposeIndexBuffer,this._pId+s.intMask)),this._context.execute(),this._context._iRemoveResource(this),this._context=null},Object.defineProperty(e.prototype,"numIndices",{get:function(){return this._numIndices},enumerable:!0,configurable:!0}),e}(r);e.exports=a},{"awayjs-stagegl/lib/base/OpCodes":void 0,"awayjs-stagegl/lib/base/ResourceBaseFlash":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/IndexBufferWebGL":[function(t,e){var i=function(){function t(t,e){this._gl=t,this._buffer=this._gl.createBuffer(),this._numIndices=e}return t.prototype.uploadFromArray=function(t){this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,this._buffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),this._gl.STATIC_DRAW)},t.prototype.dispose=function(){this._gl.deleteBuffer(this._buffer)},Object.defineProperty(t.prototype,"numIndices",{get:function(){return this._numIndices},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"glBuffer",{get:function(){return this._buffer},enumerable:!0,configurable:!0}),t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/OpCodes":[function(t,e){var i=function(){function t(){}return t.trueValue=32,t.falseValue=33,t.intMask=63,t.drawTriangles=41,t.setProgramConstant=42,t.setProgram=43,t.present=44,t.clear=45,t.initProgram=46,t.initVertexBuffer=47,t.initIndexBuffer=48,t.configureBackBuffer=49,t.uploadArrayIndexBuffer=50,t.uploadArrayVertexBuffer=51,t.uploadAGALBytesProgram=52,t.setVertexBufferAt=53,t.uploadBytesIndexBuffer=54,t.uploadBytesVertexBuffer=55,t.setColorMask=56,t.setDepthTest=57,t.disposeProgram=58,t.disposeContext=59,t.disposeVertexBuffer=61,t.disposeIndexBuffer=63,t.initTexture=64,t.setTextureAt=65,t.uploadBytesTexture=66,t.disposeTexture=67,t.setCulling=68,t.setScissorRect=69,t.clearScissorRect=70,t.setBlendFactors=71,t.setRenderToTexture=72,t.clearTextureAt=73,t.clearVertexBufferAt=74,t.setStencilActions=75,t.setStencilReferenceValue=76,t.initCubeTexture=77,t.disposeCubeTexture=78,t.uploadBytesCubeTexture=79,t.clearRenderToTexture=80,t.enableErrorChecking=81,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ProgramFlash":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/ContextStage3D"),r=t("awayjs-stagegl/lib/base/OpCodes"),a=t("awayjs-stagegl/lib/base/ResourceBaseFlash"),n=function(t){function e(e){t.call(this),this._context=e,this._context.addStream(String.fromCharCode(r.initProgram)),this._pId=this._context.execute(),this._context._iAddResource(this)}return i(e,t),e.prototype.upload=function(t,e){this._context.addStream(String.fromCharCode(r.uploadAGALBytesProgram,this._pId+r.intMask)+t.readBase64String(t.length)+"%"+e.readBase64String(e.length)+"%"),s.debug&&this._context.execute()},e.prototype.dispose=function(){this._context.addStream(String.fromCharCode(r.disposeProgram,this._pId+r.intMask)),this._context.execute(),this._context._iRemoveResource(this),this._context=null},e}(a);e.exports=n},{"awayjs-stagegl/lib/base/ContextStage3D":void 0,"awayjs-stagegl/lib/base/OpCodes":void 0,"awayjs-stagegl/lib/base/ResourceBaseFlash":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ProgramWebGL":[function(t,e){var i=t("awayjs-stagegl/lib/aglsl/AGALTokenizer"),s=t("awayjs-stagegl/lib/aglsl/AGLSLParser"),r=function(){function t(t){this._gl=t,this._program=this._gl.createProgram()}return t.prototype.upload=function(e,i){var s=t._aglslParser.parse(t._tokenizer.decribeAGALByteArray(e)),r=t._aglslParser.parse(t._tokenizer.decribeAGALByteArray(i));if(this._vertexShader=this._gl.createShader(this._gl.VERTEX_SHADER),this._fragmentShader=this._gl.createShader(this._gl.FRAGMENT_SHADER),this._gl.shaderSource(this._vertexShader,s),this._gl.compileShader(this._vertexShader),!this._gl.getShaderParameter(this._vertexShader,this._gl.COMPILE_STATUS))throw new Error(this._gl.getShaderInfoLog(this._vertexShader));if(this._gl.shaderSource(this._fragmentShader,r),this._gl.compileShader(this._fragmentShader),!this._gl.getShaderParameter(this._fragmentShader,this._gl.COMPILE_STATUS))throw new Error(this._gl.getShaderInfoLog(this._fragmentShader));if(this._gl.attachShader(this._program,this._vertexShader),this._gl.attachShader(this._program,this._fragmentShader),this._gl.linkProgram(this._program),!this._gl.getProgramParameter(this._program,this._gl.LINK_STATUS))throw new Error(this._gl.getProgramInfoLog(this._program))},t.prototype.dispose=function(){this._gl.deleteProgram(this._program)},t.prototype.focusProgram=function(){this._gl.useProgram(this._program)},Object.defineProperty(t.prototype,"glProgram",{get:function(){return this._program},enumerable:!0,configurable:!0}),t._tokenizer=new i,t._aglslParser=new s,t}();e.exports=r},{"awayjs-stagegl/lib/aglsl/AGALTokenizer":void 0,"awayjs-stagegl/lib/aglsl/AGLSLParser":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/ResourceBaseFlash":[function(t,e){var i=function(){function t(){}return Object.defineProperty(t.prototype,"id",{get:function(){return this._pId},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/SamplerState":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/Stage":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Rectangle"),r=t("awayjs-core/lib/events/Event"),a=t("awayjs-core/lib/events/EventDispatcher"),n=t("awayjs-core/lib/utils/CSS"),o=t("awayjs-display/lib/display/ContextMode"),h=t("awayjs-display/lib/events/StageEvent"),l=t("awayjs-stagegl/lib/base/ContextStage3D"),p=t("awayjs-stagegl/lib/base/ContextWebGL"),d=function(t){function e(e,i,r,a,o){void 0===a&&(a=!1),void 0===o&&(o="baseline"),t.call(this),this._x=0,this._y=0,this._stageIndex=-1,this._antiAlias=0,this._renderTarget=null,this._renderSurfaceSelector=0,this._initialised=!1,this._container=e,this._stageIndex=i,this._stageManager=r,this._viewPort=new s,this._enableDepthAndStencil=!0,n.setElementX(this._container,0),n.setElementY(this._container,0),this.visible=!0}return i(e,t),e.prototype.requestContext=function(t,e,i){var s=this;void 0===t&&(t=!1),void 0===e&&(e="baseline"),void 0===i&&(i="auto"),null!=this._usesSoftwareRendering&&(this._usesSoftwareRendering=t),this._profile=e;try{i==o.FLASH?new l(this._container,this._stageIndex,function(t){return s._callback(t)}):this._context=new p(this._container,this._stageIndex)}catch(a){try{i==o.AUTO?new l(this._container,this._stageIndex,function(t){return s._callback(t)}):this.dispatchEvent(new r(r.ERROR))}catch(a){this.dispatchEvent(new r(r.ERROR))}}this._context&&this._callback(this._context)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width!=t&&(n.setElementWidth(this._container,t),this._width=this._viewPort.width=t,this._backBufferDirty=!0,this.notifyViewportUpdated())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height!=t&&(n.setElementHeight(this._container,t),this._height=this._viewPort.height=t,this._backBufferDirty=!0,this.notifyViewportUpdated())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!=t&&(n.setElementX(this._container,t),this._x=this._viewPort.x=t,this.notifyViewportUpdated())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!=t&&(n.setElementY(this._container,t),this._y=this._viewPort.y=t,this.notifyViewportUpdated())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return n.getElementVisibility(this._container)},set:function(t){n.setElementVisibility(this._container,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),e.prototype.notifyViewportUpdated=function(){this._viewportDirty||(this._viewportDirty=!0,this._viewportUpdated=new h(h.VIEWPORT_UPDATED),this.dispatchEvent(this._viewportUpdated))},e.prototype.notifyEnterFrame=function(){this._enterFrame||(this._enterFrame=new r(r.ENTER_FRAME)),this.dispatchEvent(this._enterFrame)},e.prototype.notifyExitFrame=function(){this._exitFrame||(this._exitFrame=new r(r.EXIT_FRAME)),this.dispatchEvent(this._exitFrame)},Object.defineProperty(e.prototype,"profile",{get:function(){return this._profile},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._stageManager.iRemoveStage(this),this.freeContext(),this._stageManager=null,this._stageIndex=-1},e.prototype.configureBackBuffer=function(t,e,i,s){this.width=t,this.height=e,this._antiAlias=i,this._enableDepthAndStencil=s,this._context&&this._context.configureBackBuffer(t,e,i,s)},Object.defineProperty(e.prototype,"enableDepthAndStencil",{get:function(){return this._enableDepthAndStencil},set:function(t){this._enableDepthAndStencil=t,this._backBufferDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderTarget",{get:function(){return this._renderTarget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderSurfaceSelector",{get:function(){return this._renderSurfaceSelector},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._context&&(this._backBufferDirty&&(this.configureBackBuffer(this._width,this._height,this._antiAlias,this._enableDepthAndStencil),this._backBufferDirty=!1),this._context.clear((4278190080&this._color)>>>24,(16711680&this._color)>>>16,(65280&this._color)>>>8,255&this._color),this._bufferClear=!0)},e.prototype.addEventListener=function(e,i){t.prototype.addEventListener.call(this,e,i)},e.prototype.removeEventListener=function(e,i){t.prototype.removeEventListener.call(this,e,i)},Object.defineProperty(e.prototype,"scissorRect",{get:function(){return this._scissorRect},set:function(t){this._scissorRect=t,this._context.setScissorRectangle(this._scissorRect)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stageIndex",{get:function(){return this._stageIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usesSoftwareRendering",{get:function(){return this._usesSoftwareRendering},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"antiAlias",{get:function(){return this._antiAlias},set:function(t){this._antiAlias=t,this._backBufferDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewPort",{get:function(){return this._viewportDirty=!1,this._viewPort},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bufferClear",{get:function(){return this._bufferClear},set:function(t){this._bufferClear=t},enumerable:!0,configurable:!0}),e.prototype.freeContext=function(){this._context&&(this._context.dispose(),this.dispatchEvent(new h(h.CONTEXT_DISPOSED))),this._context=null,this._initialised=!1},e.prototype.onEnterFrame=function(){this._context&&(this.clear(),this.notifyEnterFrame(),this._context||this._context.present(),this.notifyExitFrame())},e.prototype.recoverFromDisposal=function(){return this._context?!0:!1},e.prototype._callback=function(t){this._context=t,this._container=this._context.container,this._width&&this._height&&this._context.configureBackBuffer(this._width,this._height,this._antiAlias,this._enableDepthAndStencil),this.dispatchEvent(new h(this._initialised?h.CONTEXT_RECREATED:h.CONTEXT_CREATED)),this._initialised=!0},e}(a);e.exports=d},{"awayjs-core/lib/events/Event":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-core/lib/geom/Rectangle":void 0,"awayjs-core/lib/utils/CSS":void 0,"awayjs-display/lib/display/ContextMode":void 0,"awayjs-display/lib/events/StageEvent":void 0,"awayjs-stagegl/lib/base/ContextStage3D":void 0,"awayjs-stagegl/lib/base/ContextWebGL":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/TextureBaseWebGL":[function(t,e){var i=t("awayjs-core/lib/errors/AbstractMethodError"),s=function(){function t(t){this.textureType="",this._gl=t}return t.prototype.dispose=function(){throw"Abstract method must be overridden."},Object.defineProperty(t.prototype,"glTexture",{get:function(){throw new i},enumerable:!0,configurable:!0}),t}();e.exports=s},{"awayjs-core/lib/errors/AbstractMethodError":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/TextureFlash":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/base/BitmapData"),r=t("awayjs-core/lib/utils/ByteArrayBase"),a=t("awayjs-stagegl/lib/base/OpCodes"),n=t("awayjs-stagegl/lib/base/ResourceBaseFlash"),o=function(t){function e(e,i,s,r,n,o){void 0===o&&(o=!1),t.call(this),this._context=e,this._width=i,this._height=s,this._context.addStream(String.fromCharCode(a.initTexture,n?a.trueValue:a.falseValue)+i+","+s+","+o+","+r+"$"),this._pId=this._context.execute(),this._context._iAddResource(this)}return i(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._context.addStream(String.fromCharCode(a.disposeTexture)+this._pId.toString()+","),this._context.execute(),this._context._iRemoveResource(this),this._context=null
},e.prototype.uploadFromData=function(t,e){if(void 0===e&&(e=0),t instanceof s)t=t.imageData.data;else if(t instanceof HTMLImageElement){var i=document.createElement("canvas"),n=t.width,o=t.height;i.width=n,i.height=o;var h=i.getContext("2d");h.drawImage(t,0,0),t=h.getImageData(0,0,n,o).data}var l=0,p=r.internalGetBase64String(t.length,function(){return t[l++]},null);this._context.addStream(String.fromCharCode(a.uploadBytesTexture)+this._pId+","+e+","+(this._width>>e)+","+(this._height>>e)+","+p+"%"),this._context.execute()},e}(n);e.exports=o},{"awayjs-core/lib/base/BitmapData":void 0,"awayjs-core/lib/utils/ByteArrayBase":void 0,"awayjs-stagegl/lib/base/OpCodes":void 0,"awayjs-stagegl/lib/base/ResourceBaseFlash":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/TextureWebGL":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/base/BitmapData"),r=t("awayjs-stagegl/lib/base/TextureBaseWebGL"),a=function(t){function e(e,i,s){t.call(this,e),this.textureType="texture2d",this._width=i,this._height=s,this._glTexture=this._gl.createTexture()}return i(e,t),e.prototype.dispose=function(){this._gl.deleteTexture(this._glTexture)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameBuffer",{get:function(){if(!this._frameBuffer){this._frameBuffer=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._frameBuffer),this._gl.bindTexture(this._gl.TEXTURE_2D,this._glTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._width,this._height,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null);var t=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,t),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._width,this._height),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._glTexture,0),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,t),this._gl.bindTexture(this._gl.TEXTURE_2D,null),this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,null),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return this._frameBuffer},enumerable:!0,configurable:!0}),e.prototype.uploadFromData=function(t,e){void 0===e&&(e=0),t instanceof s&&(t=t.imageData),this._gl.bindTexture(this._gl.TEXTURE_2D,this._glTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,e,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,t),this._gl.bindTexture(this._gl.TEXTURE_2D,null)},e.prototype.uploadCompressedTextureFromByteArray=function(t,e,i){void 0===i&&(i=!1);this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc")},Object.defineProperty(e.prototype,"glTexture",{get:function(){return this._glTexture},enumerable:!0,configurable:!0}),e.prototype.generateMipmaps=function(){},e}(r);e.exports=a},{"awayjs-core/lib/base/BitmapData":void 0,"awayjs-stagegl/lib/base/TextureBaseWebGL":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/VertexBufferFlash":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/OpCodes"),r=t("awayjs-stagegl/lib/base/ResourceBaseFlash"),a=function(t){function e(e,i,r){t.call(this),this._context=e,this._numVertices=i,this._data32PerVertex=r,this._context.addStream(String.fromCharCode(s.initVertexBuffer,r+s.intMask)+i.toString()+","),this._pId=this._context.execute(),this._context._iAddResource(this)}return i(e,t),e.prototype.uploadFromArray=function(t,e,i){this._context.addStream(String.fromCharCode(s.uploadArrayVertexBuffer,this._pId+s.intMask)+t.join()+"#"+[e,i].join()+","),this._context.execute()},Object.defineProperty(e.prototype,"numVertices",{get:function(){return this._numVertices},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data32PerVertex",{get:function(){return this._data32PerVertex},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._context.addStream(String.fromCharCode(s.disposeVertexBuffer,this._pId+s.intMask)),this._context.execute(),this._context._iRemoveResource(this),this._context=null},e}(r);e.exports=a},{"awayjs-stagegl/lib/base/OpCodes":void 0,"awayjs-stagegl/lib/base/ResourceBaseFlash":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/base/VertexBufferWebGL":[function(t,e){var i=function(){function t(t,e,i){this._gl=t,this._buffer=this._gl.createBuffer(),this._numVertices=e,this._data32PerVertex=i}return t.prototype.uploadFromArray=function(t){this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._buffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(t),this._gl.STATIC_DRAW)},Object.defineProperty(t.prototype,"numVertices",{get:function(){return this._numVertices},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data32PerVertex",{get:function(){return this._data32PerVertex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"glBuffer",{get:function(){return this._buffer},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._gl.deleteBuffer(this._buffer)},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/errors/AnimationSetError":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/Error"),r=function(t){function e(e){t.call(this,e)}return i(e,t),e}(s);e.exports=r},{"awayjs-core/lib/errors/Error":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/events/AnimatorEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e,i){t.call(this,e),this._animator=i}return i(e,t),Object.defineProperty(e.prototype,"animator",{get:function(){return this._animator},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.type,this._animator)},e.START="start",e.STOP="stop",e.CYCLE_COMPLETE="cycle_complete",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/events/ShadingMethodEvent":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/Event"),r=function(t){function e(e){t.call(this,e)}return i(e,t),e.SHADER_INVALIDATED="ShaderInvalidated",e}(s);e.exports=r},{"awayjs-core/lib/events/Event":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/filters/Filter3DBase":[function(t,e){var i=function(){function t(){this._tasks=new Array}return Object.defineProperty(t.prototype,"requireDepthRender",{get:function(){return this._requireDepthRender},enumerable:!0,configurable:!0}),t.prototype.pAddTask=function(t){this._tasks.push(t),null==this._requireDepthRender&&(this._requireDepthRender=t.requireDepthRender)},Object.defineProperty(t.prototype,"tasks",{get:function(){return this._tasks},enumerable:!0,configurable:!0}),t.prototype.getMainInputTexture=function(t){return this._tasks[0].getMainInputTexture(t)},Object.defineProperty(t.prototype,"textureWidth",{get:function(){return this._textureWidth},set:function(t){this._textureWidth=t;for(var e=0;e<this._tasks.length;++e)this._tasks[e].textureWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textureHeight",{get:function(){return this._textureHeight},set:function(t){this._textureHeight=t;for(var e=0;e<this._tasks.length;++e)this._tasks[e].textureHeight=t},enumerable:!0,configurable:!0}),t.prototype.setRenderTargets=function(t){this._tasks[this._tasks.length-1].target=t},t.prototype.dispose=function(){for(var t=0;t<this._tasks.length;++t)this._tasks[t].dispose()},t.prototype.update=function(){},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/filters/tasks/Filter3DTaskBase":[function(t,e){var i=t("awayjs-core/lib/errors/AbstractMethodError"),s=t("awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler"),r=t("awayjs-stagegl/lib/base/ContextGLTextureFormat"),a=function(){function t(t){void 0===t&&(t=!1),this._scaledTextureWidth=-1,this._scaledTextureHeight=-1,this._textureWidth=-1,this._textureHeight=-1,this._textureDimensionsInvalid=!0,this._program3DInvalid=!0,this._textureScale=0,this._requireDepthRender=t}return Object.defineProperty(t.prototype,"textureScale",{get:function(){return this._textureScale},set:function(t){this._textureScale!=t&&(this._textureScale=t,this._scaledTextureWidth=this._textureWidth>>this._textureScale,this._scaledTextureHeight=this._textureHeight>>this._textureScale,this._textureDimensionsInvalid=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textureWidth",{get:function(){return this._textureWidth},set:function(t){this._textureWidth!=t&&(this._textureWidth=t,this._scaledTextureWidth=this._textureWidth>>this._textureScale,this._textureDimensionsInvalid=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textureHeight",{get:function(){return this._textureHeight},set:function(t){this._textureHeight!=t&&(this._textureHeight=t,this._scaledTextureHeight=this._textureHeight>>this._textureScale,this._textureDimensionsInvalid=!0)},enumerable:!0,configurable:!0}),t.prototype.getMainInputTexture=function(t){return this._textureDimensionsInvalid&&this.pUpdateTextures(t),this._mainInputTexture},t.prototype.dispose=function(){this._mainInputTexture&&this._mainInputTexture.dispose(),this._program3D&&this._program3D.dispose()},t.prototype.pInvalidateProgram=function(){this._program3DInvalid=!0},t.prototype.pUpdateProgram=function(t){this._program3D&&this._program3D.dispose(),this._program3D=t.context.createProgram();var e=(new s).assemble("part vertex 1\n"+this.pGetVertexCode()+"endpart").vertex.data,i=(new s).assemble("part fragment 1\n"+this.pGetFragmentCode()+"endpart").fragment.data;this._program3D.upload(e,i),this._program3DInvalid=!1},t.prototype.pGetVertexCode=function(){return"mov op, va0\nmov v0, va1\n"},t.prototype.pGetFragmentCode=function(){throw new i},t.prototype.pUpdateTextures=function(t){this._mainInputTexture&&this._mainInputTexture.dispose(),this._mainInputTexture=t.context.createTexture(this._scaledTextureWidth,this._scaledTextureHeight,r.BGRA,!0),this._textureDimensionsInvalid=!1},t.prototype.getProgram=function(t){return this._program3DInvalid&&this.pUpdateProgram(t),this._program3D},t.prototype.activate=function(){},t.prototype.deactivate=function(){},Object.defineProperty(t.prototype,"requireDepthRender",{get:function(){return this._requireDepthRender},enumerable:!0,configurable:!0}),t}();e.exports=a},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-stagegl/lib/aglsl/assembler/AGALMiniAssembler":void 0,"awayjs-stagegl/lib/base/ContextGLTextureFormat":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/managers/RTTBufferManager":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Rectangle"),r=t("awayjs-core/lib/events/Event"),a=t("awayjs-core/lib/events/EventDispatcher"),n=t("awayjs-core/lib/utils/TextureUtils"),o=function(t){function e(e){t.call(this),this._viewWidth=-1,this._viewHeight=-1,this._textureWidth=-1,this._textureHeight=-1,this._buffersInvalid=!0,this._renderToTextureRect=new s,this._stage=e}return i(e,t),e.getInstance=function(t){if(!t)throw new Error("stage key cannot be null!");null==e._instances&&(e._instances=new Array);var i=e.getRTTBufferManagerFromStage(t);if(null==i){i=new e(t);var s=new h;s.stage3d=t,s.rttbfm=i,e._instances.push(s)}return i},e.getRTTBufferManagerFromStage=function(t){for(var i,s=e._instances.length,r=0;s>r;r++)if(i=e._instances[r],i.stage3d===t)return i.rttbfm;return null},e.deleteRTTBufferManager=function(t){for(var i,s=e._instances.length,r=0;s>r;r++)if(i=e._instances[r],i.stage3d===t)return void e._instances.splice(r,1)},Object.defineProperty(e.prototype,"textureRatioX",{get:function(){return this._buffersInvalid&&this.updateRTTBuffers(),this._textureRatioX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textureRatioY",{get:function(){return this._buffersInvalid&&this.updateRTTBuffers(),this._textureRatioY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewWidth",{get:function(){return this._viewWidth},set:function(t){t!=this._viewWidth&&(this._viewWidth=t,this._buffersInvalid=!0,this._textureWidth=n.getBestPowerOf2(this._viewWidth),this._textureWidth>this._viewWidth?(this._renderToTextureRect.x=Math.floor(.5*(this._textureWidth-this._viewWidth)),this._renderToTextureRect.width=this._viewWidth):(this._renderToTextureRect.x=0,this._renderToTextureRect.width=this._textureWidth),this.dispatchEvent(new r(r.RESIZE)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewHeight",{get:function(){return this._viewHeight},set:function(t){t!=this._viewHeight&&(this._viewHeight=t,this._buffersInvalid=!0,this._textureHeight=n.getBestPowerOf2(this._viewHeight),this._textureHeight>this._viewHeight?(this._renderToTextureRect.y=Math.floor(.5*(this._textureHeight-this._viewHeight)),this._renderToTextureRect.height=this._viewHeight):(this._renderToTextureRect.y=0,this._renderToTextureRect.height=this._textureHeight),this.dispatchEvent(new r(r.RESIZE)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderToTextureVertexBuffer",{get:function(){return this._buffersInvalid&&this.updateRTTBuffers(),this._renderToTextureVertexBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderToScreenVertexBuffer",{get:function(){return this._buffersInvalid&&this.updateRTTBuffers(),this._renderToScreenVertexBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderToTextureRect",{get:function(){return this._buffersInvalid&&this.updateRTTBuffers(),this._renderToTextureRect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textureWidth",{get:function(){return this._textureWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textureHeight",{get:function(){return this._textureHeight},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){e.deleteRTTBufferManager(this._stage),this._indexBuffer&&(this._indexBuffer.dispose(),this._renderToScreenVertexBuffer.dispose(),this._renderToTextureVertexBuffer.dispose(),this._renderToScreenVertexBuffer=null,this._renderToTextureVertexBuffer=null,this._indexBuffer=null)},e.prototype.updateRTTBuffers=function(){var t,e,i,s,r=this._stage.context;null==this._renderToTextureVertexBuffer&&(this._renderToTextureVertexBuffer=r.createVertexBuffer(4,5)),null==this._renderToScreenVertexBuffer&&(this._renderToScreenVertexBuffer=r.createVertexBuffer(4,5)),this._indexBuffer||(this._indexBuffer=r.createIndexBuffer(6),this._indexBuffer.uploadFromArray([2,1,0,3,2,0],0,6)),this._textureRatioX=i=Math.min(this._viewWidth/this._textureWidth,1),this._textureRatioY=s=Math.min(this._viewHeight/this._textureHeight,1);var a=.5*(1-i),n=.5*(i+1),o=.5*(s+1),h=.5*(1-s);t=[-i,-s,a,o,0,i,-s,n,o,1,i,s,n,h,2,-i,s,a,h,3],e=[-1,-1,a,o,0,1,-1,n,o,1,1,1,n,h,2,-1,1,a,h,3],this._renderToTextureVertexBuffer.uploadFromArray(t,0,4),this._renderToScreenVertexBuffer.uploadFromArray(e,0,4),this._buffersInvalid=!1},e}(a),h=function(){function t(){}return t}();e.exports=o},{"awayjs-core/lib/events/Event":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-core/lib/geom/Rectangle":void 0,"awayjs-core/lib/utils/TextureUtils":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/managers/StageManager":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/events/EventDispatcher"),r=t("awayjs-core/lib/errors/ArgumentError"),a=t("awayjs-display/lib/events/StageEvent"),n=t("awayjs-stagegl/lib/base/Stage"),o=function(t){function e(){var i=this;t.call(this),this._stages=new Array(e.STAGE_MAX_QUANTITY),this._onContextCreatedDelegate=function(t){return i.onContextCreated(t)}}return i(e,t),e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.getStageAt=function(t,i,s,o){if(void 0===i&&(i=!1),void 0===s&&(s="baseline"),void 0===o&&(o="auto"),0>t||t>=e.STAGE_MAX_QUANTITY)throw new r("Index is out of bounds [0.."+e.STAGE_MAX_QUANTITY+"]");if(!this._stages[t]){e._numStages++;var h=document.createElement("canvas");h.id="stage"+t,document.body.appendChild(h);var l=this._stages[t]=new n(h,t,this,i,s);l.addEventListener(a.CONTEXT_CREATED,this._onContextCreatedDelegate),l.requestContext(i,s,o)}return l},e.prototype.iRemoveStage=function(t){e._numStages--,t.removeEventListener(a.CONTEXT_CREATED,this._onContextCreatedDelegate),this._stages[t.stageIndex]=null},e.prototype.getFreeStage=function(t,e,i){void 0===t&&(t=!1),void 0===e&&(e="baseline"),void 0===i&&(i="auto");for(var s=0,r=this._stages.length;r>s;){if(!this._stages[s])return this.getStageAt(s,t,e,i);++s}return null},Object.defineProperty(e.prototype,"hasFreeStage",{get:function(){return e._numStages<e.STAGE_MAX_QUANTITY?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numSlotsFree",{get:function(){return e.STAGE_MAX_QUANTITY-e._numStages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numSlotsUsed",{get:function(){return e._numStages},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numSlotsTotal",{get:function(){return this._stages.length},enumerable:!0,configurable:!0}),e.prototype.onContextCreated=function(){},e.STAGE_MAX_QUANTITY=8,e._numStages=0,e}(s);e.exports=o},{"awayjs-core/lib/errors/ArgumentError":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-display/lib/events/StageEvent":void 0,"awayjs-stagegl/lib/base/Stage":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/LineBasicMaterial":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),r=t("awayjs-display/lib/base/LineSubGeometry"),a=t("awayjs-stagegl/lib/base/ContextGLProgramType"),n=t("awayjs-stagegl/lib/materials/StageGLMaterialBase"),o=t("awayjs-stagegl/lib/materials/passes/LineBasicPass"),h=function(t){function e(e){void 0===e&&(e=1.25),t.call(this),this._constants=new Array(0,0,0,0),this._thickness=e,this.bothSides=!0,this._pAddScreenPass(this._screenPass=new o),this._calcMatrix=new s,this._constants[1]=1/255}return i(e,t),e.prototype._iGetVertexCode=function(){return"m44 vt0, va0, vc8			\nm44 vt1, va1, vc8			\nsub vt2, vt1, vt0 			\nslt vt5.x, vt0.z, vc7.z			\nsub vt5.y, vc5.x, vt5.x			\nadd vt4.x, vt0.z, vc7.z			\nsub vt4.y, vt0.z, vt1.z			\nseq vt4.z, vt4.y vc6.x			\nadd vt4.y, vt4.y, vt4.z			\ndiv vt4.z, vt4.x, vt4.y			\nmul vt4.xyz, vt4.zzz, vt2.xyz	\nadd vt3.xyz, vt0.xyz, vt4.xyz	\nmov vt3.w, vc5.x			\nmul vt0, vt0, vt5.yyyy			\nmul vt3, vt3, vt5.xxxx			\nadd vt0, vt0, vt3				\nsub vt2, vt1, vt0 			\nnrm vt2.xyz, vt2.xyz			\nnrm vt5.xyz, vt0.xyz			\nmov vt5.w, vc5.x				\ncrs vt3.xyz, vt2, vt5			\nnrm vt3.xyz, vt3.xyz			\nmul vt3.xyz, vt3.xyz, va2.xxx	\nmov vt3.w, vc5.x			\ndp3 vt4.x, vt0, vc6			\nmul vt4.x, vt4.x, vc7.x			\nmul vt3.xyz, vt3.xyz, vt4.xxx	\nadd vt0.xyz, vt0.xyz, vt3.xyz	\nm44 op, vt0, vc0			\nmov v0, va3				\n"},e.prototype._iActivatePass=function(i,s,r){t.prototype._iActivatePass.call(this,i,s,r);var n=s.context;this._constants[0]=this._thickness/(s.scissorRect?Math.min(s.scissorRect.width,s.scissorRect.height):Math.min(s.width,s.height)),this._constants[2]=r.projection.near,n.setProgramConstantsFromArray(a.VERTEX,5,e.pONE_VECTOR,1),n.setProgramConstantsFromArray(a.VERTEX,6,e.pFRONT_VECTOR,1),n.setProgramConstantsFromArray(a.VERTEX,7,this._constants,1),n.setProgramConstantsFromMatrix(a.VERTEX,0,r.projection.matrix,!0)},e.prototype._iRenderPass=function(e,i,s,n,o){t.prototype._iRenderPass.call(this,e,i,s,n,o);var h=s.context;this._calcMatrix.copyFrom(i.sourceEntity.sceneTransform),this._calcMatrix.append(n.inverseSceneTransform),h.setProgramConstantsFromMatrix(a.VERTEX,8,this._calcMatrix,!0),h.activateBuffer(0,i.getVertexData(r.START_POSITION_DATA),i.getVertexOffset(r.START_POSITION_DATA),r.POSITION_FORMAT),h.activateBuffer(1,i.getVertexData(r.END_POSITION_DATA),i.getVertexOffset(r.END_POSITION_DATA),r.POSITION_FORMAT),h.activateBuffer(2,i.getVertexData(r.THICKNESS_DATA),i.getVertexOffset(r.THICKNESS_DATA),r.THICKNESS_FORMAT),h.activateBuffer(3,i.getVertexData(r.COLOR_DATA),i.getVertexOffset(r.COLOR_DATA),r.COLOR_FORMAT),h.drawTriangles(h.getIndexBuffer(i.getIndexData()),0,i.numTriangles)},e.pONE_VECTOR=Array(1,1,1,1),e.pFRONT_VECTOR=Array(0,0,-1,0),e}(n);e.exports=h},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-display/lib/base/LineSubGeometry":void 0,"awayjs-stagegl/lib/base/ContextGLProgramType":void 0,"awayjs-stagegl/lib/materials/StageGLMaterialBase":void 0,"awayjs-stagegl/lib/materials/passes/LineBasicPass":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/SkyboxMaterial":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/base/TriangleSubGeometry"),r=t("awayjs-stagegl/lib/base/ContextGLCompareMode"),a=t("awayjs-stagegl/lib/base/ContextGLMipFilter"),n=t("awayjs-stagegl/lib/base/ContextGLProgramType"),o=t("awayjs-stagegl/lib/base/ContextGLTextureFilter"),h=t("awayjs-stagegl/lib/base/ContextGLWrapMode"),l=t("awayjs-stagegl/lib/materials/StageGLMaterialBase"),p=t("awayjs-stagegl/lib/materials/passes/SkyboxPass"),d=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),u=function(t){function e(e,i,s,r){void 0===i&&(i=!0),void 0===s&&(s=!1),void 0===r&&(r=!1),t.call(this),this._cubeMap=e,this._pAddScreenPass(this._skyboxPass=new p),this._vertexData=new Array(0,0,0,0,1,1,1,1)}return i(e,t),Object.defineProperty(e.prototype,"cubeMap",{get:function(){return this._cubeMap},set:function(t){t&&this._cubeMap&&(t.hasMipmaps!=this._cubeMap.hasMipmaps||t.format!=this._cubeMap.format)&&this._pInvalidatePasses(),this._cubeMap=t},enumerable:!0,configurable:!0}),e.prototype._iGetVertexCode=function(){return"mul vt0, va0, vc5\nadd vt0, vt0, vc4\nm44 op, vt0, vc0\nmov v0, va0\n"},e.prototype._iGetFragmentCode=function(){var t=",mipnone";return this._cubeMap.hasMipmaps&&(t=",miplinear"),"tex ft0, v0, fs0 <cube,"+d.getFormatStringForTexture(this._cubeMap)+"linear,clamp"+t+">\n"},e.prototype._iActivatePass=function(e,i,s){t.prototype._iActivatePass.call(this,e,i,s);var n=i.context;n.setSamplerStateAt(0,h.CLAMP,o.LINEAR,this._cubeMap.hasMipmaps?a.MIPLINEAR:a.MIPNONE),n.setDepthTest(!1,r.LESS),n.activateCubeTexture(0,this._cubeMap)},e.prototype._iRenderPass=function(e,i,r,a,o){t.prototype._iRenderPass.call(this,e,i,r,a,o);var h=r.context,l=a.scenePosition;this._vertexData[0]=l.x,this._vertexData[1]=l.y,this._vertexData[2]=l.z,this._vertexData[4]=this._vertexData[5]=this._vertexData[6]=a.projection.far/Math.sqrt(3),h.setProgramConstantsFromMatrix(n.VERTEX,0,o,!0),h.setProgramConstantsFromArray(n.VERTEX,4,this._vertexData,2),h.activateBuffer(0,i.getVertexData(s.POSITION_DATA),i.getVertexOffset(s.POSITION_DATA),s.POSITION_FORMAT),h.drawTriangles(h.getIndexBuffer(i.getIndexData()),0,i.numTriangles)},e}(l);e.exports=u},{"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-stagegl/lib/base/ContextGLCompareMode":void 0,"awayjs-stagegl/lib/base/ContextGLMipFilter":void 0,"awayjs-stagegl/lib/base/ContextGLProgramType":void 0,"awayjs-stagegl/lib/base/ContextGLTextureFilter":void 0,"awayjs-stagegl/lib/base/ContextGLWrapMode":void 0,"awayjs-stagegl/lib/materials/StageGLMaterialBase":void 0,"awayjs-stagegl/lib/materials/passes/SkyboxPass":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/StageGLMaterialBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/materials/MaterialBase"),r=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype._iGetVertexCode=function(){return""},e.prototype._iGetFragmentCode=function(){return""},e}(s);e.exports=r},{"awayjs-display/lib/materials/MaterialBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/TriangleBasicMaterial":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/textures/Texture2DBase"),r=t("awayjs-display/lib/base/BlendMode"),a=t("awayjs-stagegl/lib/base/ContextGLCompareMode"),n=t("awayjs-stagegl/lib/materials/passes/TriangleBasicPass"),o=t("awayjs-stagegl/lib/materials/TriangleMaterialBase"),h=function(t){function e(e,i,r,o){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=!1),void 0===o&&(o=!1),t.call(this),this._alphaBlending=!1,this._alpha=1,this._depthCompareMode=a.LESS_EQUAL,this._screenPass=new n,e instanceof s?(this.texture=e,this.smooth=null==i?!0:!1,this.repeat=r,this.mipmap=o):(this.color=e?Number(e):13421772,this.alpha=null==i?1:Number(i))}return i(e,t),Object.defineProperty(e.prototype,"depthCompareMode",{get:function(){return this._depthCompareMode},set:function(t){this._depthCompareMode!=t&&(this._depthCompareMode=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t>1?t=1:0>t&&(t=0),this._alpha!=t&&(this._alpha=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaBlending",{get:function(){return this._alphaBlending},set:function(t){this._alphaBlending!=t&&(this._alphaBlending=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),e.prototype.iUpdateMaterial=function(){var t;this._pScreenPassesInvalid&&(this.pUpdateScreenPasses(),t=!0),t&&(this._pClearScreenPasses(),this._pAddScreenPass(this._screenPass))},e.prototype.pUpdateScreenPasses=function(){this.initPasses(),this.setBlendAndCompareModes(),this._pScreenPassesInvalid=!1},e.prototype.initPasses=function(){},e.prototype.setBlendAndCompareModes=function(){this._pRequiresBlending=this._pBlendMode!=r.NORMAL||this._alphaBlending||this._alpha<1,this._screenPass.depthCompareMode=this._depthCompareMode,this._screenPass.preserveAlpha=this._pRequiresBlending,this._screenPass.setBlendMode(this._pBlendMode==r.NORMAL&&this._pRequiresBlending?r.LAYER:this._pBlendMode),this._screenPass.forceSeparateMVP=!1},e}(o);e.exports=h},{"awayjs-core/lib/textures/Texture2DBase":void 0,"awayjs-display/lib/base/BlendMode":void 0,"awayjs-stagegl/lib/base/ContextGLCompareMode":void 0,"awayjs-stagegl/lib/materials/TriangleMaterialBase":void 0,"awayjs-stagegl/lib/materials/passes/TriangleBasicPass":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/TriangleMaterialBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3DUtils"),r=t("awayjs-display/lib/base/TriangleSubGeometry"),a=t("awayjs-stagegl/lib/base/ContextGLProgramType"),n=t("awayjs-stagegl/lib/materials/StageGLMaterialBase"),o=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype._iGetVertexCode=function(t,e,i){var s="",r=t.globalPosDependencies>0?i.globalPositionVertex:i.localPosition,a=e.getFreeVertexConstant();if(e.getFreeVertexConstant(),e.getFreeVertexConstant(),e.getFreeVertexConstant(),t.viewMatrixIndex=4*a.index,t.projectionDependencies>0){i.projectionFragment=e.getFreeVarying();var n=e.getFreeVertexVectorTemp();s+="m44 "+n+", "+r+", "+a+"\nmov "+i.projectionFragment+", "+n+"\nmov op, "+n+"\n"}else s+="m44 op, "+r+", "+a+"\n";return s},e.prototype._iRenderPass=function(e,i,n,o,h){t.prototype._iRenderPass.call(this,e,i,n,o,h);var l=e.shaderObject;if(l.sceneMatrixIndex>=0)i.sourceEntity.getRenderSceneTransform(o).copyRawDataTo(l.vertexConstantData,l.sceneMatrixIndex,!0),h.copyRawDataTo(l.vertexConstantData,l.viewMatrixIndex,!0);else{var p=s.CALCULATION_MATRIX;p.copyFrom(i.sourceEntity.getRenderSceneTransform(o)),p.append(h),p.copyRawDataTo(l.vertexConstantData,l.viewMatrixIndex,!0)}var d=n.context;d.setProgramConstantsFromArray(a.VERTEX,0,l.vertexConstantData,l.numUsedVertexConstants),d.setProgramConstantsFromArray(a.FRAGMENT,0,l.fragmentConstantData,l.numUsedFragmentConstants),d.activateBuffer(0,i.getVertexData(r.POSITION_DATA),i.getVertexOffset(r.POSITION_DATA),r.POSITION_FORMAT),d.drawTriangles(d.getIndexBuffer(i.getIndexData()),0,i.numTriangles)},e}(n);e.exports=o},{"awayjs-core/lib/geom/Matrix3DUtils":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-stagegl/lib/base/ContextGLProgramType":void 0,"awayjs-stagegl/lib/materials/StageGLMaterialBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/TriangleMaterialMode":[function(t,e){var i=function(){function t(){}return t.SINGLE_PASS="singlePass",t.MULTI_PASS="multiPass",t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/TriangleMethodMaterial":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/ColorTransform"),r=t("awayjs-core/lib/textures/Texture2DBase"),a=t("awayjs-display/lib/base/BlendMode"),n=t("awayjs-display/lib/materials/lightpickers/StaticLightPicker"),o=t("awayjs-stagegl/lib/base/ContextGLCompareMode"),h=t("awayjs-stagegl/lib/materials/methods/AmbientBasicMethod"),l=t("awayjs-stagegl/lib/materials/methods/DiffuseBasicMethod"),p=t("awayjs-stagegl/lib/materials/methods/NormalBasicMethod"),d=t("awayjs-stagegl/lib/materials/methods/SpecularBasicMethod"),u=t("awayjs-stagegl/lib/materials/passes/MaterialPassMode"),c=t("awayjs-stagegl/lib/materials/passes/TriangleMethodPass"),_=t("awayjs-stagegl/lib/materials/TriangleMaterialBase"),y=t("awayjs-stagegl/lib/materials/TriangleMaterialMode"),g=function(t){function e(e,i,s,a){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=!1),void 0===a&&(a=!1),t.call(this),this._alphaBlending=!1,this._alpha=1,this._ambientMethod=new h,this._diffuseMethod=new l,this._normalMethod=new p,this._specularMethod=new d,this._depthCompareMode=o.LESS_EQUAL,this._materialMode=y.SINGLE_PASS,e instanceof r?(this.texture=e,this.smooth=null==i?!0:!1,this.repeat=s,this.mipmap=a):(this.color=null==e?16777215:Number(e),this.alpha=null==i?1:Number(i))}return i(e,t),Object.defineProperty(e.prototype,"materialMode",{get:function(){return this._materialMode},set:function(t){this._materialMode!=t&&(this._materialMode=t,this._pInvalidateScreenPasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthCompareMode",{get:function(){return this._depthCompareMode},set:function(t){this._depthCompareMode!=t&&(this._depthCompareMode=t,this._pInvalidateScreenPasses())
},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t>1?t=1:0>t&&(t=0),this._alpha!=t&&(this._alpha=t,null==this._colorTransform&&(this._colorTransform=new s),this._colorTransform.alphaMultiplier=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorTransform",{get:function(){return this._screenPass.colorTransform},set:function(t){this._screenPass.colorTransform=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuseTexture",{get:function(){return this._diffuseMethod.texture},set:function(t){this._diffuseMethod.texture=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ambientMethod",{get:function(){return this._ambientMethod},set:function(t){this._ambientMethod!=t&&(t&&this._ambientMethod&&t.copyFrom(this._ambientMethod),this._ambientMethod=t,this._pInvalidateScreenPasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowMethod",{get:function(){return this._shadowMethod},set:function(t){this._shadowMethod!=t&&(t&&this._shadowMethod&&t.copyFrom(this._shadowMethod),this._shadowMethod=t,this._pInvalidateScreenPasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuseMethod",{get:function(){return this._diffuseMethod},set:function(t){this._diffuseMethod!=t&&(t&&this._diffuseMethod&&t.copyFrom(this._diffuseMethod),this._diffuseMethod=t,this._pInvalidateScreenPasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specularMethod",{get:function(){return this._specularMethod},set:function(t){this._specularMethod!=t&&(t&&this._specularMethod&&t.copyFrom(this._specularMethod),this._specularMethod=t,this._pInvalidateScreenPasses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalMethod",{get:function(){return this._normalMethod},set:function(t){this._normalMethod!=t&&(t&&this._normalMethod&&t.copyFrom(this._normalMethod),this._normalMethod=t,this._pInvalidateScreenPasses())},enumerable:!0,configurable:!0}),e.prototype.addEffectMethod=function(t){null==this._screenPass&&(this._screenPass=new c),this._screenPass.addEffectMethod(t),this._pInvalidateScreenPasses()},Object.defineProperty(e.prototype,"numEffectMethods",{get:function(){return this._screenPass?this._screenPass.numEffectMethods:0},enumerable:!0,configurable:!0}),e.prototype.hasEffectMethod=function(t){return this._screenPass?this._screenPass.hasEffectMethod(t):!1},e.prototype.getEffectMethodAt=function(t){return null==this._screenPass?null:this._screenPass.getEffectMethodAt(t)},e.prototype.addEffectMethodAt=function(t,e){null==this._screenPass&&(this._screenPass=new c),this._screenPass.addEffectMethodAt(t,e),this._pInvalidatePasses()},e.prototype.removeEffectMethod=function(t){null!=this._screenPass&&(this._screenPass.removeEffectMethod(t),0==this._screenPass.numEffectMethods&&this._pInvalidatePasses())},Object.defineProperty(e.prototype,"normalMap",{get:function(){return this._normalMethod.normalMap},set:function(t){this._normalMethod.normalMap=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specularMap",{get:function(){return this._specularMethod.texture},set:function(t){this._specularMethod.texture=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gloss",{get:function(){return this._specularMethod.gloss},set:function(t){this._specularMethod.gloss=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ambient",{get:function(){return this._ambientMethod.ambient},set:function(t){this._ambientMethod.ambient=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specular",{get:function(){return this._specularMethod.specular},set:function(t){this._specularMethod.specular=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ambientColor",{get:function(){return this._diffuseMethod.ambientColor},set:function(t){this._diffuseMethod.ambientColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuseColor",{get:function(){return this._diffuseMethod.diffuseColor},set:function(t){this._diffuseMethod.diffuseColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specularColor",{get:function(){return this._specularMethod.specularColor},set:function(t){this._specularMethod.specularColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaBlending",{get:function(){return this._alphaBlending},set:function(t){this._alphaBlending!=t&&(this._alphaBlending=t,this._pInvalidatePasses())},enumerable:!0,configurable:!0}),e.prototype._iUpdateMaterial=function(){if(this._pScreenPassesInvalid){if(this._pScreenPassesInvalid=!1,this.initPasses(),this.setBlendAndCompareModes(),this._pClearScreenPasses(),this._materialMode==y.MULTI_PASS&&(this._casterLightPass&&this._pAddScreenPass(this._casterLightPass),this._nonCasterLightPasses))for(var t=0;t<this._nonCasterLightPasses.length;++t)this._pAddScreenPass(this._nonCasterLightPasses[t]);this._screenPass&&this._pAddScreenPass(this._screenPass)}},e.prototype.initPasses=function(){0==this.numLights||this.numEffectMethods>0||this._materialMode==y.SINGLE_PASS?this.initEffectPass():this._screenPass&&this.removeEffectPass(),this._shadowMethod&&this._materialMode==y.MULTI_PASS?this.initCasterLightPass():this._casterLightPass&&this.removeCasterLightPass(),this.numNonCasters>0&&this._materialMode==y.MULTI_PASS?this.initNonCasterLightPasses():this._nonCasterLightPasses&&this.removeNonCasterLightPasses()},e.prototype.setBlendAndCompareModes=function(){var t=Boolean(this._casterLightPass||this._screenPass);if(this._casterLightPass&&(this._casterLightPass.forceSeparateMVP=t,this._casterLightPass.setBlendMode(a.NORMAL),this._casterLightPass.depthCompareMode=this._depthCompareMode),this._nonCasterLightPasses){var e=0;this._casterLightPass||(this._nonCasterLightPasses[0].forceSeparateMVP=t,this._nonCasterLightPasses[0].setBlendMode(a.NORMAL),this._nonCasterLightPasses[0].depthCompareMode=this._depthCompareMode,e=1);for(var i=e;i<this._nonCasterLightPasses.length;++i)this._nonCasterLightPasses[i].forceSeparateMVP=t,this._nonCasterLightPasses[i].setBlendMode(a.ADD),this._nonCasterLightPasses[i].depthCompareMode=o.LESS_EQUAL}this._casterLightPass||this._nonCasterLightPasses?(this._pRequiresBlending=!1,this._screenPass&&(this._screenPass.passMode=u.EFFECTS,this._screenPass.depthCompareMode=o.LESS_EQUAL,this._screenPass.setBlendMode(a.LAYER),this._screenPass.forceSeparateMVP=t)):this._screenPass&&(this._pRequiresBlending=this._pBlendMode!=a.NORMAL||this._alphaBlending||this._colorTransform&&this._colorTransform.alphaMultiplier<1,this._screenPass.passMode=u.SUPER_SHADER,this._screenPass.depthCompareMode=this._depthCompareMode,this._screenPass.preserveAlpha=this._pRequiresBlending,this._screenPass.colorTransform=this._colorTransform,this._screenPass.setBlendMode(this._pBlendMode==a.NORMAL&&this._pRequiresBlending?a.LAYER:this._pBlendMode),this._screenPass.forceSeparateMVP=!1)},e.prototype.initCasterLightPass=function(){null==this._casterLightPass&&(this._casterLightPass=new c(u.LIGHTING)),this._casterLightPass.lightPicker=new n([this._shadowMethod.castingLight]),this._casterLightPass.shadowMethod=this._shadowMethod,this._casterLightPass.diffuseMethod=this._diffuseMethod,this._casterLightPass.ambientMethod=this._ambientMethod,this._casterLightPass.normalMethod=this._normalMethod,this._casterLightPass.specularMethod=this._specularMethod},e.prototype.removeCasterLightPass=function(){this._casterLightPass.dispose(),this._pRemoveScreenPass(this._casterLightPass),this._casterLightPass=null},e.prototype.initNonCasterLightPasses=function(){this.removeNonCasterLightPasses();var t,e=this._pLightPicker.numDirectionalLights,i=this._pLightPicker.numPointLights,s=this._pLightPicker.numLightProbes,r=0,a=0,n=0;for(this._casterLightPass||(e+=this._pLightPicker.numCastingDirectionalLights,i+=this._pLightPicker.numCastingPointLights),this._nonCasterLightPasses=new Array;e>r||i>a||s>n;)t=new c(u.LIGHTING),t.includeCasters=null==this._shadowMethod,t.directionalLightsOffset=r,t.pointLightsOffset=a,t.lightProbesOffset=n,t.lightPicker=this._pLightPicker,t.diffuseMethod=this._diffuseMethod,t.ambientMethod=this._ambientMethod,t.normalMethod=this._normalMethod,t.specularMethod=this._specularMethod,this._nonCasterLightPasses.push(t),r+=t.iNumDirectionalLights,a+=t.iNumPointLights,n+=t.iNumLightProbes},e.prototype.removeNonCasterLightPasses=function(){if(this._nonCasterLightPasses){for(var t=0;t<this._nonCasterLightPasses.length;++t)this._pRemoveScreenPass(this._nonCasterLightPasses[t]);this._nonCasterLightPasses=null}},e.prototype.removeEffectPass=function(){this._screenPass.ambientMethod!=this._ambientMethod&&this._screenPass.ambientMethod.dispose(),this._screenPass.diffuseMethod!=this._diffuseMethod&&this._screenPass.diffuseMethod.dispose(),this._screenPass.specularMethod!=this._specularMethod&&this._screenPass.specularMethod.dispose(),this._screenPass.normalMethod!=this._normalMethod&&this._screenPass.normalMethod.dispose(),this._pRemoveScreenPass(this._screenPass),this._screenPass=null},e.prototype.initEffectPass=function(){null==this._screenPass&&(this._screenPass=new c),this._materialMode==y.SINGLE_PASS?(this._screenPass.ambientMethod=this._ambientMethod,this._screenPass.diffuseMethod=this._diffuseMethod,this._screenPass.specularMethod=this._specularMethod,this._screenPass.normalMethod=this._normalMethod,this._screenPass.shadowMethod=this._shadowMethod):this._materialMode==y.MULTI_PASS&&(this._screenPass.ambientMethod=0==this.numLights?this._ambientMethod:null,this._screenPass.preserveAlpha=!1,this._screenPass.normalMethod=this._normalMethod)},Object.defineProperty(e.prototype,"numLights",{get:function(){return this._pLightPicker?this._pLightPicker.numLightProbes+this._pLightPicker.numDirectionalLights+this._pLightPicker.numPointLights+this._pLightPicker.numCastingDirectionalLights+this._pLightPicker.numCastingPointLights:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numNonCasters",{get:function(){return this._pLightPicker?this._pLightPicker.numLightProbes+this._pLightPicker.numDirectionalLights+this._pLightPicker.numPointLights:0},enumerable:!0,configurable:!0}),e}(_);e.exports=g},{"awayjs-core/lib/geom/ColorTransform":void 0,"awayjs-core/lib/textures/Texture2DBase":void 0,"awayjs-display/lib/base/BlendMode":void 0,"awayjs-display/lib/materials/lightpickers/StaticLightPicker":void 0,"awayjs-stagegl/lib/base/ContextGLCompareMode":void 0,"awayjs-stagegl/lib/materials/TriangleMaterialBase":void 0,"awayjs-stagegl/lib/materials/TriangleMaterialMode":void 0,"awayjs-stagegl/lib/materials/methods/AmbientBasicMethod":void 0,"awayjs-stagegl/lib/materials/methods/DiffuseBasicMethod":void 0,"awayjs-stagegl/lib/materials/methods/NormalBasicMethod":void 0,"awayjs-stagegl/lib/materials/methods/SpecularBasicMethod":void 0,"awayjs-stagegl/lib/materials/passes/MaterialPassMode":void 0,"awayjs-stagegl/lib/materials/passes/TriangleMethodPass":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/compilation/MethodVO":[function(t,e){var i=function(){function t(t){this.useMethod=!0,this.method=t}return t.prototype.reset=function(){this.method.iReset(),this.texturesIndex=-1,this.vertexConstantsIndex=-1,this.fragmentConstantsIndex=-1,this.needsProjection=!1,this.needsView=!1,this.needsNormals=!1,this.needsTangents=!1,this.needsUV=!1,this.needsSecondaryUV=!1,this.needsGlobalVertexPos=!1,this.needsGlobalFragmentPos=!1},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/compilation/RegisterPool":[function(t,e){var i=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement"),s=function(){function t(t,e,i){void 0===i&&(i=!0),this._regName=t,this._regCount=e,this._persistent=i,this.initRegisters(t,e)}return t.prototype.requestFreeVectorReg=function(){for(var t=0;t<this._regCount;++t)if(!this.isRegisterUsed(t))return this._persistent&&this._usedVectorCount[t]++,this._vectorRegisters[t];throw new Error("Register overflow!")},t.prototype.requestFreeRegComponent=function(){for(var t=0;t<this._regCount;++t)if(!(this._usedVectorCount[t]>0))for(var e=0;4>e;++e)if(0==this._usedSingleCount[e][t])return this._persistent&&this._usedSingleCount[e][t]++,this._registerComponents[e][t];throw new Error("Register overflow!")},t.prototype.addUsage=function(t,e){t._component>-1?this._usedSingleCount[t._component][t.index]+=e:this._usedVectorCount[t.index]+=e},t.prototype.removeUsage=function(t){if(t._component>-1){if(--this._usedSingleCount[t._component][t.index]<0)throw new Error("More usages removed than exist!")}else if(--this._usedVectorCount[t.index]<0)throw new Error("More usages removed than exist!")},t.prototype.dispose=function(){this._vectorRegisters=null,this._registerComponents=null,this._usedSingleCount=null,this._usedVectorCount=null},t.prototype.hasRegisteredRegs=function(){for(var t=0;t<this._regCount;++t)if(this.isRegisterUsed(t))return!0;return!1},t.prototype.initRegisters=function(e,i){var s=t._initPool(e,i);this._vectorRegisters=t._regPool[s],this._registerComponents=t._regCompsPool[s],this._usedVectorCount=this._initArray(Array(i),0),this._usedSingleCount=new Array(4),this._usedSingleCount[0]=this._initArray(new Array(i),0),this._usedSingleCount[1]=this._initArray(new Array(i),0),this._usedSingleCount[2]=this._initArray(new Array(i),0),this._usedSingleCount[3]=this._initArray(new Array(i),0)},t._initPool=function(e,s){var r=e+s;if(void 0!=t._regPool[r])return r;var a=new Array(s);t._regPool[r]=a;var n=[[],[],[],[]];t._regCompsPool[r]=n;for(var o=0;s>o;++o){a[o]=new i(e,o);for(var h=0;4>h;++h)n[h][o]=new i(e,o,h)}return r},t.prototype.isRegisterUsed=function(t){if(this._usedVectorCount[t]>0)return!0;for(var e=0;4>e;++e)if(this._usedSingleCount[e][t]>0)return!0;return!1},t.prototype._initArray=function(t,e){for(var i=t.length,s=0;i>s;s++)t[s]=e;return t},t._regPool=new Object,t._regCompsPool=new Object,t}();e.exports=s},{"awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/compilation/ShaderCompilerBase":[function(t,e){var i=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterCache"),s=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterData"),r=t("awayjs-stagegl/lib/materials/passes/MaterialPassMode"),a=function(){function t(t,e,r){this._pVertexCode="",this._pFragmentCode="",this._pPostAnimationFragmentCode="",this._pMaterial=t,this._pMaterialPass=e,this._pShaderObject=r,this._pProfile=r.profile,this._pSharedRegisters=new s,this._pRegisterCache=new i(this._pProfile),this._pRegisterCache.vertexAttributesOffset=1,this._pRegisterCache.reset()}return t.prototype.compile=function(){this._pShaderObject.reset(),this.pCalculateDependencies(),this.pInitRegisterIndices(),this.pCompileDependencies(),this._pVertexCode+=this._pMaterialPass._iGetVertexCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters),this._pPostAnimationFragmentCode+=this._pMaterialPass._iGetFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters),this._pPostAnimationFragmentCode+="mov "+this._pRegisterCache.fragmentOutputRegister+", "+this._pSharedRegisters.shadedTarget+"\n",this._pRegisterCache.removeFragmentTempUsage(this._pSharedRegisters.shadedTarget),this._pShaderObject.initConstantData(this._pRegisterCache,this._pAnimatableAttributes,this._pAnimationTargetRegisters,this._uvSource,this._uvTarget),this._pMaterialPass._iInitConstantData(this._pShaderObject)},t.prototype.pCompileDependencies=function(){this._pSharedRegisters.shadedTarget=this._pRegisterCache.getFreeFragmentVectorTemp(),this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.shadedTarget,1),this._pShaderObject.globalPosDependencies>0&&this.compileGlobalPositionCode(),this._pShaderObject.uvDependencies>0&&this.compileUVCode(),this._pShaderObject.secondaryUVDependencies>0&&this.compileSecondaryUVCode(),this._pShaderObject.normalDependencies>0&&this.compileNormalCode(),this._pShaderObject.viewDirDependencies>0&&this.compileViewDirCode(),this._pVertexCode+=this._pMaterial._iGetVertexCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters),this._pFragmentCode+=this._pMaterial._iGetFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters),this._pVertexCode+=this._pMaterialPass._iGetPreLightingVertexCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters),this._pFragmentCode+=this._pMaterialPass._iGetPreLightingFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters)},t.prototype.compileGlobalPositionCode=function(){this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.globalPositionVertex=this._pRegisterCache.getFreeVertexVectorTemp(),this._pShaderObject.globalPosDependencies);var t=this._pRegisterCache.getFreeVertexConstant();this._pRegisterCache.getFreeVertexConstant(),this._pRegisterCache.getFreeVertexConstant(),this._pRegisterCache.getFreeVertexConstant(),this._pShaderObject.sceneMatrixIndex=4*t.index,this._pVertexCode+="m44 "+this._pSharedRegisters.globalPositionVertex+", "+this._pSharedRegisters.localPosition+", "+t+"\n",this._pShaderObject.usesGlobalPosFragment&&(this._pSharedRegisters.globalPositionVarying=this._pRegisterCache.getFreeVarying(),this._pVertexCode+="mov "+this._pSharedRegisters.globalPositionVarying+", "+this._pSharedRegisters.globalPositionVertex+"\n")},t.prototype.compileUVCode=function(){var t=this._pRegisterCache.getFreeVertexAttribute();this._pShaderObject.uvBufferIndex=t.index;var e=this._pRegisterCache.getFreeVarying();if(this._pSharedRegisters.uvVarying=e,this._pShaderObject.usesUVTransform){var i=this._pRegisterCache.getFreeVertexConstant(),s=this._pRegisterCache.getFreeVertexConstant();this._pShaderObject.uvTransformIndex=4*i.index,this._pVertexCode+="dp4 "+e+".x, "+t+", "+i+"\ndp4 "+e+".y, "+t+", "+s+"\nmov "+e+".zw, "+t+".zw \n"}else this._pShaderObject.uvTransformIndex=-1,this._uvTarget=e.toString(),this._uvSource=t.toString()},t.prototype.compileSecondaryUVCode=function(){var t=this._pRegisterCache.getFreeVertexAttribute();this._pShaderObject.secondaryUVBufferIndex=t.index,this._pSharedRegisters.secondaryUVVarying=this._pRegisterCache.getFreeVarying(),this._pVertexCode+="mov "+this._pSharedRegisters.secondaryUVVarying+", "+t+"\n"},t.prototype.compileViewDirCode=function(){var t=this._pRegisterCache.getFreeVertexConstant();if(this._pSharedRegisters.viewDirVarying=this._pRegisterCache.getFreeVarying(),this._pSharedRegisters.viewDirFragment=this._pRegisterCache.getFreeFragmentVectorTemp(),this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.viewDirFragment,this._pShaderObject.viewDirDependencies),this._pShaderObject.cameraPositionIndex=4*t.index,this._pShaderObject.usesTangentSpace){var e=this._pRegisterCache.getFreeVertexVectorTemp();this._pVertexCode+="sub "+e+", "+t+", "+this._pSharedRegisters.localPosition+"\nm33 "+this._pSharedRegisters.viewDirVarying+".xyz, "+e+", "+this._pSharedRegisters.animatedTangent+"\nmov "+this._pSharedRegisters.viewDirVarying+".w, "+this._pSharedRegisters.localPosition+".w\n"}else this._pVertexCode+="sub "+this._pSharedRegisters.viewDirVarying+", "+t+", "+this._pSharedRegisters.globalPositionVertex+"\n",this._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.globalPositionVertex);this._pFragmentCode+="nrm "+this._pSharedRegisters.viewDirFragment+".xyz, "+this._pSharedRegisters.viewDirVarying+"\nmov "+this._pSharedRegisters.viewDirFragment+".w,   "+this._pSharedRegisters.viewDirVarying+".w\n"},t.prototype.compileNormalCode=function(){if(this._pSharedRegisters.normalFragment=this._pRegisterCache.getFreeFragmentVectorTemp(),this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.normalFragment,this._pShaderObject.normalDependencies),this._pShaderObject.outputsNormals&&!this._pShaderObject.outputsTangentNormals)return this._pVertexCode+=this._pMaterialPass._iGetNormalVertexCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters),void(this._pFragmentCode+=this._pMaterialPass._iGetNormalFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters));var t;if(this._pShaderObject.outputsNormals&&this._pShaderObject.usesTangentSpace||(t=new Array(3),t[0]=this._pRegisterCache.getFreeVertexConstant(),t[1]=this._pRegisterCache.getFreeVertexConstant(),t[2]=this._pRegisterCache.getFreeVertexConstant(),this._pRegisterCache.getFreeVertexConstant(),this._pShaderObject.sceneNormalMatrixIndex=4*t[0].index,this._pSharedRegisters.normalVarying=this._pRegisterCache.getFreeVarying()),this._pShaderObject.outputsNormals)if(this._pShaderObject.usesTangentSpace)this._pVertexCode+="nrm "+this._pSharedRegisters.animatedNormal+".xyz, "+this._pSharedRegisters.animatedNormal+"\nnrm "+this._pSharedRegisters.animatedTangent+".xyz, "+this._pSharedRegisters.animatedTangent+"\ncrs "+this._pSharedRegisters.bitangent+".xyz, "+this._pSharedRegisters.animatedNormal+", "+this._pSharedRegisters.animatedTangent+"\n",this._pFragmentCode+=this._pMaterialPass._iGetNormalFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters);else{this._pSharedRegisters.tangentVarying=this._pRegisterCache.getFreeVarying(),this._pSharedRegisters.bitangentVarying=this._pRegisterCache.getFreeVarying();var e=this._pRegisterCache.getFreeVertexVectorTemp();this._pVertexCode+="m33 "+e+".xyz, "+this._pSharedRegisters.animatedNormal+", "+t[0]+"\nnrm "+this._pSharedRegisters.animatedNormal+".xyz, "+e+"\nm33 "+e+".xyz, "+this._pSharedRegisters.animatedTangent+", "+t[0]+"\nnrm "+this._pSharedRegisters.animatedTangent+".xyz, "+e+"\nmov "+this._pSharedRegisters.tangentVarying+".x, "+this._pSharedRegisters.animatedTangent+".x  \nmov "+this._pSharedRegisters.tangentVarying+".z, "+this._pSharedRegisters.animatedNormal+".x  \nmov "+this._pSharedRegisters.tangentVarying+".w, "+this._pSharedRegisters.normalInput+".w  \nmov "+this._pSharedRegisters.bitangentVarying+".x, "+this._pSharedRegisters.animatedTangent+".y  \nmov "+this._pSharedRegisters.bitangentVarying+".z, "+this._pSharedRegisters.animatedNormal+".y  \nmov "+this._pSharedRegisters.bitangentVarying+".w, "+this._pSharedRegisters.normalInput+".w  \nmov "+this._pSharedRegisters.normalVarying+".x, "+this._pSharedRegisters.animatedTangent+".z  \nmov "+this._pSharedRegisters.normalVarying+".z, "+this._pSharedRegisters.animatedNormal+".z  \nmov "+this._pSharedRegisters.normalVarying+".w, "+this._pSharedRegisters.normalInput+".w  \ncrs "+e+".xyz, "+this._pSharedRegisters.animatedNormal+", "+this._pSharedRegisters.animatedTangent+"\nmov "+this._pSharedRegisters.tangentVarying+".y, "+e+".x    \nmov "+this._pSharedRegisters.bitangentVarying+".y, "+e+".y  \nmov "+this._pSharedRegisters.normalVarying+".y, "+e+".z    \n",this._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.animatedTangent);var i,s,r;i=this._pRegisterCache.getFreeFragmentVectorTemp(),this._pRegisterCache.addFragmentTempUsages(i,1),s=this._pRegisterCache.getFreeFragmentVectorTemp(),this._pRegisterCache.addFragmentTempUsages(s,1),r=this._pRegisterCache.getFreeFragmentVectorTemp(),this._pRegisterCache.addFragmentTempUsages(r,1),this._pFragmentCode+="nrm "+i+".xyz, "+this._pSharedRegisters.tangentVarying+"\nmov "+i+".w, "+this._pSharedRegisters.tangentVarying+".w	\nnrm "+s+".xyz, "+this._pSharedRegisters.bitangentVarying+"\nnrm "+r+".xyz, "+this._pSharedRegisters.normalVarying+"\n",this._pFragmentCode+=this._pMaterialPass._iGetNormalFragmentCode(this._pShaderObject,this._pRegisterCache,this._pSharedRegisters)+"m33 "+this._pSharedRegisters.normalFragment+".xyz, "+this._pSharedRegisters.normalFragment+", "+i+"\nmov "+this._pSharedRegisters.normalFragment+".w, "+this._pSharedRegisters.normalVarying+".w\n",this._pRegisterCache.removeFragmentTempUsage(s),this._pRegisterCache.removeFragmentTempUsage(i),this._pRegisterCache.removeFragmentTempUsage(r)}else this._pVertexCode+="m33 "+this._pSharedRegisters.normalVarying+".xyz, "+this._pSharedRegisters.animatedNormal+", "+t[0]+"\nmov "+this._pSharedRegisters.normalVarying+".w, "+this._pSharedRegisters.animatedNormal+".w\n",this._pFragmentCode+="nrm "+this._pSharedRegisters.normalFragment+".xyz, "+this._pSharedRegisters.normalVarying+"\nmov "+this._pSharedRegisters.normalFragment+".w, "+this._pSharedRegisters.normalVarying+".w\n",this._pShaderObject.tangentDependencies>0&&(this._pSharedRegisters.tangentVarying=this._pRegisterCache.getFreeVarying(),this._pVertexCode+="m33 "+this._pSharedRegisters.tangentVarying+".xyz, "+this._pSharedRegisters.animatedTangent+", "+t[0]+"\nmov "+this._pSharedRegisters.tangentVarying+".w, "+this._pSharedRegisters.animatedTangent+".w\n");this._pShaderObject.usesTangentSpace||this._pRegisterCache.removeVertexTempUsage(this._pSharedRegisters.animatedNormal)},t.prototype.pInitRegisterIndices=function(){this._pShaderObject.pInitRegisterIndices(),this._pAnimatableAttributes=new Array("va0"),this._pAnimationTargetRegisters=new Array("vt0"),this._pVertexCode="",this._pFragmentCode="",this._pPostAnimationFragmentCode="",this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.localPosition=this._pRegisterCache.getFreeVertexVectorTemp(),1),this._pSharedRegisters.commons=this._pRegisterCache.getFreeFragmentConstant(),this._pShaderObject.commonsDataIndex=4*this._pSharedRegisters.commons.index,(this._pShaderObject.tangentDependencies>0||this._pShaderObject.outputsNormals)&&(this._pSharedRegisters.tangentInput=this._pRegisterCache.getFreeVertexAttribute(),this._pShaderObject.tangentBufferIndex=this._pSharedRegisters.tangentInput.index,this._pSharedRegisters.animatedTangent=this._pRegisterCache.getFreeVertexVectorTemp(),this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.animatedTangent,1),this._pShaderObject.usesTangentSpace&&(this._pSharedRegisters.bitangent=this._pRegisterCache.getFreeVertexVectorTemp(),this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.bitangent,1)),this._pAnimatableAttributes.push(this._pSharedRegisters.tangentInput.toString()),this._pAnimationTargetRegisters.push(this._pSharedRegisters.animatedTangent.toString())),this._pShaderObject.normalDependencies>0&&(this._pSharedRegisters.normalInput=this._pRegisterCache.getFreeVertexAttribute(),this._pShaderObject.normalBufferIndex=this._pSharedRegisters.normalInput.index,this._pSharedRegisters.animatedNormal=this._pRegisterCache.getFreeVertexVectorTemp(),this._pRegisterCache.addVertexTempUsages(this._pSharedRegisters.animatedNormal,1),this._pAnimatableAttributes.push(this._pSharedRegisters.normalInput.toString()),this._pAnimationTargetRegisters.push(this._pSharedRegisters.animatedNormal.toString()))},t.prototype.pCalculateDependencies=function(){this._pShaderObject.useAlphaPremultiplied=this._pMaterial.alphaPremultiplied,this._pShaderObject.useBothSides=this._pMaterial.bothSides,this._pShaderObject.useMipmapping=this._pMaterial.mipmap,this._pShaderObject.useSmoothTextures=this._pMaterial.smooth,this._pShaderObject.repeatTextures=this._pMaterial.repeat,this._pShaderObject.usesUVTransform=this._pMaterial.animateUVs,this._pShaderObject.alphaThreshold=this._pMaterial.alphaThreshold,this._pShaderObject.texture=this._pMaterial.texture,this._pShaderObject.color=this._pMaterial.color,this._pShaderObject.usesFragmentAnimation=Boolean(this._pMaterialPass.passMode==r.SUPER_SHADER),this._pMaterialPass._iIncludeDependencies(this._pShaderObject)},t.prototype.dispose=function(){this._pRegisterCache.dispose(),this._pRegisterCache=null,this._pSharedRegisters=null},Object.defineProperty(t.prototype,"vertexCode",{get:function(){return this._pVertexCode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fragmentCode",{get:function(){return this._pFragmentCode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"postAnimationFragmentCode",{get:function(){return this._pPostAnimationFragmentCode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadedTarget",{get:function(){return this._pSharedRegisters.shadedTarget.toString()},enumerable:!0,configurable:!0}),t}();e.exports=a},{"awayjs-stagegl/lib/materials/compilation/ShaderRegisterCache":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderRegisterData":void 0,"awayjs-stagegl/lib/materials/passes/MaterialPassMode":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/compilation/ShaderLightingCompiler":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/materials/LightSources"),r=t("awayjs-stagegl/lib/base/ContextGLProfile"),a=t("awayjs-stagegl/lib/materials/compilation/ShaderCompilerBase"),n=function(t){function e(e,i,s){t.call(this,e,i,s),this._materialLightingPass=i,this._shaderLightingObject=s}return i(e,t),e.prototype.pCompileDependencies=function(){t.prototype.pCompileDependencies.call(this),this._shaderLightingObject.usesShadows&&this.pCompileShadowCode(),this._shaderLightingObject.usesLights&&(this.initLightRegisters(),this.compileLightCode()),this._shaderLightingObject.usesProbes&&this.compileLightProbeCode(),this._pVertexCode+=this._materialLightingPass._iGetPostLightingVertexCode(this._shaderLightingObject,this._pRegisterCache,this._pSharedRegisters),this._pFragmentCode+=this._materialLightingPass._iGetPostLightingFragmentCode(this._shaderLightingObject,this._pRegisterCache,this._pSharedRegisters)},e.prototype.pCompileShadowCode=function(){this._shaderLightingObject.normalDependencies>0?this._pSharedRegisters.shadowTarget=this._pSharedRegisters.normalFragment:(this._pSharedRegisters.shadowTarget=this._pRegisterCache.getFreeFragmentVectorTemp(),this._pRegisterCache.addFragmentTempUsages(this._pSharedRegisters.shadowTarget,1))},e.prototype.initLightRegisters=function(){var t,e;if(this._dirLightVertexConstants)for(e=this._dirLightVertexConstants.length,t=0;e>t;++t)this._dirLightVertexConstants[t]=this._pRegisterCache.getFreeVertexConstant(),-1==this._shaderLightingObject.lightVertexConstantIndex&&(this._shaderLightingObject.lightVertexConstantIndex=4*this._dirLightVertexConstants[t].index);if(this._pointLightVertexConstants)for(e=this._pointLightVertexConstants.length,t=0;e>t;++t)this._pointLightVertexConstants[t]=this._pRegisterCache.getFreeVertexConstant(),-1==this._shaderLightingObject.lightVertexConstantIndex&&(this._shaderLightingObject.lightVertexConstantIndex=4*this._pointLightVertexConstants[t].index);for(e=this._dirLightFragmentConstants.length,t=0;e>t;++t)this._dirLightFragmentConstants[t]=this._pRegisterCache.getFreeFragmentConstant(),-1==this._shaderLightingObject.lightFragmentConstantIndex&&(this._shaderLightingObject.lightFragmentConstantIndex=4*this._dirLightFragmentConstants[t].index);for(e=this._pointLightFragmentConstants.length,t=0;e>t;++t)this._pointLightFragmentConstants[t]=this._pRegisterCache.getFreeFragmentConstant(),-1==this._shaderLightingObject.lightFragmentConstantIndex&&(this._shaderLightingObject.lightFragmentConstantIndex=4*this._pointLightFragmentConstants[t].index)},e.prototype.compileLightCode=function(){for(var t,e,i,s,r=0,a=0,n=this._shaderLightingObject.usesLightsForSpecular,o=this._shaderLightingObject.usesLightsForDiffuse,h=0;h<this._materialLightingPass.iNumDirectionalLights;++h){if(this._shaderLightingObject.usesTangentSpace){s=this._dirLightVertexConstants[r++];var l=this._pRegisterCache.getFreeVarying();this._pVertexCode+="m33 "+l+".xyz, "+s+", "+this._pSharedRegisters.animatedTangent+"\nmov "+l+".w, "+s+".w\n",s=this._pRegisterCache.getFreeFragmentVectorTemp(),this._pRegisterCache.addVertexTempUsages(s,1),this._pFragmentCode+="nrm "+s+".xyz, "+l+"\nmov "+s+".w, "+l+".w\n"}else s=this._dirLightFragmentConstants[a++];t=this._dirLightFragmentConstants[a++],e=this._dirLightFragmentConstants[a++],o&&(this._pFragmentCode+=this._materialLightingPass._iGetPerLightDiffuseFragmentCode(this._shaderLightingObject,s,t,this._pRegisterCache,this._pSharedRegisters)),n&&(this._pFragmentCode+=this._materialLightingPass._iGetPerLightSpecularFragmentCode(this._shaderLightingObject,s,e,this._pRegisterCache,this._pSharedRegisters)),this._shaderLightingObject.usesTangentSpace&&this._pRegisterCache.removeVertexTempUsage(s)
}r=0,a=0;for(var h=0;h<this._materialLightingPass.iNumPointLights;++h){i=this._shaderLightingObject.usesTangentSpace||!this._shaderLightingObject.usesGlobalPosFragment?this._pointLightVertexConstants[r++]:this._pointLightFragmentConstants[a++],t=this._pointLightFragmentConstants[a++],e=this._pointLightFragmentConstants[a++],s=this._pRegisterCache.getFreeFragmentVectorTemp(),this._pRegisterCache.addFragmentTempUsages(s,1);var l;if(this._shaderLightingObject.usesTangentSpace){l=this._pRegisterCache.getFreeVarying();var p=this._pRegisterCache.getFreeVertexVectorTemp();this._pVertexCode+="sub "+p+", "+i+", "+this._pSharedRegisters.localPosition+"\nm33 "+l+".xyz, "+p+", "+this._pSharedRegisters.animatedTangent+"\nmov "+l+".w, "+this._pSharedRegisters.localPosition+".w\n"}else this._shaderLightingObject.usesGlobalPosFragment?(l=s,this._pFragmentCode+="sub "+s+", "+i+", "+this._pSharedRegisters.globalPositionVarying+"\n"):(l=this._pRegisterCache.getFreeVarying(),this._pVertexCode+="sub "+l+", "+i+", "+this._pSharedRegisters.globalPositionVertex+"\n");this._pFragmentCode+=this._shaderLightingObject.usesLightFallOff?"dp3 "+s+".w, "+l+", "+l+"\nsub "+s+".w, "+s+".w, "+t+".w\nmul "+s+".w, "+s+".w, "+e+".w\nsat "+s+".w, "+s+".w\nsub "+s+".w, "+this._pSharedRegisters.commons+".w, "+s+".w\nnrm "+s+".xyz, "+l+"\n":"nrm "+s+".xyz, "+l+"\nmov "+s+".w, "+l+".w\n",-1==this._shaderLightingObject.lightFragmentConstantIndex&&(this._shaderLightingObject.lightFragmentConstantIndex=4*i.index),o&&(this._pFragmentCode+=this._materialLightingPass._iGetPerLightDiffuseFragmentCode(this._shaderLightingObject,s,t,this._pRegisterCache,this._pSharedRegisters)),n&&(this._pFragmentCode+=this._materialLightingPass._iGetPerLightSpecularFragmentCode(this._shaderLightingObject,s,e,this._pRegisterCache,this._pSharedRegisters)),this._pRegisterCache.removeFragmentTempUsage(s)}},e.prototype.compileLightProbeCode=function(){var t,e,i,s=[".x",".y",".z",".w"],r=new Array,a=this._shaderLightingObject.usesProbesForSpecular,n=this._shaderLightingObject.usesProbesForDiffuse;for(n&&(this._shaderLightingObject.lightProbeDiffuseIndices=new Array),a&&(this._shaderLightingObject.lightProbeSpecularIndices=new Array),e=0;e<this._pNumProbeRegisters;++e)r[e]=this._pRegisterCache.getFreeFragmentConstant(),0==e&&(this._shaderLightingObject.probeWeightsIndex=4*r[e].index);for(e=0;e<this._materialLightingPass.iNumLightProbes;++e)t=r[Math.floor(e/4)].toString()+s[e%4],n&&(i=this._pRegisterCache.getFreeTextureReg(),this._shaderLightingObject.lightProbeDiffuseIndices[e]=i.index,this._pFragmentCode+=this._materialLightingPass._iGetPerProbeDiffuseFragmentCode(this._shaderLightingObject,i,t,this._pRegisterCache,this._pSharedRegisters)),a&&(i=this._pRegisterCache.getFreeTextureReg(),this._shaderLightingObject.lightProbeSpecularIndices[e]=i.index,this._pFragmentCode+=this._materialLightingPass._iGetPerProbeSpecularFragmentCode(this._shaderLightingObject,i,t,this._pRegisterCache,this._pSharedRegisters))},e.prototype.pInitRegisterIndices=function(){t.prototype.pInitRegisterIndices.call(this),this._shaderLightingObject.lightVertexConstantIndex=-1,this._shaderLightingObject.lightFragmentConstantIndex=-1,this._shaderLightingObject.probeWeightsIndex=-1,this._pNumProbeRegisters=Math.ceil(this._materialLightingPass.iNumLightProbes/4),this._shaderLightingObject.usesTangentSpace||!this._shaderLightingObject.usesGlobalPosFragment?(this._pointLightVertexConstants=new Array(this._materialLightingPass.iNumPointLights),this._pointLightFragmentConstants=new Array(2*this._materialLightingPass.iNumPointLights)):this._pointLightFragmentConstants=new Array(3*this._materialLightingPass.iNumPointLights),this._shaderLightingObject.usesTangentSpace?(this._dirLightVertexConstants=new Array(this._materialLightingPass.iNumDirectionalLights),this._dirLightFragmentConstants=new Array(2*this._materialLightingPass.iNumDirectionalLights)):this._dirLightFragmentConstants=new Array(3*this._materialLightingPass.iNumDirectionalLights)},e.prototype.pCalculateDependencies=function(){var e=this._materialLightingPass.iNumPointLights+this._materialLightingPass.iNumDirectionalLights,i=this._materialLightingPass.iNumLightProbes,a=this._pMaterial.diffuseLightSources,n=this._materialLightingPass._iUsesSpecular()?this._pMaterial.specularLightSources:0,o=a|n;this._shaderLightingObject.usesLightFallOff=this._pMaterial.enableLightFallOff&&this._shaderLightingObject.profile!=r.BASELINE_CONSTRAINED,this._shaderLightingObject.numLights=e+i,this._shaderLightingObject.numPointLights=this._materialLightingPass.iNumPointLights,this._shaderLightingObject.numDirectionalLights=this._materialLightingPass.iNumDirectionalLights,this._shaderLightingObject.numLightProbes=i,this._shaderLightingObject.pointLightsOffset=this._materialLightingPass.pointLightsOffset,this._shaderLightingObject.directionalLightsOffset=this._materialLightingPass.directionalLightsOffset,this._shaderLightingObject.lightProbesOffset=this._materialLightingPass.lightProbesOffset,this._shaderLightingObject.lightPicker=this._materialLightingPass.lightPicker,this._shaderLightingObject.usesLights=e>0&&0!=(o&s.LIGHTS),this._shaderLightingObject.usesProbes=i>0&&0!=(o&s.PROBES),this._shaderLightingObject.usesLightsForSpecular=e>0&&0!=(n&s.LIGHTS),this._shaderLightingObject.usesProbesForSpecular=i>0&&0!=(n&s.PROBES),this._shaderLightingObject.usesLightsForDiffuse=e>0&&0!=(a&s.LIGHTS),this._shaderLightingObject.usesProbesForDiffuse=i>0&&0!=(a&s.PROBES),this._shaderLightingObject.usesShadows=this._materialLightingPass._iUsesShadows(),t.prototype.pCalculateDependencies.call(this)},e}(a);e.exports=n},{"awayjs-display/lib/materials/LightSources":void 0,"awayjs-stagegl/lib/base/ContextGLProfile":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderCompilerBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/compilation/ShaderLightingObject":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/compilation/ShaderLightingCompiler"),r=t("awayjs-stagegl/lib/materials/compilation/ShaderObjectBase"),a=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype.createCompiler=function(t,e){return new s(t,e,this)},e.prototype.reset=function(){t.prototype.reset.call(this),this.numLights=0,this.usesLightFallOff=!0},e.prototype.addWorldSpaceDependencies=function(e){t.prototype.addWorldSpaceDependencies.call(this,e),this.numPointLights>0&&this.usesLights&&(++this.globalPosDependencies,e&&(this.usesGlobalPosFragment=!0))},e.prototype.setRenderState=function(e,i,s,r){t.prototype.setRenderState.call(this,e,i,s,r),this.usesLights&&this.updateLights(),this.usesProbes&&this.updateProbes(i)},e.prototype.updateLights=function(){var t,e,i,s,r,a,n=0,o=0,h=0,l=this.usesShadows?2:1;this.ambientR=this.ambientG=this.ambientB=0,r=this.lightVertexConstantIndex,o=this.lightFragmentConstantIndex;var p=0,d=this.lightPicker.directionalLights;for(a=this.directionalLightsOffset,i=this.lightPicker.directionalLights.length,a>i&&(p=1,a-=i);l>p;++p)for(p&&(d=this.lightPicker.castingDirectionalLights),i=d.length,i>this.numDirectionalLights&&(i=this.numDirectionalLights),n=0;i>n;++n){if(t=d[a+n],s=t.sceneDirection,this.ambientR+=t._iAmbientR,this.ambientG+=t._iAmbientG,this.ambientB+=t._iAmbientB,this.usesTangentSpace){var u=-s.x,c=-s.y,_=-s.z;this.vertexConstantData[r++]=this._pInverseSceneMatrix[0]*u+this._pInverseSceneMatrix[4]*c+this._pInverseSceneMatrix[8]*_,this.vertexConstantData[r++]=this._pInverseSceneMatrix[1]*u+this._pInverseSceneMatrix[5]*c+this._pInverseSceneMatrix[9]*_,this.vertexConstantData[r++]=this._pInverseSceneMatrix[2]*u+this._pInverseSceneMatrix[6]*c+this._pInverseSceneMatrix[10]*_,this.vertexConstantData[r++]=1}else this.fragmentConstantData[o++]=-s.x,this.fragmentConstantData[o++]=-s.y,this.fragmentConstantData[o++]=-s.z,this.fragmentConstantData[o++]=1;this.fragmentConstantData[o++]=t._iDiffuseR,this.fragmentConstantData[o++]=t._iDiffuseG,this.fragmentConstantData[o++]=t._iDiffuseB,this.fragmentConstantData[o++]=1,this.fragmentConstantData[o++]=t._iSpecularR,this.fragmentConstantData[o++]=t._iSpecularG,this.fragmentConstantData[o++]=t._iSpecularB,this.fragmentConstantData[o++]=1,++h==this.numDirectionalLights&&(n=i,p=l)}if(this.numDirectionalLights>h)for(n=o+12*(this.numDirectionalLights-h);n>o;)this.fragmentConstantData[o++]=0;h=0;var y=this.lightPicker.pointLights;for(a=this.pointLightsOffset,i=this.lightPicker.pointLights.length,a>i?(p=1,a-=i):p=0;l>p;++p)for(p&&(y=this.lightPicker.castingPointLights),i=y.length,n=0;i>n;++n){e=y[a+n],s=e.scenePosition,this.ambientR+=e._iAmbientR,this.ambientG+=e._iAmbientG,this.ambientB+=e._iAmbientB,this.usesTangentSpace?(u=s.x,c=s.y,_=s.z,this.vertexConstantData[r++]=this._pInverseSceneMatrix[0]*u+this._pInverseSceneMatrix[4]*c+this._pInverseSceneMatrix[8]*_+this._pInverseSceneMatrix[12],this.vertexConstantData[r++]=this._pInverseSceneMatrix[1]*u+this._pInverseSceneMatrix[5]*c+this._pInverseSceneMatrix[9]*_+this._pInverseSceneMatrix[13],this.vertexConstantData[r++]=this._pInverseSceneMatrix[2]*u+this._pInverseSceneMatrix[6]*c+this._pInverseSceneMatrix[10]*_+this._pInverseSceneMatrix[14],this.vertexConstantData[r++]=1):this.usesGlobalPosFragment?(this.fragmentConstantData[o++]=s.x,this.fragmentConstantData[o++]=s.y,this.fragmentConstantData[o++]=s.z,this.fragmentConstantData[o++]=1):(this.vertexConstantData[r++]=s.x,this.vertexConstantData[r++]=s.y,this.vertexConstantData[r++]=s.z,this.vertexConstantData[r++]=1),this.fragmentConstantData[o++]=e._iDiffuseR,this.fragmentConstantData[o++]=e._iDiffuseG,this.fragmentConstantData[o++]=e._iDiffuseB;var g=e._pRadius;this.fragmentConstantData[o++]=g*g,this.fragmentConstantData[o++]=e._iSpecularR,this.fragmentConstantData[o++]=e._iSpecularG,this.fragmentConstantData[o++]=e._iSpecularB,this.fragmentConstantData[o++]=e._pFallOffFactor,++h==this.numPointLights&&(n=i,p=l)}if(this.numPointLights>h)for(n=o+12*(h-this.numPointLights);n>o;++o)this.fragmentConstantData[o]=0},e.prototype.updateProbes=function(t){var e,i=this.lightPicker.lightProbes,s=this.lightPicker.lightProbeWeights,r=i.length-this.lightProbesOffset,a=this.usesProbesForDiffuse,n=this.usesProbesForSpecular;if(a||n){r>this.numLightProbes&&(r=this.numLightProbes);for(var o=0;r>o;++o)e=i[this.lightProbesOffset+o],a&&t.context.activateCubeTexture(this.lightProbeDiffuseIndices[o],e.diffuseMap),n&&t.context.activateCubeTexture(this.lightProbeSpecularIndices[o],e.specularMap);for(o=0;r>o;++o)this.fragmentConstantData[this.probeWeightsIndex+o]=s[this.lightProbesOffset+o]}},e}(r);e.exports=a},{"awayjs-stagegl/lib/materials/compilation/ShaderLightingCompiler":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderObjectBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/compilation/ShaderObjectBase":[function(t,e){var i=t("awayjs-display/lib/base/TriangleSubGeometry"),s=t("awayjs-stagegl/lib/base/ContextGLTriangleFace"),r=t("awayjs-stagegl/lib/materials/compilation/ShaderCompilerBase"),a=function(){function t(t){this._defaultCulling=s.BACK,this._pInverseSceneMatrix=new Array,this.ambientR=255,this.ambientG=255,this.ambientB=255,this.usesGlobalPosFragment=!1,this.vertexConstantData=new Array,this.fragmentConstantData=new Array,this.profile=t}return t.prototype.createCompiler=function(t,e){return new r(t,e,this)},t.prototype.reset=function(){this.projectionDependencies=0,this.normalDependencies=0,this.viewDirDependencies=0,this.uvDependencies=0,this.secondaryUVDependencies=0,this.globalPosDependencies=0,this.tangentDependencies=0,this.usesGlobalPosFragment=!1,this.usesFragmentAnimation=!1,this.usesTangentSpace=!1,this.outputsNormals=!1,this.outputsTangentNormals=!1},t.prototype.addWorldSpaceDependencies=function(){this.viewDirDependencies>0&&++this.globalPosDependencies},t.prototype.pInitRegisterIndices=function(){this.commonsDataIndex=-1,this.cameraPositionIndex=-1,this.uvBufferIndex=-1,this.uvTransformIndex=-1,this.secondaryUVBufferIndex=-1,this.normalBufferIndex=-1,this.tangentBufferIndex=-1,this.sceneMatrixIndex=-1,this.sceneNormalMatrixIndex=-1},t.prototype.initConstantData=function(t,e,i,s,r){this.numUsedVertexConstants=t.numUsedVertexConstants,this.numUsedFragmentConstants=t.numUsedFragmentConstants,this.numUsedStreams=t.numUsedStreams,this.numUsedTextures=t.numUsedTextures,this.numUsedVaryings=t.numUsedVaryings,this.numUsedFragmentConstants=t.numUsedFragmentConstants,this.animatableAttributes=e,this.animationTargetRegisters=i,this.uvSource=s,this.uvTarget=r,this.vertexConstantData.length=4*this.numUsedVertexConstants,this.fragmentConstantData.length=4*this.numUsedFragmentConstants,this.fragmentConstantData[this.commonsDataIndex]=.5,this.fragmentConstantData[this.commonsDataIndex+1]=0,this.fragmentConstantData[this.commonsDataIndex+2]=1/255,this.fragmentConstantData[this.commonsDataIndex+3]=1,this.uvTransformIndex>=0&&(this.vertexConstantData[this.uvTransformIndex]=1,this.vertexConstantData[this.uvTransformIndex+1]=0,this.vertexConstantData[this.uvTransformIndex+2]=0,this.vertexConstantData[this.uvTransformIndex+3]=0,this.vertexConstantData[this.uvTransformIndex+4]=0,this.vertexConstantData[this.uvTransformIndex+5]=1,this.vertexConstantData[this.uvTransformIndex+6]=0,this.vertexConstantData[this.uvTransformIndex+7]=0),this.cameraPositionIndex>=0&&(this.vertexConstantData[this.cameraPositionIndex+3]=1)},t.prototype.iActivate=function(t,e){if(t.context.setCulling(this.useBothSides?s.NONE:this._defaultCulling,e.projection.coordinateSystem),!this.usesTangentSpace&&this.cameraPositionIndex>=0){var i=e.scenePosition;this.vertexConstantData[this.cameraPositionIndex]=i.x,this.vertexConstantData[this.cameraPositionIndex+1]=i.y,this.vertexConstantData[this.cameraPositionIndex+2]=i.z}},t.prototype.iDeactivate=function(){},t.prototype.setRenderState=function(t,e,s){var r=e.context;if(t.materialOwner.animator&&t.materialOwner.animator.setRenderState(this,t,e,s,this.numUsedVertexConstants,this.numUsedStreams),this.uvBufferIndex>=0&&r.activateBuffer(this.uvBufferIndex,t.getVertexData(i.UV_DATA),t.getVertexOffset(i.UV_DATA),i.UV_FORMAT),this.secondaryUVBufferIndex>=0&&r.activateBuffer(this.secondaryUVBufferIndex,t.getVertexData(i.SECONDARY_UV_DATA),t.getVertexOffset(i.SECONDARY_UV_DATA),i.SECONDARY_UV_FORMAT),this.normalBufferIndex>=0&&r.activateBuffer(this.normalBufferIndex,t.getVertexData(i.NORMAL_DATA),t.getVertexOffset(i.NORMAL_DATA),i.NORMAL_FORMAT),this.tangentBufferIndex>=0&&r.activateBuffer(this.tangentBufferIndex,t.getVertexData(i.TANGENT_DATA),t.getVertexOffset(i.TANGENT_DATA),i.TANGENT_FORMAT),this.usesUVTransform){var a=t.materialOwner.uvTransform.matrix;a?(this.vertexConstantData[this.uvTransformIndex]=a.a,this.vertexConstantData[this.uvTransformIndex+1]=a.b,this.vertexConstantData[this.uvTransformIndex+3]=a.tx,this.vertexConstantData[this.uvTransformIndex+4]=a.c,this.vertexConstantData[this.uvTransformIndex+5]=a.d,this.vertexConstantData[this.uvTransformIndex+7]=a.ty):(this.vertexConstantData[this.uvTransformIndex]=1,this.vertexConstantData[this.uvTransformIndex+1]=0,this.vertexConstantData[this.uvTransformIndex+3]=0,this.vertexConstantData[this.uvTransformIndex+4]=0,this.vertexConstantData[this.uvTransformIndex+5]=1,this.vertexConstantData[this.uvTransformIndex+7]=0)}if(this.sceneNormalMatrixIndex>=0&&t.sourceEntity.inverseSceneTransform.copyRawDataTo(this.vertexConstantData,this.sceneNormalMatrixIndex,!1),this.usesTangentSpace&&this.cameraPositionIndex>=0){t.sourceEntity.inverseSceneTransform.copyRawDataTo(this._pInverseSceneMatrix);var n=s.scenePosition,o=n.x,h=n.y,l=n.z;this.vertexConstantData[this.cameraPositionIndex]=this._pInverseSceneMatrix[0]*o+this._pInverseSceneMatrix[4]*h+this._pInverseSceneMatrix[8]*l+this._pInverseSceneMatrix[12],this.vertexConstantData[this.cameraPositionIndex+1]=this._pInverseSceneMatrix[1]*o+this._pInverseSceneMatrix[5]*h+this._pInverseSceneMatrix[9]*l+this._pInverseSceneMatrix[13],this.vertexConstantData[this.cameraPositionIndex+2]=this._pInverseSceneMatrix[2]*o+this._pInverseSceneMatrix[6]*h+this._pInverseSceneMatrix[10]*l+this._pInverseSceneMatrix[14]}},t.prototype.dispose=function(){},t}();e.exports=a},{"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-stagegl/lib/base/ContextGLTriangleFace":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderCompilerBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/compilation/ShaderRegisterCache":[function(t,e){var i=t("awayjs-stagegl/lib/materials/compilation/RegisterPool"),s=t("awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement"),r=function(){function t(t){this._numUsedVertexConstants=0,this._numUsedFragmentConstants=0,this._numUsedStreams=0,this._numUsedTextures=0,this._numUsedVaryings=0,this._profile=t}return t.prototype.reset=function(){this._fragmentTempCache=new i("ft",8,!1),this._vertexTempCache=new i("vt",8,!1),this._varyingCache=new i("v",8),this._textureCache=new i("fs",8),this._vertexAttributesCache=new i("va",8),this._fragmentConstantsCache=new i("fc",28),this._vertexConstantsCache=new i("vc",128),this._fragmentOutputRegister=new s("oc",-1),this._vertexOutputRegister=new s("op",-1),this._numUsedVertexConstants=0,this._numUsedStreams=0,this._numUsedTextures=0,this._numUsedVaryings=0,this._numUsedFragmentConstants=0;var t;for(t=0;t<this._vertexAttributesOffset;++t)this.getFreeVertexAttribute();for(t=0;t<this._vertexConstantOffset;++t)this.getFreeVertexConstant();for(t=0;t<this._varyingsOffset;++t)this.getFreeVarying();for(t=0;t<this._fragmentConstantOffset;++t)this.getFreeFragmentConstant()},t.prototype.dispose=function(){this._fragmentTempCache.dispose(),this._vertexTempCache.dispose(),this._varyingCache.dispose(),this._fragmentConstantsCache.dispose(),this._vertexAttributesCache.dispose(),this._fragmentTempCache=null,this._vertexTempCache=null,this._varyingCache=null,this._fragmentConstantsCache=null,this._vertexAttributesCache=null,this._fragmentOutputRegister=null,this._vertexOutputRegister=null},t.prototype.addFragmentTempUsages=function(t,e){this._fragmentTempCache.addUsage(t,e)},t.prototype.removeFragmentTempUsage=function(t){this._fragmentTempCache.removeUsage(t)},t.prototype.addVertexTempUsages=function(t,e){this._vertexTempCache.addUsage(t,e)},t.prototype.removeVertexTempUsage=function(t){this._vertexTempCache.removeUsage(t)},t.prototype.getFreeFragmentVectorTemp=function(){return this._fragmentTempCache.requestFreeVectorReg()},t.prototype.getFreeFragmentSingleTemp=function(){return this._fragmentTempCache.requestFreeRegComponent()},t.prototype.getFreeVarying=function(){return++this._numUsedVaryings,this._varyingCache.requestFreeVectorReg()},t.prototype.getFreeFragmentConstant=function(){return++this._numUsedFragmentConstants,this._fragmentConstantsCache.requestFreeVectorReg()},t.prototype.getFreeVertexConstant=function(){return++this._numUsedVertexConstants,this._vertexConstantsCache.requestFreeVectorReg()},t.prototype.getFreeVertexVectorTemp=function(){return this._vertexTempCache.requestFreeVectorReg()},t.prototype.getFreeVertexSingleTemp=function(){return this._vertexTempCache.requestFreeRegComponent()},t.prototype.getFreeVertexAttribute=function(){return++this._numUsedStreams,this._vertexAttributesCache.requestFreeVectorReg()},t.prototype.getFreeTextureReg=function(){return++this._numUsedTextures,this._textureCache.requestFreeVectorReg()},Object.defineProperty(t.prototype,"vertexConstantOffset",{get:function(){return this._vertexConstantOffset},set:function(t){this._vertexConstantOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vertexAttributesOffset",{get:function(){return this._vertexAttributesOffset},set:function(t){this._vertexAttributesOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"varyingsOffset",{get:function(){return this._varyingsOffset},set:function(t){this._varyingsOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fragmentConstantOffset",{get:function(){return this._fragmentConstantOffset},set:function(t){this._fragmentConstantOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fragmentOutputRegister",{get:function(){return this._fragmentOutputRegister},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numUsedVertexConstants",{get:function(){return this._numUsedVertexConstants},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numUsedFragmentConstants",{get:function(){return this._numUsedFragmentConstants},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numUsedStreams",{get:function(){return this._numUsedStreams},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numUsedTextures",{get:function(){return this._numUsedTextures},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numUsedVaryings",{get:function(){return this._numUsedVaryings},enumerable:!0,configurable:!0}),t}();e.exports=r},{"awayjs-stagegl/lib/materials/compilation/RegisterPool":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/compilation/ShaderRegisterData":[function(t,e){var i=function(){function t(){}return t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/compilation/ShaderRegisterElement":[function(t,e){var i=function(){function t(e,i,s){void 0===s&&(s=-1),this._component=s,this._regName=e,this._index=i,this._toStr=this._regName,this._index>=0&&(this._toStr+=this._index),s>-1&&(this._toStr+="."+t.COMPONENTS[s])}return t.prototype.toString=function(){return this._toStr},Object.defineProperty(t.prototype,"regName",{get:function(){return this._regName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),t.COMPONENTS=["x","y","z","w"],t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/methods/AmbientBasicMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/ContextGLMipFilter"),r=t("awayjs-stagegl/lib/base/ContextGLTextureFilter"),a=t("awayjs-stagegl/lib/base/ContextGLWrapMode"),n=t("awayjs-stagegl/lib/materials/methods/ShadingMethodBase"),o=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),h=function(t){function e(){t.call(this),this._color=16777215,this._alpha=1,this._colorR=1,this._colorG=1,this._colorB=1,this._ambient=1}return i(e,t),e.prototype.iInitVO=function(t,e){e.needsUV=Boolean(null!=t.texture)},e.prototype.iInitConstants=function(t,e){e.needsUV||(this._color=t.color,this.updateColor())},Object.defineProperty(e.prototype,"ambient",{get:function(){return this._ambient},set:function(t){this._ambient!=t&&(this._ambient=t,this.updateColor())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!=t&&(this._alpha=t,this.updateColor())},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){},e.prototype.iGetFragmentCode=function(t,e,i,s,r){var a,n="";if(e.needsUV){if(a=s.getFreeTextureReg(),e.texturesIndex=a.index,n+=o.getTex2DSampleCode(i,r,a,t.texture,t.useSmoothTextures,t.repeatTextures,t.useMipmapping),t.alphaThreshold>0){var h=s.getFreeFragmentConstant();e.fragmentConstantsIndex=4*h.index,n+="sub "+i+".w, "+i+".w, "+h+".x\nkil "+i+".w\nadd "+i+".w, "+i+".w, "+h+".x\n"}}else a=s.getFreeFragmentConstant(),e.fragmentConstantsIndex=4*a.index,n+="mov "+i+", "+a+"\n";return n},e.prototype.iActivate=function(t,e,i){if(e.needsUV)i.context.setSamplerStateAt(e.texturesIndex,t.repeatTextures?a.REPEAT:a.CLAMP,t.useSmoothTextures?r.LINEAR:r.NEAREST,t.useMipmapping?s.MIPLINEAR:s.MIPNONE),i.context.activateTexture(e.texturesIndex,t.texture),t.alphaThreshold>0&&(t.fragmentConstantData[e.fragmentConstantsIndex]=t.alphaThreshold);else{var n=e.fragmentConstantsIndex,o=t.fragmentConstantData;o[n]=this._colorR,o[n+1]=this._colorG,o[n+2]=this._colorB,o[n+3]=this._alpha}},e.prototype.updateColor=function(){this._colorR=(this._color>>16&255)/255*this._ambient,this._colorG=(this._color>>8&255)/255*this._ambient,this._colorB=(255&this._color)/255*this._ambient},e}(n);e.exports=h},{"awayjs-stagegl/lib/base/ContextGLMipFilter":void 0,"awayjs-stagegl/lib/base/ContextGLTextureFilter":void 0,"awayjs-stagegl/lib/base/ContextGLWrapMode":void 0,"awayjs-stagegl/lib/materials/methods/ShadingMethodBase":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/methods/DiffuseBasicMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/ContextGLMipFilter"),r=t("awayjs-stagegl/lib/base/ContextGLTextureFilter"),a=t("awayjs-stagegl/lib/base/ContextGLWrapMode"),n=t("awayjs-stagegl/lib/materials/methods/LightingMethodBase"),o=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),h=function(t){function e(){t.call(this),this._multiply=!0,this._diffuseColor=16777215,this._ambientColor=16777215,this._diffuseR=1,this._diffuseG=1,this._diffuseB=1,this._ambientR=1,this._ambientG=1,this._ambientB=1}return i(e,t),e.prototype.iIsUsed=function(t){return t.numLights?!0:!1},Object.defineProperty(e.prototype,"multiply",{get:function(){return this._multiply},set:function(t){this._multiply!=t&&(this._multiply=t,this.iInvalidateShaderProgram())},enumerable:!0,configurable:!0}),e.prototype.iInitVO=function(t,e){e.needsUV=this._pUseTexture,e.needsNormals=t.numLights>0},e.prototype.generateMip=function(t){this._pUseTexture&&t.context.activateTexture(0,this._texture)},Object.defineProperty(e.prototype,"diffuseColor",{get:function(){return this._diffuseColor},set:function(t){this._diffuseColor!=t&&(this._diffuseColor=t,this.updateDiffuse())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ambientColor",{get:function(){return this._ambientColor},set:function(t){this._ambientColor!=t&&(this._ambientColor=t,this.updateAmbient())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){var e=null!=t;(e!=this._pUseTexture||t&&this._texture&&(t.hasMipmaps!=this._texture.hasMipmaps||t.format!=this._texture.format))&&this.iInvalidateShaderProgram(),this._pUseTexture=e,this._texture=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._texture=null},e.prototype.copyFrom=function(t){var e=t;this.texture=e.texture,this.multiply=e.multiply,this.diffuseColor=e.diffuseColor,this.ambientColor=e.ambientColor},e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._pTotalLightColorReg=null,this._pDiffuseInputRegister=null},e.prototype.iGetFragmentPreLightingCode=function(t,e,i){var s="";return this._pIsFirstLight=!0,this._pTotalLightColorReg=i.getFreeFragmentVectorTemp(),i.addFragmentTempUsages(this._pTotalLightColorReg,1),s},e.prototype.iGetFragmentCodePerLight=function(t,e,i,s,r,a){var n,o="";return this._pIsFirstLight?n=this._pTotalLightColorReg:(n=r.getFreeFragmentVectorTemp(),r.addFragmentTempUsages(n,1)),o+="dp3 "+n+".x, "+i+", "+a.normalFragment+"\nmax "+n+".w, "+n+".x, "+a.commons+".y\n",t.usesLightFallOff&&(o+="mul "+n+".w, "+n+".w, "+i+".w\n"),null!=this._iModulateMethod&&(o+=this._iModulateMethod(t,e,n,r,a)),o+="mul "+n+", "+n+".w, "+s+"\n",this._pIsFirstLight||(o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+n+"\n",r.removeFragmentTempUsage(n)),this._pIsFirstLight=!1,o},e.prototype.iGetFragmentCodePerProbe=function(t,e,i,s,r,a){var n,o="";return this._pIsFirstLight?n=this._pTotalLightColorReg:(n=r.getFreeFragmentVectorTemp(),r.addFragmentTempUsages(n,1)),o+="tex "+n+", "+a.normalFragment+", "+i+" <cube,linear,miplinear>\nmul "+n+".xyz, "+n+".xyz, "+s+"\n",null!=this._iModulateMethod&&(o+=this._iModulateMethod(t,e,n,r,a)),this._pIsFirstLight||(o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+n+"\n",r.removeFragmentTempUsage(n)),this._pIsFirstLight=!1,o},e.prototype.iGetFragmentPostLightingCode=function(t,e,i,s,r){var a,n="";r.shadowTarget&&(n+=this.pApplyShadow(t,e,s,r)),a=s.getFreeFragmentVectorTemp(),s.addFragmentTempUsages(a,1);var h=s.getFreeFragmentConstant();return e.fragmentConstantsIndex=4*h.index,this._pUseTexture?(this._pDiffuseInputRegister=s.getFreeTextureReg(),e.texturesIndex=this._pDiffuseInputRegister.index,n+=o.getTex2DSampleCode(a,r,this._pDiffuseInputRegister,this._texture,t.useSmoothTextures,t.repeatTextures,t.useMipmapping)):(this._pDiffuseInputRegister=s.getFreeFragmentConstant(),n+="mov "+a+", "+this._pDiffuseInputRegister+"\n"),n+="sat "+this._pTotalLightColorReg+", "+this._pTotalLightColorReg+"\nmul "+a+".xyz, "+a+", "+this._pTotalLightColorReg+"\n",n+=this._multiply?"add "+a+".xyz, "+a+", "+h+"\nmul "+i+".xyz, "+i+", "+a+"\n":"mul "+i+".xyz, "+i+", "+h+"\nmul "+this._pTotalLightColorReg+".xyz, "+i+", "+this._pTotalLightColorReg+"\nsub "+i+".xyz, "+i+", "+this._pTotalLightColorReg+"\nadd "+i+".xyz, "+i+", "+a+"\n",s.removeFragmentTempUsage(this._pTotalLightColorReg),s.removeFragmentTempUsage(a),n},e.prototype.pApplyShadow=function(t,e,i,s){return"mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+s.shadowTarget+".w\n"},e.prototype.iActivate=function(t,e,i){if(this._pUseTexture)i.context.setSamplerStateAt(e.texturesIndex,t.repeatTextures?a.REPEAT:a.CLAMP,t.useSmoothTextures?r.LINEAR:r.NEAREST,t.useMipmapping?s.MIPLINEAR:s.MIPNONE),i.context.activateTexture(e.texturesIndex,this._texture);else{var n=e.fragmentConstantsIndex,o=t.fragmentConstantData;o[n+4]=this._diffuseR,o[n+5]=this._diffuseG,o[n+6]=this._diffuseB,o[n+7]=1}},e.prototype.updateDiffuse=function(){this._diffuseR=(this._diffuseColor>>16&255)/255,this._diffuseG=(this._diffuseColor>>8&255)/255,this._diffuseB=(255&this._diffuseColor)/255},e.prototype.updateAmbient=function(){this._ambientR=(this._ambientColor>>16&255)/255,this._ambientG=(this._ambientColor>>8&255)/255,this._ambientB=(255&this._ambientColor)/255},e.prototype.iSetRenderState=function(t,e){if(t.numLights>0){var i=e.fragmentConstantsIndex,s=t.fragmentConstantData;s[i]=t.ambientR*this._ambientR,s[i+1]=t.ambientG*this._ambientG,s[i+2]=t.ambientB*this._ambientB,s[i+3]=1}},e}(n);e.exports=h},{"awayjs-stagegl/lib/base/ContextGLMipFilter":void 0,"awayjs-stagegl/lib/base/ContextGLTextureFilter":void 0,"awayjs-stagegl/lib/base/ContextGLWrapMode":void 0,"awayjs-stagegl/lib/materials/methods/LightingMethodBase":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/methods/EffectColorTransformMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/EffectMethodBase"),r=function(t){function e(){t.call(this)}return i(e,t),Object.defineProperty(e.prototype,"colorTransform",{get:function(){return this._colorTransform},set:function(t){this._colorTransform=t},enumerable:!0,configurable:!0}),e.prototype.iGetFragmentCode=function(t,e,i,s){var r="",a=s.getFreeFragmentConstant(),n=s.getFreeFragmentConstant();return e.fragmentConstantsIndex=4*a.index,r+="mul "+i+", "+i+", "+a+"\nadd "+i+", "+i+", "+n+"\n"},e.prototype.iActivate=function(t,e){var i=1/255,s=e.fragmentConstantsIndex,r=t.fragmentConstantData;r[s]=this._colorTransform.redMultiplier,r[s+1]=this._colorTransform.greenMultiplier,r[s+2]=this._colorTransform.blueMultiplier,r[s+3]=this._colorTransform.alphaMultiplier,r[s+4]=this._colorTransform.redOffset*i,r[s+5]=this._colorTransform.greenOffset*i,r[s+6]=this._colorTransform.blueOffset*i,r[s+7]=this._colorTransform.alphaOffset*i
},e}(s);e.exports=r},{"awayjs-stagegl/lib/materials/methods/EffectMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/methods/EffectMethodBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/errors/AbstractMethodError"),a=t("awayjs-stagegl/lib/materials/methods/ShadingMethodBase"),n=function(t){function e(){t.call(this)}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.EFFECTS_METHOD},enumerable:!0,configurable:!0}),e.prototype.iGetFragmentCode=function(){throw new r},e}(a);e.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-stagegl/lib/materials/methods/ShadingMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/methods/LightingMethodBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/ShadingMethodBase"),r=function(t){function e(){t.call(this)}return i(e,t),e.prototype.iGetFragmentPreLightingCode=function(){return""},e.prototype.iGetFragmentCodePerLight=function(){return""},e.prototype.iGetFragmentCodePerProbe=function(){return""},e.prototype.iGetFragmentPostLightingCode=function(){return""},e}(s);e.exports=r},{"awayjs-stagegl/lib/materials/methods/ShadingMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/methods/NormalBasicMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/ContextGLMipFilter"),r=t("awayjs-stagegl/lib/base/ContextGLTextureFilter"),a=t("awayjs-stagegl/lib/base/ContextGLWrapMode"),n=t("awayjs-stagegl/lib/materials/methods/ShadingMethodBase"),o=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),h=function(t){function e(){t.call(this)}return i(e,t),e.prototype.iIsUsed=function(t){return this._useTexture&&t.normalDependencies?!0:!1},e.prototype.iInitVO=function(t,e){e.needsUV=this._useTexture},e.prototype.iOutputsTangentNormals=function(){return!0},e.prototype.copyFrom=function(t){var e=t;null!=e.normalMap&&(this.normalMap=e.normalMap)},Object.defineProperty(e.prototype,"normalMap",{get:function(){return this._texture},set:function(t){var e=null!=t;(e!=this._useTexture||t&&this._texture&&(t.hasMipmaps!=this._texture.hasMipmaps||t.format!=this._texture.format))&&this.iInvalidateShaderProgram(),this._useTexture=e,this._texture=t},enumerable:!0,configurable:!0}),e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._pNormalTextureRegister=null},e.prototype.dispose=function(){this._texture&&(this._texture=null)},e.prototype.iActivate=function(t,e,i){e.texturesIndex>=0&&(i.context.setSamplerStateAt(e.texturesIndex,t.repeatTextures?a.REPEAT:a.CLAMP,t.useSmoothTextures?r.LINEAR:r.NEAREST,t.useMipmapping?s.MIPLINEAR:s.MIPNONE),i.context.activateTexture(e.texturesIndex,this._texture))},e.prototype.iGetFragmentCode=function(t,e,i,s,r){return this._pNormalTextureRegister=s.getFreeTextureReg(),e.texturesIndex=this._pNormalTextureRegister.index,o.getTex2DSampleCode(i,r,this._pNormalTextureRegister,this._texture,t.useSmoothTextures,t.repeatTextures,t.useMipmapping)+"sub "+i+".xyz, "+i+".xyz, "+r.commons+".xxx\nnrm "+i+".xyz, "+i+"\n"},e}(n);e.exports=h},{"awayjs-stagegl/lib/base/ContextGLMipFilter":void 0,"awayjs-stagegl/lib/base/ContextGLTextureFilter":void 0,"awayjs-stagegl/lib/base/ContextGLWrapMode":void 0,"awayjs-stagegl/lib/materials/methods/ShadingMethodBase":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/methods/ShadingMethodBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/NamedAssetBase"),r=t("awayjs-stagegl/lib/events/ShadingMethodEvent"),a=function(t){function e(){t.call(this)}return i(e,t),e.prototype.iIsUsed=function(){return!0},e.prototype.iInitVO=function(){},e.prototype.iInitConstants=function(){},e.prototype.iUsesTangentSpace=function(){return!0},Object.defineProperty(e.prototype,"passes",{get:function(){return this._passes},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){},e.prototype.iReset=function(){this.iCleanCompilationData()},e.prototype.iCleanCompilationData=function(){},e.prototype.iGetVertexCode=function(){return""},e.prototype.iGetFragmentCode=function(){return null},e.prototype.iActivate=function(){},e.prototype.iSetRenderState=function(){},e.prototype.iDeactivate=function(){},e.prototype.iInvalidateShaderProgram=function(){this.dispatchEvent(new r(r.SHADER_INVALIDATED))},e.prototype.copyFrom=function(){},e}(s);e.exports=a},{"awayjs-core/lib/library/NamedAssetBase":void 0,"awayjs-stagegl/lib/events/ShadingMethodEvent":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/methods/ShadowHardMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/methods/ShadowMethodBase"),r=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype._pGetPlanarFragmentCode=function(t,e,i){var s=i.getFreeTextureReg(),r=i.getFreeFragmentConstant(),a=(i.getFreeFragmentConstant(),i.getFreeFragmentVectorTemp()),n="";return t.fragmentConstantsIndex=4*r.index,t.texturesIndex=s.index,n+="tex "+a+", "+this._pDepthMapCoordReg+", "+s+" <2d, nearest, clamp>\ndp4 "+a+".z, "+a+", "+r+"\nslt "+e+".w, "+this._pDepthMapCoordReg+".z, "+a+".z\n"},e.prototype._pGetPointFragmentCode=function(t,e,i,s){var r=i.getFreeTextureReg(),a=i.getFreeFragmentConstant(),n=i.getFreeFragmentConstant(),o=i.getFreeFragmentConstant(),h=i.getFreeFragmentVectorTemp();i.addFragmentTempUsages(h,1);var l=i.getFreeFragmentVectorTemp(),p="";return t.fragmentConstantsIndex=4*a.index,t.texturesIndex=r.index,p+="sub "+l+", "+s.globalPositionVarying+", "+o+"\ndp3 "+l+".w, "+l+".xyz, "+l+".xyz\nmul "+l+".w, "+l+".w, "+o+".w\nnrm "+l+".xyz, "+l+".xyz\ntex "+h+", "+l+", "+r+" <cube, nearest, clamp>\ndp4 "+h+".z, "+h+", "+a+"\nadd "+e+".w, "+l+".w, "+n+".x\nslt "+e+".w, "+e+".w, "+h+".z\n",i.removeFragmentTempUsage(h),p},e.prototype._iGetCascadeFragmentCode=function(t,e,i,s,r,a,n){var o=n.getFreeFragmentVectorTemp();return"tex "+o+", "+r+", "+s+" <2d, nearest, clamp>\ndp4 "+o+".z, "+o+", "+i+"\nslt "+a+".w, "+r+".z, "+o+".z\n"},e.prototype.iActivateForCascade=function(){},e}(s);e.exports=r},{"awayjs-stagegl/lib/materials/methods/ShadowMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/methods/ShadowMapMethodBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-stagegl/lib/materials/methods/ShadingMethodBase"),a=function(t){function e(e){t.call(this),this._pEpsilon=.02,this._pAlpha=1,this._pCastingLight=e,e.castsShadows=!0,this._pShadowMapper=e.shadowMapper}return i(e,t),Object.defineProperty(e.prototype,"assetType",{get:function(){return s.SHADOW_MAP_METHOD},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._pAlpha},set:function(t){this._pAlpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"castingLight",{get:function(){return this._pCastingLight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"epsilon",{get:function(){return this._pEpsilon},set:function(t){this._pEpsilon=t},enumerable:!0,configurable:!0}),e}(r);e.exports=a},{"awayjs-core/lib/library/AssetType":void 0,"awayjs-stagegl/lib/materials/methods/ShadingMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/methods/ShadowMethodBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/errors/AbstractMethodError"),r=t("awayjs-display/lib/entities/PointLight"),a=t("awayjs-stagegl/lib/materials/methods/ShadowMapMethodBase"),n=function(t){function e(e){this._pUsePoint=e instanceof r,t.call(this,e)}return i(e,t),e.prototype.iInitVO=function(t,e){e.needsView=!0,e.needsGlobalVertexPos=!0,e.needsGlobalFragmentPos=this._pUsePoint,e.needsNormals=t.numLights>0},e.prototype.iInitConstants=function(t,e){var i=t.fragmentConstantData,s=t.vertexConstantData,r=e.fragmentConstantsIndex;i[r]=1,i[r+1]=1/255,i[r+2]=1/65025,i[r+3]=1/16581375,i[r+6]=0,i[r+7]=1,this._pUsePoint&&(i[r+8]=0,i[r+9]=0,i[r+10]=0,i[r+11]=1),r=e.vertexConstantsIndex,-1!=r&&(s[r]=.5,s[r+1]=.5,s[r+2]=0,s[r+3]=1)},Object.defineProperty(e.prototype,"_iDepthMapCoordReg",{get:function(){return this._pDepthMapCoordReg},set:function(t){this._pDepthMapCoordReg=t},enumerable:!0,configurable:!0}),e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._pDepthMapCoordReg=null},e.prototype.iGetVertexCode=function(t,e,i,s){return this._pUsePoint?this._pGetPointVertexCode(e,i,s):this.pGetPlanarVertexCode(e,i,s)},e.prototype._pGetPointVertexCode=function(t){return t.vertexConstantsIndex=-1,""},e.prototype.pGetPlanarVertexCode=function(t,e,i){var s="",r=e.getFreeVertexVectorTemp(),a=e.getFreeVertexConstant(),n=e.getFreeVertexConstant();return e.getFreeVertexConstant(),e.getFreeVertexConstant(),e.getFreeVertexConstant(),this._pDepthMapCoordReg=e.getFreeVarying(),t.vertexConstantsIndex=4*a.index,s+="m44 "+r+", "+i.globalPositionVertex+", "+n+"\ndiv "+r+", "+r+", "+r+".w\nmul "+r+".xy, "+r+".xy, "+a+".xy\nadd "+this._pDepthMapCoordReg+", "+r+", "+a+".xxwz\n"},e.prototype.iGetFragmentCode=function(t,e,i,s,r){var a=this._pUsePoint?this._pGetPointFragmentCode(e,i,s,r):this._pGetPlanarFragmentCode(e,i,s,r);return a+="add "+i+".w, "+i+".w, fc"+(e.fragmentConstantsIndex/4+1)+".y\nsat "+i+".w, "+i+".w\n"},e.prototype._pGetPlanarFragmentCode=function(){throw new s},e.prototype._pGetPointFragmentCode=function(){throw new s},e.prototype.iSetRenderState=function(t,e){this._pUsePoint||this._pShadowMapper.iDepthProjection.copyRawDataTo(t.vertexConstantData,e.vertexConstantsIndex+4,!0)},e.prototype._iGetCascadeFragmentCode=function(){throw new Error("This shadow method is incompatible with cascade shadows")},e.prototype.iActivate=function(t,e,i){var s=t.fragmentConstantData,r=e.fragmentConstantsIndex;if(this._pUsePoint?s[r+4]=-Math.pow(1/(this._pCastingLight.fallOff*this._pEpsilon),2):t.vertexConstantData[e.vertexConstantsIndex+3]=-1/(this._pShadowMapper.depth*this._pEpsilon),s[r+5]=1-this._pAlpha,this._pUsePoint){var a=this._pCastingLight.scenePosition;s[r+8]=a.x,s[r+9]=a.y,s[r+10]=a.z;var n=this._pCastingLight.fallOff;s[r+11]=1/(2*n*n)}this._pUsePoint||i.context.activateRenderTexture(e.texturesIndex,this._pCastingLight.shadowMapper.depthMap)},e.prototype.iActivateForCascade=function(){throw new Error("This shadow method is incompatible with cascade shadows")},e}(a);e.exports=n},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-display/lib/entities/PointLight":void 0,"awayjs-stagegl/lib/materials/methods/ShadowMapMethodBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/methods/SpecularBasicMethod":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/ContextGLMipFilter"),r=t("awayjs-stagegl/lib/base/ContextGLTextureFilter"),a=t("awayjs-stagegl/lib/base/ContextGLWrapMode"),n=t("awayjs-stagegl/lib/materials/methods/LightingMethodBase"),o=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),h=function(t){function e(){t.call(this),this._gloss=50,this._specular=1,this._specularColor=16777215,this._iSpecularR=1,this._iSpecularG=1,this._iSpecularB=1}return i(e,t),e.prototype.iIsUsed=function(t){return t.numLights?!0:!1},e.prototype.iInitVO=function(t,e){e.needsUV=this._pUseTexture,e.needsNormals=t.numLights>0,e.needsView=t.numLights>0},Object.defineProperty(e.prototype,"gloss",{get:function(){return this._gloss},set:function(t){this._gloss=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specular",{get:function(){return this._specular},set:function(t){t!=this._specular&&(this._specular=t,this.updateSpecular())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specularColor",{get:function(){return this._specularColor},set:function(t){this._specularColor!=t&&((0==this._specularColor||0==t)&&this.iInvalidateShaderProgram(),this._specularColor=t,this.updateSpecular())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){var e=null!=t;(e!=this._pUseTexture||t&&this._texture&&(t.hasMipmaps!=this._texture.hasMipmaps||t.format!=this._texture.format))&&this.iInvalidateShaderProgram(),this._pUseTexture=e,this._texture=t},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(t){var e=t,i=e;this.texture=i.texture,this.specular=i.specular,this.specularColor=i.specularColor,this.gloss=i.gloss},e.prototype.iCleanCompilationData=function(){t.prototype.iCleanCompilationData.call(this),this._pTotalLightColorReg=null,this._pSpecularTextureRegister=null,this._pSpecularTexData=null,this._pSpecularDataRegister=null},e.prototype.iGetFragmentPreLightingCode=function(t,e,i,s){var r="";return this._pIsFirstLight=!0,this._pSpecularDataRegister=i.getFreeFragmentConstant(),e.fragmentConstantsIndex=4*this._pSpecularDataRegister.index,this._pUseTexture?(this._pSpecularTexData=i.getFreeFragmentVectorTemp(),i.addFragmentTempUsages(this._pSpecularTexData,1),this._pSpecularTextureRegister=i.getFreeTextureReg(),e.texturesIndex=this._pSpecularTextureRegister.index,r=o.getTex2DSampleCode(this._pSpecularTexData,s,this._pSpecularTextureRegister,this._texture,t.useSmoothTextures,t.repeatTextures,t.useMipmapping)):this._pSpecularTextureRegister=null,this._pTotalLightColorReg=i.getFreeFragmentVectorTemp(),i.addFragmentTempUsages(this._pTotalLightColorReg,1),r},e.prototype.iGetFragmentCodePerLight=function(t,e,i,s,r,a){var n,o="";this._pIsFirstLight?n=this._pTotalLightColorReg:(n=r.getFreeFragmentVectorTemp(),r.addFragmentTempUsages(n,1));var h=a.viewDirFragment,l=a.normalFragment;return o+="add "+n+", "+i+", "+h+"\nnrm "+n+".xyz, "+n+"\ndp3 "+n+".w, "+l+", "+n+"\nsat "+n+".w, "+n+".w\n",o+=this._pUseTexture?"mul "+this._pSpecularTexData+".w, "+this._pSpecularTexData+".y, "+this._pSpecularDataRegister+".w\npow "+n+".w, "+n+".w, "+this._pSpecularTexData+".w\n":"pow "+n+".w, "+n+".w, "+this._pSpecularDataRegister+".w\n",t.usesLightFallOff&&(o+="mul "+n+".w, "+n+".w, "+i+".w\n"),null!=this._iModulateMethod&&(o+=this._iModulateMethod(t,e,n,r,a)),o+="mul "+n+".xyz, "+s+", "+n+".w\n",this._pIsFirstLight||(o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+n+"\n",r.removeFragmentTempUsage(n)),this._pIsFirstLight=!1,o},e.prototype.iGetFragmentCodePerProbe=function(t,e,i,s,r,a){var n,o="";this._pIsFirstLight?n=this._pTotalLightColorReg:(n=r.getFreeFragmentVectorTemp(),r.addFragmentTempUsages(n,1));var h=a.normalFragment,l=a.viewDirFragment;return o+="dp3 "+n+".w, "+h+", "+l+"\nadd "+n+".w, "+n+".w, "+n+".w\nmul "+n+", "+n+".w, "+h+"\nsub "+n+", "+n+", "+l+"\ntex "+n+", "+n+", "+i+" <cube,"+(t.useSmoothTextures?"linear":"nearest")+",miplinear>\nmul "+n+".xyz, "+n+", "+s+"\n",null!=this._iModulateMethod&&(o+=this._iModulateMethod(t,e,n,r,a)),this._pIsFirstLight||(o+="add "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+n+"\n",r.removeFragmentTempUsage(n)),this._pIsFirstLight=!1,o},e.prototype.iGetFragmentPostLightingCode=function(t,e,i,s,r){var a="";return r.shadowTarget&&(a+="mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+r.shadowTarget+".w\n"),this._pUseTexture&&(a+="mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+this._pSpecularTexData+".x\n",s.removeFragmentTempUsage(this._pSpecularTexData)),a+="mul "+this._pTotalLightColorReg+".xyz, "+this._pTotalLightColorReg+", "+this._pSpecularDataRegister+"\nadd "+i+".xyz, "+i+", "+this._pTotalLightColorReg+"\n",s.removeFragmentTempUsage(this._pTotalLightColorReg),a},e.prototype.iActivate=function(t,e,i){this._pUseTexture&&(i.context.setSamplerStateAt(e.texturesIndex,t.repeatTextures?a.REPEAT:a.CLAMP,t.useSmoothTextures?r.LINEAR:r.NEAREST,t.useMipmapping?s.MIPLINEAR:s.MIPNONE),i.context.activateTexture(e.texturesIndex,this._texture));var n=e.fragmentConstantsIndex,o=t.fragmentConstantData;o[n]=this._iSpecularR,o[n+1]=this._iSpecularG,o[n+2]=this._iSpecularB,o[n+3]=this._gloss},e.prototype.updateSpecular=function(){this._iSpecularR=(this._specularColor>>16&255)/255*this._specular,this._iSpecularG=(this._specularColor>>8&255)/255*this._specular,this._iSpecularB=(255&this._specularColor)/255*this._specular},e}(n);e.exports=h},{"awayjs-stagegl/lib/base/ContextGLMipFilter":void 0,"awayjs-stagegl/lib/base/ContextGLTextureFilter":void 0,"awayjs-stagegl/lib/base/ContextGLWrapMode":void 0,"awayjs-stagegl/lib/materials/methods/LightingMethodBase":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/passes/DepthMapPass":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/ContextGLMipFilter"),r=t("awayjs-stagegl/lib/base/ContextGLTextureFilter"),a=t("awayjs-stagegl/lib/base/ContextGLWrapMode"),n=t("awayjs-stagegl/lib/materials/passes/MaterialPassBase"),o=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),h=function(t){function e(){t.call(this)}return i(e,t),e.prototype._iInitConstantData=function(e){t.prototype._iInitConstantData.call(this,e);var i=this._fragmentConstantsIndex,s=e.fragmentConstantData;s[i]=1,s[i+1]=255,s[i+2]=65025,s[i+3]=16581375,s[i+4]=1/255,s[i+5]=1/255,s[i+6]=1/255,s[i+7]=0},e.prototype._iIncludeDependencies=function(t){t.projectionDependencies++,t.alphaThreshold>0&&t.uvDependencies++},e.prototype._iGetFragmentCode=function(t,e,i){var s="",r=i.shadedTarget,a=e.getFreeTextureReg(),n=e.getFreeFragmentConstant(),h=e.getFreeFragmentConstant();this._fragmentConstantsIndex=4*n.index;var l=e.getFreeFragmentVectorTemp();e.addFragmentTempUsages(l,1);var p=e.getFreeFragmentVectorTemp();if(e.addFragmentTempUsages(p,1),s+="div "+l+", "+i.projectionFragment+", "+i.projectionFragment+".w\nmul "+l+", "+n+", "+l+".z\nfrc "+l+", "+l+"\nmul "+p+", "+l+".yzww, "+h+"\n",t.alphaThreshold>0){a=e.getFreeTextureReg(),this._texturesIndex=a.index;var d=e.getFreeFragmentVectorTemp();s+=o.getTex2DSampleCode(d,i,a,t.texture,t.useSmoothTextures,t.repeatTextures,t.useMipmapping);var u=e.getFreeFragmentConstant();s+="sub "+d+".w, "+d+".w, "+u+".x\nkil "+d+".w\n"}return s+="sub "+r+", "+l+", "+p+"\n",e.removeFragmentTempUsage(l),e.removeFragmentTempUsage(p),s},e.prototype._iRender=function(){},e.prototype._iActivate=function(e,i,n){t.prototype._iActivate.call(this,e,i,n);var o=i.context,h=e.shaderObject;h.alphaThreshold>0&&(o.setSamplerStateAt(this._texturesIndex,h.repeatTextures?a.REPEAT:a.CLAMP,h.useSmoothTextures?r.LINEAR:r.NEAREST,h.useMipmapping?s.MIPLINEAR:s.MIPNONE),o.activateTexture(this._texturesIndex,h.texture),h.fragmentConstantData[this._fragmentConstantsIndex+8]=e.shaderObject.alphaThreshold)},e}(n);e.exports=h},{"awayjs-stagegl/lib/base/ContextGLMipFilter":void 0,"awayjs-stagegl/lib/base/ContextGLTextureFilter":void 0,"awayjs-stagegl/lib/base/ContextGLWrapMode":void 0,"awayjs-stagegl/lib/materials/passes/MaterialPassBase":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/passes/DistanceMapPass":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/ContextGLMipFilter"),r=t("awayjs-stagegl/lib/base/ContextGLTextureFilter"),a=t("awayjs-stagegl/lib/base/ContextGLWrapMode"),n=t("awayjs-stagegl/lib/materials/passes/MaterialPassBase"),o=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),h=function(t){function e(){t.call(this)}return i(e,t),e.prototype._iInitConstantData=function(e){t.prototype._iInitConstantData.call(this,e);var i=this._fragmentConstantsIndex,s=e.fragmentConstantData;s[i+4]=1/255,s[i+5]=1/255,s[i+6]=1/255,s[i+7]=0},e.prototype._iIncludeDependencies=function(t){t.projectionDependencies++,t.viewDirDependencies++,t.alphaThreshold>0&&t.uvDependencies++,t.addWorldSpaceDependencies(!1)},e.prototype._iGetFragmentCode=function(t,e,i){var s,r=i.shadedTarget,a=e.getFreeTextureReg(),n=e.getFreeFragmentConstant(),h=e.getFreeFragmentConstant();this._fragmentConstantsIndex=4*n.index;var l=e.getFreeFragmentVectorTemp();e.addFragmentTempUsages(l,1);var p=e.getFreeFragmentVectorTemp();if(e.addFragmentTempUsages(p,1),s="dp3 "+l+".z, "+i.viewDirVarying+".xyz, "+i.viewDirVarying+".xyz\nmul "+l+", "+n+", "+l+".z\nfrc "+l+", "+l+"\nmul "+p+", "+l+".yzww, "+h+"\n",t.alphaThreshold>0){a=e.getFreeTextureReg(),this._texturesIndex=a.index;var d=e.getFreeFragmentVectorTemp();s+=o.getTex2DSampleCode(d,i,a,t.texture,t.useSmoothTextures,t.repeatTextures,t.useMipmapping);var u=e.getFreeFragmentConstant();s+="sub "+d+".w, "+d+".w, "+u+".x\nkil "+d+".w\n"}return s+="sub "+r+", "+l+", "+p+"\n"},e.prototype._iActivate=function(e,i,n){t.prototype._iActivate.call(this,e,i,n);var o=i.context,h=e.shaderObject,l=n.projection.far;l=1/(2*l*l);var p=this._fragmentConstantsIndex,d=h.fragmentConstantData;d[p]=1*l,d[p+1]=255*l,d[p+2]=65025*l,d[p+3]=16581375*l,h.alphaThreshold>0&&(o.setSamplerStateAt(this._texturesIndex,h.repeatTextures?a.REPEAT:a.CLAMP,h.useSmoothTextures?r.LINEAR:r.NEAREST,h.useMipmapping?s.MIPLINEAR:s.MIPNONE),o.activateTexture(this._texturesIndex,h.texture),d[p+8]=e.shaderObject.alphaThreshold)},e}(n);e.exports=h},{"awayjs-stagegl/lib/base/ContextGLMipFilter":void 0,"awayjs-stagegl/lib/base/ContextGLTextureFilter":void 0,"awayjs-stagegl/lib/base/ContextGLWrapMode":void 0,"awayjs-stagegl/lib/materials/passes/MaterialPassBase":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/passes/ILightingPassStageGL":[function(){},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/passes/IMaterialPassStageGL":[function(){},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/passes/LineBasicPass":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/passes/MaterialPassBase"),r=function(t){function e(){t.call(this)}return i(e,t),e.prototype._iGetFragmentCode=function(t,e,i){var s=i.shadedTarget;return"mov "+s+", v0\n"},e}(s);e.exports=r},{"awayjs-stagegl/lib/materials/passes/MaterialPassBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/passes/MaterialPassBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/library/NamedAssetBase"),r=t("awayjs-core/lib/errors/ArgumentError"),a=t("awayjs-core/lib/events/Event"),n=t("awayjs-display/lib/base/BlendMode"),o=t("awayjs-stagegl/lib/base/ContextGLBlendFactor"),h=t("awayjs-stagegl/lib/base/ContextGLCompareMode"),l=t("awayjs-stagegl/lib/materials/compilation/ShaderObjectBase"),p=t("awayjs-stagegl/lib/materials/passes/MaterialPassMode"),d=function(t){function e(e){var i=this;void 0===e&&(e=3),t.call(this),this._materialPassData=new Array,this._maxLights=3,this._preserveAlpha=!0,this._includeCasters=!0,this._forceSeparateMVP=!1,this._directionalLightsOffset=0,this._pointLightsOffset=0,this._lightProbesOffset=0,this._pNumPointLights=0,this._pNumDirectionalLights=0,this._pNumLightProbes=0,this._pNumLights=0,this._depthCompareMode=h.LESS_EQUAL,this._blendFactorSource=o.ONE,this._blendFactorDest=o.ZERO,this._pEnableBlending=!1,this._writeDepth=!0,this._passMode=e,this._onLightsChangeDelegate=function(t){return i.onLightsChange(t)}}return i(e,t),Object.defineProperty(e.prototype,"preserveAlpha",{get:function(){return this._preserveAlpha},set:function(t){this._preserveAlpha!=t&&(this._preserveAlpha=t,this._pInvalidatePass())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"includeCasters",{get:function(){return this._includeCasters},set:function(t){this._includeCasters!=t&&(this._includeCasters=t,this._pInvalidatePass())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceSeparateMVP",{get:function(){return this._forceSeparateMVP},set:function(t){this._forceSeparateMVP!=t&&(this._forceSeparateMVP=t,this._pInvalidatePass())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"directionalLightsOffset",{get:function(){return this._directionalLightsOffset},set:function(t){this._directionalLightsOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointLightsOffset",{get:function(){return this._pointLightsOffset},set:function(t){this._pointLightsOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lightProbesOffset",{get:function(){return this._lightProbesOffset},set:function(t){this._lightProbesOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"passMode",{get:function(){return this._passMode},set:function(t){this._passMode=t,this._pInvalidatePass()},enumerable:!0,configurable:!0}),e.prototype.createShaderObject=function(t){return new l(t)},Object.defineProperty(e.prototype,"writeDepth",{get:function(){return this._writeDepth},set:function(t){this._writeDepth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthCompareMode",{get:function(){return this._depthCompareMode},set:function(t){this._depthCompareMode=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){for(this._pLightPicker&&this._pLightPicker.removeEventListener(a.CHANGE,this._onLightsChangeDelegate);this._materialPassData.length;)this._materialPassData[0].dispose();this._materialPassData=null},e.prototype._iRender=function(t,e,i,s,r){this.setRenderState(t,e,i,s,r)},e.prototype.setRenderState=function(t,e,i,s,r){t.shaderObject.setRenderState(e,i,s,r)},e.prototype.setBlendMode=function(t){switch(t){case n.NORMAL:this._blendFactorSource=o.ONE,this._blendFactorDest=o.ZERO,this._pEnableBlending=!1;break;case n.LAYER:this._blendFactorSource=o.SOURCE_ALPHA,this._blendFactorDest=o.ONE_MINUS_SOURCE_ALPHA,this._pEnableBlending=!0;break;case n.MULTIPLY:this._blendFactorSource=o.ZERO,this._blendFactorDest=o.SOURCE_COLOR,this._pEnableBlending=!0;break;case n.ADD:this._blendFactorSource=o.SOURCE_ALPHA,this._blendFactorDest=o.ONE,this._pEnableBlending=!0;break;case n.ALPHA:this._blendFactorSource=o.ZERO,this._blendFactorDest=o.SOURCE_ALPHA,this._pEnableBlending=!0;break;default:throw new r("Unsupported blend mode!")}},e.prototype._iActivate=function(t,e,i){var s=e.context;s.setDepthTest(this._writeDepth&&!this._pEnableBlending,this._depthCompareMode),this._pEnableBlending&&s.setBlendFactors(this._blendFactorSource,this._blendFactorDest),s.activateMaterialPass(t,e,i)},e.prototype._iDeactivate=function(t,e){e.context.deactivateMaterialPass(t,e),e.context.setDepthTest(!0,h.LESS_EQUAL)},e.prototype._pInvalidatePass=function(){for(var t=this._materialPassData.length,e=0;t>e;e++)this._materialPassData[e].invalidate();this.dispatchEvent(new a(a.CHANGE))},Object.defineProperty(e.prototype,"lightPicker",{get:function(){return this._pLightPicker},set:function(t){this._pLightPicker&&this._pLightPicker.removeEventListener(a.CHANGE,this._onLightsChangeDelegate),this._pLightPicker=t,this._pLightPicker&&this._pLightPicker.addEventListener(a.CHANGE,this._onLightsChangeDelegate),this.pUpdateLights()},enumerable:!0,configurable:!0}),e.prototype.onLightsChange=function(){this.pUpdateLights()},e.prototype.pUpdateLights=function(){var t=this._pNumDirectionalLights,e=this._pNumPointLights,i=this._pNumLightProbes;this._pLightPicker&&this._passMode&p.LIGHTING?(this._pNumDirectionalLights=this.calculateNumDirectionalLights(this._pLightPicker.numDirectionalLights),this._pNumPointLights=this.calculateNumPointLights(this._pLightPicker.numPointLights),this._pNumLightProbes=this.calculateNumProbes(this._pLightPicker.numLightProbes),this._includeCasters&&(this._pNumDirectionalLights+=this._pLightPicker.numCastingDirectionalLights,this._pNumPointLights+=this._pLightPicker.numCastingPointLights)):(this._pNumDirectionalLights=0,this._pNumPointLights=0,this._pNumLightProbes=0),this._pNumLights=this._pNumDirectionalLights+this._pNumPointLights,(t!=this._pNumDirectionalLights||e!=this._pNumPointLights||i!=this._pNumLightProbes)&&this._pInvalidatePass()},e.prototype._iIncludeDependencies=function(t){this._forceSeparateMVP&&t.globalPosDependencies++,t.outputsNormals=this._pOutputsNormals(t),t.outputsTangentNormals=t.outputsNormals&&this._pOutputsTangentNormals(t),t.usesTangentSpace=t.outputsTangentNormals&&this._pUsesTangentSpace(t),t.usesTangentSpace||t.addWorldSpaceDependencies(Boolean(this._passMode&p.EFFECTS))},e.prototype._iInitConstantData=function(){},e.prototype._iGetPreLightingVertexCode=function(){return""},e.prototype._iGetPreLightingFragmentCode=function(){return""},e.prototype._iGetVertexCode=function(){return""},e.prototype._iGetFragmentCode=function(){return""},e.prototype._iGetNormalVertexCode=function(){return""},e.prototype._iGetNormalFragmentCode=function(){return""},Object.defineProperty(e.prototype,"iNumPointLights",{get:function(){return this._pNumPointLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iNumDirectionalLights",{get:function(){return this._pNumDirectionalLights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iNumLightProbes",{get:function(){return this._pNumLightProbes},enumerable:!0,configurable:!0}),e.prototype._pOutputsNormals=function(){return!1},e.prototype._pOutputsTangentNormals=function(){return!1},e.prototype._pUsesTangentSpace=function(){return!1},e.prototype.calculateNumDirectionalLights=function(t){return Math.min(t-this._directionalLightsOffset,this._maxLights)},e.prototype.calculateNumPointLights=function(t){var e=this._maxLights-this._pNumDirectionalLights;return Math.min(t-this._pointLightsOffset,e)},e.prototype.calculateNumProbes=function(t){var e=0;return Math.min(t-this._lightProbesOffset,4/e|0)},e.prototype._iAddMaterialPassData=function(t){return this._materialPassData.push(t),t},e.prototype._iRemoveMaterialPassData=function(t){return this._materialPassData.splice(this._materialPassData.indexOf(t),1),t},e}(s);e.exports=d},{"awayjs-core/lib/errors/ArgumentError":void 0,"awayjs-core/lib/events/Event":void 0,"awayjs-core/lib/library/NamedAssetBase":void 0,"awayjs-display/lib/base/BlendMode":void 0,"awayjs-stagegl/lib/base/ContextGLBlendFactor":void 0,"awayjs-stagegl/lib/base/ContextGLCompareMode":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderObjectBase":void 0,"awayjs-stagegl/lib/materials/passes/MaterialPassMode":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/passes/MaterialPassMode":[function(t,e){var i=function(){function t(){}return t.EFFECTS=1,t.LIGHTING=2,t.SUPER_SHADER=3,t
}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/passes/SkyboxPass":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/materials/passes/MaterialPassBase"),r=function(t){function e(){t.call(this)}return i(e,t),e.prototype._iIncludeDependencies=function(t){t.useMipmapping=!1},e}(s);e.exports=r},{"awayjs-stagegl/lib/materials/passes/MaterialPassBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/passes/TriangleBasicPass":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/base/ContextGLMipFilter"),r=t("awayjs-stagegl/lib/base/ContextGLTextureFilter"),a=t("awayjs-stagegl/lib/base/ContextGLWrapMode"),n=t("awayjs-stagegl/lib/materials/passes/MaterialPassBase"),o=t("awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper"),h=function(t){function e(){t.call(this),this._diffuseColor=16777215,this._diffuseR=1,this._diffuseG=1,this._diffuseB=1,this._diffuseA=1}return i(e,t),Object.defineProperty(e.prototype,"diffuseAlpha",{get:function(){return this._diffuseA},set:function(t){this._diffuseA=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuseColor",{get:function(){return this._diffuseColor},set:function(t){this._diffuseColor=t,this._diffuseR=(this._diffuseColor>>16&255)/255,this._diffuseG=(this._diffuseColor>>8&255)/255,this._diffuseB=(255&this._diffuseColor)/255},enumerable:!0,configurable:!0}),e.prototype._iGetFragmentCode=function(t,e,i){var s,r="",a=i.shadedTarget;if(null!=t.texture){if(s=e.getFreeTextureReg(),this._texturesIndex=s.index,r+=o.getTex2DSampleCode(a,i,s,t.texture,t.useSmoothTextures,t.repeatTextures,t.useMipmapping),t.alphaThreshold>0){var n=e.getFreeFragmentConstant();this._fragmentConstantsIndex=4*n.index,r+="sub "+a+".w, "+a+".w, "+n+".x\nkil "+a+".w\nadd "+a+".w, "+a+".w, "+n+".x\n"}}else s=e.getFreeFragmentConstant(),this._fragmentConstantsIndex=4*s.index,r+="mov "+a+", "+s+"\n";return r},e.prototype._iIncludeDependencies=function(t){null!=t.texture&&t.uvDependencies++},e.prototype._iActivate=function(e,i,n){t.prototype._iActivate.call(this,e,i,n);var o=e.shaderObject;if(null!=o.texture)i.context.setSamplerStateAt(this._texturesIndex,o.repeatTextures?a.REPEAT:a.CLAMP,o.useSmoothTextures?r.LINEAR:r.NEAREST,o.useMipmapping?s.MIPLINEAR:s.MIPNONE),i.context.activateTexture(this._texturesIndex,o.texture),o.alphaThreshold>0&&(o.fragmentConstantData[this._fragmentConstantsIndex]=o.alphaThreshold);else{var h=this._fragmentConstantsIndex,l=o.fragmentConstantData;l[h]=this._diffuseR,l[h+1]=this._diffuseG,l[h+2]=this._diffuseB,l[h+3]=this._diffuseA}},e}(n);e.exports=h},{"awayjs-stagegl/lib/base/ContextGLMipFilter":void 0,"awayjs-stagegl/lib/base/ContextGLTextureFilter":void 0,"awayjs-stagegl/lib/base/ContextGLWrapMode":void 0,"awayjs-stagegl/lib/materials/passes/MaterialPassBase":void 0,"awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/passes/TriangleMethodPass":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/events/ShadingMethodEvent"),r=t("awayjs-stagegl/lib/materials/compilation/MethodVO"),a=t("awayjs-stagegl/lib/materials/compilation/ShaderLightingObject"),n=t("awayjs-stagegl/lib/materials/compilation/ShaderObjectBase"),o=t("awayjs-stagegl/lib/materials/methods/EffectColorTransformMethod"),h=t("awayjs-stagegl/lib/materials/passes/MaterialPassBase"),l=t("awayjs-stagegl/lib/materials/passes/MaterialPassMode"),p=function(t){function e(e){var i=this;void 0===e&&(e=3),t.call(this,e),this._iMethodVOs=new Array,this._numEffectDependencies=0,this._onShaderInvalidatedDelegate=function(t){return i.onShaderInvalidated(t)}}return i(e,t),e.prototype.createShaderObject=function(t){return this._pLightPicker&&this.passMode&l.LIGHTING?new a(t):new n(t)},e.prototype._iInitConstantData=function(e){t.prototype._iInitConstantData.call(this,e);for(var i=this._iMethodVOs.length,s=0;i>s;++s)this._iMethodVOs[s].method.iInitConstants(e,this._iMethodVOs[s])},Object.defineProperty(e.prototype,"colorTransform",{get:function(){return this.colorTransformMethod?this.colorTransformMethod.colorTransform:null},set:function(t){t?(null==this.colorTransformMethod&&(this.colorTransformMethod=new o),this.colorTransformMethod.colorTransform=t):t||this.colorTransformMethod&&(this.colorTransformMethod=null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorTransformMethod",{get:function(){return this._iColorTransformMethodVO?this._iColorTransformMethodVO.method:null},set:function(t){this._iColorTransformMethodVO&&this._iColorTransformMethodVO.method==t||(this._iColorTransformMethodVO&&(this._removeDependency(this._iColorTransformMethodVO),this._iColorTransformMethodVO=null),t&&(this._iColorTransformMethodVO=new r(t),this._addDependency(this._iColorTransformMethodVO)))},enumerable:!0,configurable:!0}),e.prototype._removeDependency=function(t,e){void 0===e&&(e=!1);var i=this._iMethodVOs.indexOf(t);e||this._numEffectDependencies--,t.method.removeEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate),this._iMethodVOs.splice(i,1),this._pInvalidatePass()},e.prototype._addDependency=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=-1),t.method.addEventListener(s.SHADER_INVALIDATED,this._onShaderInvalidatedDelegate),e?(-1!=i?this._iMethodVOs.splice(i+this._iMethodVOs.length-this._numEffectDependencies,0,t):this._iMethodVOs.push(t),this._numEffectDependencies++):this._iMethodVOs.splice(this._iMethodVOs.length-this._numEffectDependencies,0,t),this._pInvalidatePass()},e.prototype.addEffectMethod=function(t){this._addDependency(new r(t),!0)},Object.defineProperty(e.prototype,"numEffectMethods",{get:function(){return this._numEffectDependencies},enumerable:!0,configurable:!0}),e.prototype.hasEffectMethod=function(t){return null!=this.getDependencyForMethod(t)},e.prototype.getEffectMethodAt=function(t){return 0>t||t>this._numEffectDependencies-1?null:this._iMethodVOs[t+this._iMethodVOs.length-this._numEffectDependencies].method},e.prototype.addEffectMethodAt=function(t,e){this._addDependency(new r(t),!0,e)},e.prototype.removeEffectMethod=function(t){var e=this.getDependencyForMethod(t);null!=e&&this._removeDependency(e,!0)},e.prototype.getDependencyForMethod=function(t){for(var e=this._iMethodVOs.length,i=0;e>i;++i)if(this._iMethodVOs[i].method==t)return this._iMethodVOs[i];return null},Object.defineProperty(e.prototype,"normalMethod",{get:function(){return this._iNormalMethodVO?this._iNormalMethodVO.method:null},set:function(t){this._iNormalMethodVO&&this._iNormalMethodVO.method==t||(this._iNormalMethodVO&&(this._removeDependency(this._iNormalMethodVO),this._iNormalMethodVO=null),t&&(this._iNormalMethodVO=new r(t),this._addDependency(this._iNormalMethodVO)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ambientMethod",{get:function(){return this._iAmbientMethodVO?this._iAmbientMethodVO.method:null},set:function(t){this._iAmbientMethodVO&&this._iAmbientMethodVO.method==t||(this._iAmbientMethodVO&&(this._removeDependency(this._iAmbientMethodVO),this._iAmbientMethodVO=null),t&&(this._iAmbientMethodVO=new r(t),this._addDependency(this._iAmbientMethodVO)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowMethod",{get:function(){return this._iShadowMethodVO?this._iShadowMethodVO.method:null},set:function(t){this._iShadowMethodVO&&this._iShadowMethodVO.method==t||(this._iShadowMethodVO&&(this._removeDependency(this._iShadowMethodVO),this._iShadowMethodVO=null),t&&(this._iShadowMethodVO=new r(t),this._addDependency(this._iShadowMethodVO)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"diffuseMethod",{get:function(){return this._iDiffuseMethodVO?this._iDiffuseMethodVO.method:null},set:function(t){this._iDiffuseMethodVO&&this._iDiffuseMethodVO.method==t||(this._iDiffuseMethodVO&&(this._removeDependency(this._iDiffuseMethodVO),this._iDiffuseMethodVO=null),t&&(this._iDiffuseMethodVO=new r(t),this._addDependency(this._iDiffuseMethodVO)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specularMethod",{get:function(){return this._iSpecularMethodVO?this._iSpecularMethodVO.method:null},set:function(t){this._iSpecularMethodVO&&this._iSpecularMethodVO.method==t||(this._iSpecularMethodVO&&(this._removeDependency(this._iSpecularMethodVO),this._iSpecularMethodVO=null),t&&(this._iSpecularMethodVO=new r(t),this._addDependency(this._iSpecularMethodVO)))},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){for(t.prototype.dispose.call(this);this._iMethodVOs.length;)this._removeDependency(this._iMethodVOs[0]);this._iMethodVOs=null},e.prototype.onShaderInvalidated=function(){this._pInvalidatePass()},e.prototype._iActivate=function(e,i,s){t.prototype._iActivate.call(this,e,i,s);for(var r,a=this._iMethodVOs.length,n=0;a>n;++n)r=this._iMethodVOs[n],r.useMethod&&r.method.iActivate(e.shaderObject,r,i)},e.prototype.setRenderState=function(e,i,s,r,a){t.prototype.setRenderState.call(this,e,i,s,r,a);for(var n,o=this._iMethodVOs.length,h=0;o>h;++h)n=this._iMethodVOs[h],n.useMethod&&n.method.iSetRenderState(e.shaderObject,n,i,s,r)},e.prototype._iDeactivate=function(e,i){t.prototype._iDeactivate.call(this,e,i);for(var s,r=this._iMethodVOs.length,a=0;r>a;++a)s=this._iMethodVOs[a],s.useMethod&&s.method.iDeactivate(e.shaderObject,s,i)},e.prototype._iIncludeDependencies=function(e){var i,s=this._iMethodVOs.length;for(i=0;s>i;++i)this.setupAndCountDependencies(e,this._iMethodVOs[i]);for(i=0;s>i;++i)this._iMethodVOs[i].useMethod=this._iMethodVOs[i].method.iIsUsed(e);t.prototype._iIncludeDependencies.call(this,e)},e.prototype.setupAndCountDependencies=function(t,e){e.reset(),e.method.iInitVO(t,e),e.needsProjection&&t.projectionDependencies++,e.needsGlobalVertexPos?(t.globalPosDependencies++,e.needsGlobalFragmentPos&&(t.usesGlobalPosFragment=!0)):e.needsGlobalFragmentPos&&(t.globalPosDependencies++,t.usesGlobalPosFragment=!0),e.needsNormals&&t.normalDependencies++,e.needsTangents&&t.tangentDependencies++,e.needsView&&t.viewDirDependencies++,e.needsUV&&t.uvDependencies++,e.needsSecondaryUV&&t.secondaryUVDependencies++},e.prototype._iGetPreLightingVertexCode=function(t,e,i){var s="";return this._iAmbientMethodVO&&this._iAmbientMethodVO.useMethod&&(s+=this._iAmbientMethodVO.method.iGetVertexCode(t,this._iAmbientMethodVO,e,i)),this._iDiffuseMethodVO&&this._iDiffuseMethodVO.useMethod&&(s+=this._iDiffuseMethodVO.method.iGetVertexCode(t,this._iDiffuseMethodVO,e,i)),this._iSpecularMethodVO&&this._iSpecularMethodVO.useMethod&&(s+=this._iSpecularMethodVO.method.iGetVertexCode(t,this._iSpecularMethodVO,e,i)),s},e.prototype._iGetPreLightingFragmentCode=function(t,e,i){var s="";return this._iAmbientMethodVO&&this._iAmbientMethodVO.useMethod&&(s+=this._iAmbientMethodVO.method.iGetFragmentCode(t,this._iAmbientMethodVO,i.shadedTarget,e,i),this._iAmbientMethodVO.needsNormals&&e.removeFragmentTempUsage(i.normalFragment),this._iAmbientMethodVO.needsView&&e.removeFragmentTempUsage(i.viewDirFragment)),this._iDiffuseMethodVO&&this._iDiffuseMethodVO.useMethod&&(s+=this._iDiffuseMethodVO.method.iGetFragmentPreLightingCode(t,this._iDiffuseMethodVO,e,i)),this._iSpecularMethodVO&&this._iSpecularMethodVO.useMethod&&(s+=this._iSpecularMethodVO.method.iGetFragmentPreLightingCode(t,this._iSpecularMethodVO,e,i)),s},e.prototype._iGetPerLightDiffuseFragmentCode=function(t,e,i,s,r){return this._iDiffuseMethodVO.method.iGetFragmentCodePerLight(t,this._iDiffuseMethodVO,e,i,s,r)},e.prototype._iGetPerLightSpecularFragmentCode=function(t,e,i,s,r){return this._iSpecularMethodVO.method.iGetFragmentCodePerLight(t,this._iSpecularMethodVO,e,i,s,r)},e.prototype._iGetPerProbeDiffuseFragmentCode=function(t,e,i,s,r){return this._iDiffuseMethodVO.method.iGetFragmentCodePerProbe(t,this._iDiffuseMethodVO,e,i,s,r)},e.prototype._iGetPerProbeSpecularFragmentCode=function(t,e,i,s,r){return this._iSpecularMethodVO.method.iGetFragmentCodePerProbe(t,this._iSpecularMethodVO,e,i,s,r)},e.prototype._iGetPostLightingVertexCode=function(t,e,i){var s="";return this._iShadowMethodVO&&(s+=this._iShadowMethodVO.method.iGetVertexCode(t,this._iShadowMethodVO,e,i)),s},e.prototype._iGetPostLightingFragmentCode=function(t,e,i){var s="";return t.useAlphaPremultiplied&&this._pEnableBlending&&(s+="add "+i.shadedTarget+".w, "+i.shadedTarget+".w, "+i.commons+".z\ndiv "+i.shadedTarget+".xyz, "+i.shadedTarget+", "+i.shadedTarget+".w\nsub "+i.shadedTarget+".w, "+i.shadedTarget+".w, "+i.commons+".z\nsat "+i.shadedTarget+".xyz, "+i.shadedTarget+"\n"),this._iShadowMethodVO&&(s+=this._iShadowMethodVO.method.iGetFragmentCode(t,this._iShadowMethodVO,i.shadowTarget,e,i)),this._iDiffuseMethodVO&&this._iDiffuseMethodVO.useMethod&&(s+=this._iDiffuseMethodVO.method.iGetFragmentPostLightingCode(t,this._iDiffuseMethodVO,i.shadedTarget,e,i),this._iDiffuseMethodVO.needsNormals&&e.removeFragmentTempUsage(i.normalFragment),this._iDiffuseMethodVO.needsView&&e.removeFragmentTempUsage(i.viewDirFragment)),this._iSpecularMethodVO&&this._iSpecularMethodVO.useMethod&&(s+=this._iSpecularMethodVO.method.iGetFragmentPostLightingCode(t,this._iSpecularMethodVO,i.shadedTarget,e,i),this._iSpecularMethodVO.needsNormals&&e.removeFragmentTempUsage(i.normalFragment),this._iSpecularMethodVO.needsView&&e.removeFragmentTempUsage(i.viewDirFragment)),this._iShadowMethodVO&&e.removeFragmentTempUsage(i.shadowTarget),s},e.prototype._pUsesTangentSpace=function(t){if(t.usesProbes)return!1;for(var e,i=this._iMethodVOs.length,s=0;i>s;++s)if(e=this._iMethodVOs[s],e.useMethod&&!e.method.iUsesTangentSpace())return!1;return!0},e.prototype._pOutputsTangentNormals=function(){return this._iNormalMethodVO.method.iOutputsTangentNormals()},e.prototype._pOutputsNormals=function(){return this._iNormalMethodVO&&this._iNormalMethodVO.useMethod},e.prototype._iGetNormalVertexCode=function(t,e,i){return this._iNormalMethodVO.method.iGetVertexCode(t,this._iNormalMethodVO,e,i)},e.prototype._iGetNormalFragmentCode=function(t,e,i){var s=this._iNormalMethodVO.method.iGetFragmentCode(t,this._iNormalMethodVO,i.normalFragment,e,i);return this._iNormalMethodVO.needsView&&e.removeFragmentTempUsage(i.viewDirFragment),(this._iNormalMethodVO.needsGlobalFragmentPos||this._iNormalMethodVO.needsGlobalVertexPos)&&e.removeVertexTempUsage(i.globalPositionVertex),s},e.prototype._iGetVertexCode=function(t,e,i){for(var s,r="",a=this._iMethodVOs.length,n=a-this._numEffectDependencies;a>n;n++)s=this._iMethodVOs[n],s.useMethod&&(r+=s.method.iGetVertexCode(t,s,e,i),(s.needsGlobalVertexPos||s.needsGlobalFragmentPos)&&e.removeVertexTempUsage(i.globalPositionVertex));return this._iColorTransformMethodVO&&this._iColorTransformMethodVO.useMethod&&(r+=this._iColorTransformMethodVO.method.iGetVertexCode(t,this._iColorTransformMethodVO,e,i)),r},e.prototype._iGetFragmentCode=function(t,e,i){var s,r="";this.preserveAlpha&&this._numEffectDependencies>0&&(s=e.getFreeFragmentSingleTemp(),e.addFragmentTempUsages(s,1),r+="mov "+s+", "+i.shadedTarget+".w\n");for(var a,n=this._iMethodVOs.length,o=n-this._numEffectDependencies;n>o;o++)a=this._iMethodVOs[o],a.useMethod&&(r+=a.method.iGetFragmentCode(t,a,i.shadedTarget,e,i),a.needsNormals&&e.removeFragmentTempUsage(i.normalFragment),a.needsView&&e.removeFragmentTempUsage(i.viewDirFragment));return this.preserveAlpha&&this._numEffectDependencies>0&&(r+="mov "+i.shadedTarget+".w, "+s+"\n",e.removeFragmentTempUsage(s)),this._iColorTransformMethodVO&&this._iColorTransformMethodVO.useMethod&&(r+=this._iColorTransformMethodVO.method.iGetFragmentCode(t,this._iColorTransformMethodVO,i.shadedTarget,e,i)),r},e.prototype._iUsesShadows=function(){return Boolean(this._iShadowMethodVO||this.lightPicker.castingDirectionalLights.length>0||this.lightPicker.castingPointLights.length>0)},e.prototype._iUsesSpecular=function(){return Boolean(this._iSpecularMethodVO)},e}(h);e.exports=p},{"awayjs-stagegl/lib/events/ShadingMethodEvent":void 0,"awayjs-stagegl/lib/materials/compilation/MethodVO":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderLightingObject":void 0,"awayjs-stagegl/lib/materials/compilation/ShaderObjectBase":void 0,"awayjs-stagegl/lib/materials/methods/EffectColorTransformMethod":void 0,"awayjs-stagegl/lib/materials/passes/MaterialPassBase":void 0,"awayjs-stagegl/lib/materials/passes/MaterialPassMode":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/utils/DefaultMaterialManager":[function(t,e){var i=t("awayjs-core/lib/base/BitmapData"),s=t("awayjs-core/lib/library/AssetType"),r=t("awayjs-core/lib/textures/BitmapTexture"),a=t("awayjs-stagegl/lib/materials/LineBasicMaterial"),n=t("awayjs-stagegl/lib/materials/TriangleBasicMaterial"),o=function(){function t(){}return t.getDefaultMaterial=function(e){return void 0===e&&(e=null),null!=e&&e.assetType==s.LINE_SUB_MESH?(t._defaultLineMaterial||t.createDefaultLineMaterial(),t._defaultLineMaterial):(t._defaultTriangleMaterial||t.createDefaultTriangleMaterial(),t._defaultTriangleMaterial)},t.getDefaultTexture=function(e){return void 0===e&&(e=null),t._defaultTexture||t.createDefaultTexture(),t._defaultTexture},t.createDefaultTexture=function(){t._defaultBitmapData=t.createCheckeredBitmapData(),t._defaultTexture=new r(t._defaultBitmapData,!0),t._defaultTexture.name="defaultTexture"},t.createCheckeredBitmapData=function(){var t,e,s=new i(8,8,!1,0);for(t=0;8>t;t++)for(e=0;8>e;e++)1&e^1&t&&s.setPixel(t,e,16777215);return s},t.createDefaultTriangleMaterial=function(){t._defaultTexture||t.createDefaultTexture(),t._defaultTriangleMaterial=new n(t._defaultTexture),t._defaultTriangleMaterial.mipmap=!1,t._defaultTriangleMaterial.smooth=!1,t._defaultTriangleMaterial.name="defaultTriangleMaterial"},t.createDefaultLineMaterial=function(){t._defaultLineMaterial=new a,t._defaultLineMaterial.name="defaultSegmentMaterial"},t}();e.exports=o},{"awayjs-core/lib/base/BitmapData":void 0,"awayjs-core/lib/library/AssetType":void 0,"awayjs-core/lib/textures/BitmapTexture":void 0,"awayjs-stagegl/lib/materials/LineBasicMaterial":void 0,"awayjs-stagegl/lib/materials/TriangleBasicMaterial":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/materials/utils/ShaderCompilerHelper":[function(t,e){var i=t("awayjs-stagegl/lib/base/ContextGLTextureFormat"),s=function(){function t(){}return t.getTex2DSampleCode=function(e,i,s,r,a,n,o,h,l){void 0===h&&(h=null),void 0===l&&(l=null);var p=l||(n?"wrap":"clamp"),d=t.getFormatStringForTexture(r),u=o&&r.hasMipmaps,c=a?u?"linear,miplinear":"linear":u?"nearest,mipnearest":"nearest";return null==h&&(h=i.uvVarying),"tex "+e+", "+h+", "+s+" <2d,"+c+","+d+p+">\n"},t.getTexCubeSampleCode=function(e,i,s,r,a,n){var o,h=t.getFormatStringForTexture(s),l=a&&s.hasMipmaps,o=r?l?"linear,miplinear":"linear":l?"nearest,mipnearest":"nearest";return"tex "+e+", "+n+", "+i+" <cube,"+h+o+">\n"},t.getFormatStringForTexture=function(t){switch(t.format){case i.COMPRESSED:return"dxt1,";case i.COMPRESSED_ALPHA:return"dxt5,";default:return""}},t}();e.exports=s},{"awayjs-stagegl/lib/base/ContextGLTextureFormat":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/BillboardRenderable":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/base/TriangleSubGeometry"),r=t("awayjs-stagegl/lib/pool/RenderableBase"),a=function(t){function e(e,i){t.call(this,e,i,i),this._billboard=i}return i(e,t),e.prototype._pGetSubGeometry=function(){var t=this._billboard.material,i=e._materialGeometry[t.id];return i?i.updatePositions(Array(0,t.height,0,t.width,t.height,0,t.width,0,0,0,0,0)):(i=e._materialGeometry[t.id]=new s(!0),i.autoDeriveNormals=!1,i.autoDeriveTangents=!1,i.updateIndices(Array(0,1,2,0,2,3)),i.updatePositions(Array(0,t.height,0,t.width,t.height,0,t.width,0,0,0,0,0)),i.updateVertexNormals(Array(1,0,0,1,0,0,1,0,0,1,0,0)),i.updateVertexTangents(Array(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),i.updateUVs(Array(0,0,1,0,1,1,0,1))),this._pVertexDataDirty[s.POSITION_DATA]=!0,this._pVertexDataDirty[s.NORMAL_DATA]=!0,this._pVertexDataDirty[s.TANGENT_DATA]=!0,this._pVertexDataDirty[s.UV_DATA]=!0,i},e._materialGeometry=new Object,e.id="billboard",e}(r);e.exports=a},{"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-stagegl/lib/pool/RenderableBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/IndexDataPool":[function(t,e){var i=t("awayjs-stagegl/lib/pool/IndexData"),s=function(){function t(){}return t.getItem=function(e,s,r){var a=t._pool[e.id]||(t._pool[e.id]=new Array),n=a[s]||(a[s]=new i(s));return n.updateData(r,e.indices,e.numVertices),n},t.disposeItem=function(t,e){var i=this._pool[t];i[e].dispose(),i[e]=null},t.prototype.disposeData=function(e){for(var i=t._pool[e],s=i.length,r=0;s>r;r++)i[r].dispose(),i[r]=null;t._pool[e]=null},t._pool=new Object,t}();e.exports=s},{"awayjs-stagegl/lib/pool/IndexData":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/IndexData":[function(t,e){var i=function(){function t(t){this._dataDirty=!0,this.invalid=new Array(8),this.contexts=new Array(8),this.buffers=new Array(8),this.level=t}return t.prototype.updateData=function(e,i,s){if(this._dataDirty)if(this._dataDirty=!1,i.length<t.LIMIT_INDICES&&s<t.LIMIT_VERTS)this.indexMappings=null,this.originalIndices=null,this.setData(i),this.offset=i.length;else{var r,a,n,o,h,l=new Array;for(this.indexMappings=new Array(i.length),this.originalIndices=new Array,r=this.indexMappings.length;r--;)this.indexMappings[r]=-1;var p,d;for(n=0,a=i.length,r=e,h=0;a>r&&n+3<t.LIMIT_INDICES&&h+3<t.LIMIT_VERTS;){for(o=0;3>o;o++)p=i[r+o],this.indexMappings[p]>=0?d=this.indexMappings[p]:(d=h++,this.indexMappings[p]=d,this.originalIndices.push(p)),l[n+o]=d;n+=3,r+=3}this.setData(l),this.offset=r}},t.prototype.invalidateData=function(){this._dataDirty=!0},t.prototype.dispose=function(){for(var t=0;8>t;++t)this.contexts[t]&&(this.contexts[t].disposeIndexData(this),this.contexts[t]=null)},t.prototype.disposeBuffers=function(){for(var t=0;8>t;++t)this.buffers[t]&&(this.buffers[t].dispose(),this.buffers[t]=null)},t.prototype.invalidateBuffers=function(){for(var t=0;8>t;++t)this.invalid[t]=!0},t.prototype.setData=function(t){this.data&&this.data.length!=t.length?this.disposeBuffers():this.invalidateBuffers(),this.data=t},t.LIMIT_VERTS=65535,t.LIMIT_INDICES=16777215,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/LineSubMeshRenderable":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/base/LineSubGeometry"),r=t("awayjs-stagegl/lib/pool/RenderableBase"),a=function(t){function e(e,i,s,r){void 0===s&&(s=0),void 0===r&&(r=0),t.call(this,e,i.parentMesh,i,s,r),this.subMesh=i}return i(e,t),e.prototype._pGetSubGeometry=function(){var t=this.subMesh.subGeometry;return this._pVertexDataDirty[s.START_POSITION_DATA]=!0,this._pVertexDataDirty[s.END_POSITION_DATA]=!0,t.thickness&&(this._pVertexDataDirty[s.THICKNESS_DATA]=!0),t.startColors&&(this._pVertexDataDirty[s.COLOR_DATA]=!0),t},e.prototype._pGetOverflowRenderable=function(t,i,s,r){return new e(t,i,s,r)},e.id="linesubmesh",e}(r);e.exports=a},{"awayjs-display/lib/base/LineSubGeometry":void 0,"awayjs-stagegl/lib/pool/RenderableBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/MaterialDataPool":[function(t,e){var i=t("awayjs-stagegl/lib/pool/MaterialData"),s=function(){function t(t){this._pool=new Object,this._context=t}return t.prototype.getItem=function(t){return this._pool[t.id]||(this._pool[t.id]=t._iAddMaterialData(new i(this,this._context,t)))},t.prototype.disposeItem=function(t){t._iRemoveMaterialData(this._pool[t.id]),this._pool[t.id]=null},t}();e.exports=s},{"awayjs-stagegl/lib/pool/MaterialData":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/MaterialData":[function(t,e){var i=t("awayjs-stagegl/lib/pool/MaterialPassDataPool"),s=function(){function t(t,e,s){this.invalidAnimation=!0,this._pool=t,this.context=e,this.material=s,this._materialPassDataPool=new i(s)}return t.prototype.getMaterialPass=function(t,e){var i=this._materialPassDataPool.getItem(t);if(i.shaderObject||(i.shaderObject=t.createShaderObject(e),i.invalid=!0),i.invalid){i.invalid=!1;var s=i.shaderObject.createCompiler(this.material,t);s.compile(),i.shadedTarget=s.shadedTarget,i.vertexCode=s.vertexCode,i.fragmentCode=s.fragmentCode,i.postAnimationFragmentCode=s.postAnimationFragmentCode,i.key=""}return i},t.prototype.getMaterialPasses=function(t){if(null==this._passes){var e=this.material._iScreenPasses,i=e.length;this._passes=new Array(i);for(var s=0;i>s;s++)this._passes[s]=this.getMaterialPass(e[s],t)}return this._passes},t.prototype.dispose=function(){this._materialPassDataPool.disposePool(),this._materialPassDataPool=null,this._pool.disposeItem(this.material),this._passes=null},t.prototype.invalidateMaterial=function(){this._passes=null,this.invalidateAnimation()},t.prototype.invalidateAnimation=function(){this.invalidAnimation=!0},t}();e.exports=s},{"awayjs-stagegl/lib/pool/MaterialPassDataPool":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/MaterialPassDataPool":[function(t,e){var i=t("awayjs-stagegl/lib/pool/MaterialPassData"),s=function(){function t(t){this._pool=new Object,this._material=t}return t.prototype.getItem=function(t){return this._pool[t.id]||(this._pool[t.id]=this._material._iAddMaterialPassData(t._iAddMaterialPassData(new i(this,this._material,t))))},t.prototype.disposeItem=function(t){t._iRemoveMaterialPassData(this._pool[t.id]),delete this._pool[t.id]},t.prototype.disposePool=function(){for(var t in this._pool)this._pool[t].materialPass._iRemoveMaterialPassData(this._pool[t]);delete this._pool},t}();e.exports=s},{"awayjs-stagegl/lib/pool/MaterialPassData":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/MaterialPassData":[function(t,e){var i=function(){function t(t,e,i){this.animationVertexCode="",this.animationFragmentCode="",this._pool=t,this.material=e,this.materialPass=i}return t.prototype.dispose=function(){this._pool.disposeItem(this.materialPass),this.shaderObject.dispose(),this.shaderObject=null,this.programData.dispose(),this.programData=null},t.prototype.invalidate=function(){this.invalid=!0},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/ProgramDataPool":[function(t,e){var i=t("awayjs-stagegl/lib/pool/ProgramData"),s=function(){function t(t){this._pool=new Object,this._context=t}return t.prototype.getItem=function(t){return this._pool[t]||(this._pool[t]=new i(this,this._context,t))},t.prototype.disposeItem=function(t){this._pool[t]=null},t}();e.exports=s},{"awayjs-stagegl/lib/pool/ProgramData":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/ProgramData":[function(t,e){var i=function(){function t(t,e,i){this.usages=0,this._pool=t,this.context=e,this._key=i,this.context.registerProgram(this)}return t.prototype.dispose=function(){this.usages--,this.usages||(this._pool.disposeItem(this._key),this.context.unRegisterProgram(this),this.program&&this.program.dispose()),this.program=null},t.PROGRAMDATA_ID_COUNT=0,t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/RenderableBase":[function(t,e){var i=t("awayjs-core/lib/errors/AbstractMethodError"),s=t("awayjs-display/lib/base/SubGeometryBase"),r=t("awayjs-display/lib/base/TriangleSubGeometry"),a=t("awayjs-display/lib/events/SubGeometryEvent"),n=t("awayjs-stagegl/lib/pool/IndexDataPool"),o=t("awayjs-stagegl/lib/pool/VertexDataPool"),h=function(){function t(t,e,i,s,r){var a=this;void 0===s&&(s=0),void 0===r&&(r=0),this._geometryDirty=!0,this._indexDataDirty=!0,this._vertexData=new Object,this._pVertexDataDirty=new Object,this._vertexOffset=new Object,this._onIndicesUpdatedDelegate=function(t){return a._onIndicesUpdated(t)},this._onVerticesUpdatedDelegate=function(t){return a._onVerticesUpdated(t)},this._pool=t,this._level=s,this._indexOffset=r,this.sourceEntity=e,this.materialOwner=i}return Object.defineProperty(t.prototype,"overflow",{get:function(){return this._indexDataDirty&&this._updateIndexData(),this._overflow},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numTriangles",{get:function(){return this._numTriangles},enumerable:!0,configurable:!0}),t.prototype.getIndexData=function(){return this._indexDataDirty&&this._updateIndexData(),this._indexData},t.prototype.getVertexData=function(t){return this._indexDataDirty&&this._updateIndexData(),this._pVertexDataDirty[t]&&this._updateVertexData(t),this._vertexData[this._concatenateArrays?r.VERTEX_DATA:t]},t.prototype.getVertexOffset=function(t){return this._indexDataDirty&&this._updateIndexData(),this._pVertexDataDirty[t]&&this._updateVertexData(t),this._vertexOffset[t]},t.prototype.dispose=function(){this._pool.disposeItem(this.materialOwner),this._indexData.dispose(),this._indexData=null;for(var t in this._vertexData)this._vertexData[t].dispose(),this._vertexData[t]=null;this._overflow&&(this._overflow.dispose(),this._overflow=null)},t.prototype.invalidateGeometry=function(){this._geometryDirty=!0,0==this._level&&(this._indexDataDirty=!0),this._overflow&&this._overflow.invalidateGeometry()},t.prototype.invalidateIndexData=function(){this._indexDataDirty=!0},t.prototype.invalidateVertexData=function(t){this._pVertexDataDirty[t]=!0},t.prototype._pGetSubGeometry=function(){throw new i},t.prototype._iFillIndexData=function(t){this._geometryDirty&&this._updateGeometry(),this._indexData=n.getItem(this._subGeometry,this._level,t),this._numTriangles=this._indexData.data.length/3,t=this._indexData.offset,t<this._subGeometry.indices.length?(this._overflow||(this._overflow=this._pGetOverflowRenderable(this._pool,this.materialOwner,t,this._level+1)),this._overflow._iFillIndexData(t)):this._overflow&&(this._overflow.dispose(),this._overflow=null)},t.prototype._pGetOverflowRenderable=function(){throw new i},t.prototype._updateGeometry=function(){this._subGeometry&&(0==this._level&&this._subGeometry.removeEventListener(a.INDICES_UPDATED,this._onIndicesUpdatedDelegate),this._subGeometry.removeEventListener(a.VERTICES_UPDATED,this._onVerticesUpdatedDelegate)),this._subGeometry=this._pGetSubGeometry(),this._concatenateArrays=this._subGeometry.concatenateArrays,this._subGeometry&&(0==this._level&&this._subGeometry.addEventListener(a.INDICES_UPDATED,this._onIndicesUpdatedDelegate),this._subGeometry.addEventListener(a.VERTICES_UPDATED,this._onVerticesUpdatedDelegate)),this._geometryDirty=!1},t.prototype._updateIndexData=function(){this._iFillIndexData(this._indexOffset),this._indexDataDirty=!1},t.prototype._updateVertexData=function(t){this._vertexOffset[t]=this._subGeometry.getOffset(t),this._subGeometry.concatenateArrays&&(t=s.VERTEX_DATA),this._vertexData[t]=o.getItem(this._subGeometry,this.getIndexData(),t),this._pVertexDataDirty[t]=!1},t.prototype._onIndicesUpdated=function(){this.invalidateIndexData()},t.prototype._onVerticesUpdated=function(t){this._concatenateArrays=t.target.concatenateArrays,this.invalidateVertexData(t.dataType)},t}();e.exports=h},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-display/lib/base/SubGeometryBase":void 0,"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-display/lib/events/SubGeometryEvent":void 0,"awayjs-stagegl/lib/pool/IndexDataPool":void 0,"awayjs-stagegl/lib/pool/VertexDataPool":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/SkyboxRenderable":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i
},s=t("awayjs-display/lib/base/TriangleSubGeometry"),r=t("awayjs-stagegl/lib/pool/RenderableBase"),a=function(t){function e(e,i){t.call(this,e,i,i)}return i(e,t),e.prototype._pGetSubGeometry=function(){var t=e._geometry;return t||(t=e._geometry=new s(!0),t.autoDeriveNormals=!1,t.autoDeriveTangents=!1,t.updateIndices(Array(0,1,2,2,3,0,6,5,4,4,7,6,2,6,7,7,3,2,4,5,1,1,0,4,4,0,3,3,7,4,2,1,5,5,6,2)),t.updatePositions(Array(-1,1,-1,1,1,-1,1,1,1,-1,1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1))),this._pVertexDataDirty[s.POSITION_DATA]=!0,t},e.id="skybox",e}(r);e.exports=a},{"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-stagegl/lib/pool/RenderableBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/TextureDataPool":[function(t,e){var i=t("awayjs-stagegl/lib/pool/TextureData"),s=function(){function t(t){this._pool=new Object,this._context=t}return t.prototype.getItem=function(t){return this._pool[t.id]||(this._pool[t.id]=t._iAddTextureData(new i(this,this._context,t)))},t.prototype.disposeItem=function(t){t._iRemoveTextureData(this._pool[t.id]),this._pool[t.id]=null},t}();e.exports=s},{"awayjs-stagegl/lib/pool/TextureData":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/TextureData":[function(t,e){var i=function(){function t(t,e,i){this._pool=t,this.context=e,this.textureProxy=i}return t.prototype.dispose=function(){this._pool.disposeItem(this.textureProxy),this.texture.dispose(),this.texture=null},t.prototype.invalidate=function(){this.invalid=!0},t}();e.exports=i},{}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/TriangleSubMeshRenderable":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-display/lib/base/TriangleSubGeometry"),r=t("awayjs-stagegl/lib/pool/RenderableBase"),a=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),n=function(t){function e(e,i,s,r){void 0===s&&(s=0),void 0===r&&(r=0),t.call(this,e,i.parentMesh,i,s,r),this.subMesh=i}return i(e,t),e.prototype._pGetSubGeometry=function(){var t;switch(t=this.subMesh.animator?this.subMesh.animator.getRenderableSubGeometry(this,this.subMesh.subGeometry):this.subMesh.subGeometry,this._pVertexDataDirty[s.POSITION_DATA]=!0,t.vertexNormals&&(this._pVertexDataDirty[s.NORMAL_DATA]=!0),t.vertexTangents&&(this._pVertexDataDirty[s.TANGENT_DATA]=!0),t.uvs&&(this._pVertexDataDirty[s.UV_DATA]=!0),t.secondaryUVs&&(this._pVertexDataDirty[s.SECONDARY_UV_DATA]=!0),t.jointIndices&&(this._pVertexDataDirty[s.JOINT_INDEX_DATA]=!0),t.jointWeights&&(this._pVertexDataDirty[s.JOINT_WEIGHT_DATA]=!0),t.jointsPerVertex){case 1:this.JOINT_INDEX_FORMAT=this.JOINT_WEIGHT_FORMAT=a.FLOAT_1;break;case 2:this.JOINT_INDEX_FORMAT=this.JOINT_WEIGHT_FORMAT=a.FLOAT_2;break;case 3:this.JOINT_INDEX_FORMAT=this.JOINT_WEIGHT_FORMAT=a.FLOAT_3;break;case 4:this.JOINT_INDEX_FORMAT=this.JOINT_WEIGHT_FORMAT=a.FLOAT_4}return t},e.prototype._pGetOverflowRenderable=function(t,i,s,r){return new e(t,i,s,r)},e.id="trianglesubmesh",e}(r);e.exports=n},{"awayjs-display/lib/base/TriangleSubGeometry":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0,"awayjs-stagegl/lib/pool/RenderableBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/VertexDataPool":[function(t,e){var i=t("awayjs-display/lib/base/SubGeometryBase"),s=t("awayjs-stagegl/lib/pool/VertexData"),r=function(){function t(){}return t.getItem=function(e,r,a){e.concatenateArrays&&(a=i.VERTEX_DATA);var n=t._pool[e.id]||(t._pool[e.id]=new Object),o=n[a]||(n[a]=new Array),h=o[r.level]||(o[r.level]=new s(e,a));return h.updateData(r.originalIndices,r.indexMappings),h},t.disposeItem=function(e,i,s){var r=t._pool[e.id],a=r[s];a[i].dispose(),a[i]=null},t.prototype.disposeData=function(e){var i=t._pool[e.id];for(var s in i)for(var r=i[s],a=r.length,n=0;a>n;n++)r[n].dispose(),r[n]=null;t._pool[e.id]=null},t._pool=new Object,t}();e.exports=r},{"awayjs-display/lib/base/SubGeometryBase":void 0,"awayjs-stagegl/lib/pool/VertexData":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/pool/VertexData":[function(t,e){var i=t("awayjs-display/lib/base/SubGeometryBase"),s=t("awayjs-display/lib/events/SubGeometryEvent"),r=function(){function t(t,e){var i=this;this._dataDirty=!0,this.invalid=new Array(8),this.buffers=new Array(8),this.contexts=new Array(8),this._subGeometry=t,this._dataType=e,this._onVerticesUpdatedDelegate=function(t){return i._onVerticesUpdated(t)},this._subGeometry.addEventListener(s.VERTICES_UPDATED,this._onVerticesUpdatedDelegate)}return t.prototype.updateData=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this._dataDirty){this._dataDirty=!1,this.dataPerVertex=this._subGeometry.getStride(this._dataType);var i=this._subGeometry[this._dataType];if(null==e)this.setData(i);else{for(var s,r,a=new Array(t.length*this.dataPerVertex),n=0,o=0;n<t.length;){for(s=t[n],r=e[s]*this.dataPerVertex,s*=this.dataPerVertex,o=0;o<this.dataPerVertex;o++)a[r+o]=i[s+o];n++}this.setData(a)}}},t.prototype.dispose=function(){for(var t=0;8>t;++t)this.contexts[t]&&(this.contexts[t].disposeVertexData(this),this.contexts[t]=null)},t.prototype.disposeBuffers=function(){for(var t=0;8>t;++t)this.buffers[t]&&(this.buffers[t].dispose(),this.buffers[t]=null)},t.prototype.invalidateBuffers=function(){for(var t=0;8>t;++t)this.invalid[t]=!0},t.prototype.setData=function(t){this.data&&this.data.length!=t.length?this.disposeBuffers():this.invalidateBuffers(),this.data=t},t.prototype._onVerticesUpdated=function(t){var e=this._subGeometry.concatenateArrays?i.VERTEX_DATA:t.dataType;e==this._dataType&&(this._dataDirty=!0)},t}();e.exports=r},{"awayjs-display/lib/base/SubGeometryBase":void 0,"awayjs-display/lib/events/SubGeometryEvent":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/render/DefaultRenderer":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),r=t("awayjs-core/lib/geom/Vector3D"),a=t("awayjs-core/lib/textures/RenderTexture"),n=t("awayjs-display/lib/pool/RenderablePool"),o=t("awayjs-stagegl/lib/pool/SkyboxRenderable"),h=t("awayjs-stagegl/lib/render/DepthRenderer"),l=t("awayjs-stagegl/lib/render/Filter3DRenderer"),p=t("awayjs-stagegl/lib/render/RendererBase"),d=t("awayjs-stagegl/lib/base/ContextGLBlendFactor"),u=t("awayjs-stagegl/lib/base/ContextGLCompareMode"),c=t("awayjs-stagegl/lib/base/ContextGLClearMask"),_=t("awayjs-stagegl/lib/managers/RTTBufferManager"),y=t("awayjs-stagegl/lib/managers/StageManager"),g=t("awayjs-stagegl/lib/materials/passes/DepthMapPass"),f=t("awayjs-stagegl/lib/materials/passes/DistanceMapPass"),m=function(t){function e(e,i,r){void 0===e&&(e=!1),void 0===i&&(i="baseline"),void 0===r&&(r="auto"),t.call(this),this._skyboxProjection=new s,this._skyboxRenderablePool=n.getPool(o),this._pDepthRenderer=new h(new g),this._pDistanceRenderer=new h(new f),null==this._pStage&&(this.stage=y.getInstance().getFreeStage(e,i,r)),this._pRttBufferManager=_.getInstance(this._pStage),0==this._width?this.width=window.innerWidth:this._pRttBufferManager.viewWidth=this._width,0==this._height?this.height=window.innerHeight:this._pRttBufferManager.viewHeight=this._height}return i(e,t),Object.defineProperty(e.prototype,"antiAlias",{get:function(){return this._antiAlias},set:function(t){this._antiAlias!=t&&(this._antiAlias=t,this._pBackBufferInvalid=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthPrepass",{get:function(){return this._depthPrepass},set:function(t){this._depthPrepass=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters3d",{get:function(){return this._pFilter3DRenderer?this._pFilter3DRenderer.filters:null},set:function(t){t&&0==t.length&&(t=null),this._pFilter3DRenderer&&!t?(this._pFilter3DRenderer.dispose(),this._pFilter3DRenderer=null):!this._pFilter3DRenderer&&t&&(this._pFilter3DRenderer=new l(this._pStage),this._pFilter3DRenderer.filters=t),this._pFilter3DRenderer?(this._pFilter3DRenderer.filters=t,this._pRequireDepthRender=this._pFilter3DRenderer.requireDepthRender):(this._pRequireDepthRender=!1,this._pDepthRender&&(this._pDepthRender.dispose(),this._pDepthRender=null))},enumerable:!0,configurable:!0}),e.prototype.render=function(e){return t.prototype.render.call(this,e),this._pStage.recoverFromDisposal()?(this._pBackBufferInvalid&&this.pUpdateBackBuffer(),this._shareContext&&this._pContext&&this._pContext.clear(0,0,0,1,1,0,c.DEPTH),this._pFilter3DRenderer?(this.textureRatioX=this._pRttBufferManager.textureRatioX,this.textureRatioY=this._pRttBufferManager.textureRatioY):(this.textureRatioX=1,this.textureRatioY=1),this._pRequireDepthRender&&this.pRenderSceneDepthToTexture(e),this._depthPrepass&&this.pRenderDepthPrepass(e),this._pFilter3DRenderer&&this._pContext||(this._shareContext?this._iRender(e,null,this._pScissorRect):this._iRender(e)),t.prototype.render.call(this,e),!this._shareContext&&this._pContext&&this._pContext.present(),void(this._pStage.bufferClear=!1)):void(this._pBackBufferInvalid=!0)},e.prototype.pExecuteRender=function(e,i,s,r){void 0===i&&(i=null),void 0===s&&(s=null),void 0===r&&(r=0),this.updateLights(e),i&&(this.pCollectRenderables(e),this.drawRenderables(this._pOpaqueRenderableHead,e),this.drawRenderables(this._pBlendedRenderableHead,e)),t.prototype.pExecuteRender.call(this,e,i,s,r)},e.prototype.updateLights=function(t){var e,i,s,r,a=t.directionalLights,n=t.pointLights;for(e=a.length,i=0;e>i;++i)s=a[i],r=s.shadowMapper,s.castsShadows&&(r.autoUpdateShadows||r._iShadowsInvalid)&&r.iRenderDepthMap(t,this._pDepthRenderer);for(e=n.length,i=0;e>i;++i)s=n[i],r=s.shadowMapper,s.castsShadows&&(r.autoUpdateShadows||r._iShadowsInvalid)&&r.iRenderDepthMap(t,this._pDistanceRenderer)},e.prototype.pDraw=function(t,e){e||this.pCollectRenderables(t),this._pContext.setBlendFactors(d.ONE,d.ZERO),t.skyBox&&(this._pContext.setDepthTest(!1,u.ALWAYS),this.drawSkybox(t)),this._pContext.setDepthTest(!0,u.LESS_EQUAL),this.drawRenderables(this._pOpaqueRenderableHead,t),this.drawRenderables(this._pBlendedRenderableHead,t)},e.prototype.drawSkybox=function(t){var e=this._skyboxRenderablePool.getItem(t.skyBox),i=t.skyBox.material,s=t.camera;this.updateSkyboxProjection(s);var r=this._pStage.context.getMaterial(i,this._pStage.profile).getMaterialPass(i._iScreenPasses[0],this._pStage.profile);i._iActivatePass(r,this._pStage,s),i._iRenderPass(r,e,this._pStage,s,this._skyboxProjection),i._iDeactivatePass(r,this._pStage)},e.prototype.updateSkyboxProjection=function(t){var e=new r;this._skyboxProjection.copyFrom(this._pRttViewProjectionMatrix),this._skyboxProjection.copyRowTo(2,e);var i=t.scenePosition,s=e.x,a=e.y,n=e.z,o=-(e.x*i.x+e.y*i.y+e.z*i.z+Math.sqrt(s*s+a*a+n*n)),h=s>=0?1:-1,l=a>=0?1:-1,p=new r(h,l,1,1),d=this._skyboxProjection.clone();d.invert();var u=d.transformVector(p);this._skyboxProjection.copyRowTo(3,p);var c=(u.x*p.x+u.y*p.y+u.z*p.z+u.w*p.w)/(s*u.x+a*u.y+n*u.z+o*u.w);this._skyboxProjection.copyRowFrom(2,new r(s*c,a*c,n*c,o*c))},e.prototype.drawRenderables=function(t,e){for(var i,s,r,a,n,o,h=this._pStage.context,l=e.camera;t;){for(n=h.getMaterial(t.material,this._pStage.profile),r=t.material._iScreenPasses,s=t.material._iNumScreenPasses(),i=0;s>i;i++){o=t,a=n.getMaterialPass(r[i],this._pStage.profile),t.material._iActivatePass(a,this._pStage,l);do t.material._iRenderPass(a,o,this._pStage,l,this._pRttViewProjectionMatrix),o=o.next;while(o&&o.material==t.material);n.material._iDeactivatePass(a,this._pStage)}t=o}},e.prototype.dispose=function(){this._shareContext||this._pStage.dispose(),this._pDepthRenderer.dispose(),this._pDistanceRenderer.dispose(),this._pDepthRenderer=null,this._pDistanceRenderer=null,this._pDepthRender=null,t.prototype.dispose.call(this)},e.prototype.pRenderDepthPrepass=function(t){this._pDepthRenderer.disableColor=!0,this._pFilter3DRenderer||(this._pDepthRenderer.textureRatioX=1,this._pDepthRenderer.textureRatioY=1,this._pDepthRenderer._iRender(t)),this._pDepthRenderer.disableColor=!1},e.prototype.pRenderSceneDepthToTexture=function(t){(this._pDepthTextureInvalid||!this._pDepthRender)&&this.initDepthTexture(this._pStage.context),this._pDepthRenderer.textureRatioX=this._pRttBufferManager.textureRatioX,this._pDepthRenderer.textureRatioY=this._pRttBufferManager.textureRatioY,this._pDepthRenderer._iRender(t,this._pDepthRender)},e.prototype.pUpdateBackBuffer=function(){this._pStage.context&&!this._shareContext&&this._width&&this._height&&(this._pStage.configureBackBuffer(this._width,this._height,this._antiAlias,!0),this._pBackBufferInvalid=!1)},e.prototype.iSetStage=function(e){t.prototype.iSetStage.call(this,e),this._pDistanceRenderer.iSetStage(e),this._pDepthRenderer.iSetStage(e)},e.prototype.initDepthTexture=function(){this._pDepthTextureInvalid=!1,this._pDepthRender&&this._pDepthRender.dispose(),this._pDepthRender=new a(this._pRttBufferManager.textureWidth,this._pRttBufferManager.textureHeight)},e}(p);e.exports=m},{"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Vector3D":void 0,"awayjs-core/lib/textures/RenderTexture":void 0,"awayjs-display/lib/pool/RenderablePool":void 0,"awayjs-stagegl/lib/base/ContextGLBlendFactor":void 0,"awayjs-stagegl/lib/base/ContextGLClearMask":void 0,"awayjs-stagegl/lib/base/ContextGLCompareMode":void 0,"awayjs-stagegl/lib/managers/RTTBufferManager":void 0,"awayjs-stagegl/lib/managers/StageManager":void 0,"awayjs-stagegl/lib/materials/passes/DepthMapPass":void 0,"awayjs-stagegl/lib/materials/passes/DistanceMapPass":void 0,"awayjs-stagegl/lib/pool/SkyboxRenderable":void 0,"awayjs-stagegl/lib/render/DepthRenderer":void 0,"awayjs-stagegl/lib/render/Filter3DRenderer":void 0,"awayjs-stagegl/lib/render/RendererBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/render/DepthRenderer":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-stagegl/lib/render/RendererBase"),r=t("awayjs-stagegl/lib/base/ContextGLBlendFactor"),a=t("awayjs-stagegl/lib/base/ContextGLCompareMode"),n=function(t){function e(e,i){void 0===i&&(i=!1),t.call(this),this._pass=e,this._renderBlended=i,this._iBackgroundR=1,this._iBackgroundG=1,this._iBackgroundB=1}return i(e,t),Object.defineProperty(e.prototype,"disableColor",{get:function(){return this._disableColor},set:function(t){this._disableColor=t},enumerable:!0,configurable:!0}),e.prototype._iRenderCascades=function(t,e,i,s,n){this.pCollectRenderables(t),this._pContext.setRenderTarget(e,!0,0),this._pContext.clear(1,1,1,1,1,0),this._pContext.setBlendFactors(r.ONE,r.ZERO),this._pContext.setDepthTest(!0,a.LESS);for(var o=this._pOpaqueRenderableHead,h=!0,l=i-1;l>=0;--l)this._pStage.scissorRect=s[l],this.drawCascadeRenderables(o,n[l],h?null:n[l].frustumPlanes),h=!1;this._pContext.setDepthTest(!1,a.LESS_EQUAL),this._pStage.scissorRect=null},e.prototype.drawCascadeRenderables=function(t,e,i){for(var s,r,a,n=this._pStage.context;t;){r=n.getMaterial(t.material,this._pStage.profile),a=t,s=r.getMaterialPass(this._pass,this._pStage.profile),""==s.key&&this._pContext.calcAnimationCode(t.material,s),t.material._iActivatePass(s,this._pStage,e);do!i||a.sourceEntity.worldBounds.isInFrustum(i,4)?a.material._iRenderPass(s,a,this._pStage,e,this._pRttViewProjectionMatrix):a.cascaded=!0,a=a.next;while(a&&a.material==t.material&&!a.cascaded);t.material._iDeactivatePass(s,this._pStage),t=a}},e.prototype.pDraw=function(t){this.pCollectRenderables(t),this._pContext.setBlendFactors(r.ONE,r.ZERO),this._pContext.setDepthTest(!0,a.LESS),this.drawRenderables(this._pOpaqueRenderableHead,t),this._disableColor&&this._pContext.setColorMask(!1,!1,!1,!1),this._renderBlended&&this.drawRenderables(this._pBlendedRenderableHead,t),this._disableColor&&this._pContext.setColorMask(!0,!0,!0,!0)},e.prototype.drawRenderables=function(t,e){for(var i,s,r,a=this._pStage.context,n=e.camera;t;){if(s=a.getMaterial(t.material,this._pStage.profile),this._disableColor&&0!=t.material.alphaThreshold){r=t;do r=r.next;while(r&&r.material==t.material)}else{r=t,i=s.getMaterialPass(this._pass,this._pStage.profile),""==i.key&&this._pContext.calcAnimationCode(t.material,i),t.material._iActivatePass(i,this._pStage,n);do r.material._iRenderPass(i,r,this._pStage,n,this._pRttViewProjectionMatrix),r=r.next;while(r&&r.material==t.material);t.material._iDeactivatePass(i,this._pStage)}t=r}},e}(s);e.exports=n},{"awayjs-stagegl/lib/base/ContextGLBlendFactor":void 0,"awayjs-stagegl/lib/base/ContextGLCompareMode":void 0,"awayjs-stagegl/lib/render/RendererBase":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/render/Filter3DRenderer":[function(t,e){var i=t("awayjs-core/lib/events/Event"),s=t("awayjs-stagegl/lib/base/ContextGLBlendFactor"),r=t("awayjs-stagegl/lib/base/ContextGLVertexBufferFormat"),a=t("awayjs-stagegl/lib/managers/RTTBufferManager"),n=function(){function t(t){var e=this;this._filterSizesInvalid=!0,this._onRTTResizeDelegate=function(t){return e.onRTTResize(t)},this._stage=t,this._rttManager=a.getInstance(t),this._rttManager.addEventListener(i.RESIZE,this._onRTTResizeDelegate)}return t.prototype.onRTTResize=function(){this._filterSizesInvalid=!0},Object.defineProperty(t.prototype,"requireDepthRender",{get:function(){return this._requireDepthRender},enumerable:!0,configurable:!0}),t.prototype.getMainInputTexture=function(t){return this._filterTasksInvalid&&this.updateFilterTasks(t),this._mainInputTexture},Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},set:function(t){if(this._filters=t,this._filterTasksInvalid=!0,this._requireDepthRender=!1,this._filters){for(var e=0;e<this._filters.length;++e){var i=this._filters[e],s=null==i.requireDepthRender?!1:i.requireDepthRender;this._requireDepthRender=this._requireDepthRender||s}this._filterSizesInvalid=!0}},enumerable:!0,configurable:!0}),t.prototype.updateFilterTasks=function(t){var e;if(this._filterSizesInvalid&&this.updateFilterSizes(),!this._filters)return void(this._tasks=null);this._tasks=new Array,e=this._filters.length-1;for(var i,s=0;e>=s;++s)i=this._filters[s],i.setRenderTargets(s==e?null:this._filters[s+1].getMainInputTexture(t),t),this._tasks=this._tasks.concat(i.tasks);this._mainInputTexture=this._filters[0].getMainInputTexture(t)},t.prototype.render=function(t,e,i){var a,n,o,h=t.context,l=this._rttManager.indexBuffer,p=this._rttManager.renderToTextureVertexBuffer;if(this._filters){for(this._filterSizesInvalid&&this.updateFilterSizes(),this._filterTasksInvalid&&this.updateFilterTasks(t),a=this._filters.length,n=0;a>n;++n)this._filters[n].update(t,e);for(a=this._tasks.length,a>1&&(h.setVertexBufferAt(0,p,0,r.FLOAT_2),h.setVertexBufferAt(1,p,2,r.FLOAT_2)),n=0;a>n;++n)o=this._tasks[n],o.target||(t.scissorRect=null,p=this._rttManager.renderToScreenVertexBuffer,h.setVertexBufferAt(0,p,0,r.FLOAT_2),h.setVertexBufferAt(1,p,2,r.FLOAT_2)),h.setTextureAt(0,o.getMainInputTexture(t)),h.setProgram(o.getProgram(t)),h.clear(0,0,0,0),o.activate(t,e,i),h.setBlendFactors(s.ONE,s.ZERO),h.drawTriangles(l,0,2),o.deactivate(t);h.setTextureAt(0,null),h.setVertexBufferAt(0,null),h.setVertexBufferAt(1,null)}},t.prototype.updateFilterSizes=function(){for(var t=0;t<this._filters.length;++t)this._filters[t].textureWidth=this._rttManager.textureWidth,this._filters[t].textureHeight=this._rttManager.textureHeight;this._filterSizesInvalid=!0},t.prototype.dispose=function(){this._rttManager.removeEventListener(i.RESIZE,this._onRTTResizeDelegate),this._rttManager=null,this._stage=null},t}();e.exports=n},{"awayjs-core/lib/events/Event":void 0,"awayjs-stagegl/lib/base/ContextGLBlendFactor":void 0,"awayjs-stagegl/lib/base/ContextGLVertexBufferFormat":void 0,"awayjs-stagegl/lib/managers/RTTBufferManager":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/render/RendererBase":[function(t,e){var i=this.__extends||function(t,e){function i(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);i.prototype=e.prototype,t.prototype=new i},s=t("awayjs-core/lib/geom/Matrix3D"),r=t("awayjs-core/lib/geom/Point"),a=t("awayjs-core/lib/geom/Rectangle"),n=t("awayjs-core/lib/errors/AbstractMethodError"),o=t("awayjs-core/lib/events/EventDispatcher"),h=t("awayjs-display/lib/pool/RenderablePool"),l=t("awayjs-display/lib/sort/RenderableMergeSort"),p=t("awayjs-display/lib/events/RendererEvent"),d=t("awayjs-display/lib/events/StageEvent"),u=t("awayjs-display/lib/traverse/EntityCollector"),c=t("awayjs-stagegl/lib/pool/BillboardRenderable"),_=t("awayjs-stagegl/lib/pool/LineSubMeshRenderable"),y=t("awayjs-stagegl/lib/pool/TriangleSubMeshRenderable"),g=t("awayjs-stagegl/lib/base/ContextGLCompareMode"),f=t("awayjs-stagegl/lib/materials/utils/DefaultMaterialManager"),m=function(t){function e(){var e=this;t.call(this),this._viewPort=new a,this._pBackBufferInvalid=!0,this._pDepthTextureInvalid=!0,this._depthPrepass=!1,this._backgroundR=0,this._backgroundG=0,this._backgroundB=0,this._backgroundAlpha=1,this._shareContext=!1,this.textureRatioX=1,this.textureRatioY=1,this._pRttViewProjectionMatrix=new s,this._localPos=new r,this._globalPos=new r,this._pScissorRect=new a,this._pNumTriangles=0,this._onViewportUpdatedDelegate=function(t){return e.onViewportUpdated(t)},this._billboardRenderablePool=h.getPool(c),this._triangleSubMeshRenderablePool=h.getPool(y),this._lineSubMeshRenderablePool=h.getPool(_),this._onContextUpdateDelegate=function(t){return e.onContextUpdate(t)},this.renderableSorter=new l}return i(e,t),Object.defineProperty(e.prototype,"numTriangles",{get:function(){return this._pNumTriangles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewPort",{get:function(){return this._viewPort},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scissorRect",{get:function(){return this._pScissorRect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._localPos.x},set:function(t){this.x!=t&&(this._globalPos.x=this._localPos.x=t,this.updateGlobalPos())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._localPos.y},set:function(t){this.y!=t&&(this._globalPos.y=this._localPos.y=t,this.updateGlobalPos())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width!=t&&(this._width=t,this._pScissorRect.width=t,this._pRttBufferManager&&(this._pRttBufferManager.viewWidth=t),this._pBackBufferInvalid=!0,this._pDepthTextureInvalid=!0,this.notifyScissorUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height!=t&&(this._height=t,this._pScissorRect.height=t,this._pRttBufferManager&&(this._pRttBufferManager.viewHeight=t),this._pBackBufferInvalid=!0,this._pDepthTextureInvalid=!0,this.notifyScissorUpdate())},enumerable:!0,configurable:!0}),e.prototype._iCreateEntityCollector=function(){return new u},Object.defineProperty(e.prototype,"_iBackgroundR",{get:function(){return this._backgroundR},set:function(t){this._backgroundR!=t&&(this._backgroundR=t,this._pBackBufferInvalid=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_iBackgroundG",{get:function(){return this._backgroundG},set:function(t){this._backgroundG!=t&&(this._backgroundG=t,this._pBackBufferInvalid=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_iBackgroundB",{get:function(){return this._backgroundB},set:function(t){this._backgroundB!=t&&(this._backgroundB=t,this._pBackBufferInvalid=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){return this._pStage},set:function(t){t!=this._pStage&&this.iSetStage(t)},enumerable:!0,configurable:!0}),e.prototype.iSetStage=function(t){this._pStage&&(this._pStage.removeEventListener(d.CONTEXT_CREATED,this._onContextUpdateDelegate),this._pStage.removeEventListener(d.CONTEXT_RECREATED,this._onContextUpdateDelegate),this._pStage.removeEventListener(d.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate)),t?(this._pStage=t,this._pStage.addEventListener(d.CONTEXT_CREATED,this._onContextUpdateDelegate),this._pStage.addEventListener(d.CONTEXT_RECREATED,this._onContextUpdateDelegate),this._pStage.addEventListener(d.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate),this._pStage.context&&(this._pContext=this._pStage.context)):(this._pStage=null,this._pContext=null),this._pBackBufferInvalid=!0,this.updateGlobalPos()},Object.defineProperty(e.prototype,"shareContext",{get:function(){return this._shareContext},set:function(t){this._shareContext!=t&&(this._shareContext=t,this.updateGlobalPos())},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._pRttBufferManager&&this._pRttBufferManager.dispose(),this._pRttBufferManager=null,this._pStage.removeEventListener(d.CONTEXT_CREATED,this._onContextUpdateDelegate),this._pStage.removeEventListener(d.CONTEXT_RECREATED,this._onContextUpdateDelegate),this._pStage.removeEventListener(d.VIEWPORT_UPDATED,this._onViewportUpdatedDelegate),this._pStage=null},e.prototype.render=function(){this._viewportDirty=!1,this._scissorDirty=!1},e.prototype._iRender=function(t,e,i,s){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=0),this._pStage&&this._pContext){this._pRttViewProjectionMatrix.copyFrom(t.camera.viewProjection),this._pRttViewProjectionMatrix.appendScale(this.textureRatioX,this.textureRatioY,1),this.pExecuteRender(t,e,i,s);for(var r=0;8>r;++r)this._pContext.setVertexBufferAt(r,null),this._pContext.setTextureAt(r,null)}},e.prototype._iRenderCascades=function(){},e.prototype.pCollectRenderables=function(t){this._pBlendedRenderableHead=null,this._pOpaqueRenderableHead=null,this._pNumTriangles=0;var e=t.entityHead;for(this._pCamera=t.camera,this._iEntryPoint=this._pCamera.scenePosition,this._pCameraForward=this._pCamera.transform.forwardVector;e;)e.entity._iCollectRenderables(this),e=e.next;this._pOpaqueRenderableHead=this.renderableSorter.sortOpaqueRenderables(this._pOpaqueRenderableHead),this._pBlendedRenderableHead=this.renderableSorter.sortBlendedRenderables(this._pBlendedRenderableHead)},e.prototype.pExecuteRender=function(t,e,i,s){void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=0),this._pContext.setRenderTarget(e,!0,s),!e&&this._shareContext||this._depthPrepass||this._pContext.clear(this._backgroundR,this._backgroundG,this._backgroundB,this._backgroundAlpha,1,0),this._pContext.setDepthTest(!1,g.ALWAYS),this._pStage.scissorRect=i,this.pDraw(t,e),this._shareContext||this._snapshotRequired&&this._snapshotBitmapData&&(this._pContext.drawToBitmapData(this._snapshotBitmapData),this._snapshotRequired=!1),this._pStage.scissorRect=null},e.prototype.queueSnapshot=function(t){this._snapshotRequired=!0,this._snapshotBitmapData=t},e.prototype.pDraw=function(){throw new n},e.prototype.onContextUpdate=function(){this._pContext=this._pStage.context},Object.defineProperty(e.prototype,"_iBackgroundAlpha",{get:function(){return this._backgroundAlpha},set:function(t){this._backgroundAlpha!=t&&(this._backgroundAlpha=t,this._pBackBufferInvalid=!0)},enumerable:!0,configurable:!0}),e.prototype.notifyScissorUpdate=function(){this._scissorDirty||(this._scissorDirty=!0,this._scissorUpdated||(this._scissorUpdated=new p(p.SCISSOR_UPDATED)),this.dispatchEvent(this._scissorUpdated))},e.prototype.notifyViewportUpdate=function(){this._viewportDirty||(this._viewportDirty=!0,this._viewPortUpdated||(this._viewPortUpdated=new p(p.VIEWPORT_UPDATED)),this.dispatchEvent(this._viewPortUpdated))},e.prototype.onViewportUpdated=function(){this._viewPort=this._pStage.viewPort,this._shareContext&&(this._pScissorRect.x=this._globalPos.x-this._pStage.x,this._pScissorRect.y=this._globalPos.y-this._pStage.y,this.notifyScissorUpdate()),this.notifyViewportUpdate()},e.prototype.updateGlobalPos=function(){this._shareContext?(this._pScissorRect.x=this._globalPos.x-this._viewPort.x,this._pScissorRect.y=this._globalPos.y-this._viewPort.y):(this._pScissorRect.x=0,this._pScissorRect.y=0,this._viewPort.x=this._globalPos.x,this._viewPort.y=this._globalPos.y),this.notifyScissorUpdate()},e.prototype.applyBillboard=function(t){this._applyRenderable(this._billboardRenderablePool.getItem(t))},e.prototype.applyTriangleSubMesh=function(t){this._applyRenderable(this._triangleSubMeshRenderablePool.getItem(t))},e.prototype.applyLineSubMesh=function(t){this._applyRenderable(this._lineSubMeshRenderablePool.getItem(t))},e.prototype._applyRenderable=function(t){var e=t.materialOwner.material,i=t.sourceEntity,s=i.scenePosition;e||(e=f.getDefaultMaterial(t.materialOwner)),e._iUpdateMaterial(),t.material=e,t.materialId=e._iMaterialId,t.renderOrderId=this._pContext.getMaterial(e,this._pStage.profile).renderOrderId,t.cascaded=!1,s=this._iEntryPoint.subtract(s),t.zIndex=i.zOffset+s.dotProduct(this._pCameraForward),t.renderSceneTransform=t.sourceEntity.getRenderSceneTransform(this._pCamera),e.requiresBlending?(t.next=this._pBlendedRenderableHead,this._pBlendedRenderableHead=t):(t.next=this._pOpaqueRenderableHead,this._pOpaqueRenderableHead=t),this._pNumTriangles+=t.numTriangles,t.overflow&&this._applyRenderable(t.overflow)},e}(o);e.exports=m},{"awayjs-core/lib/errors/AbstractMethodError":void 0,"awayjs-core/lib/events/EventDispatcher":void 0,"awayjs-core/lib/geom/Matrix3D":void 0,"awayjs-core/lib/geom/Point":void 0,"awayjs-core/lib/geom/Rectangle":void 0,"awayjs-display/lib/events/RendererEvent":void 0,"awayjs-display/lib/events/StageEvent":void 0,"awayjs-display/lib/pool/RenderablePool":void 0,"awayjs-display/lib/sort/RenderableMergeSort":void 0,"awayjs-display/lib/traverse/EntityCollector":void 0,"awayjs-stagegl/lib/base/ContextGLCompareMode":void 0,"awayjs-stagegl/lib/materials/utils/DefaultMaterialManager":void 0,"awayjs-stagegl/lib/pool/BillboardRenderable":void 0,"awayjs-stagegl/lib/pool/LineSubMeshRenderable":void 0,"awayjs-stagegl/lib/pool/TriangleSubMeshRenderable":void 0}],"awayjs-dist/node_modules/awayjs-stagegl/lib/swfobject":[function(t,e){var i=function(){function t(){if(!H){try{var t=F.getElementsByTagName("body")[0].appendChild(f("span"));t.parentNode.removeChild(t)}catch(e){return}H=!0;for(var i=U.length,s=0;i>s;s++)U[s]()}}function e(t){H?t():U[U.length]=t}function s(t){if(typeof L.addEventListener!=S)L.addEventListener("load",t,!1);else if(typeof F.addEventListener!=S)F.addEventListener("load",t,!1);else if(typeof L.attachEvent!=S)m(L,"onload",t);else if("function"==typeof L.onload){var e=L.onload;L.onload=function(){e(),t()}}else L.onload=t}function r(){B?a():n()}function a(){var t=F.getElementsByTagName("body")[0],e=f(O);e.setAttribute("type",R);var i=t.appendChild(e);if(i){var s=0;!function(){if(typeof i.GetVariable!=S){var r=i.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),Y.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(10>s)return s++,void setTimeout(arguments.callee,10);t.removeChild(e),i=null,n()}()}else n()}function n(){var t=z.length;if(t>0)for(var e=0;t>e;e++){var i=z[e].id,s=z[e].callbackFn,r={success:!1,id:i};if(Y.pv[0]>0){var a=g(i);if(a)if(!b(z[e].swfVersion)||Y.wk&&Y.wk<312)if(z[e].expressInstall&&h()){var n={};n.data=z[e].expressInstall,n.width=a.getAttribute("width")||"0",n.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(n.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(n.align=a.getAttribute("align"));for(var d={},u=a.getElementsByTagName("param"),c=u.length,_=0;c>_;_++)"movie"!=u[_].getAttribute("name").toLowerCase()&&(d[u[_].getAttribute("name")]=u[_].getAttribute("value"));l(n,d,i,s)}else p(a),s&&s(r);else v(i,!0),s&&(r.success=!0,r.ref=o(i),s(r))}else if(v(i,!0),s){var y=o(i);y&&typeof y.SetVariable!=S&&(r.success=!0,r.ref=y),s(r)}}}function o(t){var e=null,i=g(t);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=S)e=i;else{var s=i.getElementsByTagName(O)[0];s&&(e=s)}return e}function h(){return!X&&b("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)
}function l(t,e,i,s){X=!0,j=s||null,C={success:!1,id:i};var r=g(i);if(r){"OBJECT"==r.nodeName?(P=d(r),D=null):(P=r,D=i),t.id=I,(typeof t.width==S||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==S||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),F.title=F.title.slice(0,47)+" - Flash Player Installation";var a=Y.ie&&Y.win?"ActiveX":"PlugIn",n="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+F.title;if(typeof e.flashvars!=S?e.flashvars+="&"+n:e.flashvars=n,Y.ie&&Y.win&&4!=r.readyState){var o=f("div");i+="SWFObjectNew",o.setAttribute("id",i),r.parentNode.insertBefore(o,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}u(t,e,i)}}function p(t){if(Y.ie&&Y.win&&4!=t.readyState){var e=f("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(d(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(d(t),t)}function d(t){var e=f("div");if(Y.win&&Y.ie)e.innerHTML=t.innerHTML;else{var i=t.getElementsByTagName(O)[0];if(i){var s=i.childNodes;if(s)for(var r=s.length,a=0;r>a;a++)1==s[a].nodeType&&"PARAM"==s[a].nodeName||8==s[a].nodeType||e.appendChild(s[a].cloneNode(!0))}}return e}function u(t,e,i){var s,r=g(i);if(Y.wk&&Y.wk<312)return s;if(r)if(typeof t.id==S&&(t.id=i),Y.ie&&Y.win){var a="";for(var n in t)t[n]!=Object.prototype[n]&&("data"==n.toLowerCase()?e.movie=t[n]:"styleclass"==n.toLowerCase()?a+=' class="'+t[n]+'"':"classid"!=n.toLowerCase()&&(a+=" "+n+'="'+t[n]+'"'));var o="";for(var h in e)e[h]!=Object.prototype[h]&&(o+='<param name="'+h+'" value="'+e[h]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+o+"</object>",k[k.length]=t.id,s=g(t.id)}else{var l=f(O);l.setAttribute("type",R);for(var p in t)t[p]!=Object.prototype[p]&&("styleclass"==p.toLowerCase()?l.setAttribute("class",t[p]):"classid"!=p.toLowerCase()&&l.setAttribute(p,t[p]));for(var d in e)e[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&c(l,d,e[d]);r.parentNode.replaceChild(l,r),s=l}return s}function c(t,e,i){var s=f("param");s.setAttribute("name",e),s.setAttribute("value",i),t.appendChild(s)}function _(t){var e=g(t);e&&"OBJECT"==e.nodeName&&(Y.ie&&Y.win?(e.style.display="none",function(){4==e.readyState?y(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function y(t){var e=g(t);if(e){for(var i in e)"function"==typeof e[i]&&(e[i]=null);e.parentNode.removeChild(e)}}function g(t){var e=null;try{e=F.getElementById(t)}catch(i){}return e}function f(t){return F.createElement(t)}function m(t,e,i){t.attachEvent(e,i),G[G.length]=[t,e,i]}function b(t){var e=Y.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,e[0]>i[0]||e[0]==i[0]&&e[1]>i[1]||e[0]==i[0]&&e[1]==i[1]&&e[2]>=i[2]?!0:!1}function w(t,e,i,s){if(!Y.ie||!Y.mac){var r=F.getElementsByTagName("head")[0];if(r){var a=i&&"string"==typeof i?i:"screen";if(s&&(T=null,A=null),!T||A!=a){var n=f("style");n.setAttribute("type","text/css"),n.setAttribute("media",a),T=r.appendChild(n),Y.ie&&Y.win&&typeof F.styleSheets!=S&&F.styleSheets.length>0&&(T=F.styleSheets[F.styleSheets.length-1]),A=a}Y.ie&&Y.win?T&&typeof T.addRule==O&&T.addRule(t,e):T&&typeof F.createTextNode!=S&&T.appendChild(F.createTextNode(t+" {"+e+"}"))}}}function v(t,e){if(W){var i=e?"visible":"hidden";H&&g(t)?g(t).style.visibility=i:w("#"+t,"visibility:"+i)}}function x(t){var e=/[\\\"<>\.;]/,i=null!=e.exec(t);return i&&typeof encodeURIComponent!=S?encodeURIComponent(t):t}{var P,D,j,C,T,A,S="undefined",O="object",E="Shockwave Flash",M="ShockwaveFlash.ShockwaveFlash",R="application/x-shockwave-flash",I="SWFObjectExprInst",N="onreadystatechange",L=window,F=document,V=navigator,B=!1,U=[r],z=[],k=[],G=[],H=!1,X=!1,W=!0,Y=function(){var t=typeof F.getElementById!=S&&typeof F.getElementsByTagName!=S&&typeof F.createElement!=S,e=V.userAgent.toLowerCase(),i=V.platform.toLowerCase(),s=/win/.test(i?i:e),r=/mac/.test(i?i:e),a=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,n=!1,o=[0,0,0],h=null;if(typeof V.plugins!=S&&typeof V.plugins[E]==O)h=V.plugins[E].description,!h||typeof V.mimeTypes!=S&&V.mimeTypes[R]&&!V.mimeTypes[R].enabledPlugin||(B=!0,n=!1,h=h.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),o[0]=parseInt(h.replace(/^(.*)\..*$/,"$1"),10),o[1]=parseInt(h.replace(/^.*\.(.*)\s.*$/,"$1"),10),o[2]=/[a-zA-Z]/.test(h)?parseInt(h.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof L.ActiveXObject!=S)try{var l=new ActiveXObject(M);l&&(h=l.GetVariable("$version"),h&&(n=!0,h=h.split(" ")[1].split(","),o=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)]))}catch(p){}return{w3:t,pv:o,wk:a,ie:n,win:s,mac:r}}();!function(){Y.w3&&((typeof F.readyState!=S&&"complete"==F.readyState||typeof F.readyState==S&&(F.getElementsByTagName("body")[0]||F.body))&&t(),H||(typeof F.addEventListener!=S&&F.addEventListener("DOMContentLoaded",t,!1),Y.ie&&Y.win&&(F.attachEvent(N,function(){"complete"==F.readyState&&(F.detachEvent(N,arguments.callee),t())}),L==top&&!function(){if(!H){try{F.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}t()}}()),Y.wk&&!function(){return H?void 0:/loaded|complete/.test(F.readyState)?void t():void setTimeout(arguments.callee,0)}(),s(t)))}(),function(){Y.ie&&Y.win&&window.attachEvent("onunload",function(){for(var t=G.length,e=0;t>e;e++)G[e][0].detachEvent(G[e][1],G[e][2]);for(var s=k.length,r=0;s>r;r++)_(k[r]);for(var a in Y)Y[a]=null;Y=null;for(var n in i)i[n]=null;i=null})}()}return{registerObject:function(t,e,i,s){if(Y.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=i,r.callbackFn=s,z[z.length]=r,v(t,!1)}else s&&s({success:!1,id:t})},getObjectById:function(t){return Y.w3?o(t):void 0},embedSWF:function(t,i,s,r,a,n,o,p,d,c){var _={success:!1,id:i};Y.w3&&!(Y.wk&&Y.wk<312)&&t&&i&&s&&r&&a?(v(i,!1),e(function(){s+="",r+="";var e={};if(d&&typeof d===O)for(var y in d)e[y]=d[y];e.data=t,e.width=s,e.height=r;var g={};if(p&&typeof p===O)for(var f in p)g[f]=p[f];if(o&&typeof o===O)for(var m in o)typeof g.flashvars!=S?g.flashvars+="&"+m+"="+o[m]:g.flashvars=m+"="+o[m];if(b(a)){var w=u(e,g,i);e.id==i&&v(i,!0),_.success=!0,_.ref=w}else{if(n&&h())return e.data=n,void l(e,g,i,c);v(i,!0)}c&&c(_)})):c&&c(_)},switchOffAutoHideShow:function(){W=!1},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(t,e,i){return Y.w3?u(t,e,i):void 0},showExpressInstall:function(t,e,i,s){Y.w3&&h()&&l(t,e,i,s)},removeSWF:function(t){Y.w3&&_(t)},createCSS:function(t,e,i,s){Y.w3&&w(t,e,i,s)},addDomLoadEvent:e,addLoadEvent:s,getQueryParamValue:function(t){var e=F.location.search||F.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return x(e);for(var i=e.split("&"),s=0;s<i.length;s++)if(i[s].substring(0,i[s].indexOf("="))==t)return x(i[s].substring(i[s].indexOf("=")+1))}return""},expressInstallCallback:function(){if(X){var t=g(I);t&&P&&(t.parentNode.replaceChild(P,t),D&&(v(D,!0),Y.ie&&Y.win&&(P.style.display="block")),j&&j(C)),X=!1}}}}();e.exports=i},{}]},{},[]);
//# sourceMappingURL=awayjs-dist-require.min.js.map